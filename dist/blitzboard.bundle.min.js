/*! For license information please see blitzboard.bundle.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Blitzboard=e():t.Blitzboard=e()}(self,(()=>(()=>{var t={3803:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s,z:()=>o});var n=i(744);let r={};function o(t){r=t}function s(t,e,i,o){n.Z.level>0&&r[t]&&r[t].call(null,e,i,o)}},5028:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AmbientLight:()=>g,AttributeManager:()=>_i.Z,COORDINATE_SYSTEM:()=>c.Df,CompositeLayer:()=>xi.Z,Controller:()=>ne,Deck:()=>bi,DeckRenderer:()=>he,DirectionalLight:()=>w,FirstPersonController:()=>Ni,FirstPersonView:()=>zi,FirstPersonViewport:()=>Ii,FlyToInterpolator:()=>Ki,Layer:()=>wi.Z,LayerExtension:()=>Yi.Z,LayerManager:()=>Bt,LightingEffect:()=>j,LinearInterpolator:()=>qt,MapController:()=>se,MapView:()=>ae,OPERATION:()=>c.k8,OrbitController:()=>Ui,OrbitView:()=>Zi,OrbitViewport:()=>Ti,OrthographicController:()=>Gi,OrthographicView:()=>Vi,OrthographicViewport:()=>Bi.Z,PointLight:()=>q,PostProcessEffect:()=>dt,TRANSITION_EVENTS:()=>jt,Tesselator:()=>tn.Z,TransitionInterpolator:()=>Gt,UNIT:()=>c.iI,VERSION:()=>l,View:()=>Lt,Viewport:()=>Ct.Z,WebMercatorViewport:()=>Ft.Z,_CameraLight:()=>Y,_GlobeController:()=>qi,_GlobeView:()=>Qi,_GlobeViewport:()=>Ci.Z,_LayersPass:()=>C.Z,_PickLayersPass:()=>ft.Z,_SunLight:()=>nt,_compareProps:()=>rn.tg,_count:()=>en.Q,_deepEqual:()=>St.v,_fillArray:()=>yt.k,_flatten:()=>yt.x,_memoize:()=>P.Z,_mergeShaders:()=>nn.l,assert:()=>Dt.Z,createIterable:()=>$i.jB,fp64LowPart:()=>Fi.Ks,gouraudLighting:()=>Li.N,log:()=>o.Z,phongLighting:()=>Li.s,picking:()=>Oi.Z,project:()=>S.Z,project32:()=>Di.Z,shadow:()=>F});var n=i(6228),r=i(6487),o=i(744),s=i(3803);const a={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],i=t[t.length-1];return"{"===e&&"}"===i||"["===e&&"]"===i},parseTextSync:JSON.parse},l=function(){const t="8.9.14",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(o.Z.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:o.Z,_registerLoggers:s.z},(0,n.fh)([a,[r.S,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();var c=i(4088),u=i(4942),h=i(1731),d=i(4912);const A=[255,255,255],f=1;let p=0;class g{constructor(t={}){(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"color",void 0),(0,u.Z)(this,"intensity",void 0),(0,u.Z)(this,"type","ambient");const{color:e=A}=t,{intensity:i=f}=t;this.id=t.id||"ambient-".concat(p++),this.color=e,this.intensity=i}}var m=i(3855);const v=[255,255,255],y=1,b=[0,0,-1];let _=0;class w{constructor(t={}){(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"color",void 0),(0,u.Z)(this,"intensity",void 0),(0,u.Z)(this,"type","directional"),(0,u.Z)(this,"direction",void 0),(0,u.Z)(this,"shadow",void 0);const{color:e=v}=t,{intensity:i=y}=t,{direction:n=b}=t,{_shadow:r=!1}=t;this.id=t.id||"directional-".concat(_++),this.color=e,this.intensity=i,this.type="directional",this.direction=new m.Z(n).normalize().toArray(),this.shadow=r}getProjectedLight(t){return this}}var x=i(5451),C=i(3182),E=i(9830),k=i(3849),T=i(9450);class B extends C.Z{constructor(t,e){super(t,e),(0,u.Z)(this,"shadowMap",void 0),(0,u.Z)(this,"depthBuffer",void 0),(0,u.Z)(this,"fbo",void 0),this.shadowMap=new d.Z(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new E.Z(t,{format:33189,width:1,height:1}),this.fbo=new k.Z(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;(0,T.s8)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const i=t.viewports[0],n=(0,T.w)(this.gl),r=i.width*n,o=i.height*n;r===e.width&&o===e.height||e.resize({width:r,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}var S=i(6084),P=i(8177),M=i(7013);const I=(0,P.Z)((function({viewport:t,center:e}){return new x.Z(t.viewProjectionMatrix).invert().transform(e)})),O=(0,P.Z)((function({viewport:t,shadowMatrices:e}){const i=[],n=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,o=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((t=>function(t,e){const[i,n,r]=t,o=(0,M.CT)([i,n,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(t,n)));for(const n of e){const e=n.clone().translate(new m.Z(t.center).negate()),r=o.map((t=>e.transform(t))),s=(new x.Z).ortho({left:Math.min(...r.map((t=>t[0]))),right:Math.max(...r.map((t=>t[0]))),bottom:Math.min(...r.map((t=>t[1]))),top:Math.max(...r.map((t=>t[1]))),near:Math.min(...r.map((t=>-t[2]))),far:Math.max(...r.map((t=>-t[2])))});i.push(s.multiplyRight(n))}return i})),D=[0,0,0,1],L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],F={name:"shadow",dependencies:[S.Z],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:i=!0}=t;if(!i||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||D,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=I({viewport:t.viewport,center:e.project_uCenter}),o=[],s=O({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let i=0;i<t.shadowMatrices.length;i++){const n=s[i],a=n.clone().translate(new m.Z(t.viewport.center).negate());e.project_uCoordinateSystem===c.Df.LNGLAT&&e.project_uProjectionMode===c.zG.WEB_MERCATOR?(s[i]=a,o[i]=r):(s[i]=n.clone().multiplyRight(L),o[i]=a.transform(r))}for(let e=0;e<s.length;e++)n["shadow_uViewProjectionMatrices[".concat(e,"]")]=s[e],n["shadow_uProjectCenters[".concat(e,"]")]=o[e],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(e)]=t.shadowMaps[e]:n["shadow_uShadowMap".concat(e)]=t.dummyShadowMap;return n}(t,e):{}},R={color:[255,255,255],intensity:1},N=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],z=[0,0,0,200/255];class j{constructor(t={}){(0,u.Z)(this,"id","lighting-effect"),(0,u.Z)(this,"props",void 0),(0,u.Z)(this,"shadowColor",z),(0,u.Z)(this,"shadow",void 0),(0,u.Z)(this,"ambientLight",void 0),(0,u.Z)(this,"directionalLights",void 0),(0,u.Z)(this,"pointLights",void 0),(0,u.Z)(this,"shadowPasses",[]),(0,u.Z)(this,"shadowMaps",[]),(0,u.Z)(this,"dummyShadowMap",null),(0,u.Z)(this,"programManager",void 0),(0,u.Z)(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const i=t[e];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.props=t}preRender(t,{layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=h.Z.getDefaultProgramManager(t),F&&this.programManager.addDefaultModule(F)),this.dummyShadowMap||(this.dummyShadowMap=new d.Z(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++)this.shadowPasses[t].render({layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:o,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(F),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const i=(new x.Z).lookAt({eye:new m.Z(e.direction).negate()});t.push(i)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const i=new B(t);this.shadowPasses[e]=i,this.shadowMaps[e]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:i}=this;t||0!==e.length||0!==i.length||(this.ambientLight=new g(R),this.directionalLights.push(new w(N[0]),new w(N[1])))}}var U=i(8547);const Z=[255,255,255],H=1,G=[0,0,1],V=[0,0,1];let W=0;class q{constructor(t={}){(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"color",void 0),(0,u.Z)(this,"intensity",void 0),(0,u.Z)(this,"type","point"),(0,u.Z)(this,"position",void 0),(0,u.Z)(this,"attenuation",void 0),(0,u.Z)(this,"projectedLight",void 0);const{color:e=Z}=t,{intensity:i=H}=t,{position:n=V}=t;this.id=t.id||"point-".concat(W++),this.color=e,this.intensity=i,this.type="point",this.position=n,this.attenuation=function(t){return t.attenuation?t.attenuation:"intensity"in t?[0,0,t.intensity||0]:G}(t),this.projectedLight={...this}}getProjectedLight({layer:t}){const{projectedLight:e}=this,i=t.context.viewport,{coordinateSystem:n,coordinateOrigin:r}=t.props,o=(0,U.D)(this.position,{viewport:i,coordinateSystem:n,coordinateOrigin:r,fromCoordinateSystem:i.isGeospatial?c.Df.LNGLAT:c.Df.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return e.color=this.color,e.intensity=this.intensity,e.position=o,e}}var Q=i(8771);class Y extends q{getProjectedLight({layer:t}){const{projectedLight:e}=this,i=t.context.viewport,{coordinateSystem:n,coordinateOrigin:r,modelMatrix:o}=t.props,{project_uCameraPosition:s}=(0,Q.C)({viewport:i,modelMatrix:o,coordinateSystem:n,coordinateOrigin:r});return e.color=this.color,e.intensity=this.intensity,e.position=s,e}}const X=Math.PI/180,J=23.4397*X;function K(t,e,i){const{azimuth:n,altitude:r}=function(t,e,i){const n=X*-i,r=X*e,o=function(t){return function(t){return("number"==typeof t?t:t.getTime())/864e5-.5+2440588}(t)-2451545}(t),s=function(t){const e=function(t){const e=t;return e+X*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e))+102.9372*X+Math.PI}(X*(357.5291+.98560028*t));return{declination:tt(e,0),rightAscension:$(e,0)}}(o),a=function(t,e){return X*(280.147+360.9856235*t)-e}(o,n)-s.rightAscension;return{azimuth:et(a,r,s.declination),altitude:it(a,r,s.declination)}}(t,e,i);return[Math.sin(n)*Math.cos(r),Math.cos(n)*Math.cos(r),-Math.sin(r)]}function $(t,e){const i=t;return Math.atan2(Math.sin(i)*Math.cos(J)-Math.tan(e)*Math.sin(J),Math.cos(i))}function tt(t,e){const i=t;return Math.asin(Math.sin(e)*Math.cos(J)+Math.cos(e)*Math.sin(J)*Math.sin(i))}function et(t,e,i){const n=t,r=e,o=i;return Math.atan2(Math.sin(n),Math.cos(n)*Math.sin(r)-Math.tan(o)*Math.cos(r))}function it(t,e,i){const n=t,r=e,o=i;return Math.asin(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(n))}class nt extends w{constructor(t){super(t),(0,u.Z)(this,"timestamp",void 0),this.timestamp=t.timestamp}getProjectedLight({layer:t}){const{viewport:e}=t.context;if(e.resolution&&e.resolution>0){const[t,e,i]=K(this.timestamp,0,0);this.direction=[t,-i,e]}else{const{latitude:t,longitude:i}=e;this.direction=K(this.timestamp,t,i)}return this}}var rt=i(9769),ot=i(3982);const st=[-1,-1,1,-1,-1,1,1,1];class at extends rt.Z{constructor(t,e){const i=st.map((t=>-1===t?0:t));super(t,Object.assign({},e,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new ot.Z({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(st)},aTexCoord:{size:2,value:new Float32Array(i)},aCoordinate:{size:2,value:new Float32Array(i)}}})})),this.setVertexCount(4)}}var lt=i(6047),ct=i(830);class ut extends ct.Z{constructor(t,e){super(t,e),(0,u.Z)(this,"model",void 0);const{module:i,fs:n,id:r}=e;this.model=new at(t,{id:r,fs:n,modules:[i]})}render(t){const e=this.gl;(0,T.dR)(e,{viewport:[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}),(0,T.s8)(e,{framebuffer:t.outputBuffer,clearColor:[0,0,0,0]},(()=>this._renderPass(e,t)))}delete(){this.model.delete(),this.model=null}_renderPass(t,e){const{inputBuffer:i}=e;(0,lt.Z)(t,{color:!0}),this.model.draw({moduleSettings:e.moduleSettings,uniforms:{texture:i,texSize:[i.width,i.height]},parameters:{depthWrite:!1,depthTest:!1}})}}var ht=i(6119);class dt{constructor(t,e={}){(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"props",void 0),(0,u.Z)(this,"module",void 0),(0,u.Z)(this,"passes",void 0),this.id="".concat(t.name,"-pass"),this.props=e,(0,ht.v)(t),this.module=t}setProps(t){this.props=t}preRender(){}postRender(t,e){const i=this.passes||function(t,e,i){if(!e.passes){const n=At(e);return[new ut(t,{id:i,module:e,fs:n})]}return e.passes.map(((n,r)=>{const o=At(e,n),s="".concat(i,"-").concat(r);return new ut(t,{id:s,module:e,fs:o})}))}(t,this.module,this.id);this.passes=i;const{target:n}=e;let r=e.inputBuffer,o=e.swapBuffer;for(let t=0;t<this.passes.length;t++){n&&t===this.passes.length-1&&(o=n),this.passes[t].render({inputBuffer:r,outputBuffer:o,moduleSettings:this.props});const e=o;o=r,r=e}return r}cleanup(){if(this.passes){for(const t of this.passes)t.delete();this.passes=void 0}}}function At(t,e=t){return e.filter?(i="string"==typeof e.filter?e.filter:"".concat(t.name,"_filterColor"),"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(i,"(gl_FragColor, texSize, texCoord);\n}\n")):e.sampler?(t=>"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(t,"(texture, texSize, texCoord);\n}\n"))("string"==typeof e.sampler?e.sampler:"".concat(t.name,"_sampleColor")):null;var i}var ft=i(930);let pt=1,gt=1;class mt{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:i=Number.POSITIVE_INFINITY,rate:n=1,repeat:r=1}=t,o=pt++,s={time:0,delay:e,duration:i,rate:n,repeat:r};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(const[e,i]of this.animations)i.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const t of e)this._setChannelTime(t,this.time);const i=this.animations.values();for(const t of i){const{animation:e,channel:i}=t;e.setTime(this.getTime(i))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const i=gt++;return this.animations.set(i,{animation:t,channel:e}),t.setTime(this.getTime(e)),i}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const i=e-t.delay;i>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}var vt=i(5409),yt=i(1855),bt=i(8295),_t=i(3878);class wt{constructor(t,e,i){(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"context",void 0),(0,u.Z)(this,"isLoaded",void 0),(0,u.Z)(this,"persistent",void 0),(0,u.Z)(this,"_loadCount",0),(0,u.Z)(this,"_subscribers",new Set),(0,u.Z)(this,"_data",void 0),(0,u.Z)(this,"_loader",void 0),(0,u.Z)(this,"_error",void 0),(0,u.Z)(this,"_content",void 0),this.id=t,this.context=i,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const i=++this._loadCount;let n=t;"string"==typeof t&&(n=(0,_t.z)(t)),n instanceof Promise?(this.isLoaded=!1,this._loader=n.then((t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const t of this._subscribers)t.onChange(this.getData())}}class xt{constructor({gl:t,protocol:e}){(0,u.Z)(this,"protocol",void 0),(0,u.Z)(this,"_context",void 0),(0,u.Z)(this,"_resources",void 0),(0,u.Z)(this,"_consumers",void 0),(0,u.Z)(this,"_pruneRequest",void 0),this.protocol=e||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:i=!1,persistent:n=!0}){let r=this._resources[t];r?r.setData(e,i):(r=new wt(t,e,this._context),this._resources[t]=r),r.persistent=n}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const e=this._consumers[t];if(e){for(const t in e){const i=e[t],n=this._resources[i.resourceId];n&&n.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:i,requestId:n="default"}){const{_resources:r,protocol:o}=this;t.startsWith(o)&&(r[t=t.replace(o,"")]||this.add({resourceId:t,data:null,persistent:!1}));const s=r[t];if(this._track(i,n,s,e),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,i,n){const r=this._consumers,o=r[t]=r[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),i&&(o[e]=s,s.onChange=n,s.resourceId=i.id,i.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}var Ct=i(9225);const Et=[S.Z],kt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Tt(t){const e=h.Z.getDefaultProgramManager(t);for(const t of Et)e.addDefaultModule(t);for(const t of kt)e.addShaderHook(t);return e}class Bt{constructor(t,{deck:e,stats:i,viewport:n,timeline:r}={}){(0,u.Z)(this,"layers",void 0),(0,u.Z)(this,"context",void 0),(0,u.Z)(this,"resourceManager",void 0),(0,u.Z)(this,"_lastRenderedLayers",[]),(0,u.Z)(this,"_needsRedraw",!1),(0,u.Z)(this,"_needsUpdate",!1),(0,u.Z)(this,"_nextLayers",null),(0,u.Z)(this,"_debug",!1),(0,u.Z)(this,"activateViewport",(t=>{(0,s.Z)("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new xt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&Tt(t),stats:i||new bt.Z({id:"deck.gl"}),viewport:n||new Ct.Z({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:r||new mt,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const n=i.getNeedsRedraw(t);e=e||n}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){(0,s.Z)("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const i=(0,yt.x)(t,Boolean);for(const t of i)t.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,i){i.raiseError(e,"".concat(t," of ").concat(i))}_updateLayers(t,e){const i={};for(const e of t)i[e.id]?o.Z.warn("Multiple old layers with same id ".concat(e.id))():i[e.id]=e;const n=[];this._updateSublayersRecursively(e,i,n),this._finalizeOldLayers(i);let r=!1;for(const t of n)if(t.hasUniformTransition()){r="Uniform transition in ".concat(t);break}this._needsUpdate=r,this.layers=n}_updateSublayersRecursively(t,e,i){for(const n of t){n.context=this.context;const t=e[n.id];null===t&&o.Z.warn("Multiple new layers with same id ".concat(n.id))(),e[n.id]=null;let r=null;try{this._debug&&t!==n&&n.validateProps(),t?(this._transferLayerState(t,n),this._updateLayer(n)):this._initializeLayer(n),i.push(n),r=n.isComposite?n.getSubLayers():null}catch(t){this._handleError("matching",t,n)}r&&this._updateSublayersRecursively(r,e,i)}}_finalizeOldLayers(t){for(const e in t){const i=t[e];i&&this._finalizeLayer(i)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=vt.dt.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=vt.dt.MATCHED,e!==t&&(t.lifecycle=vt.dt.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=vt.dt.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=vt.dt.FINALIZED}catch(e){this._handleError("finalization",e,t)}}}var St=i(6871);class Pt{constructor(t){(0,u.Z)(this,"width",void 0),(0,u.Z)(this,"height",void 0),(0,u.Z)(this,"views",void 0),(0,u.Z)(this,"viewState",void 0),(0,u.Z)(this,"controllers",void 0),(0,u.Z)(this,"timeline",void 0),(0,u.Z)(this,"_viewports",void 0),(0,u.Z)(this,"_viewportMap",void 0),(0,u.Z)(this,"_isUpdating",void 0),(0,u.Z)(this,"_needsRedraw",void 0),(0,u.Z)(this,"_needsUpdate",void 0),(0,u.Z)(this,"_eventManager",void 0),(0,u.Z)(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"==typeof t?this.getView(t):t,i=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(i):i}getViewport(t){return this._viewportMap[t]}unproject(t,e){const i=this.getViewports(),n={x:t[0],y:t[1]};for(let r=i.length-1;r>=0;--r){const o=i[r];if(o.containsPixel(n)){const i=t.slice();return i[0]-=o.x,i[1]-=o.y,o.unproject(i,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=(0,yt.x)(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!(0,St.v)(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):o.Z.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var i;return null===(i=this.getView(t.id))||void 0===i?void 0:i.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,i,n){const r=t.controller;if(r&&i){const o={...e,...r,id:t.id,x:i.x,y:i.y,width:i.width,height:i.height};return n||(n=this._createController(t,o)),n&&n.setProps(o),n}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let n=t.length;n--;){const r=t[n],o=this.getViewState(r),s=r.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[r.id];const l=Boolean(r.controller);l&&!a&&(i=!0),!i&&l||!a||(a.finalize(),a=null),this.controllers[r.id]=this._updateController(r,o,s,a),s&&this._viewports.unshift(s)}for(const t in e){const i=e[t];i&&!this.controllers[t]&&i.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((i,n)=>!t[n].equals(e[n])))}}const Mt=/([0-9]+\.?[0-9]*)(%|px)/;function It(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Mt.exec(t);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function Ot(t,e){return t.relative?Math.round(t.position*e):t.position}var Dt=i(5304);class Lt{constructor(t){(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"viewportInstance",void 0),(0,u.Z)(this,"_x",void 0),(0,u.Z)(this,"_y",void 0),(0,u.Z)(this,"_width",void 0),(0,u.Z)(this,"_height",void 0),(0,u.Z)(this,"_padding",void 0),(0,u.Z)(this,"props",void 0);const{id:e,x:i=0,y:n=0,width:r="100%",height:o="100%",padding:s=null,viewportInstance:a}=t||{};(0,Dt.Z)(!a||a instanceof Ct.Z),this.viewportInstance=a,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=It(i),this._y=It(n),this._width=It(r),this._height=It(o),this._padding=s&&{left:It(s.left||0),right:It(s.right||0),top:It(s.top||0),bottom:It(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&(0,St.v)(this.props,t.props,2))}makeViewport({width:t,height:e,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const n=this.getDimensions({width:t,height:e});return n.height&&n.width?new this.ViewportType({...i,...this.props,...n}):null}getViewStateId(){const{viewState:t}=this.props;return"string"==typeof t?t:(null==t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){const i={x:Ot(this._x,t),y:Ot(this._y,e),width:Ot(this._width,t),height:Ot(this._height,e)};return this._padding&&(i.padding={left:Ot(this._padding.left,t),top:Ot(this._padding.top,e),right:Ot(this._padding.right,t),bottom:Ot(this._padding.bottom,e)}),i}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"==typeof t?{type:t}:{type:this.ControllerType,...t}:null}}var Ft=i(6935),Rt=i(4034),Nt=i(3630);const zt=()=>{},jt={BREAK:1,SNAP_TO_END:2,IGNORE:3},Ut=t=>t,Zt=jt.BREAK;class Ht{constructor(t){(0,u.Z)(this,"getControllerState",void 0),(0,u.Z)(this,"props",void 0),(0,u.Z)(this,"propsInTransition",void 0),(0,u.Z)(this,"transition",void 0),(0,u.Z)(this,"onViewStateChange",void 0),(0,u.Z)(this,"onStateChange",void 0),(0,u.Z)(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:i,startProps:n,endProps:r,duration:o,easing:s}}=t,a=s(e/o),l=i.interpolateProps(n,r,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Nt.Z(t.timeline),this.onViewStateChange=t.onViewStateChange||zt,this.onStateChange=t.onStateChange||zt}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const i=this.props;if(this.props=t,!i||this._shouldIgnoreViewportChange(i,t))return!1;if(this._isTransitionEnabled(t)){let n=i;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;n={...i,...t===jt.SNAP_TO_END?e:this.propsInTransition||i}}this._triggerTransition(n,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:i}=t;return(e>0||"auto"===e)&&Boolean(i)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===jt.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const i=this.getControllerState(t),n=this.getControllerState(e).shortestPathFrom(i),r=e.transitionInterpolator,o=r.getDuration?r.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=r.initializeProps(t,n);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||Ut,interpolator:r,interruption:e.transitionInterruption||Zt,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null==t||t(e)}}}class Gt{constructor(t){(0,u.Z)(this,"_propsToCompare",void 0),(0,u.Z)(this,"_propsToExtract",void 0),(0,u.Z)(this,"_requiredProps",void 0);const{compare:e,extract:i,required:n}=t;this._propsToCompare=e,this._propsToExtract=i||e,this._requiredProps=n}arePropsEqual(t,e){for(const i of this._propsToCompare)if(!(i in t)||!(i in e)||!(0,Rt.fS)(t[i],e[i]))return!1;return!0}initializeProps(t,e){const i={},n={};for(const r of this._propsToExtract)(r in t||r in e)&&(i[r]=t[r],n[r]=e[r]);return this._checkRequiredProps(i),this._checkRequiredProps(n),{start:i,end:n}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const i=t[e];(0,Dt.Z)(Number.isFinite(i)||Array.isArray(i),"".concat(e," is required for transition"))}))}}const Vt=["longitude","latitude","zoom","bearing","pitch"],Wt=["longitude","latitude","zoom"];class qt extends Gt{constructor(t={}){const e=Array.isArray(t)?t:t.transitionProps,i=Array.isArray(t)?{}:t;i.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:Vt,required:Wt},super(i.transitionProps),(0,u.Z)(this,"opts",void 0),this.opts=i}initializeProps(t,e){const i=super.initializeProps(t,e),{makeViewport:n,around:r}=this.opts;if(n&&r){const o=n(t),s=n(e),a=o.unproject(r);i.start.around=r,Object.assign(i.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return i}interpolateProps(t,e,i){const n={};for(const r of this._propsToExtract)n[r]=(0,Rt.t7)(t[r]||0,e[r]||0,i);if(e.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...e,...n});Object.assign(n,r.panByPosition(e.aroundPosition,(0,Rt.t7)(t.around,e.around,i)))}return n}}const Qt={transitionDuration:0},Yt=t=>1-(1-t)*(1-t),Xt=["wheel"],Jt=["panstart","panmove","panend"],Kt=["pinchstart","pinchmove","pinchend"],$t=["tripanstart","tripanmove","tripanend"],te=["doubletap"],ee=["keydown"],ie={};class ne{constructor(t){(0,u.Z)(this,"props",void 0),(0,u.Z)(this,"state",{}),(0,u.Z)(this,"transitionManager",void 0),(0,u.Z)(this,"eventManager",void 0),(0,u.Z)(this,"onViewStateChange",void 0),(0,u.Z)(this,"onStateChange",void 0),(0,u.Z)(this,"makeViewport",void 0),(0,u.Z)(this,"_controllerState",void 0),(0,u.Z)(this,"_events",{}),(0,u.Z)(this,"_interactionState",{isDragging:!1}),(0,u.Z)(this,"_customEvents",[]),(0,u.Z)(this,"_eventStartBlocked",null),(0,u.Z)(this,"_panMove",!1),(0,u.Z)(this,"invertPan",!1),(0,u.Z)(this,"dragMode","rotate"),(0,u.Z)(this,"inertia",0),(0,u.Z)(this,"scrollZoom",!0),(0,u.Z)(this,"dragPan",!0),(0,u.Z)(this,"dragRotate",!0),(0,u.Z)(this,"doubleClickZoom",!0),(0,u.Z)(this,"touchZoom",!0),(0,u.Z)(this,"touchRotate",!1),(0,u.Z)(this,"keyboard",!0),this.transitionManager=new Ht({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;this._events[e]&&(null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent))}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:i}=this.props,{offsetCenter:n}=t;return[n.x-e,n.y-i]}isPointInBounds(t,e){const{width:i,height:n}=this.props;if(e&&e.handled)return!1;const r=t[0]>=0&&t[0]<=i&&t[1]>=0&&t[1]<=n;return r&&e&&e.stopPropagation(),r}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:i=!0,dragPan:n=!0,dragRotate:r=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(Xt,c&&i),this.toggleEvents(Jt,c&&(n||r)),this.toggleEvents(Kt,c&&(s||a)),this.toggleEvents($t,c&&a),this.toggleEvents(te,c&&o),this.toggleEvents(ee,c&&l),this.scrollZoom=i,this.dragPan=n,this.dragRotate=r,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t,e=null,i={}){const n={...t.getViewportProps(),...e},r=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(i),r){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:n,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let i=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const n=this.controllerState[i?"panStart":"rotateStart"]({pos:e});return this._panMove=i,this.updateViewport(n,Qt,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),i=this.controllerState.pan({pos:e});return this.updateViewport(i,Qt,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const i=this.getCenter(t),n=[i[0]+t.velocityX*e/2,i[1]+t.velocityY*e/2],r=this.controllerState.pan({pos:n}).panEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:Yt},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),i=this.controllerState.rotate({pos:e});return this.updateViewport(i,Qt,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const i=this.getCenter(t),n=[i[0]+t.velocityX*e/2,i[1]+t.velocityY*e/2],r=this.controllerState.rotate({pos:n}).rotateEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:Yt},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const{speed:i=.01,smooth:n=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:r}=t;let o=2/(1+Math.exp(-Math.abs(r*i)));r<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:n?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const i=this.controllerState.rotateStart({pos:e});return this.updateViewport(i,Qt,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const i=this.controllerState.rotate({pos:e});return this.updateViewport(i,Qt,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const i=this.getCenter(t),n=[i[0],i[1]+=t.velocityY*e/2],r=this.controllerState.rotate({pos:n});this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:Yt},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const i=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return ie._startPinchRotation=t.rotation,ie._lastPinchEvent=t,this.updateViewport(i,Qt,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:i}=t,n=this.getCenter(t);e=e.zoom({pos:n,scale:i})}if(this.touchRotate){const{rotation:i}=t;e=e.rotate({deltaAngleX:ie._startPinchRotation-i})}return this.updateViewport(e,Qt,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ie._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:i}=ie;if(this.touchZoom&&e&&i&&t.scale!==i.scale){const n=this.getCenter(t);let r=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(i.scale))/(t.deltaTime-i.deltaTime),a=Math.pow(2,o+s*e/2);r=r.zoom({pos:n,scale:a}).zoomEnd(),this.updateViewport(r,{...this._getTransitionProps({around:n}),transitionDuration:e,transitionEasing:Yt},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ie._startPinchRotation=null,ie._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const i=this.isFunctionKeyPressed(t),n=this.controllerState.zoom({pos:e,scale:i?.5:2});return this.updateViewport(n,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:i,moveSpeed:n,rotateSpeedX:r,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(i).zoomOut(i):s.zoomOut(i),l.isZooming=!0;break;case"Equal":a=e?s.zoomIn(i).zoomIn(i):s.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(r),l.isRotating=!0):(a=s.moveLeft(n),l.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(r),l.isRotating=!0):(a=s.moveRight(n),l.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(n),l.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(n),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new qt({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:Qt}}class re{constructor(t,e){(0,u.Z)(this,"_viewportProps",void 0),(0,u.Z)(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class oe extends re{constructor(t){const{width:e,height:i,latitude:n,longitude:r,zoom:o,bearing:s=0,pitch:a=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:h=20,minZoom:d=0,maxPitch:A=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:y,startZoom:b,normalize:_=!0}=t;(0,Dt.Z)(Number.isFinite(r)),(0,Dt.Z)(Number.isFinite(n)),(0,Dt.Z)(Number.isFinite(o)),super({width:e,height:i,latitude:n,longitude:r,zoom:o,bearing:s,pitch:a,altitude:l,maxZoom:h,minZoom:d,maxPitch:A,minPitch:f,normalize:_,position:c},{startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:y,startZoom:b}),(0,u.Z)(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){const i=this.getState().startPanLngLat||this._unproject(e);if(!i)return this;const n=this.makeViewport(this.getViewportProps()).panByPosition(i,t);return this._getUpdatedState(n)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:i=0}){const{startRotatePos:n,startBearing:r,startPitch:o}=this.getState();if(!n||void 0===r||void 0===o)return this;let s;return s=t?this._getNewRotation(t,n,o,r):{bearing:r+e,pitch:o+i},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:i}){let{startZoom:n,startZoomLngLat:r}=this.getState();if(r||(n=this.getViewportProps().zoom,r=this._unproject(e)||this._unproject(t)),!r)return this;const{maxZoom:o,minZoom:s}=this.getViewportProps();let a=n+Math.log2(i);a=(0,Rt.uZ)(a,s,o);const l=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...l.panByPosition(r,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),i={...this.getViewportProps()},{bearing:n,longitude:r}=i;return Math.abs(n-e.bearing)>180&&(i.bearing=n<0?n+360:n-360),Math.abs(r-e.longitude)>180&&(i.longitude=r<0?r+360:r-360),i}applyConstraints(t){const{maxZoom:e,minZoom:i,zoom:n}=t;t.zoom=(0,Rt.uZ)(n,i,e);const{maxPitch:r,minPitch:o,pitch:s}=t;t.pitch=(0,Rt.uZ)(s,o,r);const{normalize:a=!0}=t;return a&&Object.assign(t,(0,M.QA)(t)),t}_zoomFromCenter(t){const{width:e,height:i}=this.getViewportProps();return this.zoom({pos:[e/2,i/2],scale:t})}_panFromCenter(t){const{width:e,height:i}=this.getViewportProps();return this.pan({startPos:[e/2,i/2],pos:[e/2+t[0],i/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,i,n){const r=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:l,height:c}=this.getViewportProps(),u=r/l;let h=0;o>0?Math.abs(c-a)>5&&(h=o/(a-c)*1.2):o<0&&a>5&&(h=1-s/a),h=(0,Rt.uZ)(h,-1,1);const{minPitch:d,maxPitch:A}=this.getViewportProps();let f=i;return h>0?f=i+h*(A-i):h<0&&(f=i-h*(d-i)),{pitch:f,bearing:n+180*u}}}class se extends ne{constructor(...t){super(...t),(0,u.Z)(this,"ControllerState",oe),(0,u.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new qt({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),(0,u.Z)(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t),(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class ae extends Lt{get ViewportType(){return Ft.Z}get ControllerType(){return se}}(0,u.Z)(ae,"displayName","MapView");const le=new j;class ce{constructor(){(0,u.Z)(this,"effects",void 0),(0,u.Z)(this,"_resolvedEffects",[]),(0,u.Z)(this,"_defaultEffects",[]),(0,u.Z)(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const i=e.findIndex((e=>{return i=t,(null!==(n=e.order)&&void 0!==n?n:1/0)-(null!==(r=i.order)&&void 0!==r?r:1/0)>0;var i,n,r}));i<0?e.push(t):e.splice(i,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&((0,St.v)(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const t of this.effects)e[t.id]=t;const i=[];for(const n of t){const t=e[n.id];t&&t!==n?t.setProps?(t.setProps(n.props),i.push(t)):(t.cleanup(),i.push(n)):i.push(n),delete e[n.id]}for(const t in e)e[t].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),t.some((t=>t instanceof j))||this._resolvedEffects.push(le),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class ue extends C.Z{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}class he{constructor(t){(0,u.Z)(this,"gl",void 0),(0,u.Z)(this,"layerFilter",void 0),(0,u.Z)(this,"drawPickingColors",void 0),(0,u.Z)(this,"drawLayersPass",void 0),(0,u.Z)(this,"pickLayersPass",void 0),(0,u.Z)(this,"renderCount",void 0),(0,u.Z)(this,"_needsRedraw",void 0),(0,u.Z)(this,"renderBuffers",void 0),(0,u.Z)(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new ue(t),this.pickLayersPass=new ft.Z(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||k.Z.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const n=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,r=e.render({...i,target:n});i.effects&&this._postRender(i.effects,i),this.renderCount++,(0,s.Z)("deckRenderer.renderLayers",this,r,t)}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const i of t)e.preRenderStats[i.id]=i.preRender(this.gl,e),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new k.Z(this.gl),new k.Z(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:i}=this,n={...e,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const r of t)if(r.postRender){if(r.id===this.lastPostProcessEffect){n.target=e.target,r.postRender(this.gl,n);break}const t=r.postRender(this.gl,n);n.inputBuffer=t,n.swapBuffer=t===i[0]?i[1]:i[0]}}}var de=i(1953);const Ae={pickedColor:null,pickedObjectIndex:-1};function fe({pickedColors:t,decodePickingColor:e,deviceX:i,deviceY:n,deviceRadius:r,deviceRect:s}){const{x:a,y:l,width:c,height:u}=s;let h=r*r,d=-1,A=0;for(let e=0;e<u;e++){const r=e+l-n,o=r*r;if(o>h)A+=4*c;else for(let e=0;e<c;e++){if(t[A+3]-1>=0){const t=e+a-i,n=t*t+o;n<=h&&(h=n,d=A)}A+=4}}if(d>=0){const i=t.slice(d,d+4),n=e(i);if(n){const t=Math.floor(d/4/c),e=d/4-t*c;return{...n,pickedColor:i,pickedX:a+e,pickedY:l+t}}o.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Ae}function pe({pickInfo:t,viewports:e,pixelRatio:i,x:n,y:r,z:o}){let s,a=e[0];if(e.length>1&&(a=function(t,e){for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.containsPixel(e))return n}return t[0]}((null==t?void 0:t.pickedViewports)||e,{x:n,y:r})),a){const t=[n-a.x,r-a.y];void 0!==o&&(t[2]=o),s=a.unproject(t)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:r,pixel:[n,r],coordinate:s,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:i}}function ge(t){const{pickInfo:e,lastPickedInfo:i,mode:n,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,l=s?[s]:[];if("hover"===n){const t=i.index,e=i.layerId,n=s?s.props.id:null;if(n!==e||a!==t){if(n!==e){const t=r.find((t=>t.props.id===e));t&&l.unshift(t)}i.layerId=n,i.index=a,i.info=null}}const c=pe(t),u=new Map;return u.set(null,c),l.forEach((t=>{let e={...c};t===s&&(e.color=o,e.index=a,e.picked=!0),e=me({layer:t,info:e,mode:n});const r=e.layer;t===s&&"hover"===n&&(i.info=e),u.set(r.id,e),"hover"===n&&r.updateAutoHighlight(e)})),u}function me({layer:t,info:e,mode:i}){for(;t&&e;){const n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:i,sourceLayer:n}),t=t.parent}return e}class ve{constructor(t){(0,u.Z)(this,"gl",void 0),(0,u.Z)(this,"pickingFBO",void 0),(0,u.Z)(this,"depthFBO",void 0),(0,u.Z)(this,"pickLayersPass",void 0),(0,u.Z)(this,"layerFilter",void 0),(0,u.Z)(this,"lastPickedInfo",void 0),(0,u.Z)(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new ft.Z(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:i,viewports:n},r=this.lastPickedInfo.info){const o=r&&r.layer&&r.layer.id,s=r&&r.viewport&&r.viewport.id,a=o?i.find((t=>t.id===o)):null,l=s&&n.find((t=>t.id===s))||n[0],c=l&&l.unproject([t-l.x,e-l.y]),u={x:t,y:e,viewport:l,coordinate:c,layer:a};return{...r,...u}}_resizeBuffer(){var t,e;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new k.Z(i),k.Z.isSupported(i,{colorBufferFloat:!0}))){const t=new k.Z(i);t.attach({36064:new d.Z(i,{format:(0,T.D0)(i)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:i,x:n,y:r,radius:o=0,depth:s=1,mode:a="query",unproject3D:l,onViewportActive:c,effects:u}){const h=this._getPickable(t),d=(0,T.w)(this.gl);if(!h)return{result:[],emptyInfo:pe({viewports:i,x:n,y:r,pixelRatio:d})};this._resizeBuffer();const A=(0,T.JY)(this.gl,[n,r],!0),f=[A.x+Math.floor(A.width/2),A.y+Math.floor(A.height/2)],p=Math.round(o*d),{width:g,height:m}=this.pickingFBO,v=this._getPickingRect({deviceX:f[0],deviceY:f[1],deviceRadius:p,deviceWidth:g,deviceHeight:m}),y={x:n-o,y:r-o,width:2*o+1,height:2*o+1};let b;const _=[],w=new Set;for(let t=0;t<s;t++){let o,A;if(o=v?fe({...this._drawAndSample({layers:h,views:e,viewports:i,onViewportActive:c,deviceRect:v,cullRect:y,effects:u,pass:"picking:".concat(a)}),deviceX:f[0],deviceY:f[1],deviceRadius:p,deviceRect:v}):{pickedColor:null,pickedObjectIndex:-1},o.pickedLayer&&l&&this.depthFBO){const{pickedColors:t}=this._drawAndSample({layers:[o.pickedLayer],views:e,viewports:i,onViewportActive:c,deviceRect:{x:o.pickedX,y:o.pickedY,width:1,height:1},cullRect:y,effects:u,pass:"picking:".concat(a,":z")},!0);t[3]&&(A=t[0])}o.pickedLayer&&t+1<s&&(w.add(o.pickedLayer),o.pickedLayer.disablePickingIndex(o.pickedObjectIndex)),b=ge({pickInfo:o,lastPickedInfo:this.lastPickedInfo,mode:a,layers:h,viewports:i,x:n,y:r,z:A,pixelRatio:d});for(const t of b.values())t.layer&&_.push(t);if(!o.pickedColor)break}for(const t of w)t.restorePickingColors();return{result:_,emptyInfo:b.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:i,x:n,y:r,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}){const d=this._getPickable(t);if(!d)return[];this._resizeBuffer();const A=(0,T.w)(this.gl),f=(0,T.JY)(this.gl,[n,r],!0),p=f.x,g=f.y+f.height,m=(0,T.JY)(this.gl,[n+s,r+a],!0),v=m.x+m.width,y=m.y,b={x:p,y,width:v-p,height:g-y},_=function({pickedColors:t,decodePickingColor:e}){const i=new Map;if(t)for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){const r=t.slice(n,n+4),s=r.join(",");if(!i.has(s)){const t=e(r);t?i.set(s,{...t,color:r}):o.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(i.values())}(this._drawAndSample({layers:d,views:e,viewports:i,onViewportActive:u,deviceRect:b,cullRect:{x:n,y:r,width:s,height:a},effects:h,pass:"picking:".concat(l)})),w=new Map,x=Number.isFinite(c);for(let t=0;t<_.length&&!(x&&c&&w.size>=c);t++){const e=_[t];let i={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:n,y:r,pixelRatio:A};i=me({layer:e.pickedLayer,info:i,mode:l}),w.has(i.object)||w.set(i.object,i)}return Array.from(w.values())}_drawAndSample({layers:t,views:e,viewports:i,onViewportActive:n,deviceRect:r,cullRect:o,effects:s,pass:a},l=!1){const c=l?this.depthFBO:this.pickingFBO,u={layers:t,layerFilter:this.layerFilter,views:e,viewports:i,onViewportActive:n,pickingFBO:c,deviceRect:r,cullRect:o,effects:s,pass:a,pickZ:l,preRenderStats:{}};for(const t of s)t.useInPicking&&(u.preRenderStats[t.id]=t.preRender(this.gl,u));const{decodePickingColor:h}=this.pickLayersPass.render(u),{x:d,y:A,width:f,height:p}=r,g=new(l?Float32Array:Uint8Array)(f*p*4);return(0,de.z6)(c,{sourceX:d,sourceY:A,sourceWidth:f,sourceHeight:p,target:g}),{pickedColors:g,decodePickingColor:h}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:i,deviceWidth:n,deviceHeight:r}){const o=Math.max(0,t-i),s=Math.max(0,e-i),a=Math.min(n,t+i+1)-o,l=Math.min(r,e+i+1)-s;return a<=0||l<=0?null:{x:o,y:s,width:a,height:l}}}const ye={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class be{constructor(t){(0,u.Z)(this,"el",null),(0,u.Z)(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,ye),e.appendChild(this.el))}setTooltip(t,e,i){const n=this.el;if(n){if("string"==typeof t)n.innerText=t;else{if(!t)return this.isVisible=!1,void(n.style.display="none");t.text&&(n.innerText=t.text),t.html&&(n.innerHTML=t.html),t.className&&(n.className=t.className),Object.assign(n.style,t.style)}this.isVisible=!0,n.style.display="block",n.style.transform="translate(".concat(e,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var _e=i(6610),we=i(3485),xe=i(9835),Ce=i(2525),Ee=i(7577),ke=i(4211),Te=i(6948);class Be extends Ee.Z{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=(0,T.D0)(t),n=(0,ke.ag)(t,Te.h.TIMER_QUERY);let r=i||n;for(const t of e)switch(t){case"queries":r=r&&i;break;case"timers":r=r&&n;break;default:(0,Ce.h)(!1)}return r}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((i,n)=>{const r=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):e++>t?(n("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)})),this._pollingPromise}_createHandle(){return Be.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const Se=(0,i(3370).Z)()&&"undefined"!=typeof document;let Pe=0;class Me{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>(0,T.s9)(t)),onAddHTML:i=null,onInitialize:n=(()=>{}),onRender:r=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:A=xe.lR.get("animation-loop-".concat(Pe++))}=t;let{useDevicePixels:f=!0}=t;"useDevicePixelRatio"in t&&(T.cM.deprecated("useDevicePixelRatio","useDevicePixels")(),f=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:i,onInitialize:n,onRender:r,onFinalize:o,onError:s,gl:a,glOptions:l,debug:c,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=A,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:f}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return(0,Ce.h)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Be.isSupported(this.gl,["timers"])?new Be(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(t);return i?Number(i.value):e}setViewParameters(){return T.cM.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Se?new Promise(((t,e)=>{Se&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:i}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?(0,T.yW)(this.props.gl,t):this.onCreateContext(t),!(0,T.UF)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(0,T.kL)(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const i=this.props.onAddHTML(e);i&&(e.innerHTML=i)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let i=1;const{canvas:n}=this.gl;return n&&n.clientHeight?i=n.clientWidth/n.clientHeight:t>0&&e>0&&(i=t/e),{width:t,height:e,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&(0,T.aQ)(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new k.Z(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var Ie=i(840);const Oe={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const i=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return!0;return!1}(i,(e=>e.pointerId===t.pointerId))||i.push(t)),e.call(this,t)}}(Ie.PointerEventInput),Ie.MouseInput.prototype.handler=function(t){let e=Oe[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const De=Ie.Manager,Le=Ie;class Fe{constructor(t,e,i){this.element=t,this.callback=e,this.options={enable:!0,...i}}}const Re=Le?[[Le.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Le.Rotate,{enable:!1}],[Le.Pinch,{enable:!1}],[Le.Swipe,{enable:!1}],[Le.Pan,{threshold:0,enable:!1}],[Le.Press,{enable:!1}],[Le.Tap,{event:"doubletap",taps:2,enable:!1}],[Le.Tap,{event:"anytap",enable:!1}],[Le.Tap,{enable:!1}]]:null,Ne={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},ze={doubletap:["tap"]},je={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Ue={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Ze={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},He={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Ge="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Ve="undefined"!=typeof window?window:i.g;void 0!==i.g?i.g:window,"undefined"!=typeof document&&document;let We=!1;try{const t={get passive(){return We=!0,!0}};Ve.addEventListener("test",null,t),Ve.removeEventListener("test",null)}catch(t){We=!1}const qe=-1!==Ge.indexOf("firefox"),{WHEEL_EVENTS:Qe}=Ue,Ye="wheel",Xe=4.000244140625;class Je extends Fe{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;Ve.WheelEvent&&(qe&&t.deltaMode===Ve.WheelEvent.DOM_DELTA_PIXEL&&(e/=Ve.devicePixelRatio),t.deltaMode===Ve.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%Xe==0&&(e=Math.floor(e/Xe)),t.shiftKey&&e&&(e*=.25),this.callback({type:Ye,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(Qe),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!We&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===Ye&&(this.options.enable=e)}}const{MOUSE_EVENTS:Ke}=Ue,$e="pointermove",ti="pointerover",ei="pointerout",ii="pointerenter",ni="pointerleave";class ri extends Fe{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:n}=this.options;this.enableMoveEvent=n,this.enableLeaveEvent=n,this.enableEnterEvent=n,this.enableOutEvent=n,this.enableOverEvent=n,this.events=(this.options.events||[]).concat(Ke),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===$e&&(this.enableMoveEvent=e),t===ti&&(this.enableOverEvent=e),t===ei&&(this.enableOutEvent=e),t===ii&&(this.enableEnterEvent=e),t===ni&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(ti,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(ei,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(ii,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(ni,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit($e,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:oi}=Ue,si="keydown",ai="keyup";class li extends Fe{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:si,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:ai,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(oi),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===si&&(this.enableDownEvent=e),t===ai&&(this.enableUpEvent=e)}}const ci="contextmenu";class ui extends Fe{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{this.options.enable&&this.callback({type:ci,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===ci&&(this.options.enable=e)}}const hi={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function di(t){const e=hi[t.srcEvent.type];if(!e)return null;const{buttons:i,button:n,which:r}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(i)?(o=1===r,s=2===r,a=3===r):2===e?(o=Boolean(1&i),s=Boolean(4&i),a=Boolean(2&i)):1===e&&(o=0===n,s=1===n,a=2===n),{leftButton:o,middleButton:s,rightButton:a}}function Ai(t,e){const i=t.center;if(!i)return null;const n=e.getBoundingClientRect(),r=n.width/e.offsetWidth||1,o=n.height/e.offsetHeight||1;return{center:i,offsetCenter:{x:(i.x-n.left-e.clientLeft)/r,y:(i.y-n.top-e.clientTop)/o}}}const fi={srcElement:"root",priority:0};class pi{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let i=t.srcEvent.target;for(;i&&i!==e.rootElement;){if(this._emit(e,i),e.handled)return;i=i.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,i,n=!1,r=!1){const{handlers:o,handlersByElement:s}=this;let a=fi;"string"==typeof i||i&&i.addEventListener?a={...fi,srcElement:i}:i&&(a={...fi,...i});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};n&&(c.once=!0),r&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:i,handlersByElement:n}=this;for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.type===t&&o.handler===e){i.splice(r,1);const t=n.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&n.delete(o.srcElement)}}this._active=i.some((t=>!t.passive))}_emit(t,e){const i=this.handlersByElement.get(e);if(i){let e=!1;const n=()=>{t.handled=!0},r=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<i.length;s++){const{type:a,handler:l,once:c}=i[s];if(l({...t,type:a,stopPropagation:n,stopImmediatePropagation:r}),c&&o.push(i[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:i}=o[t];this.remove(e,i)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...di(t),...Ai(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const gi={events:null,recognizers:null,recognizerOptions:{},Manager:De,touchAction:"none",tabIndex:0};class mi{constructor(t=null,e){this._onBasicInput=t=>{const{srcEvent:e}=t,i=je[e.type];i&&this.manager.emit(i,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...gi,...e},this.events=new Map,this.setElement(t);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,i=e.Manager;this.manager=new i(t,{touchAction:e.touchAction,recognizers:e.recognizers||Re}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(Ne).forEach((t=>{const e=this.manager.get(t);e&&Ne[t].forEach((t=>{e.recognizeWith(t)}))}));for(const t in e.recognizerOptions){const i=this.manager.get(t);if(i){const n=e.recognizerOptions[t];delete n.enable,i.set(n)}}this.wheelInput=new Je(t,this._onOtherEvent,{enable:!1}),this.moveInput=new ri(t,this._onOtherEvent,{enable:!1}),this.keyInput=new li(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new ui(t,this._onOtherEvent,{enable:!1});for(const[t,e]of this.events)e.isEmpty()||(this._toggleRecognizer(e.recognizerName,!0),this.manager.on(t,e.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,i){this._addEventHandler(t,e,i,!1)}once(t,e,i){this._addEventHandler(t,e,i,!0)}watch(t,e,i){this._addEventHandler(t,e,i,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:i}=this;if(!i)return;const n=i.get(t);if(n&&n.options.enable!==e){n.set({enable:e});const r=ze[t];r&&!this.options.recognizers&&r.forEach((r=>{const o=i.get(r);e?(o.requireFailure(t),n.dropRequireFailure(r)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,i,n,r){if("string"!=typeof t){i=e;for(const e in t)this._addEventHandler(e,t[e],i,n,r);return}const{manager:o,events:s}=this,a=He[t]||t;let l=s.get(a);l||(l=new pi(this),s.set(a,l),l.recognizerName=Ze[a]||a,o&&o.on(a,l.handleEvent)),l.add(t,e,i,n,r),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:i}=this,n=He[t]||t,r=i.get(n);if(r&&(r.remove(t,e),r.isEmpty())){const{recognizerName:t}=r;let e=!1;for(const n of i.values())if(n.recognizerName===t&&!n.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function vi(){}const yi={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:vi,onResize:vi,onViewStateChange:vi,onInteractionStateChange:vi,onBeforeRender:vi,onAfterRender:vi,onLoad:vi,onError:t=>o.Z.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class bi{constructor(t){(0,u.Z)(this,"props",void 0),(0,u.Z)(this,"width",0),(0,u.Z)(this,"height",0),(0,u.Z)(this,"userData",{}),(0,u.Z)(this,"canvas",null),(0,u.Z)(this,"viewManager",null),(0,u.Z)(this,"layerManager",null),(0,u.Z)(this,"effectManager",null),(0,u.Z)(this,"deckRenderer",null),(0,u.Z)(this,"deckPicker",null),(0,u.Z)(this,"eventManager",null),(0,u.Z)(this,"tooltip",null),(0,u.Z)(this,"metrics",void 0),(0,u.Z)(this,"animationLoop",void 0),(0,u.Z)(this,"stats",void 0),(0,u.Z)(this,"viewState",void 0),(0,u.Z)(this,"cursorState",void 0),(0,u.Z)(this,"_needsRedraw",void 0),(0,u.Z)(this,"_pickRequest",void 0),(0,u.Z)(this,"_lastPointerDownInfo",null),(0,u.Z)(this,"_metricsCounter",void 0),(0,u.Z)(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const i=t.offsetCenter;if(!i)return;e.x=i.x,e.y=i.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),(0,u.Z)(this,"_onEvent",(t=>{const e=c.FP[t.type],i=t.offsetCenter;if(!e||!i||!this.layerManager)return;const n=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:n,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:o}=r,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let l=!1;s&&(l=s.call(o,r,t)),!l&&a&&a(r,t)})),(0,u.Z)(this,"_onPointerDown",(t=>{const e=t.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo})),this.props={...yi,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&o.Z.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,we.Z)()&&o.Z.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new bt.Z({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&_e.Z.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,i,n,r,o,s,a;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(t=this.layerManager)||void 0===t||t.finalize(),this.layerManager=null,null===(e=this.viewManager)||void 0===e||e.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(n=this.deckRenderer)||void 0===n||n.finalize(),this.deckRenderer=null,null===(r=this.deckPicker)||void 0===r||r.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(s=this.tooltip)||void 0===s||s.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(a=this.canvas.parentElement)||void 0===a||a.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&o.Z.removed("onLayerHover","onHover")(),"onLayerClick"in t&&o.Z.removed("onLayerClick","onClick")(),t.initialViewState&&!(0,St.v)(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(t),n=this.layerManager.needsRedraw(t),r=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||i||n||r||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return(0,Dt.Z)(this.viewManager),this.viewManager.views}getViewports(t){return(0,Dt.Z)(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(const i in t)this.layerManager.resourceManager.add({resourceId:i,data:t[i],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,i){(0,Dt.Z)(this.deckPicker);const{stats:n}=this;n.get("Pick Count").incrementCount(),n.get(e).timeStart();const r=this.deckPicker[t]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return n.get(e).timeEnd(),r}_createCanvas(t){let e=t.canvas;return"string"==typeof e&&(e=document.getElementById(e),(0,Dt.Z)(e)),e||(e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e)),Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:i}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(i||0===i){var n;const e=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(n=t.style)||void 0===n?void 0:n.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:i}=this;if(!i)return;const n=null!==(t=i.clientWidth)&&void 0!==t?t:i.width,r=null!==(e=i.clientHeight)&&void 0!==e?e:i.height;var o;n===this.width&&r===this.height||(this.width=n,this.height=r,null===(o=this.viewManager)||void 0===o||o.setProps({width:n,height:r}),this.props.onResize({width:n,height:r}))}_createAnimationLoop(t){const{width:e,height:i,gl:n,glOptions:r,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:c}=t;return new Me({width:e,height:i,useDevicePixels:c,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,gl:n,onCreateContext:t=>(0,T.s9)({...r,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new ae({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:i,emptyInfo:n}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=i.length>0;let r=n,o=!1;for(const n of i){var e;r=n,o=(null===(e=n.layer)||void 0===e?void 0:e.onHover(n,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(r,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(r);this.tooltip.setTooltip(t,r.x,r.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,(0,T.yW)(t,{enable:!0,copyState:!0})),this.tooltip=new be(this.canvas),(0,T.dR)(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new mt;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new mi(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const t in c.FP)this.eventManager.on(t,this._onEvent);this.viewManager=new Pt({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Bt(t,{deck:this,stats:this.stats,viewport:i,timeline:e}),this.effectManager=new ce,this.deckRenderer=new he(t),this.deckPicker=new ve(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:i}=this.layerManager.context;(0,T.dR)(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:i})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),o.Z.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const i=xe.lR.get("Memory Usage");t.bufferMemory=i.get("Buffer Memory").count,t.textureMemory=i.get("Texture Memory").count,t.renderbufferMemory=i.get("Renderbuffer Memory").count,t.gpuMemory=i.get("GPU Memory").count}}(0,u.Z)(bi,"defaultProps",yi),(0,u.Z)(bi,"VERSION",l);var _i=i(1476),wi=i(4185),xi=i(8918),Ci=i(3131);const Ei=Math.PI/180;function ki({height:t,focalDistance:e,orbitAxis:i,rotationX:n,rotationOrbit:r,zoom:o}){const s="Z"===i?[0,0,1]:[0,1,0],a="Z"===i?[0,-e,0]:[0,0,e],l=(new x.Z).lookAt({eye:a,up:s});l.rotateX(n*Ei),"Z"===i?l.rotateZ(r*Ei):l.rotateY(r*Ei);const c=Math.pow(2,o)/t;return l.scale(c),l}class Ti extends Ct.Z{constructor(t){const{height:e,projectionMatrix:i,fovy:n=50,orbitAxis:r="Z",target:o=[0,0,0],rotationX:s=0,rotationOrbit:a=0,zoom:l=0}=t,c=i?i[5]/2:(0,M.sj)(n);super({...t,longitude:void 0,viewMatrix:ki({height:e||1,focalDistance:c,orbitAxis:r,rotationX:s,rotationOrbit:a,zoom:l}),fovy:n,focalDistance:c,position:o,zoom:l}),(0,u.Z)(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(t,{topLeft:e=!0}={}){const[i,n,r=this.projectedCenter[2]]=t,o=e?n:this.height-n,[s,a,l]=(0,M.CT)([i,o,r],this.pixelUnprojectionMatrix);return[s,a,l]}panByPosition(t,e){const i=this.project(t),n=[this.width/2+i[0]-e[0],this.height/2+i[1]-e[1],this.projectedCenter[2]];return{target:this.unproject(n)}}}var Bi=i(9573),Si=i(7160);const Pi=1e-6;class Mi{constructor({phi:t=0,theta:e=0,radius:i=1,bearing:n,pitch:r,altitude:o,radiusScale:s=6371e3}={}){(0,u.Z)(this,"phi",void 0),(0,u.Z)(this,"theta",void 0),(0,u.Z)(this,"radius",void 0),(0,u.Z)(this,"radiusScale",void 0),this.phi=t,this.theta=e,this.radius=i||o||1,this.radiusScale=s||1,void 0!==n&&(this.bearing=n),void 0!==r&&(this.pitch=r),this.check()}toString(){return this.formatString(Rt.vc)}formatString({printTypes:t=!1}){const e=Rt.Bw;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return(0,Rt.fS)(this.radius,t.radius)&&(0,Rt.fS)(this.theta,t.theta)&&(0,Rt.fS)(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-(0,Rt.RW)(this.phi)}set bearing(t){this.phi=Math.PI-(0,Rt.uR)(t)}get pitch(){return(0,Rt.RW)(this.theta)}set pitch(t){this.theta=(0,Rt.uR)(t)}get longitude(){return(0,Rt.RW)(this.phi)}get latitude(){return(0,Rt.RW)(this.theta)}get lng(){return(0,Rt.RW)(this.phi)}get lat(){return(0,Rt.RW)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}clone(){return(new Mi).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,i]){return this.radius=1+i/this.radiusScale,this.phi=(0,Rt.uR)(e),this.theta=(0,Rt.uR)(t),this.check()}fromVector3(t){return this.radius=Si.kE(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,Rt.uZ)(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new m.Z(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(Pi,Math.min(Math.PI-Pi,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}class Ii extends Ct.Z{constructor(t){const{longitude:e,latitude:i,modelMatrix:n,bearing:r=0,pitch:o=0,up:s=[0,0,1]}=t,a=new Mi({bearing:r,pitch:-90===o?1e-4:90+o}).toVector3().normalize(),l=n?new x.Z(n).transformAsVector(a):a,c=Number.isFinite(i)?(0,M.Bf)({latitude:i}):0,h=Math.pow(2,c),d=(new x.Z).lookAt({eye:[0,0,0],center:l,up:s}).scale(h);super({...t,zoom:c,viewMatrix:d}),(0,u.Z)(this,"longitude",void 0),(0,u.Z)(this,"latitude",void 0),this.latitude=i,this.longitude=e}}var Oi=i(1331),Di=i(3844),Li=i(7287),Fi=i(5126);class Ri extends re{constructor(t){const{width:e,height:i,position:n=[0,0,0],bearing:r=0,pitch:o=0,longitude:s=null,latitude:a=null,maxPitch:l=90,minPitch:c=-90,startRotatePos:u,startBearing:h,startPitch:d,startZoomPosition:A}=t;super({width:e,height:i,position:n,bearing:r,pitch:o,longitude:s,latitude:a,maxPitch:l,minPitch:c},{startRotatePos:u,startBearing:h,startPitch:d,startZoomPosition:A})}panStart(){return this}pan(){return this}panEnd(){return this}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:i=0}){const{startRotatePos:n,startBearing:r,startPitch:o}=this.getState(),{width:s,height:a}=this.getViewportProps();if(!n||void 0===r||void 0===o)return this;let l;return l=t?{bearing:r-(t[0]-n[0])/s*180,pitch:o-(t[1]-n[1])/a*90}:{bearing:r-e,pitch:o-i},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}zoomStart(){return this._getUpdatedState({startZoomPosition:this.getViewportProps().position})}zoom({scale:t}){let{startZoomPosition:e}=this.getState();e||(e=this.getViewportProps().position);const i=this.getDirection();return this._move(i,20*Math.log2(t),e)}zoomEnd(){return this._getUpdatedState({startZoomPosition:null})}moveLeft(t=20){const e=this.getDirection(!0);return this._move(e.rotateZ({radians:Math.PI/2}),t)}moveRight(t=20){const e=this.getDirection(!0);return this._move(e.rotateZ({radians:-Math.PI/2}),t)}moveUp(t=20){const e=this.getDirection(!0);return this._move(e,t)}moveDown(t=20){const e=this.getDirection(!0);return this._move(e.negate(),t)}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}zoomIn(t=2){return this.zoom({scale:t})}zoomOut(t=2){return this.zoom({scale:1/t})}shortestPathFrom(t){const e=t.getViewportProps(),i={...this.getViewportProps()},{bearing:n,longitude:r}=i;return Math.abs(n-e.bearing)>180&&(i.bearing=n<0?n+360:n-360),null!==r&&null!==e.longitude&&Math.abs(r-e.longitude)>180&&(i.longitude=r<0?r+360:r-360),i}_move(t,e,i=this.getViewportProps().position){const n=t.scale(e);return this._getUpdatedState({position:new m.Z(i).add(n)})}getDirection(t=!1){return new Mi({bearing:this.getViewportProps().bearing,pitch:t?90:90+this.getViewportProps().pitch}).toVector3().normalize()}_getUpdatedState(t){return new Ri({...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{pitch:e,maxPitch:i,minPitch:n,longitude:r,bearing:o}=t;return t.pitch=(0,Rt.uZ)(e,n,i),null!==r&&(r<-180||r>180)&&(t.longitude=(0,Fi.wQ)(r+180,360)-180),(o<-180||o>180)&&(t.bearing=(0,Fi.wQ)(o+180,360)-180),t}}class Ni extends ne{constructor(...t){super(...t),(0,u.Z)(this,"ControllerState",Ri),(0,u.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new qt(["position","pitch","bearing"])})}}class zi extends Lt{get ViewportType(){return Ii}get ControllerType(){return Ni}}(0,u.Z)(zi,"displayName","FirstPersonView");class ji extends re{constructor(t){const{width:e,height:i,rotationX:n=0,rotationOrbit:r=0,target:o=[0,0,0],zoom:s=0,minRotationX:a=-90,maxRotationX:l=90,minZoom:c=-1/0,maxZoom:h=1/0,startPanPosition:d,startRotatePos:A,startRotationX:f,startRotationOrbit:p,startZoomPosition:g,startZoom:m}=t;super({width:e,height:i,rotationX:n,rotationOrbit:r,target:o,zoom:s,minRotationX:a,maxRotationX:l,minZoom:c,maxZoom:h},{startPanPosition:d,startRotatePos:A,startRotationX:f,startRotationOrbit:p,startZoomPosition:g,startZoom:m}),(0,u.Z)(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:e}){const i=this.getState().startPanPosition||e;if(!i)return this;const n=this.makeViewport(this.getViewportProps()).panByPosition(i,t);return this._getUpdatedState(n)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:i=0}){const{startRotatePos:n,startRotationX:r,startRotationOrbit:o}=this.getState(),{width:s,height:a}=this.getViewportProps();if(!n||void 0===r||void 0===o)return this;let l;if(t){let e=(t[0]-n[0])/s;const i=(t[1]-n[1])/a;(r<-90||r>90)&&(e*=-1),l={rotationX:r+180*i,rotationOrbit:o+180*e}}else l={rotationX:r+i,rotationOrbit:o+e};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const e=t.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:n}=i;return Math.abs(n-e.rotationOrbit)>180&&(i.rotationOrbit=n<0?n+360:n-360),i}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:i}){let{startZoom:n,startZoomPosition:r}=this.getState();if(r||(n=this.getViewportProps().zoom,r=this._unproject(e)||this._unproject(t)),!r)return this;const o=this._calculateNewZoom({scale:i,startZoom:n}),s=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...s.panByPosition(r,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom({scale:t,startZoom:e}){const{maxZoom:i,minZoom:n}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);const r=e+Math.log2(t);return(0,Rt.uZ)(r,n,i)}_panFromCenter(t){const{width:e,height:i,target:n}=this.getViewportProps();return this.pan({startPosition:n,pos:[e/2+t[0],i/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:e,minZoom:i,zoom:n,maxRotationX:r,minRotationX:o,rotationOrbit:s}=t;return t.zoom=Array.isArray(n)?[(0,Rt.uZ)(n[0],i,e),(0,Rt.uZ)(n[1],i,e)]:(0,Rt.uZ)(n,i,e),t.rotationX=(0,Rt.uZ)(t.rotationX,o,r),(s<-180||s>180)&&(t.rotationOrbit=(0,Fi.wQ)(s+180,360)-180),t}}class Ui extends ne{constructor(...t){super(...t),(0,u.Z)(this,"ControllerState",ji),(0,u.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new qt({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class Zi extends Lt{constructor(t={}){super(t),this.props.orbitAxis=t.orbitAxis||"Z"}get ViewportType(){return Ti}get ControllerType(){return Ui}}(0,u.Z)(Zi,"displayName","OrbitView");class Hi extends ji{constructor(t){super(t),(0,u.Z)(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:e}){const{maxZoom:i,minZoom:n}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);let r=Math.log2(t);if(Array.isArray(e)){let[t,o]=e;switch(this.zoomAxis){case"X":t=(0,Rt.uZ)(t+r,n,i);break;case"Y":o=(0,Rt.uZ)(o+r,n,i);break;default:let e=Math.min(t+r,o+r);e<n&&(r+=n-e),e=Math.max(t+r,o+r),e>i&&(r+=i-e),t+=r,o+=r}return[t,o]}return(0,Rt.uZ)(e+r,n,i)}}class Gi extends ne{constructor(...t){super(...t),(0,u.Z)(this,"ControllerState",Hi),(0,u.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new qt(["target","zoom"])}),(0,u.Z)(this,"dragMode","pan")}_onPanRotate(){return!1}}class Vi extends Lt{get ViewportType(){return Bi.Z}get ControllerType(){return Gi}}(0,u.Z)(Vi,"displayName","OrthographicView");class Wi extends oe{applyConstraints(t){const{maxZoom:e,minZoom:i,zoom:n}=t;t.zoom=(0,Rt.uZ)(n,i,e);const{longitude:r,latitude:o}=t;return(r<-180||r>180)&&(t.longitude=(0,Fi.wQ)(r+180,360)-180),t.latitude=(0,Rt.uZ)(o,-89,89),t}}class qi extends ne{constructor(...t){super(...t),(0,u.Z)(this,"ControllerState",Wi),(0,u.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new qt(["longitude","latitude","zoom"])}),(0,u.Z)(this,"dragMode","pan")}setProps(t){super.setProps(t),this.dragRotate=!1,this.touchRotate=!1}}class Qi extends Lt{get ViewportType(){return Ci.Z}get ControllerType(){return qi}}(0,u.Z)(Qi,"displayName","GlobeView");var Yi=i(3693);const Xi=["bearing","pitch"],Ji={speed:1.2,curve:1.414};class Ki extends Gt{constructor(t={}){super({compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}),(0,u.Z)(this,"opts",void 0),this.opts={...Ji,...t}}interpolateProps(t,e,i){const n=(0,M.if)(t,e,i,this.opts);for(const r of Xi)n[r]=(0,Rt.t7)(t[r]||0,e[r]||0,i);return n}getDuration(t,e){let{transitionDuration:i}=e;return"auto"===i&&(i=(0,M.up)(t,e,this.opts)),i}}var $i=i(8550),tn=i(8005),en=i(5015),nn=i(7870),rn=i(1761)},1476:(t,e,i)=>{"use strict";i.d(e,{Z:()=>J});var n=i(4942),r=i(4211),o=i(6948),s=i(3478);class a{constructor(t,e){(0,n.Z)(this,"opts",void 0),(0,n.Z)(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:i}=this.source,{size:n}=e;let r=i;if(i&&i.length!==n){r=new Float32Array(n);const t=e.elementOffset||0;for(let e=0;e<n;++e)r[e]=i[t+e]}return r}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}var l=i(6610),c=i(5126),u=i(744);function h(t){return t.stride||t.size*t.bytesPerElement}function d(t,e){e.offset&&u.Z.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const i=h(t),n=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*i+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:n,stride:i}}var A=i(5304),f=i(8550),p=i(1855);const g=[],m=[[0,1/0]];var v=i(9006);class y extends class{constructor(t,e,i){(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"size",void 0),(0,n.Z)(this,"settings",void 0),(0,n.Z)(this,"value",void 0),(0,n.Z)(this,"doublePrecision",void 0),(0,n.Z)(this,"_buffer",void 0),(0,n.Z)(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const s=e.logicalType||e.type,a=5130===s;let l,{defaultValue:c}=e;c=Number.isFinite(c)?[c]:c||new Array(this.size).fill(0),l=a?5126:!s&&e.isIndexed?t&&(0,r.U6)(t,o.h.ELEMENT_INDEX_UINT32)?5125:5123:s||5126;let u=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(s||l||5126);this.doublePrecision=a,a&&!1===e.fp64&&(u=Float32Array),this.value=null,this.settings={...e,defaultType:u,defaultValue:c,logicalType:s,type:l,size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new s.Z(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*h(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),l.Z.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const i={},n=this.value instanceof Float64Array,r=function(t,e){const i=d(t,e);return{high:i,low:{...i,offset:i.offset+4*t.size}}}(this.getAccessor(),e||{});return i[t]=new a(this,r.high),i["".concat(t,"64Low")]=n?new a(this,r.low):new Float32Array(this.size),i}if(e){const i=d(this.getAccessor(),e);return{[t]:new a(this,i)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:i,size:n}=this,r=i*n;if(e&&r&&e.length>=r){const i=new Array(n).fill(1/0),o=new Array(n).fill(-1/0);for(let t=0;t<r;)for(let r=0;r<n;r++){const n=e[t++];n<i[r]&&(i[r]=n),n>o[r]&&(o[r]=n)}t=[i,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let i;i=ArrayBuffer.isView(t)?{value:t}:t instanceof s.Z?{buffer:t}:t;const n={...this.settings,...i};if(e.bufferAccessor=n,e.bounds=null,i.constant){let t=i.value;if(t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t)),e.constant&&this._areValuesEqual(t,this.value))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(i.buffer){const t=i.buffer;e.externalBuffer=t,e.constant=!1,this.value=i.value||null;const r=i.value instanceof Float64Array;n.type=i.type||t.accessor.type,n.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(r?2:1),n.stride=h(n)}else if(i.value){this._checkExternalBuffer(i);let t=i.value;e.externalBuffer=null,e.constant=!1,this.value=t,n.bytesPerElement=t.BYTES_PER_ELEMENT,n.stride=h(n);const{buffer:r,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=(0,c.TK)(t,n));const s=t.byteLength+o+2*n.stride;r.byteLength<s&&r.reallocate(s),r.setAccessor(null),r.subData({data:t,offset:o}),n.type=i.type||r.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const e=this.value,{startOffset:i=0,endOffset:n}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?(0,c.TK)(e,{size:this.size,startIndex:i,endIndex:n}):e.subarray(i,n),offset:i*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,e=!1){const{state:i}=this,n=i.allocatedValue,r=l.Z.allocate(n,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=r;const{buffer:o,byteOffset:s}=this;return o.byteLength<r.byteLength+s&&(o.reallocate(r.byteLength+s),e&&n&&o.subData({data:n instanceof Float64Array?(0,c.TK)(n,this):n,offset:s})),i.allocatedValue=r,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let n=!1;if(this.doublePrecision&&(n=e.BYTES_PER_ELEMENT<4),n)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof i||!this.settings.normalized||"normalized"in t||u.Z.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,i){const{defaultValue:n,size:r}=this.settings;if(Number.isFinite(t))return e[i]=t,e;if(!t){let t=r;for(;--t>=0;)e[i+t]=n[t];return e}switch(r){case 4:e[i+3]=Number.isFinite(t[3])?t[3]:n[3];case 3:e[i+2]=Number.isFinite(t[2])?t[2]:n[2];case 2:e[i+1]=Number.isFinite(t[1])?t[1]:n[1];case 1:e[i+0]=Number.isFinite(t[0])?t[0]:n[0];break;default:let o=r;for(;--o>=0;)e[i+o]=Number.isFinite(t[o])?t[o]:n[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:i}=this;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}}{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:m}),(0,n.Z)(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!=typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,i=this.settings.transition,n=Array.isArray(e)?t[e.find((e=>t[e]))]:t[e];return(0,v.M0)(n,i)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:i=1/0}=e;this.state.updateRanges=function(t,e){if(t===m)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const i=[],n=t.length;let r=0;for(let o=0;o<n;o++){const n=t[o];n[1]<e[0]?(i.push(n),r=o+1):n[0]>e[1]?i.push(n):e=[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}return i.splice(r,0,e),i}(this.state.updateRanges,[t,i])}else this.state.updateRanges=m}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=g}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(t,e.updateRanges!==m),!0)}updateBuffer({numInstances:t,data:e,props:i,context:n}){if(!this.needsUpdate())return!1;const{state:{updateRanges:r},settings:{update:o,noAlloc:s}}=this;let a=!0;if(o){for(const[s,a]of r)o.call(n,this,{data:e,startRow:s,endRow:a,props:i,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,i]of r){const n=Number.isFinite(e)?this.getVertexOffset(e):0,r=Number.isFinite(i)?this.getVertexOffset(i):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:n,endOffset:r})}this._checkAttributeArray()}else a=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),a}setConstantValue(t){return void 0!==t&&"function"!=typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,e=null){const{state:i,settings:n}=this;if(!t)return i.binaryValue=null,i.binaryAccessor=null,!1;if(n.noAlloc)return!1;if(i.binaryValue===t)return this.clearNeedsUpdate(),!0;if(i.binaryValue=t,this.setNeedsRedraw(),n.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const r=t;(0,A.Z)(ArrayBuffer.isView(r.value),"invalid ".concat(n.accessor));const o=Boolean(r.size)&&r.size!==this.size;return i.binaryAccessor=(0,f.jr)(r.value,{size:r.size||this.size,stride:r.stride,offset:r.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const i in t)Object.assign(e,super.getShaderAttributes(i,t[i]));return e}_autoUpdater(t,{data:e,startRow:i,endRow:n,props:r,numInstances:o}){if(t.constant)return;const{settings:s,state:a,value:l,size:c,startIndices:u}=t,{accessor:h,transform:d}=s,g=a.binaryAccessor||("function"==typeof h?h:r[h]);(0,A.Z)("function"==typeof g,'accessor "'.concat(h,'" is not a function'));let m=t.getVertexOffset(i);const{iterable:v,objectInfo:y}=(0,f.jB)(e,i,n);for(const e of v){y.index++;let i=g(e,y);if(d&&(i=d.call(this,i)),u){const e=(y.index<u.length-1?u[y.index+1]:o)-u[y.index];if(i&&Array.isArray(i[0])){let e=m;for(const n of i)t._normalizeValue(n,l,e),e+=c}else i&&i.length>c?l.set(i,m):(t._normalizeValue(i,y.target,0),(0,p.k)({target:l,source:y.target,start:m,count:e}));m+=e*c}else t._normalizeValue(i,l,m),m+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!t.noAlloc&&"function"!=typeof t.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let i=!0;switch(e){case 4:i=i&&Number.isFinite(t[3]);case 3:i=i&&Number.isFinite(t[2]);case 2:i=i&&Number.isFinite(t[1]);case 1:i=i&&Number.isFinite(t[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}var b=i(8177),_=i(3803),w=i(9047);const x="void main() {gl_FragColor = vec4(0);}",C="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",E="#version 300 es\n".concat(C);function k(t,e){e=Array.isArray(e)?e:[e];const i=t.replace(/^\s+/,"").split(/\s+/),[n,r,o]=i;return e.includes(n)&&r&&o?{qualifier:n,type:r,name:o.split(";")[0]}:null}function T(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:i,inputType:n,output:r}=t;if(!i)return 300===e?E:e>300?"#version ".concat(e,"\n").concat(C):x;const o=B(i,n);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(n," ").concat(i,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(n," ").concat(i,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function B(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return(0,w.Z)(!1),null}}var S=i(9450),P=i(1053),M=i(2525);class I{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:n}=e;return{attributes:Object.assign({},i,t.attributes),transformFeedback:n}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],i=t?e[t]:null;return i?i instanceof s.Z?i:i.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,i=this.getBuffer(e);return i?i.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&(0,M.h)((0,S.D0)(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const t in this.feedbackMap){const n=this.feedbackMap[t];t in e&&(i[n]=t)}Object.assign(i,t.feedbackBuffers);for(const t in i){const n=i[t];if("string"==typeof n){const r=e[n],{byteLength:o,usage:s,accessor:a}=r;i[t]=this._createNewBuffer(t,{byteLength:o,usage:s,accessor:a})}}return i}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const i=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:i})}_setupTransformFeedback(t,e){let{model:i}=e;const{program:n}=i;t.transformFeedback=new P.Z(this.gl,{program:n,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),i=Object.assign({},t.feedbackBuffers);for(const n in this.feedbackMap){const r=this.feedbackMap[n];e[n]=t.feedbackBuffers[r],i[r]=t.sourceBuffers[n],(0,M.h)(i[r]instanceof s.Z)}return{sourceBuffers:e,feedbackBuffers:i}}_createNewBuffer(t,e){const i=new s.Z(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}var O=i(1953),D=i(4912),L=i(3849),F=i(5432);function R(t){let e=100;const i=t.match(/[^\s]+/g);if(i.length>=2&&"#version"===i[0]){const t=parseInt(i[1],10);Number.isFinite(t)&&(e=t)}return e}var N=i(6713);const z={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},j="transform_uSize_",U="transform_position";const Z={10241:9728,10240:9728,10242:33071,10243:33071};class H{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:i,framebuffer:n,targetTexture:r}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const t in this.samplerTextureMap){const e=this.samplerTextureMap[t];s[t]=i[e]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:i,targetTexture:n}=t;const r={};let o,s;i&&(({width:o,height:s}=n),r["".concat(j).concat(i)]=[o,s]);for(const t in e)({width:o,height:s}=e[t]),r["".concat(j).concat(t)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:r});Object.assign(s,t)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,n.width,n.height]),{attributes:o,framebuffer:n,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],i=(0,O.z6)(e);if(!t)return i;const n=i.constructor,r=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,w.Z)(!1),null}}(this.targetTextureType),o=new n(i.length*r/4);let s=0;for(let t=0;t<i.length;t+=4)for(let e=0;e<r;e++)o[s++]=i[t+e];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:i}=t;this._swapTexture=i,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:i}=t;if(i instanceof D.Z)return i;const n=e[i];return n?(this._targetRefTexName=i,this._createNewTexture(n)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:i={},_targetTexture:n}=t,r=this._createTargetTexture({sourceTextures:i,textureOrReference:n});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:i,targetTexture:r}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,i)=>{i[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new s.Z(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:i,sourceTextures:n,targetTexture:r}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,n),Object.assign(t.sourceBuffers,i),r){t.targetTexture=r;const{width:e,height:i}=r,{framebuffer:n}=t;n?(n.update({attachments:{36064:r},resizeAttachments:!1}),n.resize({width:e,height:i})):t.framebuffer=new L.Z(this.gl,{id:"transform-framebuffer",width:e,height:i,attachments:{36064:r}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const t in e)e[t].setParameters(Z)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=(0,F.h)(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:i}=this.bindings[this.currentIndex],{vs:n,uniforms:r,targetTextureType:o,inject:s,samplerTextureMap:a}=function(t){let{vs:e,sourceTextureMap:i,targetTextureVarying:n,targetTexture:r}=t,o=Object.keys(i).length,s=null;const a={};let l=e,c={};if(o>0||n){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,r,l)=>{if(o>0){const n=function(t,e){const i={},n=function(t){return k(t,["attribute","in"])}(t);if(!n)return null;const{type:r,name:o}=n;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:n,sizeName:s,uniformDeclerations:a}=function(t){const e="".concat("transform_uSampler_").concat(t),i="".concat(j).concat(t);return{samplerName:e,sizeName:i,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(i,";")}}(o),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,w.Z)(!1),null}}(r),c="  ".concat(r," ").concat(o," = transform_getInput(").concat(n,", ").concat(s,").").concat(l,";\n");return i[n]=o,{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":c},samplerTextureMap:i}}return null}(t,i);if(n){const{updatedLine:t,inject:i}=n;e[r]=t,c=(0,N.Lm)([c,i]),Object.assign(a,n.samplerTextureMap),o--}}n&&!s&&(s=function(t,e){const i=k(t,["varying","out"]);return i&&i.name===e?i.type:null}(t,n))})),n){(0,M.h)(r);const t="".concat(j).concat(n),e={"vs:#decl":"uniform vec2 ".concat(t,";\n"),"vs:#main-start":"     vec2 ".concat(U," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(U,", 0, 1.);\n")};c=(0,N.Lm)([c,e])}l=e.join("\n")}return{vs:l,targetTextureType:s,inject:c,samplerTextureMap:a}}({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=(0,N.Lm)([t.inject||{},s]);return this.targetTextureType=o,this.samplerTextureMap=a,{vs:n,fs:t._fs||T({version:R(n),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[z].concat(t.modules||[]):t.modules,uniforms:r,inject:l}}}var G=i(4538),V=i(9769);class W{static isSupported(t){return(0,S.D0)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:i}=this;t&&t.delete(),e&&e.delete(),i&&i.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,i=this._updateDrawOptions(t);e&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of e)t=t||i.swap();(0,M.h)(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of e){const e=i.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of e)i.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new V.Z(e,Object.assign({},t,{fs:t.fs||T({version:R(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of i)e=t.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){return!((0,G.nK)(t.feedbackBuffers)&&(0,G.nK)(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(e)&&(this.bufferTransform=new I(t,e)),function(t){return!((0,G.nK)(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(e)&&(this.textureTransform=new H(t,e)),(0,M.h)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of i)e=Object.assign(e,t.getDrawOptions(e));return e}}var q=i(3630);const Q={interpolation:class{constructor({gl:t,attribute:e,timeline:i}){(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"type","interpolation"),(0,n.Z)(this,"attributeInTransition",void 0),(0,n.Z)(this,"settings",void 0),(0,n.Z)(this,"attribute",void 0),(0,n.Z)(this,"transition",void 0),(0,n.Z)(this,"currentStartIndices",void 0),(0,n.Z)(this,"currentLength",void 0),(0,n.Z)(this,"transform",void 0),(0,n.Z)(this,"buffers",void 0),this.gl=t,this.transition=new q.Z(i),this.attribute=e,this.attributeInTransition=new y(t,e.settings),this.currentStartIndices=e.startIndices,this.currentLength=0,this.transform=function(t,e){const i=(0,v.w)(e.size);return new W(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"]})}(t,e);const r={byteLength:0,usage:35050};this.buffers=[new s.Z(t,r),new s.Z(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:i,buffers:n,attribute:r}=this;(0,v.DY)(n);const o={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const t of n)(0,v.IV)({buffer:t,...o});this.currentStartIndices=r.startIndices,this.currentLength=(0,v.pi)(r,e),this.attributeInTransition.setData({buffer:n[1],value:r.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:n[0],aTo:(0,v.AQ)(i,r)},feedbackBuffers:{vCurrent:n[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:i}=this.transition;let n=i/t;e&&(n=e(n)),this.transform.run({uniforms:{time:n}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor({gl:t,attribute:e,timeline:i}){(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"type","spring"),(0,n.Z)(this,"attributeInTransition",void 0),(0,n.Z)(this,"settings",void 0),(0,n.Z)(this,"attribute",void 0),(0,n.Z)(this,"transition",void 0),(0,n.Z)(this,"currentStartIndices",void 0),(0,n.Z)(this,"currentLength",void 0),(0,n.Z)(this,"texture",void 0),(0,n.Z)(this,"framebuffer",void 0),(0,n.Z)(this,"transform",void 0),(0,n.Z)(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new q.Z(i),this.attribute=e,this.attributeInTransition=new y(t,{...e.settings,normalized:!1}),this.currentStartIndices=e.startIndices,this.currentLength=0,this.texture=function(t){return new D.Z(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(t),this.framebuffer=function(t,e){return new L.Z(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(t,this.texture),this.transform=function(t,e,i){const n=(0,v.w)(e.size);return new W(t,{framebuffer:i,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}(t,e,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new s.Z(t,r),new s.Z(t,r),new s.Z(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:i,buffers:n,attribute:r}=this,o={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const t of n)(0,v.IV)({buffer:t,...o});this.settings=t,this.currentStartIndices=r.startIndices,this.currentLength=(0,v.pi)(r,e),this.attributeInTransition.setData({buffer:n[1],value:r.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aTo:(0,v.AQ)(i,r)}})}update(){const{buffers:t,transform:e,framebuffer:i,transition:n}=this;if(!n.update())return!1;const r=this.settings;return e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.stiffness,damping:r.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),(0,v.DY)(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),(0,O.z6)(i)[0]>0||n.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Y{constructor(t,{id:e,timeline:i}){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"isSupported",void 0),(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"timeline",void 0),(0,n.Z)(this,"transitions",void 0),(0,n.Z)(this,"needsRedraw",void 0),(0,n.Z)(this,"numInstances",void 0),this.id=e,this.gl=t,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=W.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:e,numInstances:i}){this.numInstances=i||1;for(const i in t){const n=t[i],r=n.getTransitionSetting(e);r&&this._updateAttribute(i,n,r)}for(const i in this.transitions){const n=t[i];n&&n.getTransitionSetting(e)||this._removeTransition(i)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const i=this.transitions[e];i.inProgress&&(t[e]=i.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,i){const n=this.transitions[t];let r=!n||n.type!==i.type;if(r){if(!this.isSupported)return void u.Z.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();n&&this._removeTransition(t);const o=Q[i.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(u.Z.error("unsupported transition type '".concat(i.type,"'"))(),r=!1)}(r||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(i,this.numInstances))}}const X="attributeManager.invalidate";class J{constructor(t,{id:e="attribute-manager",stats:i,timeline:r}={}){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"attributes",void 0),(0,n.Z)(this,"updateTriggers",void 0),(0,n.Z)(this,"needsRedraw",void 0),(0,n.Z)(this,"userData",void 0),(0,n.Z)(this,"stats",void 0),(0,n.Z)(this,"attributeTransitionManager",void 0),(0,n.Z)(this,"mergeBoundsMemoized",(0,b.Z)(c.cc)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new Y(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const i=this._invalidateTrigger(t,e);(0,_.Z)(X,this,t,i)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);(0,_.Z)(X,this,"all")}update({data:t,numInstances:e,startIndices:i=null,transitions:n,props:r={},buffers:o={},context:s={}}){let a=!1;(0,_.Z)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const n in this.attributes){const l=this.attributes[n],c=l.settings.accessor;l.startIndices=i,l.numInstances=e,r[n]&&u.Z.removed("props.".concat(n),"data.attributes.".concat(n))(),l.setExternalBuffer(o[n])||l.setBinaryValue("string"==typeof c?o[c]:void 0,t.startIndices)||"string"==typeof c&&!o[c]&&l.setConstantValue(r[c])||l.needsUpdate()&&(a=!0,this._updateAttribute({attribute:l,numInstances:e,data:t,props:r,context:s})),this.needsRedraw=this.needsRedraw||l.needsRedraw()}a&&(0,_.Z)("attributeManager.updateEnd",this,e),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:e,transitions:n})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){const e=t.map((t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()}));return this.mergeBoundsMemoized(e)}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:e,attributeTransitionManager:i}=this,n={...i.getAttributes()};for(const r in e){const o=e[r];o.needsRedraw(t)&&!i.hasAttribute(r)&&(n[r]=o)}return n}getShaderAttributes(t,e={}){t||(t=this.getAttributes());const i={};for(const n in t)e[n]||Object.assign(i,t[n].getShaderAttributes());return i}_add(t,e={}){for(const i in t){const n=t[i];this.attributes[i]=this._createAttribute(i,n,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,i){const n={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:i.instanced?1:e.divisor||0};return new y(this.gl,n)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes)this.attributes[e].getUpdateTriggers().forEach((i=>{t[i]||(t[i]=[]),t[i].push(e)}));this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:i,updateTriggers:n}=this,r=n[t];return r&&r.forEach((t=>{const n=i[t];n&&n.setNeedsUpdate(n.id,e)})),r}_updateAttribute(t){const{attribute:e,numInstances:i}=t;(0,_.Z)("attribute.updateStart",e),e.constant?e.setConstantValue(e.value):(e.allocate(i)&&(0,_.Z)("attribute.allocate",e,i),e.updateBuffer(t)&&(this.needsRedraw=!0,(0,_.Z)("attribute.updateEnd",e,i)))}}},9006:(t,e,i)=>{"use strict";function n(t){const{source:e,target:i,start:n=0,size:r,getData:o}=t,s=t.end||i.length,a=e.length,l=s-n;if(a>l)return void i.set(e.subarray(0,l),n);if(i.set(e,n),!o)return;let c=a;for(;c<l;){const t=o(c,e);for(let e=0;e<r;e++)i[n+c]=t[e]||0,c++}}i.d(e,{DY:()=>l,pi:()=>c,w:()=>a,AQ:()=>s,M0:()=>o,IV:()=>u});const r={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function o(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const i=t.type||"interpolation";return{...r[i],...e,...t,type:i}}function s(t,e){const i=e.getBuffer();return i?[i,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function a(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function l(t){t.push(t.shift())}function c(t,e){const{doublePrecision:i,settings:n,value:r,size:o}=t,s=i&&r instanceof Float64Array?2:1;return(n.noAlloc?r.length:e*o)*s}function u({buffer:t,numInstances:e,attribute:i,fromLength:r,fromStartIndices:o,getData:s=(t=>t)}){const a=i.doublePrecision&&i.value instanceof Float64Array?2:1,l=i.size*a,u=i.byteOffset,h=i.startIndices,d=o&&h,A=c(i,e),f=i.isConstant;if(!d&&r>=A)return;const p=f?i.value:i.getBuffer().getData({srcByteOffset:u});if(i.settings.normalized&&!f){const t=s;s=(e,n)=>i.normalizeConstant(t(e,n))}const g=f?(t,e)=>s(p,e):(t,e)=>s(p.subarray(t,t+l),e),m=t.getData({length:r}),v=new Float32Array(A);!function({source:t,target:e,size:i,getData:r,sourceStartIndices:o,targetStartIndices:s}){if(!Array.isArray(s))return n({source:t,target:e,size:i,getData:r}),e;let a=0,l=0;const c=r&&((t,e)=>r(t+l,e)),u=Math.min(o.length,s.length);for(let r=1;r<u;r++){const u=o[r]*i,h=s[r]*i;n({source:t.subarray(a,u),target:e,start:l,end:h,size:i,getData:c}),a=u,l=h}l<e.length&&n({source:[],target:e,start:l,size:i,getData:c})}({source:m,target:v,sourceStartIndices:o,targetStartIndices:h,size:l,getData:g}),t.byteLength<v.byteLength+u&&t.reallocate(v.byteLength+u),t.subData({data:v,offset:u})}},8918:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(4942),r=i(4185),o=i(3803),s=i(1855),a=i(5409);class l extends r.Z{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id?(t.object=e.__source.object,t.index=e.__source.index,t):t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:i}=this.props;return i&&i[t]&&i[t].type||e}getSubLayerRow(t,e,i){return t.__source={parent:this,object:e,index:i},t}getSubLayerAccessor(t){if("function"==typeof t){const e={index:-1,data:this.props.data,target:[]};return(i,n)=>i&&i.__source?(e.index=i.__source.index,t(i.__source.object,e)):t(i,n)}return t}getSubLayerProps(t={}){var e;const{opacity:i,pickable:n,visible:r,parameters:o,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:d,wrapLongitude:A,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v,_subLayerProps:y}=this.props,b={id:"",updateTriggers:{},opacity:i,pickable:n,visible:r,parameters:o,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:d,wrapLongitude:A,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v},_=y&&t.id&&y[t.id],w=_&&_.updateTriggers,x=t.id||"sublayer";if(_){const e=this.props[a.Wb],i=t.type?t.type._propTypes:{};for(const t in _){const n=i[t]||e[t];n&&"accessor"===n.type&&(_[t]=this.getSubLayerAccessor(_[t]))}}Object.assign(b,t,_),b.id="".concat(this.props.id,"-").concat(x),b.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...w};for(const t of g){const e=t.getSubLayerProps.call(this,t);e&&Object.assign(b,e,{updateTriggers:Object.assign(b.updateTriggers,e.updateTriggers)})}return b}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let i=this.internalState.subLayers;const n=!i||this.needsUpdate();if(n){const t=this.renderLayers();i=(0,s.x)(t,Boolean),this.internalState.subLayers=i}(0,o.Z)("compositeLayer.renderLayers",this,n,i);for(const t of i)t.parent=this}}(0,n.Z)(l,"layerName","CompositeLayer")},4088:(t,e,i)=>{"use strict";i.d(e,{Df:()=>r,FP:()=>a,iI:()=>s,k8:()=>l,zG:()=>o});var n=i(744);const r={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(r,"IDENTITY",{get:()=>(n.Z.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const o={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},s={common:0,meters:1,pixels:2},a={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},l={DRAW:"draw",MASK:"mask",TERRAIN:"terrain"}},3693:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(4942),r=i(6871);class o{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(t){(0,n.Z)(this,"opts",void 0),t&&(this.opts=t)}equals(t){return this===t||this.constructor===t.constructor&&(0,r.v)(this.opts,t.opts,1)}getShaders(t){return null}getSubLayerProps(t){const{defaultProps:e}=t.constructor,i={updateTriggers:{}};for(const t in e)if(t in this.props){const n=e[t],r=this.props[t];i[t]=r,n&&"accessor"===n.type&&(i.updateTriggers[t]=this.props.updateTriggers[t],"function"==typeof r&&(i[t]=this.getSubLayerAccessor(r)))}return i}initializeState(t,e){}updateState(t,e){}onNeedsRedraw(t){}getNeedsPickingBuffer(t){return!1}draw(t,e){}finalizeState(t,e){}}(0,n.Z)(o,"defaultProps",{}),(0,n.Z)(o,"extensionName","LayerExtension")},4185:(t,e,i)=>{"use strict";i.d(e,{Z:()=>K});var n=i(4942),r=i(4088),o=i(1476),s=i(9006),a=i(4034),l=i(3630);class c extends l.Z{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:i,duration:n,easing:r}}=this,o=r(t/n);this._value=(0,a.t7)(e,i,o)}}const u=1e-5;function h(t,e,i,n,r){const o=e-t;return(i-e)*r+-o*n+o+e}function d(t,e){if(Array.isArray(t)){let i=0;for(let n=0;n<t.length;n++){const r=t[n]-e[n];i+=r*r}return Math.sqrt(i)}return Math.abs(t-e)}class A extends l.Z{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:i,stiffness:n}=this.settings,{_prevValue:r=t,_currValue:o=t}=this;let s=function(t,e,i,n,r){if(Array.isArray(i)){const o=[];for(let s=0;s<i.length;s++)o[s]=h(t[s],e[s],i[s],n,r);return o}return h(t,e,i,n,r)}(r,o,e,i,n);const a=d(s,e),l=d(s,o);a<u&&l<u&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}var f=i(744);const p={interpolation:c,spring:A};class g{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,i,n){const{transitions:r}=this;if(r.has(t)){const i=r.get(t),{value:n=i.settings.fromValue}=i;e=n,this.remove(t)}if(!(n=(0,s.M0)(n)))return;const o=p[n.type];if(!o)return void f.Z.error("unsupported transition type '".concat(n.type,"'"))();const a=new o(this.timeline);a.start({...n,fromValue:e,toValue:i}),r.set(t,a)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,i]of this.transitions)i.update(),t[e]=i.value,i.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}var m=i(1761),v=i(5409),y=i(5015),b=i(3803),_=i(9450),w=i(5304),x=i(8177),C=i(7870),E=i(8547),k=i(6610),T=i(8550),B=i(4912);const S={10241:9987,10240:9729,10242:33071,10243:33071},P={};var M=i(6871);const I={boolean:{validate:(t,e)=>!0,equal:(t,e,i)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||L(t)&&(3===t.length||4===t.length),equal:(t,e,i)=>(0,M.v)(t,e,1)},accessor:{validate(t,e){const i=F(t);return"function"===i||i===F(e.value)},equal:(t,e,i)=>"function"==typeof e||(0,M.v)(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||L(t),equal(t,e,i){const{compare:n}=i,r=Number.isInteger(n)?n:n?1:0;return n?(0,M.v)(t,e,r):t===e}},object:{equal(t,e,i){if(i.ignore)return!0;const{compare:n}=i,r=Number.isInteger(n)?n:n?1:0;return n?(0,M.v)(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,i)=>!i.compare&&!1!==i.ignore||t===e},data:{transform:(t,e,i)=>{const{dataTransform:n}=i.props;return n&&t?n(t):t}},image:{transform:(t,e,i)=>{const n=i.context;return n&&n.gl?function(t,e,i,n){if(i instanceof B.Z)return i;i.constructor&&"Object"!==i.constructor.name&&(i={data:i});let r=null;i.compressed&&(r={10241:i.data.length>1?9985:9729});const o=new B.Z(e,{...i,parameters:{...S,...r,...n}});return P[o.id]=t,o}(i.id,n.gl,t,{...e.parameters,...i.props.textureParameters}):null},release:(t,e,i)=>{var n,r;n=i.id,(r=t)&&r instanceof B.Z&&P[r.id]===n&&(r.delete(),delete P[r.id])}}};function O(t,e){switch(F(e)){case"object":return D(t,e);case"array":return D(t,{type:"array",value:e,compare:!1});case"boolean":return D(t,{type:"boolean",value:e});case"number":return D(t,{type:"number",value:e});case"function":return D(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function D(t,e){return"type"in e?{name:t,...I[e.type],...e}:"value"in e?{name:t,type:F(e.value),...e}:{name:t,type:"object",value:e}}function L(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function F(t){return L(t)?"array":null===t?"null":typeof t}function R(t,e){let i="_mergedDefaultProps";if(e)for(const t of e){const e=t.constructor;e&&(i+=":".concat(e.extensionName||e.name))}return j(t,i)||(t[i]=function(t,e){if(!t.prototype)return null;const i=R(Object.getPrototypeOf(t)),n=function(t){const e={},i={},n={};for(const[r,o]of Object.entries(t)){const t=null==o?void 0:o.deprecatedFor;if(t)n[r]=Array.isArray(t)?t:[t];else{const t=O(r,o);e[r]=t,i[r]=t.value}}return{propTypes:e,defaultProps:i,deprecatedProps:n}}(j(t,"defaultProps")||{}),r=Object.assign(Object.create(null),i,n.defaultProps),o=Object.assign(Object.create(null),null==i?void 0:i[v.Wb],n.propTypes),s=Object.assign(Object.create(null),null==i?void 0:i[v.E7],n.deprecatedProps);for(const t of e){const e=R(t.constructor);e&&(Object.assign(r,e),Object.assign(o,e[v.Wb]),Object.assign(s,e[v.E7]))}return function(t,e){const i=function(t){const e=t.componentName;return e||f.Z.warn("".concat(t.name,".componentName not specified"))(),e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:i}})}(r,t),function(t,e){const i={},n={};for(const t in e){const r=e[t],{name:o,value:s}=r;r.async&&(i[o]=s,n[o]=N(o))}t[v.lY]=i,t[v.fO]={},Object.defineProperties(t,n)}(r,o),function(t,e){for(const i in e)Object.defineProperty(t,i,{enumerable:!1,set(t){const n="".concat(this.id,": ").concat(i);for(const n of e[i])z(this,n)||(this[n]=t);f.Z.deprecated(n,e[i].join("/"))()}})}(r,s),r[v.Wb]=o,r[v.E7]=s,0!==e.length||z(t,"_propTypes")||(t._propTypes=o),r}(t,e||[]))}function N(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||(0,T.D0)(e)?this[v.fO][t]=e:this[v.bN][t]=e},get(){if(this[v.bN]){if(t in this[v.bN])return this[v.bN][t]||this[v.lY][t];if(t in this[v.fO]){const e=this[v.fm]&&this[v.fm].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[v.lY][t]}}return this[v.lY][t]}}}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function j(t,e){return z(t,e)&&t[e]}let U=0;class Z{constructor(...t){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"props",void 0),(0,n.Z)(this,"count",void 0),this.props=function(t,e){let i;for(let t=e.length-1;t>=0;t--){const n=e[t];"extensions"in n&&(i=n.extensions)}const n=R(t.constructor,i),r=Object.create(n);r[v.fm]=t,r[v.fO]={},r[v.bN]={};for(let t=0;t<e.length;++t){const i=e[t];for(const t in i)r[t]=i[t]}return Object.freeze(r),r}(this,t),this.id=this.props.id,this.count=U++}clone(t){const{props:e}=this,i={};for(const t in e[v.lY])t in e[v.bN]?i[t]=e[v.bN][t]:t in e[v.fO]&&(i[t]=e[v.fO][t]);return new this.constructor({...e,...i,...t})}}(0,n.Z)(Z,"componentName","Component"),(0,n.Z)(Z,"defaultProps",{});const H=Object.freeze({});class G extends class{constructor(t){(0,n.Z)(this,"component",void 0),(0,n.Z)(this,"onAsyncPropUpdated",void 0),(0,n.Z)(this,"asyncProps",void 0),(0,n.Z)(this,"oldProps",void 0),(0,n.Z)(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||H}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[v.fm]||this.component;const e=t[v.bN]||{},i=t[v.fO]||t,n=t[v.lY]||{};for(const t in e){const i=e[t];this._createAsyncPropData(t,n[t]),this._updateAsyncProp(t,i),e[t]=this.getAsyncProp(t)}for(const t in i){const e=i[t];this._createAsyncPropData(t,n[t]),this._updateAsyncProp(t,e)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"==typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):(0,T.D0)(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const i=this.asyncProps[t];return e!==i.resolvedValue&&e!==i.lastValue&&(i.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const i=this.asyncProps[t];i&&(e=this._postProcessValue(i,e),i.resolvedValue=e,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(t,e,i){const n=this.asyncProps[t];n&&i>=n.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),n.resolvedValue=e,n.resolvedLoadCount=i,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const i=this.asyncProps[t];if(i){i.pendingLoadCount++;const n=i.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(i,e),this._setAsyncPropValue(t,e,n),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const i=this.asyncProps[t];if(!i)return;i.pendingLoadCount++;const n=i.pendingLoadCount;let r=[],o=0;for await(const i of e){if(!this.component)return;const{dataTransform:e}=this.component.props;r=e?e(i,r):r.concat(i),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:o,endRow:r.length}]}),o=r.length,this._setAsyncPropValue(t,r,n)}this._onResolve(t,r)}_postProcessValue(t,e){const i=t.type;return i&&this.component&&(i.release&&i.release(t.resolvedValue,i,this.component),i.transform)?i.transform(e,i,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const i=this.component&&this.component.props[v.Wb];this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}{constructor({attributeManager:t,layer:e}){super(e),(0,n.Z)(this,"attributeManager",void 0),(0,n.Z)(this,"needsRedraw",void 0),(0,n.Z)(this,"needsUpdate",void 0),(0,n.Z)(this,"subLayers",void 0),(0,n.Z)(this,"usesPickingColorCache",void 0),(0,n.Z)(this,"hasPickingBuffer",void 0),(0,n.Z)(this,"changeFlags",void 0),(0,n.Z)(this,"viewport",void 0),(0,n.Z)(this,"uniformTransitions",void 0),(0,n.Z)(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const i=this.layer,n=null==i?void 0:i.props.fetch;return n?n(e,{propName:t,layer:i}):super._fetch(t,e)}_onResolve(t,e){const i=this.layer;if(i){const n=i.props.onDataLoad;"data"===t&&n&&n(e,{propName:t,layer:i})}}_onError(t,e){const i=this.layer;i&&i.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}var V=i(7013),W=i(3878);const q=2**24-1,Q=Object.freeze([]),Y=(0,x.Z)((({oldViewport:t,viewport:e})=>t.equals(e)));let X=new Uint8ClampedArray(0);const J={data:{type:"data",value:Q,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:i,loaders:n,loadOptions:r,signal:o})=>{const{resourceManager:s}=i.context;var a;r=r||i.getLoadOptions(),n=n||i.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let l=s.contains(t);return l||r||(s.add({resourceId:t,data:(0,W.z)(t,n),persistent:!1}),l=!0),l?s.subscribe({resourceId:t,onChange:t=>{var n;return null===(n=i.internalState)||void 0===n?void 0:n.reloadAsyncProp(e,t)},consumerId:i.id,requestId:e}):(0,W.z)(t,n,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:r.Df.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class K extends Z{constructor(...t){super(...t),(0,n.Z)(this,"internalState",null),(0,n.Z)(this,"lifecycle",v.dt.NO_STATE),(0,n.Z)(this,"context",void 0),(0,n.Z)(this,"state",void 0),(0,n.Z)(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){(0,w.Z)(this.internalState);const e=this.internalState.viewport||this.context.viewport,i=(0,E.T)(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[n,r,o]=(0,V.aW)(i,e.pixelProjectionMatrix);return 2===t.length?[n,r]:[n,r,o]}unproject(t){return(0,w.Z)(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){(0,w.Z)(this.internalState);const i=this.internalState.viewport||this.context.viewport;return(0,E.D)(t,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===r.Df.DEFAULT||t===r.Df.LNGLAT||t===r.Df.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){(0,w.Z)(t instanceof Uint8Array);const[e,i,n]=t;return e+256*i+65536*n-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:(0,y.Q)(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(const e of this.props.extensions)t=(0,C.l)(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:i}=t.changeFlags;if(i&&e)if(Array.isArray(i))for(const t of i)e.invalidateAll(t);else e.invalidateAll();if(e){const{props:i}=t,n=this.internalState.hasPickingBuffer,r=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(n!==r){this.internalState.hasPickingBuffer=r;const{pickingColors:t,instancePickingColors:i}=e.attributes,n=t||i;n&&(r&&n.constant&&(n.constant=!1,e.invalidate(n.id)),n.value||r||(n.constant=!0,n.value=[0,0,0]))}}}finalizeState(t){for(const t of this.getModels())t.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e,sourceLayer:i}){const{index:n}=t;return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}raiseError(t,e){var i,n,r,o;e&&(t.message="".concat(e,": ").concat(t.message)),null!==(i=(n=this.props).onError)&&void 0!==i&&i.call(n,t)||null===(r=this.context)||void 0===r||null===(o=r.onError)||void 0===o||o.call(r,t,this)}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&Y({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,i=this.getNumInstances(),n=this.getStartIndices();t.update({data:e.data,numInstances:i,startIndices:n,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const r=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(r)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),i=Object.create(this.props);for(const t in e)Object.defineProperty(i,t,{value:e[t]});return i}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;const i=Math.floor(X.length/3);if(this.internalState.usesPickingColorCache=!0,i<e){e>q&&f.Z.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),X=k.Z.allocate(X,e,{size:3,copy:!0,maxCount:Math.max(e,q)});const t=Math.floor(X.length/3),n=[];for(let e=i;e<t;e++)this.encodePickingColor(e,n),X[3*e+0]=n[0],X[3*e+1]=n[1],X[3*e+2]=n[2]}t.value=X.subarray(0,3*e)}_setModelAttributes(t,e){const i=this.getAttributeManager(),n=t.userData.excludeAttributes||{},r=i.getShaderAttributes(e,n);t.setAttributes(r)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:i,instancePickingColors:n}=this.getAttributeManager().attributes,r=i||n,o=r&&e.attributes&&e.attributes[r.id];if(o&&o.value){const i=o.value,n=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=r.getVertexOffset(t);i[e]===n[0]&&i[e+1]===n[1]&&i[e+2]===n[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:i}=this.getAttributeManager().attributes,n=e||i;if(!n)return;const r=n.getVertexOffset(t),o=n.getVertexOffset(t+1);n.buffer.subData({data:new Uint8Array(o-r),offset:r})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,i=t||e;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==X.buffer&&(i.value=X.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){(0,w.Z)(!this.internalState),(0,w.Z)(Number.isFinite(this.props.coordinateSystem)),(0,b.Z)("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new G({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(f.Z.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new g(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){(0,b.Z)("layer.matched",this,this===t);const{state:e,internalState:i}=t;this!==t&&(this.internalState=i,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if((0,b.Z)("layer.update",this,t),!t)return;const e=this.props,i=this.context,n=this.internalState,r=i.viewport,o=this._updateUniformTransition();n.propsInTransition=o,i.viewport=n.viewport||r,this.props=o;try{const t=this._getUpdateParams(),o=this.getModels();if(i.gl)this.updateState(t);else try{this.updateState(t)}catch(t){}for(const e of this.props.extensions)e.updateState.call(this,t,e);const s=this.getModels()[0]!==o[0];this._postUpdate(t,s)}finally{i.viewport=r,this.props=e,this._clearChangeFlags(),n.needsUpdate=!1,n.resetOldProps()}}_finalize(){(0,b.Z)("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer({moduleParameters:t=null,uniforms:e={},parameters:i={}}){this._updateAttributeTransition();const n=this.props,r=this.context;this.props=this.internalState.propsInTransition||n;const o=this.props.opacity;e.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:o}=this.props,s=o&&o(e)||[0,0];(0,_.dR)(r.gl,{polygonOffset:s}),(0,_.s8)(r.gl,i,(()=>{const n={moduleParameters:t,uniforms:e,parameters:i,context:r};for(const t of this.props.extensions)t.draw.call(this,n,t);this.draw(n)}))}finally{this.props=n}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const i in t)if(t[i]){let n=!1;if("dataChanged"===i){const r=t[i],o=e[i];r&&Array.isArray(o)&&(e.dataChanged=Array.isArray(r)?o.concat(r):r,n=!0)}e[i]||(e[i]=t[i],n=!0),n&&(0,b.Z)("layer.changeFlag",this,i,t)}const i=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=i,e.somethingChanged=i||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const i=(0,m.Yt)(t,e);if(i.updateTriggersChanged)for(const t in i.updateTriggersChanged)i.updateTriggersChanged[t]&&this.invalidateAttribute(t);if(i.transitionsChanged)for(const r in i.transitionsChanged){var n;this.internalState.uniformTransitions.add(r,e[r],t[r],null===(n=t.transitions)||void 0===n?void 0:n[r])}return this.setChangeFlags(i)}validateProps(){(0,m.eQ)(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:i}=this.props;t.picked&&"function"==typeof i&&(e.pickingHighlightColor=i(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new o.Z(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:i,oldProps:n}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:r}=this.state;null==r||r.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=i;if(e||n.autoHighlight!==o||n.highlightedObjectIndex!==s||n.highlightColor!==a){const t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),(e||s!==n.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),n=!!i&&i.getNeedsRedraw(t);if(e=e||n,e)for(const t of this.props.extensions)t.onNeedsRedraw.call(this,t);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}(0,n.Z)(K,"defaultProps",J),(0,n.Z)(K,"layerName","Layer")},5409:(t,e,i)=>{"use strict";i.d(e,{E7:()=>s,Wb:()=>o,bN:()=>c,dt:()=>n,fO:()=>l,fm:()=>r,lY:()=>a});const n={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},r=Symbol.for("component"),o=Symbol.for("propTypes"),s=Symbol.for("deprecatedProps"),a=Symbol.for("asyncPropDefaults"),l=Symbol.for("asyncPropOriginal"),c=Symbol.for("asyncPropResolved")},1761:(t,e,i)=>{"use strict";i.d(e,{Yt:()=>o,eQ:()=>r,tg:()=>a});var n=i(5409);function r(t){const e=t[n.Wb];for(const i in e){const n=e[i],{validate:r}=n;if(r&&!r(t[i],n))throw new Error("Invalid prop ".concat(i,": ").concat(t[i]))}}function o(t,e){const i=a({newProps:t,oldProps:e,propTypes:t[n.Wb],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let i=!1;const{dataComparator:n,_dataDiff:r}=t;return n?n(t.data,e.data)||(i="Data comparator detected a change"):t.data!==e.data&&(i="A new data container was supplied"),i&&r&&(i=r(t.data,e.data)||i),i}(t,e);let o=!1;return r||(o=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&u(t,e,"all"))return{all:!0};const i={};let n=!1;for(const r in t.updateTriggers)"all"!==r&&u(t,e,r)&&(i[r]=!0,n=!0);return!!n&&i}(t,e)),{dataChanged:r,propsChanged:i,updateTriggersChanged:o,extensionsChanged:c(t,e),transitionsChanged:s(t,e)}}function s(t,e){if(!t.transitions)return!1;const i={},r=t[n.Wb];let o=!1;for(const n in t.transitions){const s=r[n],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&l(t[n],e[n],s)&&(i[n]=!0,o=!0)}return!!o&&i}function a({newProps:t,oldProps:e,ignoreProps:i={},propTypes:n={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t)return"".concat(r," changed shallowly");if("object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(t))if(!(o in i)){if(!(o in e))return"".concat(r,".").concat(o," added");const i=l(t[o],e[o],n[o]);if(i)return"".concat(r,".").concat(o," ").concat(i)}for(const o of Object.keys(e))if(!(o in i)){if(!(o in t))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const i=l(t[o],e[o],n[o]);if(i)return"".concat(r,".").concat(o," ").concat(i)}}return!1}function l(t,e,i){let n=i&&i.equal;return n&&!n(t,e,i)?"changed deeply":n||(n=t&&e&&t.equals,!n||n.call(t,e))?n||e===t?null:"changed shallowly":"changed deeply"}function c(t,e){if(null===e)return!0;const i=e.extensions,{extensions:n}=t;if(n===i)return!1;if(!i||!n)return!0;if(n.length!==i.length)return!0;for(let t=0;t<n.length;t++)if(!n[t].equals(i[t]))return!0;return!1}function u(t,e,i){let n=t.updateTriggers[i];n=null==n?{}:n;let r=e.updateTriggers[i];return r=null==r?{}:r,a({oldProps:r,newProps:n,triggerName:i})}},3182:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(4942),r=i(830),o=i(9450),s=i(6047);class a extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"_lastRenderIndex",-1)}render(t){const e=this.gl;return(0,o.dR)(e,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:i,viewports:n,views:r,onViewportActive:s,clearStack:a=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const c=this.gl;l&&function(t,e){const i=e?e.width:t.drawingBufferWidth,n=e?e.height:t.drawingBufferHeight;(0,o.dR)(t,{viewport:[0,0,i,n]}),t.clear(16640)}(c,e),a&&(this._lastRenderIndex=-1);const u=[];for(const o of n){const n=r&&r[o.id];null==s||s(o);const a=this._getDrawLayerParams(o,t),l=o.subViewports||[o];for(const r of l){const o=this._drawLayersInViewport(c,{target:e,moduleParameters:i,viewport:r,view:n,pass:t.pass,layers:t.layers},a);u.push(o)}}return u}_getDrawLayerParams(t,{layers:e,pass:i,isPicking:n=!1,layerFilter:r,cullRect:o,effects:s,moduleParameters:a},c=!1){const u=[],h=l(this._lastRenderIndex+1),d={layer:e[0],viewport:t,isPicking:n,renderPass:i,cullRect:o},A={};for(let n=0;n<e.length;n++){const o=e[n],l=this._shouldDrawLayer(o,d,r,A),f={shouldDrawLayer:l};l&&!c&&(f.layerRenderIndex=h(o,l),f.moduleParameters=this._getModuleParameters(o,s,i,a),f.layerParameters=this.getLayerParameters(o,n,t)),u[n]=f}return u}_drawLayersInViewport(t,{layers:e,moduleParameters:i,pass:n,target:r,viewport:a,view:l},c){const u=function(t,{moduleParameters:e,target:i,viewport:n}){const r=i&&"default-framebuffer"!==i.id,s=e&&e.devicePixelRatio||(0,o.w)(t),a=r?i.height:t.drawingBufferHeight,l=n;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}(t,{moduleParameters:i,target:r,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;(0,o.s8)(t,{scissorTest:!0,scissor:u},(()=>(0,s.Z)(t,e)))}const h={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,o.dR)(t,{viewport:u});for(let t=0;t<e.length;t++){const i=e[t],{shouldDrawLayer:r,layerRenderIndex:o,moduleParameters:s,layerParameters:l}=c[t];if(r&&i.props.pickable&&h.pickableCount++,i.isComposite)h.compositeCount++;else if(r){h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,o),s.viewport=a;try{i._drawLayer({moduleParameters:s,uniforms:{layerIndex:o},parameters:l})}catch(t){i.raiseError(t,"drawing ".concat(i," to ").concat(n))}}}return h}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,i){return t.props.parameters}_shouldDrawLayer(t,e,i,n){if(!t.props.visible||!this.shouldDrawLayer(t))return!1;e.layer=t;let r=t.parent;for(;r;){if(!r.props.visible||!r.filterSubLayer(e))return!1;e.layer=r,r=r.parent}if(i){const t=e.layer.id;if(t in n||(n[t]=i(e)),!n[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,i,n){var r;const s=Object.assign(Object.create((null===(r=t.internalState)||void 0===r?void 0:r.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:(0,o.w)(this.gl)});if(e)for(const i of e){var a;Object.assign(s,null===(a=i.getModuleParameters)||void 0===a?void 0:a.call(i,t))}return Object.assign(s,this.getModuleParameters(t,e),n)}}function l(t=0,e={}){const i={},n=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let u;if(c&&!(c in e)&&n(r.parent,!1),c in i){const t=i[c]=i[c]||l(e[c],e);u=t(r,o),i[a]=t}else Number.isFinite(s)?(u=s+(e[c]||0),i[a]=null):u=t;return o&&u>=t&&(t=u+1),e[a]=u,u};return n}},830:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(4942);class r{constructor(t,e={id:"pass"}){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"props",void 0);const{id:i}=e;this.id=i,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}},930:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(4942),r=i(3182),o=i(9450),s=i(744);const a={blendFunc:[1,0,32771,0],blendEquation:32774};class l extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"pickZ",void 0),(0,n.Z)(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:i,viewports:n,onViewportActive:r,pickingFBO:s,deviceRect:{x:l,y:u,width:h,height:d},cullRect:A,effects:f,pass:p="picking",pickZ:g,moduleParameters:m}){const v=this.gl;this.pickZ=g;const y=this._resetColorEncoder(g),b=(0,o.s8)(v,{scissorTest:!0,scissor:[l,u,h,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...a,blend:!g},(()=>super.render({target:s,layers:t,layerFilter:e,views:i,viewports:n,onViewportActive:r,cullRect:A,effects:null==f?void 0:f.filter((t=>t.useInPicking)),pass:p,isPicking:!0,moduleParameters:m})));return this._colorEncoderState=null,{decodePickingColor:y&&c.bind(null,y),stats:b}}shouldDrawLayer(t){const{pickable:e,operation:i}=t.props;return e&&i.includes("draw")||i.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,i){const n={...t.props.parameters},{pickable:r,operation:o}=t.props;return this._colorEncoderState?r&&o.includes("draw")&&(Object.assign(n,a),n.blend=!0,n.blendColor=function(t,e,i){const{byLayer:n,byAlpha:r}=t;let o,a=n.get(e);return a?(a.viewports.push(i),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:e,viewports:[i]},n.set(e,a),r[o]=a):(s.Z.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colorEncoderState,t,i)):n.blend=!1,o.includes("terrain")&&(n.blend=!1),n}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function c(t,e){const i=t.byAlpha[e[3]];return i&&{pickedLayer:i.layer,pickedViewports:i.viewports,pickedObjectIndex:i.layer.decodePickingColor(e)}}},1331:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const n={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},r={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const i=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=i}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const i=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(i[3])||(i[3]=1),e.picking_uHighlightColor=i}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}}},8547:(t,e,i)=>{"use strict";i.d(e,{D:()=>d,T:()=>h});var n=i(4088),r=i(8771),o=i(6935),s=i(8333),a=i(7160),l=i(7013);const c=[0,0,0];function u(t,e,i=!1){const n=e.projectPosition(t);if(i&&e instanceof o.Z){const[i,r,o=0]=t,s=e.getDistanceScales([i,r]);n[2]=o*s.unitsPerMeter[2]}return n}function h(t,{viewport:e,modelMatrix:i,coordinateSystem:r,coordinateOrigin:o,offsetMode:a}){let[c,h,d=0]=t;switch(i&&([c,h,d]=s.fF([],[c,h,d,1],i)),r){case n.Df.LNGLAT:return u([c,h,d],e,a);case n.Df.LNGLAT_OFFSETS:return u([c+o[0],h+o[1],d+(o[2]||0)],e,a);case n.Df.METER_OFFSETS:return u((0,l.eG)(o,[c,h,d]),e,a);case n.Df.CARTESIAN:default:return e.isGeospatial?[c+o[0],h+o[1],d+o[2]]:e.projectPosition([c,h,d])}}function d(t,e){const{viewport:i,coordinateSystem:o,coordinateOrigin:s,modelMatrix:l,fromCoordinateSystem:u,fromCoordinateOrigin:d}=function(t){const{viewport:e,modelMatrix:i,coordinateOrigin:r}=t;let{coordinateSystem:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return o===n.Df.DEFAULT&&(o=e.isGeospatial?n.Df.LNGLAT:n.Df.CARTESIAN),void 0===s&&(s=o),void 0===a&&(a=r),{viewport:e,coordinateSystem:o,coordinateOrigin:r,modelMatrix:i,fromCoordinateSystem:s,fromCoordinateOrigin:a}}(e),{autoOffset:A=!0}=e,{geospatialOrigin:f=c,shaderCoordinateOrigin:p=c,offsetMode:g=!1}=A?(0,r.v)(i,o,s):{},m=h(t,{viewport:i,modelMatrix:l,coordinateSystem:u,coordinateOrigin:d,offsetMode:g});if(g){const t=i.projectPosition(f||p);a.lu(m,m,t)}return m}},6084:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});const n="#define SMOOTH_EDGE_RADIUS 0.5",r={name:"geometry",vs:"\n".concat(n,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(n,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")};var o=i(4088);const s=Object.keys(o.Df).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(o.Df[t],";"))).join(""),a=Object.keys(o.zG).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(o.zG[t],";"))).join(""),l=Object.keys(o.iI).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(o.iI[t],";"))).join(""),c="".concat(s,"\n").concat(a,"\n").concat(l,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");var u=i(8771);const h={},d={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},r],vs:c,getUniforms:function(t=h){return"viewport"in t?(0,u.C)(t):{}}}},8771:(t,e,i)=>{"use strict";i.d(e,{C:()=>f,v:()=>A});var n=i(5975),r=i(8333),o=i(4088),s=i(8177);const a=[0,0,0,0],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u=[0,0,0],h=[0,0,0],d=(0,s.Z)((function({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:s}){const{projectionCenter:h,viewProjectionMatrix:d,originCommon:f,cameraPosCommon:p,shaderCoordinateOrigin:g,geospatialOrigin:m}=function(t,e,i){const{viewMatrixUncentered:o,projectionMatrix:s}=t;let{viewMatrix:c,viewProjectionMatrix:u}=t,h=a,d=a,f=t.cameraPosition;const{geospatialOrigin:p,shaderCoordinateOrigin:g,offsetMode:m}=A(t,e,i);return m&&(d=t.projectPosition(p||g),f=[f[0]-d[0],f[1]-d[1],f[2]-d[2]],d[3]=1,h=r.fF([],d,u),c=o||c,u=n.Jp([],s,c),u=n.Jp([],u,l)),{viewMatrix:c,viewProjectionMatrix:u,projectionCenter:h,originCommon:d,cameraPosCommon:f,shaderCoordinateOrigin:g,geospatialOrigin:p}}(t,i,s),v=t.getDistanceScales(),y=[t.width*e,t.height*e],b=r.fF([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,_={project_uCoordinateSystem:i,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:g,project_uCommonOrigin:f.slice(0,3),project_uCenter:h,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:y,project_uDevicePixelRatio:e,project_uFocalDistance:b,project_uCommonUnitsPerMeter:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:u,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:d,project_uModelMatrix:c,project_uCameraPosition:p};if(m){const e=t.getDistanceScales(m);switch(i){case o.Df.METER_OFFSETS:_.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,_.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case o.Df.LNGLAT:case o.Df.LNGLAT_OFFSETS:t._pseudoMeters||(_.project_uCommonUnitsPerMeter=e.unitsPerMeter),_.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,_.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case o.Df.CARTESIAN:_.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],_.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return _}));function A(t,e,i=h){i.length<3&&(i=[i[0],i[1],0]);let n,r=i,s=!0;switch(n=e===o.Df.LNGLAT_OFFSETS||e===o.Df.METER_OFFSETS?i:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case o.zG.WEB_MERCATOR:e!==o.Df.LNGLAT&&e!==o.Df.CARTESIAN||(n=[0,0,0],s=!1);break;case o.zG.WEB_MERCATOR_AUTO_OFFSET:e===o.Df.LNGLAT?r=n:e===o.Df.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],n=t.unprojectPosition(r),r[0]-=i[0],r[1]-=i[1],r[2]-=i[2]);break;case o.zG.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case o.zG.GLOBE:s=!1,n=null;break;default:s=!1}return{geospatialOrigin:n,shaderCoordinateOrigin:r,offsetMode:s}}function f({viewport:t,devicePixelRatio:e=1,modelMatrix:i=null,coordinateSystem:n=o.Df.DEFAULT,coordinateOrigin:r=h,autoWrapLongitude:s=!1}){n===o.Df.DEFAULT&&(n=t.isGeospatial?o.Df.LNGLAT:o.Df.CARTESIAN);const a=d({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r});return a.project_uWrapLongitude=s,a.project_uModelMatrix=i||c,a}},3844:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={name:"project32",dependencies:[i(6084).Z],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},3630:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(4942);class r{constructor(t){(0,n.Z)(this,"_inProgress",void 0),(0,n.Z)(this,"_handle",void 0),(0,n.Z)(this,"_timeline",void 0),(0,n.Z)(this,"time",void 0),(0,n.Z)(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,i;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(i=this.settings).onStart)||void 0===e||e.call(i,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}},5304:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}i.d(e,{Z:()=>n})},5015:(t,e,i)=>{"use strict";function n(t){if(null===(e=t)||"object"!=typeof e)throw new Error("count(): argument not an object");var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}i.d(e,{Q:()=>n})},6871:(t,e,i)=>{"use strict";function n(t,e,i){if(t===e)return!0;if(!i||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r],i-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(const o of r){if(!e.hasOwnProperty(o))return!1;if(!n(t[o],e[o],i-1))return!1}return!0}return!1}i.d(e,{v:()=>n})},1855:(t,e,i)=>{"use strict";function n(t,e=(()=>!0)){return Array.isArray(t)?r(t,e,[]):e(t)?[t]:[]}function r(t,e,i){let n=-1;for(;++n<t.length;){const o=t[n];Array.isArray(o)?r(o,e,i):e(o)&&i.push(o)}return i}function o({target:t,source:e,start:i=0,count:n=1}){const r=e.length,o=n*r;let s=0;for(let n=i;s<r;s++)t[n++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(i+s,i,i+s),s*=2):(t.copyWithin(i+s,i,i+o-s),s=o);return t}i.d(e,{k:()=>o,x:()=>n})},8550:(t,e,i)=>{"use strict";i.d(e,{D0:()=>s,jB:()=>o,jr:()=>a});const n=[],r=[];function o(t,e=0,i=1/0){let o=n;const s={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?o=t:t.length>0&&(r.length=t.length,o=r):o=n,(e>0||Number.isFinite(i))&&(o=(Array.isArray(o)?o:Array.from(o)).slice(e,i),s.index=e-1),{iterable:o,objectInfo:s}}function s(t){return t&&t[Symbol.asyncIterator]}function a(t,e){const{size:i,stride:n,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,l=n?n/a:i,c=r?r/a:0,u=Math.floor((t.length-c)/l);return(e,{index:n,target:r})=>{if(!o){const e=n*l+c;for(let n=0;n<i;n++)r[n]=t[e+n];return r}const a=o[n],h=o[n+1]||u;let d;if(s){d=new Array(h-a);for(let e=a;e<h;e++){const n=e*l+c;r=new Array(i);for(let e=0;e<i;e++)r[e]=t[n+e];d[e-a]=r}}else if(l===i)d=t.subarray(a*i+c,h*i+c);else{d=new t.constructor((h-a)*i);let e=0;for(let n=a;n<h;n++){const r=n*l+c;for(let n=0;n<i;n++)d[e++]=t[r+n]}}return d}}},744:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=new(i(9109).Z)({id:"deck"})},5126:(t,e,i)=>{"use strict";i.d(e,{Du:()=>l,Ks:()=>h,TK:()=>A,Xt:()=>a,bS:()=>o,cc:()=>f,wQ:()=>s});var n=i(6610),r=i(3855);function o(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function s(t,e){const i=t%e;return i<0?e+i:i}function a(t){return[t[12],t[13],t[14]]}function l(t){return{left:u(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:u(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:u(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:u(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:u(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:u(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const c=new r.Z;function u(t,e,i,n){c.set(t,e,i);const o=c.len();return{distance:n/o,normal:new r.Z(-t/o,-e/o,-i/o)}}function h(t){return t-Math.fround(t)}let d;function A(t,e){const{size:i=1,startIndex:r=0}=e,o=void 0!==e.endIndex?e.endIndex:t.length,s=(o-r)/i;d=n.Z.allocate(d,s,{type:Float32Array,size:2*i});let a=r,l=0;for(;a<o;){for(let e=0;e<i;e++){const n=t[a++];d[l+e]=n,d[l+e+i]=h(n)}l+=2*i}return d.subarray(0,s*i*2)}function f(t){let e=null,i=!1;for(const n of t)n&&(e?(i||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],i=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}},8177:(t,e,i)=>{"use strict";function n(t,e){if(t===e)return!0;if(Array.isArray(t)){const i=t.length;if(!e||e.length!==i)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}return!1}function r(t){let e,i={};return r=>{for(const o in r)if(!n(r[o],i[o])){e=t(r),i=r;break}return e}}i.d(e,{Z:()=>r})},7870:(t,e,i)=>{"use strict";function n(t,e){if(!e)return t;const i={...t,...e};if("defines"in e&&(i.defines={...t.defines,...e.defines}),"modules"in e&&(i.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=i.modules.findIndex((t=>"project32"===t.name));t>=0&&i.modules.splice(t,1)}if("inject"in e)if(t.inject){const n={...t.inject};for(const t in e.inject)n[t]=(n[t]||"")+e.inject[t];i.inject=n}else i.inject=e.inject;return i}i.d(e,{l:()=>n})},8005:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(4942),r=i(8550),o=i(6610),s=i(5304),a=i(3478);class l{constructor(t){(0,n.Z)(this,"opts",void 0),(0,n.Z)(this,"typedArrayManager",void 0),(0,n.Z)(this,"indexStarts",[0]),(0,n.Z)(this,"vertexStarts",[0]),(0,n.Z)(this,"vertexCount",0),(0,n.Z)(this,"instanceCount",0),(0,n.Z)(this,"attributes",void 0),(0,n.Z)(this,"_attributeDefs",void 0),(0,n.Z)(this,"data",void 0),(0,n.Z)(this,"getGeometry",void 0),(0,n.Z)(this,"geometryBuffer",void 0),(0,n.Z)(this,"buffers",void 0),(0,n.Z)(this,"positionSize",void 0),(0,n.Z)(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=o.Z,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:i={},getGeometry:n,geometryBuffer:r,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=e,this.getGeometry=n,this.positionSize=r&&r.size||("XY"===o?2:3),this.buffers=i,this.normalize=l,r&&((0,s.Z)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(r),l||(i.positions=r)),this.geometryBuffer=i.positions,Array.isArray(a))for(const t of a)this._rebuildGeometry(t);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?(0,r.jr)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:i,buffers:n,_attributeDefs:r,typedArrayManager:o}=this;for(const s in r)if(s in n)o.release(i[s]),i[s]=null;else{const n=r[s];n.copy=e,i[s]=o.allocate(i[s],t,n)}}_forEachGeometry(t,e,i){const{data:n,getGeometry:o}=this,{iterable:s,objectInfo:a}=(0,r.jB)(n,e,i);for(const e of s)a.index++,t(o?o(e,a):null,a.index)}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:i,instanceCount:n}=this;const{data:r,geometryBuffer:o}=this,{startRow:s=0,endRow:l=1/0}=t||{},c={};if(t||(e=[0],i=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const n=t&&this.normalizeGeometry(t);c[e]=n,i[e+1]=i[e]+(n?this.getGeometrySize(n):0)}),s,l),n=i[i.length-1];else if(i=r.startIndices,n=i[r.length]||0,ArrayBuffer.isView(o))n=n||o.length/this.positionSize;else if(o instanceof a.Z){const t=o.accessor.stride||4*this.positionSize;n=n||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;n=n||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;n=n||t.length/e}this._allocate(n,Boolean(t)),this.indexStarts=e,this.vertexStarts=i,this.instanceCount=n;const u={};this._forEachGeometry(((t,r)=>{const o=c[r]||t;u.vertexStart=i[r],u.indexStart=e[r];const s=r<i.length-1?i[r+1]:n;u.geometrySize=s-i[r],u.geometryIndex=r,this.updateGeometryAttributes(o,u)}),s,l),this.vertexCount=e[e.length-1]}}},6610:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(4942);const r=new class{constructor(t={}){(0,n.Z)(this,"_pool",[]),(0,n.Z)(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:i=1,type:n,padding:r=0,copy:o=!1,initialize:s=!1,maxCount:a}){const l=n||t&&t.constructor||Float32Array,c=e*i+r;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new l(t.buffer,0,c)}let u=1/0;a&&(u=a*i+r);const h=this._allocate(l,c,s,u);return t&&o?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,e,i,n){let r=Math.max(Math.ceil(e*this.opts.overAlloc),1);r>n&&(r=n);const o=this._pool,s=t.BYTES_PER_ELEMENT*r,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,r);return i&&e.fill(0),e}return new t(r)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:i}=t,{byteLength:n}=i,r=e.findIndex((t=>t.byteLength>=n));r<0?e.push(i):(r>0||e.length<this.opts.poolSize)&&e.splice(r,0,i),e.length>this.opts.poolSize&&e.shift()}}},3131:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(4942),r=i(5451),o=i(9225),s=i(4088),a=i(7160),l=i(8333);const c=Math.PI/180,u=180/Math.PI,h=6370972,d=256;function A(){const t=4018225162502676e-20,e=Math.PI/180*d;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}class f extends o.Z{constructor(t={}){const{latitude:e=0,longitude:i=0,zoom:o=0,nearZMultiplier:s=.1,farZMultiplier:a=2,resolution:l=10}=t;let{height:u,altitude:h=1.5}=t;u=u||1,h=Math.max(.75,h);const d=(new r.Z).lookAt({eye:[0,-h,0],up:[0,0,1]}),f=Math.pow(2,o);d.rotateX(e*c),d.rotateZ(-i*c),d.scale(f/u);const p=Math.atan(.5/h),g=512*f/u;super({...t,height:u,viewMatrix:d,longitude:i,latitude:e,zoom:o,distanceScales:A(),fovyRadians:2*p,focalDistance:h,near:s,far:Math.min(2,1/g+1)*h*a}),(0,n.Z)(this,"longitude",void 0),(0,n.Z)(this,"latitude",void 0),(0,n.Z)(this,"resolution",void 0),this.latitude=e,this.longitude=i,this.resolution=l}get projectionMode(){return s.zG.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const e={targetZ:t.z||0},i=this.unproject([0,this.height/2],e),n=this.unproject([this.width/2,0],e),r=this.unproject([this.width,this.height/2],e),o=this.unproject([this.width/2,this.height],e);return r[0]<this.longitude&&(r[0]+=360),i[0]>this.longitude&&(i[0]-=360),[Math.min(i[0],r[0],n[0],o[0]),Math.min(i[1],r[1],n[1],o[1]),Math.max(i[0],r[0],n[0],o[0]),Math.max(i[1],r[1],n[1],o[1])]}unproject(t,{topLeft:e=!0,targetZ:i}={}){const[n,r,o]=t,s=e?r:this.height-r,{pixelUnprojectionMatrix:l}=this;let c;if(Number.isFinite(o))c=p(l,[n,s,o,1]);else{const t=p(l,[n,s,-1,1]),e=p(l,[n,s,1,1]),r=((i||0)/h+1)*d,o=a.x9(a.lu([],t,e)),u=a.x9(t),A=a.x9(e),f=(4*u*A-(o-u-A)**2)/16*4/o,g=(Math.sqrt(u-f)-Math.sqrt(Math.max(0,r*r-f)))/Math.sqrt(o);c=a.t7([],t,e,g)}const[u,A,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,A,f]:Number.isFinite(i)?[u,A,i]:[u,A]}projectPosition(t){const[e,i,n=0]=t,r=e*c,o=i*c,s=Math.cos(o),a=(n/h+1)*d;return[Math.sin(r)*s*a,-Math.cos(r)*s*a,Math.sin(o)*a]}unprojectPosition(t){const[e,i,n]=t,r=a.Zh(t),o=Math.asin(n/r);return[Math.atan2(e,-i)*u,o*u,(r/d-1)*h]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const i=this.unproject(e);return{longitude:t[0]-i[0]+this.longitude,latitude:t[1]-i[1]+this.latitude}}}function p(t,e){const i=l.fF([],e,t);return l.bA(i,i,1/i[3]),i}},9573:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(9225),r=i(5451),o=i(4034),s=i(7013),a=i(1437);const l=(new r.Z).lookAt({eye:[0,0,1]});function c({width:t,height:e,near:i,far:n,padding:s}){let a=-t/2,l=t/2,c=-e/2,u=e/2;if(s){const{left:i=0,right:n=0,top:r=0,bottom:h=0}=s,d=(0,o.uZ)((i+t-n)/2,0,t)-t/2,A=(0,o.uZ)((r+e-h)/2,0,e)-e/2;a-=d,l-=d,c+=A,u+=A}return(new r.Z).ortho({left:a,right:l,bottom:c,top:u,near:i,far:n})}class u extends n.Z{constructor(t){const{width:e,height:i,near:n=.1,far:r=1e3,zoom:o=0,target:s=[0,0,0],padding:a=null,flipY:u=!0}=t,h=Array.isArray(o)?o[0]:o,d=Array.isArray(o)?o[1]:o,A=Math.min(h,d),f=Math.pow(2,A);let p;if(h!==d){const t=Math.pow(2,h),e=Math.pow(2,d);p={unitsPerMeter:[t/f,e/f,1],metersPerUnit:[f/t,f/e,1]}}super({...t,longitude:void 0,position:s,viewMatrix:l.clone().scale([f,f*(u?-1:1),f]),projectionMatrix:c({width:e||1,height:i||1,padding:a,near:n,far:r}),zoom:A,distanceScales:p})}projectFlat([t,e]){const{unitsPerMeter:i}=this.distanceScales;return[t*i[0],e*i[1]]}unprojectFlat([t,e]){const{metersPerUnit:i}=this.distanceScales;return[t*i[0],e*i[1]]}panByPosition(t,e){const i=(0,s.CT)(e,this.pixelUnprojectionMatrix),n=this.projectFlat(t),r=a.IH([],n,a.tk([],i)),o=a.IH([],this.center,r);return{target:this.unprojectFlat(o)}}}},9225:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n=i(4942),r=i(744),o=i(5126),s=i(5451),a=i(4034),l=i(3855),c=i(5975),u=i(7013),h=i(4088);const d=Math.PI/180,A=(0,o.bS)(),f=[0,0,0],p={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class g{constructor(t={}){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"x",void 0),(0,n.Z)(this,"y",void 0),(0,n.Z)(this,"width",void 0),(0,n.Z)(this,"height",void 0),(0,n.Z)(this,"padding",void 0),(0,n.Z)(this,"isGeospatial",void 0),(0,n.Z)(this,"zoom",void 0),(0,n.Z)(this,"focalDistance",void 0),(0,n.Z)(this,"position",void 0),(0,n.Z)(this,"modelMatrix",void 0),(0,n.Z)(this,"distanceScales",void 0),(0,n.Z)(this,"scale",void 0),(0,n.Z)(this,"center",void 0),(0,n.Z)(this,"cameraPosition",void 0),(0,n.Z)(this,"projectionMatrix",void 0),(0,n.Z)(this,"viewMatrix",void 0),(0,n.Z)(this,"viewMatrixUncentered",void 0),(0,n.Z)(this,"viewMatrixInverse",void 0),(0,n.Z)(this,"viewProjectionMatrix",void 0),(0,n.Z)(this,"pixelProjectionMatrix",void 0),(0,n.Z)(this,"pixelUnprojectionMatrix",void 0),(0,n.Z)(this,"resolution",void 0),(0,n.Z)(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||p,this.focalDistance=t.focalDistance||1,this.position=t.position||f,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:i}=t;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?h.zG.WEB_MERCATOR:h.zG.WEB_MERCATOR_AUTO_OFFSET:h.zG.IDENTITY}equals(t){return t instanceof g&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,a.fS)(t.projectionMatrix,this.projectionMatrix)&&(0,a.fS)(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){const i=this.projectPosition(t),n=(0,u.aW)(i,this.pixelProjectionMatrix),[r,o]=n,s=e?o:this.height-o;return 2===t.length?[r,s]:[r,s,n[2]]}unproject(t,{topLeft:e=!0,targetZ:i}={}){const[n,r,o]=t,s=e?r:this.height-r,a=i&&i*this.distanceScales.unitsPerMeter[2],l=(0,u.CT)([n,s,o],this.pixelUnprojectionMatrix,a),[c,h,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,h,d]:Number.isFinite(i)?[c,h,i]:[c,h]}projectPosition(t){const[e,i]=this.projectFlat(t);return[e,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,i]=this.unprojectFlat(t);return[e,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=(0,u.w5)(t);return e[1]=(0,a.uZ)(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?(0,u.es)(t):t}getBounds(t={}){const e={targetZ:t.z||0},i=this.unproject([0,0],e),n=this.unproject([this.width,0],e),r=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(i[0],n[0],r[0],o[0]),Math.min(i[1],n[1],r[1],o[1]),Math.max(i[0],n[0],r[0],o[0]),Math.max(i[1],n[1],r[1],o[1])]}getDistanceScales(t){return t?(0,u.ro)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:e,width:i=1,height:n=1}){return t<this.x+this.width&&this.x<t+i&&e<this.y+this.height&&this.y<e+n}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(0,o.Du)(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,i=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=(0,u.Bf)({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||(0,u.ro)({latitude:i,longitude:e}));const n=Math.pow(2,this.zoom);this.scale=n;const{position:r,modelMatrix:o}=t;let a=f;if(r&&(a=o?new s.Z(o).transformAsVector(r,[]):r),this.isGeospatial){const t=this.projectPosition([e,i,0]);this.center=new l.Z(a).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(a)}_initMatrices(t){const{viewMatrix:e=A,projectionMatrix:i=null,orthographic:n=!1,fovyRadians:u,fovy:h=75,near:f=.1,far:p=1e3,padding:g=null,focalDistance:m=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new s.Z).multiplyRight(e).translate(new l.Z(this.center).negate()),this.projectionMatrix=i||function({width:t,height:e,orthographic:i,fovyRadians:n,focalDistance:r,padding:o,near:l,far:c}){const u=t/e,h=i?(new s.Z).orthographic({fovy:n,aspect:u,focalDistance:r,near:l,far:c}):(new s.Z).perspective({fovy:n,aspect:u,near:l,far:c});if(o){const{left:i=0,right:n=0,top:r=0,bottom:s=0}=o,l=(0,a.uZ)((i+t-n)/2,0,t)-t/2,c=(0,a.uZ)((r+e-s)/2,0,e)-e/2;h[8]-=2*l/t,h[9]+=2*c/e}return h}({width:this.width,height:this.height,orthographic:n,fovyRadians:u||h*d,focalDistance:m,padding:g,near:f,far:p});const v=(0,o.bS)();c.Jp(v,v,this.projectionMatrix),c.Jp(v,v,this.viewMatrix),this.viewProjectionMatrix=v,this.viewMatrixInverse=c.U_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,o.Xt)(this.viewMatrixInverse);const y=(0,o.bS)(),b=(0,o.bS)();c.bA(y,y,[this.width/2,-this.height/2,1]),c.Iu(y,y,[1,-1,0]),c.Jp(b,y,this.viewProjectionMatrix),this.pixelProjectionMatrix=b,this.pixelUnprojectionMatrix=c.U_((0,o.bS)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||r.Z.warn("Pixel project matrix not invertible")()}}(0,n.Z)(g,"displayName","Viewport")},6935:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(4942),r=i(9225),o=i(7013),s=i(1437),a=i(4034),l=i(5451);class c extends r.Z{constructor(t={}){const{latitude:e=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:c=0,nearZMultiplier:u=.1,farZMultiplier:h=1.01,orthographic:d=!1,projectionMatrix:A,repeat:f=!1,worldOffset:p=0,position:g,padding:m,legacyMeterSizes:v=!1}=t;let{width:y,height:b,altitude:_=1.5}=t;const w=Math.pow(2,r);let x;y=y||1,b=b||1;let C=null;if(A)_=A[5]/2,x=(0,o.Lu)(_);else{let i;if(t.fovy?(x=t.fovy,_=(0,o.sj)(x)):x=(0,o.Lu)(_),m){const{top:t=0,bottom:e=0}=m;i=[0,(0,a.uZ)((t+b-e)/2,0,b)-b/2]}C=(0,o.wl)({width:y,height:b,scale:w,center:g&&[0,0,g[2]*(0,o.NC)(e)],offset:i,pitch:s,fovy:x,nearZMultiplier:u,farZMultiplier:h})}let E=(0,o.lf)({height:b,pitch:s,bearing:c,scale:w,altitude:_});p&&(E=(new l.Z).translate([512*p,0,0]).multiplyLeft(E)),super({...t,width:y,height:b,viewMatrix:E,longitude:i,latitude:e,zoom:r,...C,fovy:x,focalDistance:_}),(0,n.Z)(this,"longitude",void 0),(0,n.Z)(this,"latitude",void 0),(0,n.Z)(this,"pitch",void 0),(0,n.Z)(this,"bearing",void 0),(0,n.Z)(this,"altitude",void 0),(0,n.Z)(this,"fovy",void 0),(0,n.Z)(this,"orthographic",void 0),(0,n.Z)(this,"_subViewports",void 0),(0,n.Z)(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=c,this.altitude=_,this.fovy=x,this.orthographic=d,this._subViewports=f?[]:null,this._pseudoMeters=v,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),i=Math.ceil((t[2]-180)/360);for(let t=e;t<=i;t++){const e=t?new c({...this,worldOffset:t}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,i]=this.projectFlat(t);return[e,i,(t[2]||0)*(0,o.NC)(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,i]=this.unprojectFlat(t);return[e,i,(t[2]||0)/(0,o.NC)(i)]}addMetersToLngLat(t,e){return(0,o.eG)(t,e)}panByPosition(t,e){const i=(0,o.CT)(e,this.pixelUnprojectionMatrix),n=this.projectFlat(t),r=s.IH([],n,s.tk([],i)),a=s.IH([],this.center,r),[l,c]=this.unprojectFlat(a);return{longitude:l,latitude:c}}getBounds(t={}){const e=(0,o.zX)(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t,e={}){const{width:i,height:n}=this,{longitude:r,latitude:s,zoom:a}=(0,o.Xg)({width:i,height:n,bounds:t,...e});return new c({width:i,height:n,longitude:r,latitude:s,zoom:a})}}(0,n.Z)(c,"displayName","WebMercatorViewport")},2424:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(4942),r=i(3693);const o="\nuniform vec4 clip_bounds;\n\nbool clip_isInBounds(vec2 position) {\n  return position.x >= clip_bounds[0] && position.y >= clip_bounds[1] && position.x < clip_bounds[2] && position.y < clip_bounds[3];\n}\n",s={name:"clip-vs",vs:o},a={"vs:#decl":"\nvarying float clip_isVisible;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));\n","fs:#decl":"\nvarying float clip_isVisible;\n","fs:DECKGL_FILTER_COLOR":"\n  if (clip_isVisible < 0.5) discard;\n"},l={name:"clip-fs",fs:o},c={"vs:#decl":"\nvarying vec2 clip_commonPosition;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_commonPosition = geometry.position.xy;\n","fs:#decl":"\nvarying vec2 clip_commonPosition;\n","fs:DECKGL_FILTER_COLOR":"\n  if (!clip_isInBounds(clip_commonPosition)) discard;\n"};class u extends r.Z{getShaders(){let t="instancePositions"in this.getAttributeManager().attributes;return void 0!==this.props.clipByInstance&&(t=Boolean(this.props.clipByInstance)),this.state.clipByInstance=t,t?{modules:[s],inject:a}:{modules:[l],inject:c}}draw({uniforms:t}){const{clipBounds:e}=this.props;if(this.state.clipByInstance)t.clip_bounds=e;else{const i=this.projectPosition([e[0],e[1],0]),n=this.projectPosition([e[2],e[3],0]);t.clip_bounds=[Math.min(i[0],n[0]),Math.min(i[1],n[1]),Math.max(i[0],n[0]),Math.max(i[1],n[1])]}}}(0,n.Z)(u,"defaultProps",{clipBounds:[0,0,1,1],clipByInstance:void 0}),(0,n.Z)(u,"extensionName","ClipExtension")},6569:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BrushingExtension:()=>l,ClipExtension:()=>G.Z,CollisionFilterExtension:()=>st,DataFilterExtension:()=>x,FillStyleExtension:()=>H,Fp64Extension:()=>L,MaskExtension:()=>lt,PathStyleExtension:()=>j,_TerrainExtension:()=>_t,project64:()=>O});var n=i(4942),r=i(3693),o=i(6084);const s={source:0,target:1,custom:2,source_target:3},a={name:"brushing",dependencies:[o.Z],vs:"\n  uniform bool brushing_enabled;\n  uniform int brushing_target;\n  uniform vec2 brushing_mousePos;\n  uniform float brushing_radius;\n\n  #ifdef NON_INSTANCED_MODEL\n  attribute vec2 brushingTargets;\n  #else\n  attribute vec2 instanceBrushingTargets;\n  #endif\n\n  varying float brushing_isVisible;\n\n  bool brushing_isPointInRange(vec2 position) {\n    if (!brushing_enabled) {\n      return true;\n    }\n    vec2 source_commonspace = project_position(position);\n    vec2 target_commonspace = project_position(brushing_mousePos);\n    float distance = length((target_commonspace - source_commonspace) / project_uCommonUnitsPerMeter.xy);\n\n    return distance <= brushing_radius;\n  }\n\n  bool brushing_arePointsInRange(vec2 sourcePos, vec2 targetPos) {\n    return brushing_isPointInRange(sourcePos) || brushing_isPointInRange(targetPos);\n  }\n\n  void brushing_setVisible(bool visible) {\n    brushing_isVisible = float(visible);\n  }\n",fs:"\n  uniform bool brushing_enabled;\n  varying float brushing_isVisible;\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    vec2 brushingTarget;\n    vec2 brushingSource;\n    if (brushing_target == 3) {\n      brushingTarget = geometry.worldPositionAlt.xy;\n      brushingSource = geometry.worldPosition.xy;\n    } else if (brushing_target == 0) {\n      brushingTarget = geometry.worldPosition.xy;\n    } else if (brushing_target == 1) {\n      brushingTarget = geometry.worldPositionAlt.xy;\n    } else {\n      #ifdef NON_INSTANCED_MODEL\n      brushingTarget = brushingTargets;\n      #else\n      brushingTarget = instanceBrushingTargets;\n      #endif\n    }\n    bool visible;\n    if (brushing_target == 3) {\n      visible = brushing_arePointsInRange(brushingSource, brushingTarget);\n    } else {\n      visible = brushing_isPointInRange(brushingTarget);\n    }\n    brushing_setVisible(visible);\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (brushing_enabled && brushing_isVisible < 0.5) {\n      discard;\n    }\n  "},getUniforms:t=>{if(!t||!("viewport"in t))return{};const{brushingEnabled:e=!0,brushingRadius:i=1e4,brushingTarget:n="source",mousePosition:r,viewport:o}=t;return{brushing_enabled:Boolean(e&&r&&o.containsPixel(r)),brushing_radius:i,brushing_target:s[n]||0,brushing_mousePos:r?o.unproject([r.x-o.x,r.y-o.y]):[0,0]}}};class l extends r.Z{getShaders(){return{modules:[a]}}initializeState(t,e){const i=this.getAttributeManager();i&&i.add({brushingTargets:{size:2,accessor:"getBrushingTarget",shaderAttributes:{brushingTargets:{divisor:0},instanceBrushingTargets:{divisor:1}}}}),this.state.onMouseMove=()=>{var t;null===(t=this.getCurrentLayer())||void 0===t||t.setNeedsRedraw()},t.deck&&t.deck.eventManager.on({pointermove:this.state.onMouseMove,pointerleave:this.state.onMouseMove})}finalizeState(t,e){t.deck&&t.deck.eventManager.off({pointermove:this.state.onMouseMove,pointerleave:this.state.onMouseMove})}}(0,n.Z)(l,"defaultProps",{getBrushingTarget:{type:"accessor",value:[0,0]},brushingTarget:"source",brushingEnabled:!0,brushingRadius:1e4}),(0,n.Z)(l,"extensionName","BrushingExtension");const c="\nuniform DATAFILTER_TYPE filter_min;\nuniform DATAFILTER_TYPE filter_softMin;\nuniform DATAFILTER_TYPE filter_softMax;\nuniform DATAFILTER_TYPE filter_max;\nuniform bool filter_useSoftMargin;\nuniform bool filter_enabled;\nuniform bool filter_transformSize;\n\n#ifdef NON_INSTANCED_MODEL\n  #define DATAFILTER_ATTRIB filterValues\n  #define DATAFILTER_ATTRIB_64LOW filterValues64Low\n#else\n  #define DATAFILTER_ATTRIB instanceFilterValues\n  #define DATAFILTER_ATTRIB_64LOW instanceFilterValues64Low\n#endif\n\nattribute DATAFILTER_TYPE DATAFILTER_ATTRIB;\n#ifdef DATAFILTER_DOUBLE\n  attribute DATAFILTER_TYPE DATAFILTER_ATTRIB_64LOW;\n\n  uniform DATAFILTER_TYPE filter_min64High;\n  uniform DATAFILTER_TYPE filter_max64High;\n#endif\n\nvarying float dataFilter_value;\n\nfloat dataFilter_reduceValue(float value) {\n  return value;\n}\nfloat dataFilter_reduceValue(vec2 value) {\n  return min(value.x, value.y);\n}\nfloat dataFilter_reduceValue(vec3 value) {\n  return min(min(value.x, value.y), value.z);\n}\nfloat dataFilter_reduceValue(vec4 value) {\n  return min(min(value.x, value.y), min(value.z, value.w));\n}\nvoid dataFilter_setValue(DATAFILTER_TYPE valueFromMin, DATAFILTER_TYPE valueFromMax) {\n  if (filter_enabled) {\n    if (filter_useSoftMargin) {\n      dataFilter_value = dataFilter_reduceValue(\n        smoothstep(filter_min, filter_softMin, valueFromMin) *\n        (1.0 - smoothstep(filter_softMax, filter_max, valueFromMax))\n      );\n    } else {\n      dataFilter_value = dataFilter_reduceValue(\n        step(filter_min, valueFromMin) * step(valueFromMax, filter_max)\n      );\n    }\n  } else {\n    dataFilter_value = 1.0;\n  }\n}\n",u="\nuniform bool filter_transformColor;\nvarying float dataFilter_value;\n";function h(t){if(!t||!("extensions"in t))return{};const{filterRange:e=[-1,1],filterEnabled:i=!0,filterTransformSize:n=!0,filterTransformColor:r=!0}=t,o=t.filterSoftRange||e;return{...Number.isFinite(e[0])?{filter_min:e[0],filter_softMin:o[0],filter_softMax:o[1],filter_max:e[1]}:{filter_min:e.map((t=>t[0])),filter_softMin:o.map((t=>t[0])),filter_softMax:o.map((t=>t[1])),filter_max:e.map((t=>t[1]))},filter_enabled:i,filter_useSoftMargin:Boolean(t.filterSoftRange),filter_transformSize:i&&n,filter_transformColor:i&&r}}const d={"vs:#main-start":"\n    #ifdef DATAFILTER_DOUBLE\n      dataFilter_setValue(\n        DATAFILTER_ATTRIB - filter_min64High + DATAFILTER_ATTRIB_64LOW,\n        DATAFILTER_ATTRIB - filter_max64High + DATAFILTER_ATTRIB_64LOW\n      );\n    #else\n      dataFilter_setValue(DATAFILTER_ATTRIB, DATAFILTER_ATTRIB);\n    #endif\n  ","vs:#main-end":"\n    if (dataFilter_value == 0.0) {\n      gl_Position = vec4(0.);\n    }\n  ","vs:DECKGL_FILTER_SIZE":"\n    if (filter_transformSize) {\n      size = size * dataFilter_value;\n    }\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (dataFilter_value == 0.0) discard;\n    if (filter_transformColor) {\n      color.a *= dataFilter_value;\n    }\n  "},A={name:"data-filter",vs:c,fs:u,inject:d,getUniforms:h},f={name:"data-filter-fp64",vs:c,fs:u,inject:d,getUniforms:function(t){if(!t||!("extensions"in t))return{};const e=h(t);if(Number.isFinite(e.filter_min)){const t=Math.fround(e.filter_min);e.filter_min-=t,e.filter_softMin-=t,e.filter_min64High=t;const i=Math.fround(e.filter_max);e.filter_max-=i,e.filter_softMax-=i,e.filter_max64High=i}else{const t=e.filter_min.map(Math.fround);e.filter_min=e.filter_min.map(((e,i)=>e-t[i])),e.filter_softMin=e.filter_softMin.map(((e,i)=>e-t[i])),e.filter_min64High=t;const i=e.filter_max.map(Math.fround);e.filter_max=e.filter_max.map(((t,e)=>t-i[e])),e.filter_softMax=e.filter_softMax.map(((t,e)=>t-i[e])),e.filter_max64High=i}return e}};var p=i(3849),g=i(4912),m=i(9450),v=i(9769);const y={blend:!0,blendFunc:[1,1,1,1],blendEquation:[32774,32774],depthTest:!1};var b=i(6047),_=i(1953);const w={1:"float",2:"vec2",3:"vec3",4:"vec4"};class x extends r.Z{constructor({filterSize:t=1,fp64:e=!1,countItems:i=!1}={}){if(!w[t])throw new Error("filterSize out of range");super({filterSize:t,fp64:e,countItems:i})}getShaders(t){const{filterSize:e,fp64:i}=t.opts;return{modules:[i?f:A],defines:{DATAFILTER_TYPE:w[e],DATAFILTER_DOUBLE:Boolean(i)}}}initializeState(t,e){const i=this.getAttributeManager();i&&i.add({filterValues:{size:e.opts.filterSize,type:e.opts.fp64?5130:5126,accessor:"getFilterValue",shaderAttributes:{filterValues:{divisor:0},instanceFilterValues:{divisor:1}}}});const{gl:n}=this.context;if(i&&e.opts.countItems){const t=function(t){return Boolean(t.getExtension("EXT_float_blend")&&(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")))}(n);i.add({filterIndices:{size:t?1:2,vertexOffset:1,type:5121,normalized:!0,accessor:(e,{index:i})=>{const n=e&&e.__source?e.__source.index:i;return t?(n+1)%255:[(n+1)%255,Math.floor(n/255)%255]},shaderAttributes:{filterPrevIndices:{vertexOffset:0},filterIndices:{vertexOffset:1}}}});const r=function(t,e){return e?new p.Z(t,{width:1,height:1,attachments:{36064:new g.Z(t,{format:(0,m.D0)(t)?34836:6408,type:5126,mipmaps:!1})}}):new p.Z(t,{width:256,height:64,depth:!1})}(n,t),o=function(t,e,i){return e.defines.NON_INSTANCED_MODEL=1,i&&(e.defines.FLOAT_TARGET=1),new v.Z(t,{id:"data-filter-aggregation-model",vertexCount:1,isInstanced:!1,drawMode:0,vs:"#define SHADER_NAME data-filter-vertex-shader\n\n#ifdef FLOAT_TARGET\n  attribute float filterIndices;\n  attribute float filterPrevIndices;\n#else\n  attribute vec2 filterIndices;\n  attribute vec2 filterPrevIndices;\n#endif\n\nvarying vec4 vColor;\nconst float component = 1.0 / 255.0;\n\nvoid main() {\n  #ifdef FLOAT_TARGET\n    dataFilter_value *= float(filterIndices != filterPrevIndices);\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n    vColor = vec4(0.0, 0.0, 0.0, 1.0);\n  #else\n    // Float texture is not supported: pack result into 4 channels x 256 px x 64px\n    dataFilter_value *= float(filterIndices.x != filterPrevIndices.x);\n    float col = filterIndices.x;\n    float row = filterIndices.y * 4.0;\n    float channel = floor(row);\n    row = fract(row);\n    vColor = component * vec4(bvec4(channel == 0.0, channel == 1.0, channel == 2.0, channel == 3.0));\n    gl_Position = vec4(col * 2.0 - 1.0, row * 2.0 - 1.0, 0.0, 1.0);\n  #endif\n  gl_PointSize = 1.0;\n}\n",fs:"#define SHADER_NAME data-filter-fragment-shader\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main() {\n  if (dataFilter_value < 0.5) {\n    discard;\n  }\n  gl_FragColor = vColor;\n}\n",...e})}(n,e.getShaders.call(this,e),t);this.setState({filterFBO:r,filterModel:o})}}updateState({props:t,oldProps:e}){if(this.state.filterModel){const i=this.getAttributeManager().attributes.filterValues.needsUpdate()||t.filterEnabled!==e.filterEnabled||t.filterRange!==e.filterRange||t.filterSoftRange!==e.filterSoftRange;i&&this.setState({filterNeedsUpdate:i})}}draw(t,e){const{filterFBO:i,filterModel:n,filterNeedsUpdate:r}=this.state,{onFilteredItemsChange:o}=this.props;if(r&&o&&n){const{attributes:{filterValues:e,filterIndices:r}}=this.getAttributeManager();n.setVertexCount(this.getNumInstances());const{gl:s}=this.context;(0,b.Z)(s,{framebuffer:i,color:[0,0,0,0]}),n.updateModuleSettings(t.moduleParameters).setAttributes({...e.getShaderAttributes(),...r&&r.getShaderAttributes()}).draw({framebuffer:i,parameters:{...y,viewport:[0,0,i.width,i.height]}});const a=(0,_.z6)(i);let l=0;for(let t=0;t<a.length;t++)l+=a[t];o({id:this.id,count:l}),this.state.filterNeedsUpdate=!1}}finalizeState(){const{filterFBO:t,filterModel:e}=this.state;t&&(t.color.delete(),t.delete(),e.delete())}}(0,n.Z)(x,"defaultProps",{getFilterValue:{type:"accessor",value:0},onFilteredItemsChange:{type:"function",value:null,optional:!0},filterEnabled:!0,filterRange:[-1,1],filterSoftRange:null,filterTransformSize:!0,filterTransformColor:!0}),(0,n.Z)(x,"extensionName","DataFilterExtension");var C=i(4088);function E(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.fround(t),r=t-n;return e[i]=n,e[i+1]=r,e}function k(t){return t-Math.fround(t)}function T(t){const e=new Float32Array(32);for(let i=0;i<4;++i)for(let n=0;n<4;++n){const r=4*i+n;E(t[4*n+i],e,2*r)}return e}const B={ONE:1},S={name:"fp64",vs:"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n",fs:null,dependencies:[{name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return B},fp64ify:E,fp64LowPart:k,fp64ifyMatrix4:T}],fp64ify:E,fp64LowPart:k,fp64ifyMatrix4:T};var P=i(8177);const{fp64ify:M,fp64ifyMatrix4:I}=S,O={name:"project64",dependencies:[o.Z,S],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project_uViewProjectionMatrixFP64[16];\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sum_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  out_val[0] = mul_fp64(pos_fp64[0], WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(pos_fp64[1], WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_size(position.z);\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow.xy, projectedPosition64xy);\n\n  vec2 commonPosition64[4];\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  commonPosition64[3] = vec2(1.0, 0.0);\n\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_common_position_to_clipspace_fp64(commonPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, commonPosition\n  );\n}\n",getUniforms:function(t){if(t&&"viewport"in t){const{viewProjectionMatrix:e,scale:i}=t.viewport;return D({viewProjectionMatrix:e,scale:i})}return{}}},D=(0,P.Z)((function({viewProjectionMatrix:t,scale:e}){const i=I(t);return{project_uViewProjectionMatrixFP64:i,project64_uViewProjectionMatrix:i,project64_uScale:M(e)}}));class L extends r.Z{getShaders(){const{coordinateSystem:t}=this.props;if(t!==C.Df.LNGLAT&&t!==C.Df.DEFAULT)throw new Error("fp64: coordinateSystem must be LNGLAT");return{modules:[O]}}}(0,n.Z)(L,"extensionName","Fp64Extension");var F=i(7870);const R={inject:{"vs:#decl":"\nattribute vec2 instanceDashArrays;\nattribute float instanceDashOffsets;\nvarying vec2 vDashArray;\nvarying float vDashOffset;\n","vs:#main-end":"\nvDashArray = instanceDashArrays;\nvDashOffset = instanceDashOffsets / width.x;\n","fs:#decl":"\nuniform float dashAlignMode;\nuniform float capType;\nuniform bool dashGapPickable;\nvarying vec2 vDashArray;\nvarying float vDashOffset;\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n","fs:#main-start":"\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n  float unitLength = solidLength + gapLength;\n\n  float offset;\n\n  if (unitLength > 0.0) {\n    if (dashAlignMode == 0.0) {\n      offset = vDashOffset;\n    } else {\n      unitLength = vPathLength / round(vPathLength / unitLength);\n      offset = solidLength / 2.0;\n    }\n\n    float unitOffset = mod(clamp(vPathPosition.y, 0.0, vPathLength) + offset, unitLength);\n\n    if (gapLength > 0.0 && unitOffset > solidLength) {\n      if (capType <= 0.5) {\n        if (!(dashGapPickable && picking_uActive)) {\n          discard;\n        }\n      } else {\n        float distToEnd = length(vec2(\n          min(unitOffset - solidLength, unitLength - unitOffset),\n          vPathPosition.x\n        ));\n        if (distToEnd > 1.0) {\n          if (!(dashGapPickable && picking_uActive)) {\n            discard;\n          }\n        }\n      }\n    }\n  }\n"}},N={inject:{"vs:#decl":"\nattribute float instanceOffsets;\n","vs:DECKGL_FILTER_SIZE":"\n  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\n  size *= offsetWidth;\n","vCornerOffset = offsetVec;":"\n  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\n  vec2 offsetCenter = -instanceOffsets * (isCap ? perp : miterVec * miterSize) * 2.0;\n  vCornerOffset = vCornerOffset * offsetWidth - offsetCenter;\n","fs:#main-start":"\n  float isInside;\n  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);\n  if (isInside == 0.0) {\n    discard;\n  }\n"}};var z=i(7160);class j extends r.Z{constructor({dash:t=!1,offset:e=!1,highPrecisionDash:i=!1}={}){super({dash:t||i,offset:e,highPrecisionDash:i})}isEnabled(t){return"pathTesselator"in t.state}getShaders(t){if(!t.isEnabled(this))return null;let e={};return t.opts.dash&&(e=(0,F.l)(e,R)),t.opts.offset&&(e=(0,F.l)(e,N)),e}initializeState(t,e){const i=this.getAttributeManager();i&&e.isEnabled(this)&&(e.opts.dash&&i.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),e.opts.highPrecisionDash&&i.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:e.getDashOffsets.bind(this)}}),e.opts.offset&&i.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(t,e){if(!e.isEnabled(this))return;const i={};e.opts.dash&&(i.dashAlignMode=this.props.dashJustified?1:0,i.dashGapPickable=Boolean(this.props.dashGapPickable)),this.state.model.setUniforms(i)}getDashOffsets(t){const e=[0],i="XY"===this.props.positionFormat?2:3,n=Array.isArray(t[0]),r=n?t.length:t.length/i;let o,s;for(let a=0;a<r-1;a++)o=n?t[a]:t.slice(a*i,a*i+i),o=this.projectPosition(o),a>0&&(e[a]=e[a-1]+(0,z.TK)(s,o)),s=o;return e}}(0,n.Z)(j,"defaultProps",{getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1}),(0,n.Z)(j,"extensionName","PathStyleExtension");var U=i(5126);const Z={name:"fill-pattern",vs:"\n#ifdef NON_INSTANCED_MODEL\n  #define FILL_PATTERN_FRAME_ATTRIB fillPatternFrames\n  #define FILL_PATTERN_SCALE_ATTRIB fillPatternScales\n  #define FILL_PATTERN_OFFSET_ATTRIB fillPatternOffsets\n#else\n  #define FILL_PATTERN_FRAME_ATTRIB instanceFillPatternFrames\n  #define FILL_PATTERN_SCALE_ATTRIB instanceFillPatternScales\n  #define FILL_PATTERN_OFFSET_ATTRIB instanceFillPatternOffsets\n#endif\n\nattribute vec4 FILL_PATTERN_FRAME_ATTRIB;\nattribute float FILL_PATTERN_SCALE_ATTRIB;\nattribute vec2 FILL_PATTERN_OFFSET_ATTRIB;\n\nuniform bool fill_patternEnabled;\nuniform vec2 fill_patternTextureSize;\n\nvarying vec2 fill_uv;\nvarying vec4 fill_patternBounds;\nvarying vec4 fill_patternPlacement;\n",fs:"\nuniform bool fill_patternEnabled;\nuniform bool fill_patternMask;\nuniform sampler2D fill_patternTexture;\nuniform vec2 fill_uvCoordinateOrigin;\nuniform vec2 fill_uvCoordinateOrigin64Low;\n\nvarying vec4 fill_patternBounds;\nvarying vec4 fill_patternPlacement;\nvarying vec2 fill_uv;\n\nconst float FILL_UV_SCALE = 512.0 / 40000000.0;\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    fill_uv = geometry.position.xy;\n  ","vs:DECKGL_FILTER_COLOR":"\n    if (fill_patternEnabled) {\n      fill_patternBounds = FILL_PATTERN_FRAME_ATTRIB / vec4(fill_patternTextureSize, fill_patternTextureSize);\n      fill_patternPlacement.xy = FILL_PATTERN_OFFSET_ATTRIB;\n      fill_patternPlacement.zw = FILL_PATTERN_SCALE_ATTRIB * FILL_PATTERN_FRAME_ATTRIB.zw;\n    }\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (fill_patternEnabled) {\n      vec2 scale = FILL_UV_SCALE * fill_patternPlacement.zw;\n      vec2 patternUV = mod(mod(fill_uvCoordinateOrigin, scale) + fill_uvCoordinateOrigin64Low + fill_uv, scale) / scale;\n      patternUV = mod(fill_patternPlacement.xy + patternUV, 1.0);\n\n      vec2 texCoords = fill_patternBounds.xy + fill_patternBounds.zw * patternUV;\n\n      vec4 patternColor = texture2D(fill_patternTexture, texCoords);\n      color.a *= patternColor.a;\n      if (!fill_patternMask) {\n        color.rgb = patternColor.rgb;\n      }\n    }\n  "},dependencies:[o.Z],getUniforms:function(t,e){if(!t)return{};if("fillPatternTexture"in t){const{fillPatternTexture:e}=t;return{fill_patternTexture:e,fill_patternTextureSize:[e.width,e.height]}}if("viewport"in t){const{fillPatternMask:i=!0,fillPatternEnabled:n=!0}=t,{project_uCommonOrigin:r}=e,o=[(0,U.Ks)(r[0]),(0,U.Ks)(r[1])];return{fill_uvCoordinateOrigin:r.slice(0,2),fill_uvCoordinateOrigin64Low:o,fill_patternMask:i,fill_patternEnabled:n}}return{}}};class H extends r.Z{constructor({pattern:t=!1}={}){super({pattern:t})}isEnabled(t){return null!==t.getAttributeManager()&&!("pathTesselator"in t.state)}getShaders(t){return t.isEnabled(this)?{modules:[t.opts.pattern&&Z].filter(Boolean)}:null}initializeState(t,e){if(!e.isEnabled(this))return;const i=this.getAttributeManager();e.opts.pattern&&i.add({fillPatternFrames:{size:4,accessor:"getFillPattern",transform:e.getPatternFrame.bind(this),shaderAttributes:{fillPatternFrames:{divisor:0},instanceFillPatternFrames:{divisor:1}}},fillPatternScales:{size:1,accessor:"getFillPatternScale",defaultValue:1,shaderAttributes:{fillPatternScales:{divisor:0},instanceFillPatternScales:{divisor:1}}},fillPatternOffsets:{size:2,accessor:"getFillPatternOffset",shaderAttributes:{fillPatternOffsets:{divisor:0},instanceFillPatternOffsets:{divisor:1}}}}),this.setState({emptyTexture:new g.Z(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:t,oldProps:e},i){i.isEnabled(this)&&t.fillPatternMapping&&t.fillPatternMapping!==e.fillPatternMapping&&this.getAttributeManager().invalidate("getFillPattern")}draw(t,e){if(!e.isEnabled(this))return;const{fillPatternAtlas:i}=this.props;this.setModuleParameters({fillPatternTexture:i||this.state.emptyTexture})}finalizeState(){const{emptyTexture:t}=this.state;null==t||t.delete()}getPatternFrame(t){const{fillPatternMapping:e}=this.getCurrentLayer().props,i=e&&e[t];return i?[i.x,i.y,i.width,i.height]:[0,0,0,0]}}(0,n.Z)(H,"defaultProps",{fillPatternEnabled:!0,fillPatternAtlas:{type:"image",value:null,async:!0,parameters:{10241:9729}},fillPatternMapping:{type:"object",value:{},async:!0},fillPatternMask:!0,getFillPattern:{type:"accessor",value:t=>t.pattern},getFillPatternScale:{type:"accessor",value:1},getFillPatternOffset:{type:"accessor",value:[0,0]}}),(0,n.Z)(H,"extensionName","FillStyleExtension");var G=i(2424);const V={name:"collision",dependencies:[o.Z],vs:"\n#ifdef NON_INSTANCED_MODEL\nattribute float collisionPriorities;\n#else\nattribute float instanceCollisionPriorities;\n#endif\n\nuniform sampler2D collision_texture;\nuniform bool collision_sort;\nuniform bool collision_enabled;\n\nvec2 collision_getCoords(vec4 position) {\n  vec4 collision_clipspace = project_common_position_to_clipspace(position);\n  return (1.0 + collision_clipspace.xy / collision_clipspace.w) / 2.0;\n}\n\nfloat collision_match(vec2 tex, vec3 pickingColor) {\n  vec4 collision_pickingColor = texture2D(collision_texture, tex);\n  float delta = dot(abs(collision_pickingColor.rgb - pickingColor), vec3(1.0));\n  float e = 0.001;\n  return step(delta, e);\n}\n\nfloat collision_isVisible(vec2 texCoords, vec3 pickingColor) {\n  if (!collision_enabled) {\n    return 1.0;\n  }\n\n  // Visibility test, sample area of 5x5 pixels in order to fade in/out.\n  // Due to the locality, the lookups will be cached\n  // This reduces the flicker present when objects are shown/hidden\n  const int N = 2;\n  float accumulator = 0.0;\n  vec2 step = vec2(1.0 / project_uViewportSize);\n\n  const float floatN = float(N);\n  vec2 delta = -floatN * step;\n  for(int i = -N; i <= N; i++) {\n    delta.x = -step.x * floatN;\n    for(int j = -N; j <= N; j++) {\n      accumulator += collision_match(texCoords + delta, pickingColor);\n      delta.x += step.x;\n    }\n    delta.y += step.y;\n  }\n\n  float W = 2.0 * floatN + 1.0;\n  return pow(accumulator / (W * W), 2.2);\n}\n",inject:{"vs:#decl":"\n  float collision_fade = 1.0;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  if (collision_sort) {\n    #ifdef NON_INSTANCED_MODEL\n    float collisionPriority = collisionPriorities;\n    #else\n    float collisionPriority = instanceCollisionPriorities;\n    #endif\n    position.z = -0.001 * collisionPriority * position.w; // Support range -1000 -> 1000\n  }\n\n  if (collision_enabled) {\n    vec4 collision_common_position = project_position(vec4(geometry.worldPosition, 1.0));\n    vec2 collision_texCoords = collision_getCoords(collision_common_position);\n    collision_fade = collision_isVisible(collision_texCoords, geometry.pickingColor / 255.0);\n    if (collision_fade < 0.0001) {\n      // Position outside clip space bounds to discard\n      position = vec4(0.0, 0.0, 2.0, 1.0);\n    }\n  }\n  ","vs:DECKGL_FILTER_COLOR":"\n  color.a *= collision_fade;\n  "},getUniforms:(t,e)=>{if(!t||!("dummyCollisionMap"in t))return{};const{collisionFBO:i,drawToCollisionMap:n,dummyCollisionMap:r}=t;return{collision_sort:Boolean(n),collision_texture:!n&&i?i:r}}};var W=i(9830),q=i(4034),Q=i(6871),Y=i(3182);class X extends Y.Z{renderCollisionMap(t,e){const i=this.gl;return(0,m.s8)(i,{scissorTest:!0,scissor:[1,1,t.width-2,t.height-2],clearColor:[0,0,0,0],blend:!1,depthTest:!0,depthRange:[0,1]},(()=>this.render({...e,target:t,pass:"collision"})))}getModuleParameters(){return{drawToCollisionMap:!0,pickingActive:1,pickingAttribute:!1,lightSources:{}}}}var J=i(744);class K extends Y.Z{constructor(t,e){super(t,e),(0,n.Z)(this,"maskMap",void 0),(0,n.Z)(this,"fbo",void 0);const{mapSize:i=2048}=e;this.maskMap=new g.Z(t,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new p.Z(t,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(t){const e=this.gl,i=[!1,!1,!1,!1];return i[t.channel]=!0,(0,m.s8)(e,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},(()=>super.render({...t,target:this.fbo,pass:"mask"})))}shouldDrawLayer(t){return t.props.operation.includes("mask")}delete(){this.fbo.delete(),this.maskMap.delete()}}var $=i(6935),tt=i(9573);function et(t,e){const i=[1/0,1/0,-1/0,-1/0];for(const n of t){const t=n.getBounds();if(t){const r=n.projectPosition(t[0],{viewport:e,autoOffset:!1}),o=n.projectPosition(t[1],{viewport:e,autoOffset:!1});i[0]=Math.min(i[0],r[0]),i[1]=Math.min(i[1],r[1]),i[2]=Math.max(i[2],o[0]),i[3]=Math.max(i[3],o[1])}}return Number.isFinite(i[0])?i:null}function it(t){const{bounds:e,viewport:i,border:n=0}=t,{isGeospatial:r}=i;if(e[2]<=e[0]||e[3]<=e[1])return null;const o=i.unprojectPosition([(e[0]+e[2])/2,(e[1]+e[3])/2,0]);let{width:s,height:a,zoom:l}=t;if(void 0===l){s-=2*n,a-=2*n;const t=Math.min(s/(e[2]-e[0]),a/(e[3]-e[1]));l=Math.min(Math.log2(t),20)}else if(!s||!a){const t=2**l;s=Math.round(Math.abs(e[2]-e[0])*t),a=Math.round(Math.abs(e[3]-e[1])*t);const i=2048-2*n;if(s>i||a>i){const t=i/Math.max(s,a);s=Math.round(s*t),a=Math.round(a*t),l+=Math.log2(t)}}return r?new $.Z({id:i.id,x:n,y:n,width:s,height:a,longitude:o[0],latitude:o[1],zoom:l,orthographic:!0}):new tt.Z({id:i.id,x:n,y:n,width:s,height:a,target:o,zoom:l,flipY:!1})}function nt(t,e,i){if(!t)return[0,0,1,1];const n=function(t,e){let i;if(e&&2===e.length){const[n,r]=e,o=t.getBounds({z:n}),s=t.getBounds({z:r});i=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else i=t.getBounds();const n=t.projectPosition(i.slice(0,2)),r=t.projectPosition(i.slice(2,4));return[n[0],n[1],r[0],r[1]]}(e,i),r=function(t){const e=t[2]-t[0],i=t[3]-t[1],n=(t[0]+t[2])/2,r=(t[1]+t[3])/2;return[n-e,r-i,n+e,r+i]}(n);return t[2]-t[0]<=r[2]-r[0]&&t[3]-t[1]<=r[3]-r[1]?t:[Math.max(t[0],r[0]),Math.max(t[1],r[1]),Math.min(t[2],r[2]),Math.min(t[3],r[3])]}class rt{constructor(){(0,n.Z)(this,"id","mask-effect"),(0,n.Z)(this,"props",null),(0,n.Z)(this,"useInPicking",!0),(0,n.Z)(this,"order",0),(0,n.Z)(this,"dummyMaskMap",void 0),(0,n.Z)(this,"channels",[]),(0,n.Z)(this,"masks",null),(0,n.Z)(this,"maskPass",void 0),(0,n.Z)(this,"maskMap",void 0),(0,n.Z)(this,"lastViewport",void 0)}preRender(t,{layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:o,isPicking:s}){let a=!1;if(this.dummyMaskMap||(this.dummyMaskMap=new g.Z(t,{width:1,height:1})),s)return{didRender:a};const l=e.filter((t=>t.props.visible&&t.props.operation.includes("mask")));if(0===l.length)return this.masks=null,this.channels.length=0,{didRender:a};this.masks={},this.maskPass||(this.maskPass=new K(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(l),u=n[0],h=!this.lastViewport||!this.lastViewport.equals(u);if(void 0!==u.resolution)return J.Z.warn("MaskExtension is not supported in GlobeView")(),{didRender:a};for(const t in c){const e=this._renderChannel(c[t],{layerFilter:i,onViewportActive:r,views:o,viewport:u,viewportChanged:h});a||(a=e)}return{didRender:a}}_renderChannel(t,{layerFilter:e,onViewportActive:i,views:n,viewport:r,viewportChanged:o}){let s=!1;const a=this.channels[t.index];if(!a)return s;const l=t===a||t.layers.length!==a.layers.length||t.layers.some(((t,e)=>t!==a.layers[e]||t.props.transitions))||t.layerBounds.some(((t,e)=>t!==a.layerBounds[e]));if(t.bounds=a.bounds,t.maskBounds=a.maskBounds,this.channels[t.index]=t,l||o){this.lastViewport=r;const o=et(t.layers,r);if(t.bounds=o&&nt(o,r),l||!(0,q.fS)(t.bounds,a.bounds)){const{maskPass:a,maskMap:l}=this,c=o&&it({bounds:t.bounds,viewport:r,width:l.width,height:l.height,border:1});t.maskBounds=c?c.getBounds():[0,0,1,1],a.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:e,viewports:c?[c]:[],onViewportActive:i,views:n,moduleParameters:{devicePixelRatio:1}}),s=!0}}return this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem},s}_sortMaskChannels(t){const e={};let i=0;for(const n of t){const{id:t}=n.root;let r=e[t];if(!r){if(++i>4){J.Z.warn("Too many mask layers. The max supported is 4")();continue}r={id:t,index:this.channels.findIndex((e=>(null==e?void 0:e.id)===t)),layers:[],layerBounds:[],coordinateOrigin:n.root.props.coordinateOrigin,coordinateSystem:n.root.props.coordinateSystem},e[t]=r}r.layers.push(n),r.layerBounds.push(n.getBounds())}for(let t=0;t<4;t++){const i=this.channels[t];i&&i.id in e||(this.channels[t]=null)}for(const t in e){const i=e[t];i.index<0&&(i.index=this.channels.findIndex((t=>!t)),this.channels[i.index]=i)}return e}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}class ot{constructor(){(0,n.Z)(this,"id","collision-filter-effect"),(0,n.Z)(this,"props",null),(0,n.Z)(this,"useInPicking",!0),(0,n.Z)(this,"order",1),(0,n.Z)(this,"channels",{}),(0,n.Z)(this,"collisionFilterPass",void 0),(0,n.Z)(this,"collisionFBOs",{}),(0,n.Z)(this,"dummyCollisionMap",void 0),(0,n.Z)(this,"lastViewport",void 0)}preRender(t,{effects:e,layers:i,layerFilter:n,viewports:r,onViewportActive:o,views:s,isPicking:a,preRenderStats:l={}}){var c;if(this.dummyCollisionMap||(this.dummyCollisionMap=new g.Z(t,{width:1,height:1})),a)return;const u=i.filter((({props:{visible:t,collisionEnabled:e}})=>t&&e));if(0===u.length)return void(this.channels={});this.collisionFilterPass||(this.collisionFilterPass=new X(t,{id:"default-collision-filter"}));const h=null==e?void 0:e.filter((t=>t.constructor===rt)),d=null===(c=l["mask-effect"])||void 0===c?void 0:c.didRender,A=this._groupByCollisionGroup(t,u),f=r[0],p=!this.lastViewport||!this.lastViewport.equals(f)||d;for(const e in A){const i=this.collisionFBOs[e],r=A[e];i.resize({width:t.canvas.width/2,height:t.canvas.height/2}),this._render(r,{effects:h,layerFilter:n,onViewportActive:o,views:s,viewport:f,viewportChanged:p})}}_render(t,{effects:e,layerFilter:i,onViewportActive:n,views:r,viewport:o,viewportChanged:s}){const{collisionGroup:a}=t,l=this.channels[a];if(!l)return;const c=s||t===l||!(0,Q.v)(l.layers,t.layers,1)||t.layerBounds.some(((t,e)=>!(0,q.fS)(t,l.layerBounds[e])))||t.allLayersLoaded!==l.allLayersLoaded||t.layers.some((t=>t.props.transitions));if(this.channels[a]=t,c){this.lastViewport=o;const s=this.collisionFBOs[a];this.collisionFilterPass.renderCollisionMap(s,{pass:"collision-filter",isPicking:!0,layers:t.layers,effects:e,layerFilter:i,viewports:o?[o]:[],onViewportActive:n,views:r,moduleParameters:{dummyCollisionMap:this.dummyCollisionMap,devicePixelRatio:(0,m.w)(s.gl)/2}})}}_groupByCollisionGroup(t,e){const i={};for(const t of e){const{collisionGroup:e}=t.props;let n=i[e];n||(n={collisionGroup:e,layers:[],layerBounds:[],allLayersLoaded:!0},i[e]=n),n.layers.push(t),n.layerBounds.push(t.getBounds()),t.isLoaded||(n.allLayersLoaded=!1)}for(const e of Object.keys(i))this.collisionFBOs[e]||this.createFBO(t,e),this.channels[e]||(this.channels[e]=i[e]);for(const t of Object.keys(this.collisionFBOs))i[t]||this.destroyFBO(t);return i}getModuleParameters(t){const{collisionGroup:e}=t.props,{collisionFBOs:i,dummyCollisionMap:n}=this;return{collisionFBO:i[e],dummyCollisionMap:n}}cleanup(){this.dummyCollisionMap&&(this.dummyCollisionMap.delete(),this.dummyCollisionMap=void 0),this.channels={};for(const t of Object.keys(this.collisionFBOs))this.destroyFBO(t);this.collisionFBOs={},this.lastViewport=void 0}createFBO(t,e){const{width:i,height:n}=t.canvas,r=new g.Z(t,{width:i,height:n,parameters:{10241:9728,10240:9728,10242:33071,10243:33071}}),o=new W.Z(t,{format:33189,width:i,height:n});this.collisionFBOs[e]=new p.Z(t,{id:"Collision-".concat(e),width:i,height:n,attachments:{36064:r,36096:o}})}destroyFBO(t){const e=this.collisionFBOs[t];for(const t of Object.values(e.attachments))t.delete();e.delete(),delete this.collisionFBOs[t]}}class st extends r.Z{getShaders(){return{modules:[V]}}draw({uniforms:t,context:e,moduleParameters:i}){const{collisionEnabled:n}=this.props,{collisionFBO:r,drawToCollisionMap:o}=i,s=n&&Boolean(r);t.collision_enabled=s,o&&(this.props=this.clone(this.props.collisionTestProps).props)}initializeState(t,e){var i;null!==this.getAttributeManager()&&(null===(i=this.context.deck)||void 0===i||i._addDefaultEffect(new ot),this.getAttributeManager().add({collisionPriorities:{size:1,accessor:"getCollisionPriority",shaderAttributes:{collisionPriorities:{divisor:0},instanceCollisionPriorities:{divisor:1}}}}))}getNeedsPickingBuffer(){return this.props.collisionEnabled}}(0,n.Z)(st,"defaultProps",{getCollisionPriority:{type:"accessor",value:0},collisionEnabled:!0,collisionGroup:{type:"string",value:"default"},collisionTestProps:{}}),(0,n.Z)(st,"extensionName","CollisionFilterExtension");const at={name:"mask",dependencies:[o.Z],vs:"\nuniform vec4 mask_bounds;\nuniform bool mask_maskByInstance;\nvec2 mask_getCoords(vec4 position) {\n  return (position.xy - mask_bounds.xy) / (mask_bounds.zw - mask_bounds.xy);\n}\n",fs:"\nuniform sampler2D mask_texture;\nuniform int mask_channel;\nuniform bool mask_enabled;\nuniform bool mask_inverted;\nbool mask_isInBounds(vec2 texCoords) {\n  if (!mask_enabled) {\n    return true;\n  }\n  vec4 maskColor = texture2D(mask_texture, texCoords);\n  float maskValue = 1.0;\n  if (mask_channel == 0) {\n    maskValue = maskColor.r;\n  } else if (mask_channel == 1) {\n    maskValue = maskColor.g;\n  } else if (mask_channel == 2) {\n    maskValue = maskColor.b;\n  } else if (mask_channel == 3) {\n    maskValue = maskColor.a;\n  }\n\n  if (mask_inverted) {\n    return maskValue >= 0.5;\n  } else {\n    return maskValue < 0.5;\n  }\n}\n",inject:{"vs:#decl":"\nvarying vec2 mask_texCoords;\n","vs:#main-end":"\n   vec4 mask_common_position;\n   if (mask_maskByInstance) {\n     mask_common_position = project_position(vec4(geometry.worldPosition, 1.0));\n   } else {\n     mask_common_position = geometry.position;\n   }\n   mask_texCoords = mask_getCoords(mask_common_position);\n","fs:#decl":"\nvarying vec2 mask_texCoords;\n","fs:#main-start":"\n  if (mask_enabled) {\n    bool mask = mask_isInBounds(mask_texCoords);\n\n    // Debug: show extent of render target\n    // gl_FragColor = vec4(mask_texCoords, 0.0, 1.0);\n    gl_FragColor = texture2D(mask_texture, mask_texCoords);\n\n    if (!mask) discard;\n  }\n"},getUniforms:t=>t&&"maskMap"in t?{mask_texture:t.maskMap}:{}};class lt extends r.Z{initializeState(){var t;null===(t=this.context.deck)||void 0===t||t._addDefaultEffect(new rt)}getShaders(){let t="instancePositions"in this.getAttributeManager().attributes;return void 0!==this.props.maskByInstance&&(t=Boolean(this.props.maskByInstance)),this.state.maskByInstance=t,{modules:[at]}}draw({uniforms:t,context:e,moduleParameters:i}){t.mask_maskByInstance=this.state.maskByInstance;const{maskId:n,maskInverted:r}=this.props,{maskChannels:o}=i,{viewport:s}=e;if(o&&o[n]){const{index:e,bounds:i,coordinateOrigin:a}=o[n];let{coordinateSystem:l}=o[n];t.mask_enabled=!0,t.mask_channel=e,t.mask_inverted=r,l===C.Df.DEFAULT&&(l=s.isGeospatial?C.Df.LNGLAT:C.Df.CARTESIAN);const c={modelMatrix:null,fromCoordinateOrigin:a,fromCoordinateSystem:l},u=this.projectPosition([i[0],i[1],0],c),h=this.projectPosition([i[2],i[3],0],c);t.mask_bounds=[u[0],u[1],h[0],h[1]]}else n&&J.Z.warn("Could not find a mask layer with id: ".concat(n))(),t.mask_enabled=!1}}(0,n.Z)(lt,"defaultProps",{maskId:"",maskByInstance:void 0,maskInverted:!1}),(0,n.Z)(lt,"extensionName","MaskExtension");var ct=i(1731);const ut={NONE:0,WRITE_HEIGHT_MAP:1,USE_HEIGHT_MAP:2,USE_COVER:3,USE_COVER_ONLY:4,SKIP:5},ht=Object.keys(ut).map((t=>"const float TERRAIN_MODE_".concat(t," = ").concat(ut[t],".0;"))).join("\n"),dt={name:"terrain",dependencies:[o.Z],inject:{"vs:#decl":"\nuniform float terrain_mode;\nuniform sampler2D terrain_map;\nuniform vec4 terrain_bounds;\nvarying vec3 commonPos;\n".concat(ht,"\n    "),"vs:#main-start":"\nif (terrain_mode == TERRAIN_MODE_SKIP) {\n  gl_Position = vec4(0.0);\n  return;\n}\n","vs:DECKGL_FILTER_GL_POSITION":"\ncommonPos = geometry.position.xyz;\nif (terrain_mode == TERRAIN_MODE_WRITE_HEIGHT_MAP) {\n  vec2 texCoords = (commonPos.xy - terrain_bounds.xy) / terrain_bounds.zw;\n  position = vec4(texCoords * 2.0 - 1.0, 0.0, 1.0);\n  commonPos.z += project_uCommonOrigin.z;\n}\nif (terrain_mode == TERRAIN_MODE_USE_HEIGHT_MAP) {\n  vec3 anchor = geometry.worldPosition;\n  anchor.z = 0.0;\n  vec3 anchorCommon = project_position(anchor);\n  vec2 texCoords = (anchorCommon.xy - terrain_bounds.xy) / terrain_bounds.zw;\n  if (texCoords.x >= 0.0 && texCoords.y >= 0.0 && texCoords.x <= 1.0 && texCoords.y <= 1.0) {\n    float terrainZ = texture2D(terrain_map, texCoords).r;\n    geometry.position.z += terrainZ;\n    position = project_common_position_to_clipspace(geometry.position);\n  }\n}\n    ","fs:#decl":"\nuniform float terrain_mode;\nuniform sampler2D terrain_map;\nuniform vec4 terrain_bounds;\nvarying vec3 commonPos;\n".concat(ht,"\n    "),"fs:#main-start":"\nif (terrain_mode == TERRAIN_MODE_WRITE_HEIGHT_MAP) {\n  gl_FragColor = vec4(commonPos.z, 0.0, 0.0, 1.0);\n  return;\n}\n    ","fs:DECKGL_FILTER_COLOR":"\nif ((terrain_mode == TERRAIN_MODE_USE_COVER) || (terrain_mode == TERRAIN_MODE_USE_COVER_ONLY)) {\n  vec2 texCoords = (commonPos.xy - terrain_bounds.xy) / terrain_bounds.zw;\n  vec4 pixel = texture2D(terrain_map, texCoords);\n  if (terrain_mode == TERRAIN_MODE_USE_COVER_ONLY) {\n    color = pixel;\n  } else {\n    // pixel is premultiplied\n    color = pixel + color * (1.0 - pixel.a);\n  }\n  return;\n}\n    "},getUniforms:(t={},e)=>{if("dummyHeightMap"in t){const{drawToTerrainHeightMap:i,heightMap:n,heightMapBounds:r,dummyHeightMap:o,terrainCover:s,useTerrainHeightMap:a,terrainSkipRender:l}=t,{project_uCommonOrigin:c}=e;let u=l?ut.SKIP:ut.NONE,h=o,d=null;if(i)u=ut.WRITE_HEIGHT_MAP,d=r;else if(a&&n)u=ut.USE_HEIGHT_MAP,h=n,d=r;else if(s){const e=t.pickingActive;h=e?s.getPickingFramebuffer():s.getRenderFramebuffer(),e&&(u=ut.SKIP),h?(u=u===ut.SKIP?ut.USE_COVER_ONLY:ut.USE_COVER,d=s.bounds):h=o}return{terrain_mode:u,terrain_map:h,terrain_bounds:d?[d[0]-c[0],d[1]-c[1],d[2]-d[0],d[3]-d[1]]:[0,0,0,0]}}return null}};function At(t,e){return new p.Z(t,{id:e.id,attachments:{36064:new g.Z(t,{...e.float&&{format:(0,m.D0)(t)?34836:6408,type:5126},mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}})}})}class ft{constructor(t){(0,n.Z)(this,"isDirty",!0),(0,n.Z)(this,"targetLayer",void 0),(0,n.Z)(this,"renderViewport",null),(0,n.Z)(this,"bounds",null),(0,n.Z)(this,"fbo",void 0),(0,n.Z)(this,"pickingFbo",void 0),(0,n.Z)(this,"layers",[]),(0,n.Z)(this,"tile",void 0),(0,n.Z)(this,"targetBounds",null),(0,n.Z)(this,"targetBoundsCommon",null),this.targetLayer=t,this.tile=pt(t)}get id(){return this.targetLayer.id}get isActive(){return Boolean(this.targetLayer.getCurrentLayer())}shouldUpdate({targetLayer:t,viewport:e,layers:i,layerNeedsRedraw:n}){t&&(this.targetLayer=t);const r=!!e&&this._updateViewport(e);let o=!!i&&this._updateLayers(i);if(n)for(const t of this.layers)if(n[t]){o=!0;break}return o||r}_updateLayers(t){let e=!1;if((t=this.tile?function(t,e){return e.filter((e=>{const i=pt(e);return!i||(n=t.boundingBox,r=i.boundingBox,!(!n||!r)&&n[0][0]<r[1][0]&&r[0][0]<n[1][0]&&n[0][1]<r[1][1]&&r[0][1]<n[1][1]);var n,r}))}(this.tile,t):t).length!==this.layers.length)e=!0;else for(let i=0;i<t.length;i++)if(t[i].id!==this.layers[i]){e=!0;break}return e&&(this.layers=t.map((t=>t.id))),e}_updateViewport(t){const e=this.targetLayer;let i=!1;if(this.tile&&"boundingBox"in this.tile){if(!this.targetBounds){i=!0,this.targetBounds=this.tile.boundingBox;const e=t.projectPosition(this.targetBounds[0]),n=t.projectPosition(this.targetBounds[1]);this.targetBoundsCommon=[e[0],e[1],n[0],n[1]]}}else this.targetBounds!==e.getBounds()&&(i=!0,this.targetBounds=e.getBounds(),this.targetBoundsCommon=et([e],t));if(!this.targetBoundsCommon)return!1;const n=Math.ceil(t.zoom+.5);if(this.tile)this.bounds=this.targetBoundsCommon;else{var r;const e=null===(r=this.renderViewport)||void 0===r?void 0:r.zoom;i=i||n!==e;const o=nt(this.targetBoundsCommon,t),s=this.bounds;i=i||!s||o.some(((t,e)=>t!==s[e])),this.bounds=o}return i&&(this.renderViewport=it({bounds:this.bounds,zoom:n,viewport:t})),i}getRenderFramebuffer(){return this.renderViewport&&0!==this.layers.length?(this.fbo||(this.fbo=At(this.targetLayer.context.gl,{id:this.id})),this.fbo):null}getPickingFramebuffer(){return!this.renderViewport||0===this.layers.length&&!this.targetLayer.props.pickable?null:(this.pickingFbo||(this.pickingFbo=At(this.targetLayer.context.gl,{id:"".concat(this.id,"-picking")})),this.pickingFbo)}filterLayers(t){return t.filter((({id:t})=>this.layers.includes(t)))}delete(){const{fbo:t,pickingFbo:e}=this;t&&(t.texture.delete(),t.delete()),e&&(e.texture.delete(),e.delete())}}function pt(t){for(;t;){const{tile:e}=t.props;if(e)return e;t=t.parent}return null}class gt extends Y.Z{getRenderableLayers(t,e){const{layers:i}=e,n=[],r=this._getDrawLayerParams(t,e,!0);for(let t=0;t<i.length;t++){const e=i[t];!e.isComposite&&r[t].shouldDrawLayer&&n.push(e)}return n}renderHeightMap(t,e){const i=t.getRenderFramebuffer(),n=t.renderViewport;i&&n&&(i.resize(n),(0,m.s8)(this.gl,{clearColor:[0,0,0,0],blend:!0,blendFunc:[1,1],blendEquation:32776,depthTest:!1},(()=>this.render({...e,target:i,pass:"terrain-height-map",layers:e.layers,viewports:[n],effects:[]}))))}renderTerrainCover(t,e){const i=t.getRenderFramebuffer(),n=t.renderViewport;if(!i||!n)return;const r=t.filterLayers(e.layers);i.resize(n),(0,m.s8)(this.gl,{depthTest:!1},(()=>this.render({...e,target:i,pass:"terrain-cover-".concat(t.id),layers:r,effects:[],viewports:[n]})))}}var mt=i(930);class vt extends mt.Z{constructor(...t){super(...t),(0,n.Z)(this,"drawParameters",{})}getRenderableLayers(t,e){const{layers:i}=e,n=[];this.drawParameters={},this._resetColorEncoder(e.pickZ);const r=this._getDrawLayerParams(t,e);for(let t=0;t<i.length;t++){const e=i[t];!e.isComposite&&r[t].shouldDrawLayer&&(n.push(e),this.drawParameters[e.id]=r[t].layerParameters)}return n}renderTerrainCover(t,e){const i=t.getPickingFramebuffer(),n=t.renderViewport;if(!i||!n)return;const r=t.filterLayers(e.layers),o=t.targetLayer;o.props.pickable&&r.unshift(o),i.resize(n),(0,m.s8)(this.gl,{depthTest:!1},(()=>this.render({...e,pickingFBO:i,pass:"terrain-cover-picking-".concat(t.id),layers:r,effects:[],viewports:[n],cullRect:void 0,deviceRect:n,pickZ:!1})))}getLayerParameters(t,e,i){if(this.drawParameters[t.id])return this.drawParameters[t.id];const n=super.getLayerParameters(t,e,i);return n.blend=!0,n}}class yt{static isSupported(t){return p.Z.isSupported(t,{colorBufferFloat:!0})}constructor(t){(0,n.Z)(this,"renderViewport",null),(0,n.Z)(this,"bounds",null),(0,n.Z)(this,"fbo",void 0),(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"layers",[]),(0,n.Z)(this,"layersBounds",[]),(0,n.Z)(this,"layersBoundsCommon",null),(0,n.Z)(this,"lastViewport",null),this.gl=t}getRenderFramebuffer(){return this.renderViewport?(this.fbo||(this.fbo=At(this.gl,{id:"height-map",float:!0})),this.fbo):null}shouldUpdate({layers:t,viewport:e}){const i=t.length!==this.layers.length||t.some(((t,e)=>t!==this.layers[e]||t.props.transitions||t.getBounds()!==this.layersBounds[e]));i&&(this.layers=t,this.layersBounds=t.map((t=>t.getBounds())),this.layersBoundsCommon=et(t,e));const n=!this.lastViewport||!e.equals(this.lastViewport);if(this.layersBoundsCommon){if(i||n){const t=nt(this.layersBoundsCommon,e);if(t[2]<=t[0]||t[3]<=t[1])return this.renderViewport=null,!1;this.bounds=t,this.lastViewport=e;const i=e.scale,n=(t[2]-t[0])*i,r=(t[3]-t[1])*i;return this.renderViewport=n>0||r>0?it({bounds:[e.center[0]-1,e.center[1]-1,e.center[0]+1,e.center[1]+1],zoom:e.zoom,width:Math.min(n,2048),height:Math.min(r,2048),viewport:e}):null,!0}}else this.renderViewport=null;return!1}delete(){this.fbo&&(this.fbo.color.delete(),this.fbo.delete())}}class bt{constructor(){(0,n.Z)(this,"id","terrain-effect"),(0,n.Z)(this,"props",null),(0,n.Z)(this,"useInPicking",!0),(0,n.Z)(this,"isPicking",!1),(0,n.Z)(this,"isDrapingEnabled",!1),(0,n.Z)(this,"dummyHeightMap",void 0),(0,n.Z)(this,"heightMap",void 0),(0,n.Z)(this,"terrainPass",void 0),(0,n.Z)(this,"terrainPickingPass",void 0),(0,n.Z)(this,"terrainCovers",new Map)}initialize(t){this.dummyHeightMap=new g.Z(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])}),this.terrainPass=new gt(t,{id:"terrain"}),this.terrainPickingPass=new vt(t,{id:"terrain-picking"}),yt.isSupported(t)?this.heightMap=new yt(t):J.Z.warn("Terrain offset mode is not supported by this browser")(),ct.Z.getDefaultProgramManager(t).addDefaultModule(dt)}preRender(t,e){if(!this.dummyHeightMap){this.initialize(t);for(const t of e.layers)t.props.operation.includes("terrain")&&t.setChangeFlags({extensionsChanged:!0})}if(e.pickZ)return void(this.isDrapingEnabled=!1);const{viewports:i,isPicking:n=!1}=e;this.isPicking=n,this.isDrapingEnabled=!0;const r=i[0],o=(n?this.terrainPickingPass:this.terrainPass).getRenderableLayers(r,e),s=o.filter((t=>t.props.operation.includes("terrain")));if(0===s.length)return;n||o.filter((t=>"offset"===t.state.terrainDrawMode)).length>0&&this._updateHeightMap(s,r,e);const a=o.filter((t=>"drape"===t.state.terrainDrawMode));this._updateTerrainCovers(s,a,r,e)}getModuleParameters(t){var e,i;const{terrainDrawMode:n}=t.state;return{heightMap:null===(e=this.heightMap)||void 0===e?void 0:e.getRenderFramebuffer(),heightMapBounds:null===(i=this.heightMap)||void 0===i?void 0:i.bounds,dummyHeightMap:this.dummyHeightMap,terrainCover:this.isDrapingEnabled?this.terrainCovers.get(t.id):null,useTerrainHeightMap:"offset"===n,terrainSkipRender:"drape"===n||!t.props.operation.includes("draw")}}cleanup(){this.dummyHeightMap&&(this.dummyHeightMap.delete(),this.dummyHeightMap=void 0),this.heightMap&&(this.heightMap.delete(),this.heightMap=void 0);for(const t of this.terrainCovers.values())t.delete();this.terrainCovers.clear()}_updateHeightMap(t,e,i){this.heightMap&&this.heightMap.shouldUpdate({layers:t,viewport:e})&&this.terrainPass.renderHeightMap(this.heightMap,{...i,layers:t,moduleParameters:{heightMapBounds:this.heightMap.bounds,dummyHeightMap:this.dummyHeightMap,devicePixelRatio:1,drawToTerrainHeightMap:!0}})}_updateTerrainCovers(t,e,i,n){const r={};for(const t of e)t.state.terrainCoverNeedsRedraw&&(r[t.id]=!0,t.state.terrainCoverNeedsRedraw=!1);for(const t of this.terrainCovers.values())t.isDirty=t.isDirty||t.shouldUpdate({layerNeedsRedraw:r});for(const r of t)this._updateTerrainCover(r,e,i,n);this.isPicking||this._pruneTerrainCovers()}_updateTerrainCover(t,e,i,n){const r=this.isPicking?this.terrainPickingPass:this.terrainPass;let o=this.terrainCovers.get(t.id);o||(o=new ft(t),this.terrainCovers.set(t.id,o));try{const s=o.shouldUpdate({targetLayer:t,viewport:i,layers:e});(this.isPicking||o.isDirty||s)&&(r.renderTerrainCover(o,{...n,layers:e,moduleParameters:{dummyHeightMap:this.dummyHeightMap,terrainSkipRender:!1,devicePixelRatio:1}}),o.isDirty=!1)}catch(e){t.raiseError(e,"Error rendering terrain cover ".concat(o.id))}}_pruneTerrainCovers(){const t=[];for(const[e,i]of this.terrainCovers)i.isActive||t.push(e);for(const e of t)this.terrainCovers.delete(e)}}class _t extends r.Z{getShaders(){return{modules:[dt]}}initializeState(){var t;null===(t=this.context.deck)||void 0===t||t._addDefaultEffect(new bt)}updateState(t){const{props:e,oldProps:i}=t;if(this.state.terrainDrawMode&&e.terrainDrawMode===i.terrainDrawMode&&e.extruded===i.extruded)return;let{terrainDrawMode:n}=e;if(!n){var r;const t=this.props.extruded,e=null===(r=this.getAttributeManager())||void 0===r?void 0:r.attributes,i=e&&"instancePositions"in e;n=t||i?"offset":"drape"}this.setState({terrainDrawMode:n})}onNeedsRedraw(){const t=this.state;"drape"===t.terrainDrawMode&&(t.terrainCoverNeedsRedraw=!0)}}(0,n.Z)(_t,"defaultProps",{terrainDrawMode:void 0}),(0,n.Z)(_t,"extensionName","TerrainExtension")},7689:(t,e,i)=>{"use strict";i.r(e),i.d(e,{GeohashLayer:()=>ru,GreatCircleLayer:()=>G,H3ClusterLayer:()=>Ui,H3HexagonLayer:()=>ji,MVTLayer:()=>Jc,QuadkeyLayer:()=>rt,S2Layer:()=>nt,TerrainLayer:()=>Dc,Tile3DLayer:()=>Sc,TileLayer:()=>li,TripsLayer:()=>ui,_GeoCellLayer:()=>q,_Tile2DHeader:()=>dt,_Tileset2D:()=>ri,_WMSLayer:()=>Z,_getURLFromTemplate:()=>We});var n={};i.r(n),i.d(n,{decode:()=>Pr,name:()=>Sr});var r={};i.r(r),i.d(r,{name:()=>Fr,preprocess:()=>Rr});var o={};i.r(o),i.d(o,{name:()=>zr,preprocess:()=>jr});var s={};i.r(s),i.d(s,{decode:()=>Po,encode:()=>Mo,name:()=>Bo,preprocess:()=>So});var a={};i.r(a),i.d(a,{decode:()=>Zo,name:()=>No});var l={};i.r(l),i.d(l,{decode:()=>Qo,encode:()=>Yo,name:()=>qo});var c={};i.r(c),i.d(c,{decode:()=>Ko,encode:()=>$o,name:()=>Jo});var u={};i.r(u),i.d(u,{decode:()=>is,encode:()=>ns,name:()=>es});var h={};i.r(h),i.d(h,{decode:()=>as,name:()=>ss});var d=i(4942),A=i(8918),f=i(6871),p=i(4088),g=i(5395);class m{}var v=i(6487);class y extends m{constructor(t){super(),(0,d.Z)(this,"props",void 0),(0,d.Z)(this,"fetch",void 0),this.props=_(t),this.fetch=b(t)}async getMetadata(){throw new Error("ImageSource.getMetadata not implemented")}async getImage(t){const e=this.getGranularParameters(t),i=this.getURLFromTemplate(e),n=await this.fetch(i),r=await n.arrayBuffer();return await v.S.parse(r)}getGranularParameters(t){const[e,i,n,r]=t.bbox;return{...t,east:e,north:i,south:r,west:n}}getURLFromTemplate(t){let e=this.props.url;for(const[i,n]of Object.entries(t))e=e.replace("${".concat(i,"}"),String(n)),e=e.replace("{".concat(i,"}"),String(n));return e}}function b(t){const e=null==t?void 0:t.fetch;if(e&&"function"==typeof e)return(t,i)=>e(t,i);const i=null==t?void 0:t.fetch;return i&&"function"!=typeof i?t=>fetch(t,i):t=>fetch(t)}function _(t){return{...t,loadOptions:{...t.loadOptions,fetch:b(t.loadOptions)}}}(0,d.Z)(y,"type","template"),(0,d.Z)(y,"testURL",(t=>t.toLowerCase().includes("{")));var w=i(6932);function x(t,e){return new w.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"",...null==e?void 0:e.xml}).parse(t)}const C={name:"XML",id:"xml",module:"xml",version:"3.3.5",worker:!1,extensions:["xml"],mimeTypes:["application/xml","text/xml"],testText:function(t){return t.startsWith("<?xml")},options:{xml:{}},parse:async(t,e)=>x((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>x(t,e)};function E(t,e){const i=C.parseTextSync(t,e);return function(t){var e,i,n;const r={name:(null===(e=t.Service)||void 0===e?void 0:e.Name)||"unnamed",title:null===(i=t.Service)||void 0===i?void 0:i.Title,keywords:[],requests:{},layer:T(null===(n=t.Capability)||void 0===n?void 0:n.Layer),raw:t};for(const e of(null===(o=t.Service)||void 0===o||null===(s=o.KeywordList)||void 0===s?void 0:s.Keyword)||[]){var o,s;r.keywords.push(e)}for(const[e,i]of Object.entries((null===(a=t.Capability)||void 0===a?void 0:a.Request)||{})){var a;r.requests[e]=k(e,i)}return r}(i.WMT_MS_Capabilities||i.WMS_Capabilities||i)}function k(t,e){const i=null==e?void 0:e.Format;return{name:t,mimeTypes:Array.isArray(i)?i:[i]}}function T(t){const e={name:null==t?void 0:t.Name,title:null==t?void 0:t.Title,srs:(null==t?void 0:t.SRS)||[],layers:[]},i=(n=null==t?void 0:t.Layer,Array.isArray(n)?n:n?[n]:[]);var n;for(const t of i){var r;null===(r=e.layers)||void 0===r||r.push(T(t))}return e}function B(t,e){var i;const n=(null===(i=C.parseTextSync(t,e).FeatureInfoResponse)||void 0===i?void 0:i.FIELDS)||[];return{features:(Array.isArray(n)?n:[n]).map((t=>function(t){return{attributes:t||{},type:"",bounds:{bottom:0,top:0,left:0,right:0}}}(t)))}}function S(t,e){return C.parseTextSync(t,e)}const P={id:"wms-capabilities",name:"WMS Capabilities",module:"wms",version:"3.3.5",worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.wms_xml","application/xml","text/xml"],testText:function(t){return t.startsWith("<?xml")},options:{wms:{}},parse:async(t,e)=>E((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>E(t,e)},M={...P,id:"wms-feature-info",name:"WMS FeatureInfo",parse:async(t,e)=>B((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>B(t,e)},I={...P,id:"wms-layer-description",name:"WMS DescribeLayer",parse:async(t,e)=>S((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>S(t,e)},O={id:"wms-error",name:"WMS Error",module:"wms",version:"3.3.5",worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.se_xml","application/xml","text/xml"],testText:function(t){return t.startsWith("<?xml")},options:{wms:{throwOnError:!1}},parse:async(t,e)=>D((new TextDecoder).decode(t),e),parseSync:(t,e)=>D((new TextDecoder).decode(t),e),parseTextSync:(t,e)=>D(t,e)};function D(t,e){const i={...O.options.wms,...null==e?void 0:e.wms},n=function(t,e){var i,n,r;const o=null===(i=C.parseTextSync)||void 0===i?void 0:i.call(C,t,e),s=(null==o||null===(n=o.ServiceExceptionReport)||void 0===n?void 0:n.ServiceException)||(null==o||null===(r=o["ogc:ServiceExceptionReport"])||void 0===r?void 0:r["ogc:ServiceException"]);return"string"==typeof s?s:s["#text"]||s.code||"Unknown error"}(t,i),r=i.minimalErrors?n:"WMS Service error: ".concat(n);if(i.throwOnError)throw new Error(r);return r}class L extends m{constructor(t){var e;super(),(0,d.Z)(this,"props",void 0),(0,d.Z)(this,"fetch",void 0),(0,d.Z)(this,"capabilities",null),(0,d.Z)(this,"loaders",[v.S,O,P,M,I]),this.props=_(t),this.fetch=b(this.props),this.props.loadOptions={...this.props.loadOptions,wms:{...null===(e=this.props.loadOptions)||void 0===e?void 0:e.wms,throwOnError:!0}}}getMetadata(){return this.getCapabilities()}getImage(t){return this.getMap(t)}async getCapabilities(t,e){const i=this.getCapabilitiesURL(t,e),n=await this.fetch(i),r=await n.arrayBuffer();this._checkResponse(n,r);const o=await P.parse(r,this.props.loadOptions);return this.capabilities=o,o}async getMap(t,e){const i=this.getMapURL(t,e),n=await this.fetch(i),r=await n.arrayBuffer();this._checkResponse(n,r);try{return await v.S.parse(r,this.props.loadOptions)}catch{throw this._parseError(r)}}async getFeatureInfo(t,e){const i=this.getFeatureInfoURL(t,e),n=await this.fetch(i),r=await n.arrayBuffer();return this._checkResponse(n,r),await M.parse(r,this.props.loadOptions)}async getFeatureInfoText(t,e){t={...t,info_format:"text/plain"};const i=this.getFeatureInfoURL(t,e),n=await this.fetch(i),r=await n.arrayBuffer();return this._checkResponse(n,r),(new TextDecoder).decode(r)}async describeLayer(t,e){const i=this.describeLayerURL(t,e),n=await this.fetch(i),r=await n.arrayBuffer();return this._checkResponse(n,r),await I.parse(r,this.props.loadOptions)}async getLegendGraphic(t,e){const i=this.getLegendGraphicURL(t,e),n=await this.fetch(i),r=await n.arrayBuffer();this._checkResponse(n,r);try{return await v.S.parse(r,this.props.loadOptions)}catch{throw this._parseError(r)}}getCapabilitiesURL(t,e){const i={service:"WMS",version:"1.1.1",request:"GetCapabilities",...t,...e};return this._getWMSUrl(i,e)}getMapURL(t,e){const i={service:"WMS",version:"1.1.1",request:"GetMap",styles:void 0,srs:"EPSG:4326",format:"image/png",...t,...e};return this._getWMSUrl(i,e)}getFeatureInfoURL(t,e){const i={service:"WMS",version:"1.1.1",request:"GetFeatureInfo",srs:"EPSG:4326",format:"image/png",info_format:"text/plain",styles:void 0,...t,...e};return this._getWMSUrl(i,e)}describeLayerURL(t,e){const i={service:"WMS",version:"1.1.1",request:"DescribeLayer",...t,...e};return this._getWMSUrl(i,e)}getLegendGraphicURL(t,e){const i={service:"WMS",version:"1.1.1",request:"GetLegendGraphic",...t,...e};return this._getWMSUrl(i,e)}_getWMSUrl(t,e){let i=this.props.url,n=!0;for(const[e,r]of Object.entries(t))i+=n?"?":"&",n=!1,Array.isArray(r)?i+="".concat(e.toUpperCase(),"=").concat(r.join(",")):i+="".concat(e.toUpperCase(),"=").concat(r?String(r):"");return encodeURI(i)}_checkResponse(t,e){const i=t.headers["content-type"];if(!t.ok||O.mimeTypes.includes(i)){const t=O.parseSync(e,this.props.loadOptions);throw new Error(t)}}_parseError(t){const e=O.parseSync(t,this.props.loadOptions);return new Error(e)}}(0,d.Z)(L,"type","wms"),(0,d.Z)(L,"testURL",(t=>t.toLowerCase().includes("wms")));class F extends m{constructor(t){super(),(0,d.Z)(this,"props",void 0),(0,d.Z)(this,"fetch",void 0),this.props=_(t),this.fetch=b(this.props)}async getMetadata(){return await this.info()}async getImage(t){throw new Error("not implemented")}async info(){throw new Error("not implemented")}exportImage(t){throw new Error("not implemented")}infoURL(t){return this.props.url}exportImageURL(t){return this.props.url}getUrl(t,e){let i="".concat(this.props.url),n=!0;for(const[e,r]of Object.entries(t))i+=n?"?":"&",n=!1,Array.isArray(r)?i+="".concat(e.toUpperCase(),"=").concat(r.join(",")):i+="".concat(e.toUpperCase(),"=").concat(r?String(r):"");return i}async checkResponse(t){if(!t.ok)throw new Error("error")}}(0,d.Z)(F,"type","arcgis-image-server"),(0,d.Z)(F,"testURL",(t=>t.toLowerCase().includes("ImageServer")));const R=[L,F,y];var N=i(7013);const z=6378137*Math.PI;function j(t){const e=(0,N.w5)(t);return e[0]=(e[0]/256-1)*z,e[1]=(e[1]/256-1)*z,e}const U={id:"imagery-layer",data:"",serviceType:"auto",srs:"auto",layers:{type:"array",compare:!0,value:[]},onMetadataLoad:{type:"function",value:()=>{}},onMetadataLoadError:{type:"function",value:console.error},onImageLoadStart:{type:"function",value:()=>{}},onImageLoad:{type:"function",value:()=>{}},onImageLoadError:{type:"function",compare:!1,value:(t,e)=>console.error(e,t)}};class Z extends A.Z{constructor(...t){super(...t),(0,d.Z)(this,"state",void 0)}get isLoaded(){return Boolean(this.state)&&0===this.state.loadCounter&&super.isLoaded}shouldUpdateState(){return!0}initializeState(){this.state._nextRequestId=0,this.state.lastRequestId=-1,this.state.loadCounter=0}updateState({changeFlags:t,props:e,oldProps:i}){const{viewport:n}=this.context;t.dataChanged||e.serviceType!==i.serviceType?(this.state.imageSource=this._createImageSource(e),this._loadMetadata(),this.debounce((()=>this.loadImage(n,"image source changed")),0)):(0,f.v)(e.layers,i.layers,1)?t.viewportChanged&&this.debounce((()=>this.loadImage(n,"viewport changed"))):this.debounce((()=>this.loadImage(n,"layers changed")),0)}finalizeState(){}renderLayers(){const{bounds:t,image:e,lastRequestParameters:i}=this.state;return e&&new g.Z({...this.getSubLayerProps({id:"bitmap"}),_imageCoordinateSystem:"EPSG:4326"===i.srs?p.Df.LNGLAT:p.Df.CARTESIAN,bounds:t,image:e})}async getFeatureInfoText(t,e){const{lastRequestParameters:i}=this.state;var n,r;return i?await(null===(n=(r=this.state.imageSource).getFeatureInfoText)||void 0===n?void 0:n.call(r,{...i,query_layers:i.layers,x:t,y:e,info_format:"application/vnd.ogc.gml"})):""}_createImageSource(t){if(t.data instanceof m)return t.data;if("string"==typeof t.data)return function(t){const{type:e="auto"}=t;switch("auto"===e?function(t){for(const e of R)if(e.testURL&&e.testURL(t))return e.type;return"wms"}(t.url):e){case"template":return new y(t);case"wms":return new L(t);default:throw new Error("Not a valid image source type")}}({url:t.data,loadOptions:t.loadOptions,type:t.serviceType});throw new Error("invalid image source in props.data")}async _loadMetadata(){const{imageSource:t}=this.state;try{this.state.loadCounter++;const i=await t.getMetadata();var e;this.state.imageSource===t&&(null===(e=this.getCurrentLayer())||void 0===e||e.props.onMetadataLoad(i))}catch(t){var i;null===(i=this.getCurrentLayer())||void 0===i||i.props.onMetadataLoadError(t)}finally{this.state.loadCounter--}}async loadImage(t,e){const{layers:i,serviceType:n}=this.props;if("wms"===n&&0===i.length)return;const r=t.getBounds(),{width:o,height:s}=t,a=this.getRequestId();let{srs:l}=this.props;"auto"===l&&(l=t.resolution?"EPSG:4326":"EPSG:3857");const c={width:o,height:s,bbox:r,layers:i,srs:l};if("EPSG:3857"===l){const[t,e]=j([r[0],r[1]]),[i,n]=j([r[2],r[3]]);c.bbox=[t,e,i,n]}try{this.state.loadCounter++,this.props.onImageLoadStart(a);const t=await this.state.imageSource.getImage(c);var u;this.state.lastRequestId<a&&(null===(u=this.getCurrentLayer())||void 0===u||u.props.onImageLoad(a),this.setState({image:t,bounds:r,lastRequestParameters:c,lastRequestId:a}))}catch(t){var h;this.raiseError(t,"Load image"),null===(h=this.getCurrentLayer())||void 0===h||h.props.onImageLoadError(a,t)}finally{this.state.loadCounter--}}getRequestId(){return this.state._nextRequestId++}debounce(t,e=500){clearTimeout(this.state._timeoutId),this.state._timeoutId=setTimeout((()=>t()),e)}}(0,d.Z)(Z,"layerName","WMSLayer"),(0,d.Z)(Z,"defaultProps",U);var H=i(4717);class G extends H.Z{}(0,d.Z)(G,"layerName","GreatCircleLayer"),(0,d.Z)(G,"defaultProps",{getHeight:{type:"accessor",value:0},greatCircle:!0});var V=i(3121);const W={...V.Z.defaultProps};class q extends A.Z{indexToBounds(){return null}renderLayers(){const{elevationScale:t,extruded:e,wireframe:i,filled:n,stroked:r,lineWidthUnits:o,lineWidthScale:s,lineWidthMinPixels:a,lineWidthMaxPixels:l,lineJointRounded:c,lineMiterLimit:u,lineDashJustified:h,getElevation:d,getFillColor:A,getLineColor:f,getLineWidth:p}=this.props,{updateTriggers:g,material:m,transitions:v}=this.props;return new(this.getSubLayerClass("cell",V.Z))({filled:n,wireframe:i,extruded:e,elevationScale:t,stroked:r,lineWidthUnits:o,lineWidthScale:s,lineWidthMinPixels:a,lineWidthMaxPixels:l,lineJointRounded:c,lineMiterLimit:u,lineDashJustified:h,material:m,transitions:v,getElevation:d,getFillColor:A,getLineColor:f,getLineWidth:p},this.getSubLayerProps({id:"cell",updateTriggers:g&&{getElevation:g.getElevation,getFillColor:g.getFillColor,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}),this.indexToBounds())}}(0,d.Z)(q,"layerName","GeoCellLayer"),(0,d.Z)(q,"defaultProps",W);var Q=i(514),Y=i.n(Q);const X=180/Math.PI;function J(t,e,i){const n=1<<e;return[(t[0]+i[0])/n,(t[1]+i[1])/n]}function K(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function $(t,[e,i]){switch(t){case 0:return[1,e,i];case 1:return[-e,1,i];case 2:return[-e,-i,1];case 3:return[-1,-i,-e];case 4:return[i,-1,-e];case 5:return[i,e,-1];default:throw new Error("Invalid face")}}function tt([t,e,i]){const n=Math.atan2(i,Math.sqrt(t*t+e*e));return[Math.atan2(e,t)*X,n*X]}function et(t,e,i,n){if(0===n){1===i&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const n=e[0];e[0]=e[1],e[1]=n}}function it(t){const e=function(t){const e=t.split("/"),i=parseInt(e[0],10),n=e[1],r=n.length,o=[0,0];let s;for(let t=r-1;t>=0;t--){s=r-t;const e=n[t];let i=0,a=0;"1"===e?a=1:"2"===e?(i=1,a=1):"3"===e&&(i=1);const l=Math.pow(2,s-1);et(l,o,i,a),o[0]+=l*i,o[1]+=l*a}if(i%2==1){const t=o[0];o[0]=o[1],o[1]=t}return{face:i,ij:o,level:s}}(function(t){if("string"==typeof t){if(t.indexOf("/")>0)return t;t=function(t){const e=t.padEnd(16,"0");return Y().fromString(e,16)}(t)}return function(t){let e=Y().fromString(t,!0,10).toString(2);for(;e.length<64;)e="0"+e;const i=e.lastIndexOf("1"),n=e.substring(0,3),r=e.substring(3,i),o=r.length/2,s=Y().fromString(n,!0,2).toString(10);let a=Y().fromString(r,!0,2).toString(4);for(;a.length<o;)a="0"+a;return"".concat(s,"/").concat(a)}(t.toString())}(t));return function({face:t,ij:e,level:i}){const n=[[0,0],[0,1],[1,1],[1,0],[0,0]],r=Math.max(1,Math.ceil(100*Math.pow(2,-i))),o=new Float64Array(4*r*2+2);let s=0,a=0;for(let c=0;c<4;c++){const u=n[c].slice(0),h=n[c+1],d=(h[0]-u[0])/r,A=(h[1]-u[1])/r;for(let n=0;n<r;n++){u[0]+=d,u[1]+=A;const n=tt($(t,[K((l=J(e,i,u))[0]),K(l[1])]));Math.abs(n[1])>89.999&&(n[0]=a);const r=n[0]-a;n[0]+=r>180?-360:r<-180?360:0,o[s++]=n[0],o[s++]=n[1],a=n[0]}}var l;return o[s++]=o[0],o[s++]=o[1],o}(e)}class nt extends q{indexToBounds(){const{data:t,getS2Token:e}=this.props;return{data:t,_normalize:!1,positionFormat:"XY",getPolygon:(t,i)=>it(e(t,i))}}}(0,d.Z)(nt,"layerName","S2Layer"),(0,d.Z)(nt,"defaultProps",{getS2Token:{type:"accessor",value:t=>t.token}});class rt extends q{indexToBounds(){const{data:t,getQuadkey:e}=this.props;return{data:t,_normalize:!1,positionFormat:"XY",getPolygon:(t,i)=>function(t){const[e,i]=function(t){let e=0,i=0,n=1<<t.length;const r=n/512;for(let r=0;r<t.length;r++){n>>=1;const o=parseInt(t[r]);o%2&&(e|=n),o>1&&(i|=n)}return[[e/r,512-i/r],[(e+.99)/r,512-(i+.99)/r]]}(t),[n,r]=(0,N.es)(e),[o,s]=(0,N.es)(i);return[o,r,o,s,n,s,n,r,o,r]}(e(t,i))}}}(0,d.Z)(rt,"layerName","QuadkeyLayer"),(0,d.Z)(rt,"defaultProps",{getQuadkey:{type:"accessor",value:t=>t.quadkey}});var ot=i(1855),st=i(9026),at=i(8295);const lt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class ct{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.Z)(this,"props",void 0),(0,d.Z)(this,"stats",void 0),(0,d.Z)(this,"activeRequestCount",0),(0,d.Z)(this,"requestQueue",[]),(0,d.Z)(this,"requestMap",new Map),(0,d.Z)(this,"deferredUpdate",null),this.props={...lt,...t},this.stats=new at.Z({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const i={handle:t,priority:0,getPriority:e},n=new Promise((t=>(i.resolve=t,i)));return this.requestQueue.push(i),this.requestMap.set(t,n),this._issueNewRequests(),n}_issueRequest(t){const{handle:e,resolve:i}=t;let n=!1;const r=()=>{n||(n=!0,this.requestMap.delete(e),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,i?i({done:r}):Promise.resolve({done:r})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(let e=0;e<t;++e){const t=this.requestQueue.shift();t&&this._issueRequest(t)}}}_updateAllRequests(){const t=this.requestQueue;for(let e=0;e<t.length;++e){const i=t[e];this._updateRequest(i)||(t.splice(e,1),this.requestMap.delete(i.handle),e--)}t.sort(((t,e)=>t.priority-e.priority))}_updateRequest(t){return t.priority=t.getPriority(t.handle),!(t.priority<0&&(t.resolve(null),1))}}var ut=i(5451),ht=i(4034);class dt{constructor(t){(0,d.Z)(this,"index",void 0),(0,d.Z)(this,"isVisible",void 0),(0,d.Z)(this,"isSelected",void 0),(0,d.Z)(this,"parent",void 0),(0,d.Z)(this,"children",void 0),(0,d.Z)(this,"content",void 0),(0,d.Z)(this,"state",void 0),(0,d.Z)(this,"layers",void 0),(0,d.Z)(this,"id",void 0),(0,d.Z)(this,"zoom",void 0),(0,d.Z)(this,"userData",void 0),(0,d.Z)(this,"boundingBox",void 0),(0,d.Z)(this,"_abortController",void 0),(0,d.Z)(this,"_loader",void 0),(0,d.Z)(this,"_loaderId",void 0),(0,d.Z)(this,"_isLoaded",void 0),(0,d.Z)(this,"_isCancelled",void 0),(0,d.Z)(this,"_needsReload",void 0),(0,d.Z)(this,"_bbox",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(t){this._bbox||(this._bbox=t,this.boundingBox="west"in t?[[t.west,t.south],[t.east,t.north]]:[[t.left,t.top],[t.right,t.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}async _loadData({getData:t,requestScheduler:e,onLoad:i,onError:n}){const{index:r,id:o,bbox:s,userData:a,zoom:l}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:u}=this._abortController,h=await e.scheduleRequest(this,(t=>t.isSelected?1:-1));if(!h)return void(this._isCancelled=!0);if(this._isCancelled)return void h.done();let d,A=null;try{A=await t({index:r,id:o,bbox:s,userData:a,zoom:l,signal:u})}catch(t){d=t||!0}finally{h.done()}c===this._loaderId&&(this._loader=void 0,this.content=A,!this._isCancelled||A?(this._isLoaded=!0,this._isCancelled=!1,d?n(d,this):i(this)):this._isLoaded=!1)}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,null===(t=this._abortController)||void 0===t||t.abort())}}var At=i(3131),ft=i(6935);const pt=-1;var gt=i(3855);const mt=new gt.Z,vt=new gt.Z;class yt{constructor(t=[0,0,0],e=[0,0,0],i){(0,d.Z)(this,"center",void 0),(0,d.Z)(this,"halfDiagonal",void 0),(0,d.Z)(this,"minimum",void 0),(0,d.Z)(this,"maximum",void 0),i=i||mt.copy(t).add(e).scale(.5),this.center=new gt.Z(i),this.halfDiagonal=new gt.Z(e).subtract(this.center),this.minimum=new gt.Z(t),this.maximum=new gt.Z(e)}clone(){return new yt(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,i=vt.from(t.normal),n=e.x*Math.abs(i.x)+e.y*Math.abs(i.y)+e.z*Math.abs(i.z),r=this.center.dot(i)+t.distance;return r-n>0?1:r+n<0?pt:0}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=mt.from(t).subtract(this.center),{halfDiagonal:i}=this;let n,r=0;return n=Math.abs(e.x)-i.x,n>0&&(r+=n*n),n=Math.abs(e.y)-i.y,n>0&&(r+=n*n),n=Math.abs(e.z)-i.z,n>0&&(r+=n*n),r}}var bt=i(5975);const _t=new gt.Z,wt=new gt.Z;class xt{constructor(t=[0,0,0],e=0){(0,d.Z)(this,"center",void 0),(0,d.Z)(this,"radius",void 0),this.radius=-0,this.center=new gt.Z,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=_t.from(e),this.center=(new gt.Z).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new xt(this.center,this.radius)}union(t){const e=this.center,i=this.radius,n=t.center,r=t.radius,o=_t.copy(n).subtract(e),s=o.magnitude();if(i>=s+r)return this.clone();if(r>=s+i)return t.clone();const a=.5*(i+s+r);return wt.copy(o).scale((-i+a)/s).add(e),this.center.copy(wt),this.radius=a,this}expand(t){const e=_t.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=bt.Q$(_t,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=_t.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,i=this.radius,n=t.normal.dot(e)+t.distance;return n<-i?pt:n<i?0:1}}var Ct=i(1e3),Et=i(6281),kt=i(1031),Tt=i(9685);function Bt(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=i[0],A=i[1],f=i[2],p=i[3],g=i[4],m=i[5],v=i[6],y=i[7],b=i[8];return t[0]=d*n+A*s+f*c,t[1]=d*r+A*a+f*u,t[2]=d*o+A*l+f*h,t[3]=p*n+g*s+m*c,t[4]=p*r+g*a+m*u,t[5]=p*o+g*l+m*h,t[6]=v*n+y*s+b*c,t[7]=v*r+y*a+b*u,t[8]=v*o+y*l+b*h,t}function St(t,e,i){var n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}var Pt,Mt=i(1437),It=i(7160);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(Pt||(Pt={}));const Ot=Object.freeze([1,0,0,0,1,0,0,0,1]);class Dt extends Ct.Z{static get IDENTITY(){return Ft||(Ft=new Dt,Object.freeze(Ft)),Ft}static get ZERO(){return Lt||(Lt=new Dt([0,0,0,0,0,0,0,0,0]),Object.freeze(Lt)),Lt}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Pt}constructor(t,...e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):e.length>0?this.copy([t,...e]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(Ot)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i+i,a=n+n,l=r+r,c=i*s,u=n*s,h=n*a,d=r*s,A=r*a,f=r*l,p=o*s,g=o*a,m=o*l;t[0]=1-h-f,t[3]=u-m,t[6]=d+g,t[1]=u+m,t[4]=1-c-f,t[7]=A-p,t[2]=d-g,t[5]=A+p,t[8]=1-c-h}(this,t),this.check()}set(t,e,i,n,r,o,s,a,l){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this.check()}setRowMajor(t,e,i,n,r,o,s,a,l){return this[0]=t,this[1]=n,this[2]=s,this[3]=e,this[4]=r,this[5]=a,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*(c*o-s*l)+i*(-c*r+s*a)+n*(l*r-o*a)}(this)}transpose(){return function(t,e){if(t===e){var i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*s-a*c,d=-u*o+a*l,A=c*o-s*l,f=i*h+n*d+r*A;f&&(f=1/f,t[0]=h*f,t[1]=(-u*n+r*c)*f,t[2]=(a*n-r*s)*f,t[3]=d*f,t[4]=(u*i-r*l)*f,t[5]=(-a*i+r*o)*f,t[6]=A*f,t[7]=(-c*i+n*l)*f,t[8]=(s*i-n*o)*f)}(this,this),this.check()}multiplyLeft(t){return Bt(this,t,this),this.check()}multiplyRight(t){return Bt(this,this,t),this.check()}rotate(t){return function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=Math.sin(i),A=Math.cos(i);t[0]=A*n+d*s,t[1]=A*r+d*a,t[2]=A*o+d*l,t[3]=A*s-d*n,t[4]=A*a-d*r,t[5]=A*l-d*o,t[6]=c,t[7]=u,t[8]=h}(this,this,t),this.check()}scale(t){return Array.isArray(t)?St(this,this,t):St(this,this,[t,t]),this.check()}translate(t){return function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=i[0],A=i[1];t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=d*n+A*s+c,t[7]=d*r+A*a+u,t[8]=d*o+A*l+h}(this,this,t),this.check()}transform(t,e){let i;switch(t.length){case 2:i=Mt.kK(e||[-0,-0],t,this);break;case 3:i=It.kK(e||[-0,-0,-0],t,this);break;case 4:i=(0,kt._x)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,Et.IL)(i,t.length),i}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let Lt,Ft;var Rt=i(6357),Nt=i(9521);let zt;class jt extends Nt.Z{static get ZERO(){return zt||(zt=new jt(0,0,0,0),Object.freeze(zt)),zt}constructor(t=0,e=0,i=0,n=0){super(-0,-0,-0,-0),(0,ht.kJ)(t)&&1===arguments.length?this.copy(t):(ht.vc.debug&&((0,Et.u5)(t),(0,Et.u5)(e),(0,Et.u5)(i),(0,Et.u5)(n)),this[0]=t,this[1]=e,this[2]=i,this[3]=n)}set(t,e,i,n){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return ht.vc.debug&&((0,Et.u5)(t.x),(0,Et.u5)(t.y),(0,Et.u5)(t.z),(0,Et.u5)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=(0,Et.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,Et.u5)(t)}transform(t){return It.fF(this,this,t),this.check()}transformByMatrix3(t){return(0,kt._x)(this,this,t),this.check()}transformByMatrix2(t){return(0,kt.G7)(this,this,t),this.check()}transformByQuaternion(t){return It.VC(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}var Ut=i(8333);function Zt(){var t=new Tt.WT(4);return Tt.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ht(t,e,i){i*=.5;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function Gt(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1],c=i[2],u=i[3];return t[0]=n*u+s*a+r*c-o*l,t[1]=r*u+s*l+o*a-n*c,t[2]=o*u+s*c+n*l-r*a,t[3]=s*u-n*a-r*l-o*c,t}Ut.d9,Ut.al,Ut.JG,Ut.t8;var Vt,Wt,qt,Qt,Yt=Ut.IH,Xt=Ut.bA,Jt=Ut.AK,Kt=Ut.t7,$t=Ut.kE,te=Ut.we,ee=Ut.Fv,ie=(Ut.I6,Ut.fS,Vt=It.Ue(),Wt=It.al(1,0,0),qt=It.al(0,1,0),function(t,e,i){var n=It.AK(e,i);return n<-.999999?(It.kC(Vt,Wt,e),It.Zh(Vt)<1e-6&&It.kC(Vt,qt,e),It.Fv(Vt,Vt),Ht(t,Vt,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(It.kC(Vt,e,i),t[0]=Vt[0],t[1]=Vt[1],t[2]=Vt[2],t[3]=1+n,ee(t,t))});Zt(),Zt(),Qt=new Tt.WT(9),Tt.WT!=Float32Array&&(Qt[1]=0,Qt[2]=0,Qt[3]=0,Qt[5]=0,Qt[6]=0,Qt[7]=0),Qt[0]=1,Qt[4]=1,Qt[8]=1;const ne=[0,0,0,1];class re extends Rt.Z{constructor(t=0,e=0,i=0,n=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,i,n)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,i,n){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return function(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*o+s]-e[3*s+o])*i,t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}}(this,t),this.check()}fromAxisRotation(t,e){return Ht(this,t,e),this.check()}identity(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=(0,Et.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,Et.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,Et.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,Et.u5)(t)}len(){return $t(this)}lengthSquared(){return te(this)}dot(t){return Jt(this,t)}rotationTo(t,e){return ie(this,t,e),this.check()}add(t){return Yt(this,this,t),this.check()}calculateW(){return function(t,e){var i=e[0],n=e[1],r=e[2];t[0]=i,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-r*r))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o,a=s?1/s:0;t[0]=-i*a,t[1]=-n*a,t[2]=-r*a,t[3]=o*a}(this,this),this.check()}lerp(t,e,i){return void 0===i?this.lerp(this,t,e):(Kt(this,t,e,i),this.check())}multiplyRight(t){return Gt(this,this,t),this.check()}multiplyLeft(t){return Gt(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);t[0]=n*l+s*a,t[1]=r*l+o*a,t[2]=o*l-r*a,t[3]=s*l-n*a}(this,this,t),this.check()}rotateY(t){return function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);t[0]=n*l-o*a,t[1]=r*l+s*a,t[2]=o*l+n*a,t[3]=s*l-r*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);t[0]=n*l+r*a,t[1]=r*l-n*a,t[2]=o*l+s*a,t[3]=s*l-o*a}(this,this,t),this.check()}scale(t){return Xt(this,this,t),this.check()}slerp(t,e,i){let n,r,o;switch(arguments.length){case 1:({start:n=ne,target:r,ratio:o}=t);break;case 2:n=this,r=t,o=e;break;default:n=t,r=e,o=i}return function(t,e,i,n){var r,o,s,a,l,c=e[0],u=e[1],h=e[2],d=e[3],A=i[0],f=i[1],p=i[2],g=i[3];(o=c*A+u*f+h*p+d*g)<0&&(o=-o,A=-A,f=-f,p=-p,g=-g),1-o>Tt.Ib?(r=Math.acos(o),s=Math.sin(r),a=Math.sin((1-n)*r)/s,l=Math.sin(n*r)/s):(a=1-n,l=n),t[0]=a*c+l*A,t[1]=a*u+l*f,t[2]=a*h+l*p,t[3]=a*d+l*g}(this,n,r,o),this.check()}transformVector4(t,e=new jt){return Ut.VC(e,t,this),(0,Et.IL)(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const oe=new gt.Z,se=new gt.Z,ae=new gt.Z,le=new gt.Z,ce=new gt.Z,ue=new gt.Z,he=new gt.Z;class de{constructor(t=[0,0,0],e=[0,0,0,0,0,0,0,0,0]){(0,d.Z)(this,"center",void 0),(0,d.Z)(this,"halfAxes",void 0),this.center=(new gt.Z).from(t),this.halfAxes=new Dt(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new gt.Z(t).len(),new gt.Z(e).len(),new gt.Z(i).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),n=new gt.Z(t).normalize(),r=new gt.Z(e).normalize(),o=new gt.Z(i).normalize();return(new re).fromMatrix3(new Dt([...n,...r,...o]))}fromCenterHalfSizeQuaternion(t,e,i){const n=new re(i),r=(new Dt).fromQuaternion(n);return r[0]=r[0]*e[0],r[1]=r[1]*e[0],r[2]=r[2]*e[0],r[3]=r[3]*e[1],r[4]=r[4]*e[1],r[5]=r[5]*e[1],r[6]=r[6]*e[2],r[7]=r[7]*e[2],r[8]=r[8]*e[2],this.center=(new gt.Z).from(t),this.halfAxes=r,this}clone(){return new de(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new xt){const e=this.halfAxes,i=e.getColumn(0,ae),n=e.getColumn(1,le),r=e.getColumn(2,ce),o=oe.copy(i).add(n).add(r);return t.center.copy(this.center),t.radius=o.magnitude(),t}intersectPlane(t){const e=this.center,i=t.normal,n=this.halfAxes,r=i.x,o=i.y,s=i.z,a=Math.abs(r*n[0]+o*n[1]+s*n[2])+Math.abs(r*n[3]+o*n[4]+s*n[5])+Math.abs(r*n[6]+o*n[7]+s*n[8]),l=i.dot(e)+t.distance;return l<=-a?pt:l>=a?1:0}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=se.from(t).subtract(this.center),i=this.halfAxes,n=i.getColumn(0,ae),r=i.getColumn(1,le),o=i.getColumn(2,ce),s=n.magnitude(),a=r.magnitude(),l=o.magnitude();n.normalize(),r.normalize(),o.normalize();let c,u=0;return c=Math.abs(e.dot(n))-s,c>0&&(u+=c*c),c=Math.abs(e.dot(r))-a,c>0&&(u+=c*c),c=Math.abs(e.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(t,e,i=[-0,-0]){let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,ae),l=s.getColumn(1,le),c=s.getColumn(2,ce),u=ue.copy(a).add(l).add(c).add(o),h=he.copy(u).subtract(t);let d=e.dot(h);return n=Math.min(d,n),r=Math.max(d,r),u.copy(o).add(a).add(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),u.copy(o).add(a).subtract(l).add(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),u.copy(o).add(a).subtract(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),o.copy(u).subtract(a).add(l).add(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),o.copy(u).subtract(a).add(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),o.copy(u).subtract(a).subtract(l).add(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),o.copy(u).subtract(a).subtract(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),n=Math.min(d,n),r=Math.max(d,r),i[0]=n,i[1]=r,i}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,ae);e.transformAsPoint(t);const i=this.halfAxes.getColumn(1,le);i.transformAsPoint(t);const n=this.halfAxes.getColumn(2,ce);return n.transformAsPoint(t),this.halfAxes=new Dt([...e,...i,...n]),this}getTransform(){throw new Error("not implemented")}}var Ae=i(394);const fe=new gt.Z,pe=new gt.Z;class ge{constructor(t=[0,0,1],e=0){(0,d.Z)(this,"normal",void 0),(0,d.Z)(this,"distance",void 0),this.normal=new gt.Z,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return(0,Ae.Z)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=fe.from(t),this.normal.from(e).normalize();const i=-this.normal.dot(t);return this.distance=i,this}fromCoefficients(t,e,i,n){return this.normal.set(t,e,i),(0,Ae.Z)((0,ht.fS)(this.normal.len(),1)),this.distance=n,this}clone(){return new ge(this.normal,this.distance)}equals(t){return(0,ht.fS)(this.distance,t.distance)&&(0,ht.fS)(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=pe.copy(this.normal).transformAsVector(t).normalize(),i=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(i,e)}projectPointOntoPlane(t,e=[0,0,0]){t=fe.from(t);const i=this.getPointDistance(t),n=pe.copy(this.normal).scale(i);return t.subtract(n).to(e)}}const me=[new gt.Z([1,0,0]),new gt.Z([0,1,0]),new gt.Z([0,0,1])],ve=new gt.Z,ye=new gt.Z;new ge(new gt.Z(1,0,0),0);class be{constructor(t=[]){(0,d.Z)(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*me.length;const e=t.center,i=t.radius;let n=0;for(const t of me){let r=this.planes[n],o=this.planes[n+1];r||(r=this.planes[n]=new ge),o||(o=this.planes[n+1]=new ge);const s=ve.copy(t).scale(-i).add(e);t.dot(s),r.fromPointNormal(s,t);const a=ve.copy(t).scale(i).add(e),l=ye.copy(t).negate();l.dot(a),o.fromPointNormal(a,l),n+=2}return this}computeVisibility(t){let e=1;for(const i of this.planes)switch(t.intersectPlane(i)){case pt:return pt;case 0:e=0}return e}computeVisibilityWithPlaneMask(t,e){if((0,Ae.Z)(Number.isFinite(e),"parentPlaneMask is required."),e===be.MASK_OUTSIDE||e===be.MASK_INSIDE)return e;let i=be.MASK_INSIDE;const n=this.planes;for(let r=0;r<this.planes.length;++r){const o=r<31?1<<r:0;if(r<31&&0==(e&o))continue;const s=n[r],a=t.intersectPlane(s);if(a===pt)return be.MASK_OUTSIDE;0===a&&(i|=o)}return i}}(0,d.Z)(be,"MASK_OUTSIDE",4294967295),(0,d.Z)(be,"MASK_INSIDE",0),(0,d.Z)(be,"MASK_INDETERMINATE",2147483647),new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,new gt.Z,Math.PI;const _e=(Math.PI,Math.PI,Math.PI,Math.PI,new Dt),we=new Dt,xe=new Dt,Ce=new Dt,Ee=new Dt;const ke=[1,0,0],Te=[2,2,1];function Be(t){let e=0;for(let i=0;i<3;++i){const n=t[_e.getElementIndex(Te[i],ke[i])];e+=2*n*n}return Math.sqrt(e)}function Se(t,e){let i=0,n=1;for(let e=0;e<3;++e){const r=Math.abs(t[_e.getElementIndex(Te[e],ke[e])]);r>i&&(n=e,i=r)}const r=ke[n],o=Te[n];let s=1,a=0;if(Math.abs(t[_e.getElementIndex(o,r)])>1e-15){const e=(t[_e.getElementIndex(o,o)]-t[_e.getElementIndex(r,r)])/2/t[_e.getElementIndex(o,r)];let i;i=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),s=1/Math.sqrt(1+i*i),a=i*s}return Dt.IDENTITY.to(e),e[_e.getElementIndex(r,r)]=e[_e.getElementIndex(o,o)]=s,e[_e.getElementIndex(o,r)]=a,e[_e.getElementIndex(r,o)]=-a,e}const Pe=new gt.Z,Me=new gt.Z,Ie=new gt.Z,Oe=new gt.Z,De=new gt.Z,Le=new Dt,Fe={diagonal:new Dt,unitary:new Dt},Re=512,Ne=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],ze=Ne.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),je=ze.concat([[.25,.5],[.75,.5]]);class Ue{constructor(t,e,i){(0,d.Z)(this,"x",void 0),(0,d.Z)(this,"y",void 0),(0,d.Z)(this,"z",void 0),(0,d.Z)(this,"childVisible",void 0),(0,d.Z)(this,"selected",void 0),(0,d.Z)(this,"_children",void 0),this.x=t,this.y=e,this.z=i}get children(){if(!this._children){const t=2*this.x,e=2*this.y,i=this.z+1;this._children=[new Ue(t,e,i),new Ue(t,e+1,i),new Ue(t+1,e,i),new Ue(t+1,e+1,i)]}return this._children}update(t){const{viewport:e,cullingVolume:i,elevationBounds:n,minZ:r,maxZ:o,bounds:s,offset:a,project:l}=t,c=this.getBoundingVolume(n,a,l);if(s&&!this.insideBounds(s))return!1;if(i.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:t}=this;if(t<o&&t>=r){const i=c.distanceTo(e.cameraPosition)*e.scale/e.height;t+=Math.floor(Math.log2(i))}if(t>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const e of this.children)e.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const e of this._children)e.getSelected(t);return t}insideBounds([t,e,i,n]){const r=Math.pow(2,this.z),o=Re/r;return this.x*o<i&&this.y*o<n&&(this.x+1)*o>t&&(this.y+1)*o>e}getBoundingVolume(t,e,i){if(i){const e=this.z<1?je:this.z<2?ze:Ne,n=[];for(const r of e){const e=Xe(this.x+r[0],this.y+r[1],this.z);e[2]=t[0],n.push(i(e)),t[0]!==t[1]&&(e[2]=t[1],n.push(i(e)))}return function(t,e=new de){if(!t||0===t.length)return e.halfAxes=new Dt([0,0,0,0,0,0,0,0,0]),e.center=new gt.Z,e;const i=t.length,n=new gt.Z(0,0,0);for(const e of t)n.add(e);const r=1/i;n.multiplyByScalar(r);let o=0,s=0,a=0,l=0,c=0,u=0;for(const e of t){const t=Pe.copy(e).subtract(n);o+=t.x*t.x,s+=t.x*t.y,a+=t.x*t.z,l+=t.y*t.y,c+=t.y*t.z,u+=t.z*t.z}o*=r,s*=r,a*=r,l*=r,c*=r,u*=r;const h=Le;h[0]=o,h[1]=s,h[2]=a,h[3]=s,h[4]=l,h[5]=c,h[6]=a,h[7]=c,h[8]=u;const{unitary:d}=function(t,e={}){let i=0,n=0;const r=we,o=xe;r.identity(),o.copy(t);const s=1e-20*function(t){let e=0;for(let i=0;i<9;++i){const n=t[i];e+=n*n}return Math.sqrt(e)}(o);for(;n<10&&Be(o)>s;)Se(o,Ce),Ee.copy(Ce).transpose(),o.multiplyRight(Ce),o.multiplyLeft(Ee),r.multiplyRight(Ce),++i>2&&(++n,i=0);return e.unitary=r.toTarget(e.unitary),e.diagonal=o.toTarget(e.diagonal),e}(h,Fe),A=e.halfAxes.copy(d);let f=A.getColumn(0,Ie),p=A.getColumn(1,Oe),g=A.getColumn(2,De),m=-Number.MAX_VALUE,v=-Number.MAX_VALUE,y=-Number.MAX_VALUE,b=Number.MAX_VALUE,_=Number.MAX_VALUE,w=Number.MAX_VALUE;for(const e of t)Pe.copy(e),m=Math.max(Pe.dot(f),m),v=Math.max(Pe.dot(p),v),y=Math.max(Pe.dot(g),y),b=Math.min(Pe.dot(f),b),_=Math.min(Pe.dot(p),_),w=Math.min(Pe.dot(g),w);f=f.multiplyByScalar(.5*(b+m)),p=p.multiplyByScalar(.5*(_+v)),g=g.multiplyByScalar(.5*(w+y)),e.center.copy(f).add(p).add(g);const x=Me.set(m-b,v-_,y-w).multiplyByScalar(.5),C=new Dt([x[0],0,0,0,x[1],0,0,0,x[2]]);return e.halfAxes.multiplyRight(C),e}(n)}const n=Math.pow(2,this.z),r=Re/n,o=this.x*r+e*Re,s=Re-(this.y+1)*r;return new yt([o,s,t[0]],[o+r,s+r,t[1]])}}const Ze=512,He=[-1/0,-1/0,1/0,1/0],Ge={type:"object",value:null,validate:(t,e)=>e.optional&&null===t||"string"==typeof t||Array.isArray(t)&&t.every((t=>"string"==typeof t)),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}};function Ve(t,e){const i=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])],n=[Math.min(...i.map((t=>t[0]))),Math.min(...i.map((t=>t[1]))),Math.max(...i.map((t=>t[0]))),Math.max(...i.map((t=>t[1])))];return n}function We(t,e){if(!t||!t.length)return null;const{index:i,id:n}=e;if(Array.isArray(t)){const e=function(t){return Math.abs(t.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)|0),0))}(n)%t.length;t=t[e]}let r=t;for(const t of Object.keys(i)){const e=new RegExp("{".concat(t,"}"),"g");r=r.replace(e,String(i[t]))}return Number.isInteger(i.y)&&Number.isInteger(i.z)&&(r=r.replace(/\{-y\}/g,String(Math.pow(2,i.z)-i.y-1))),r}function qe({viewport:t,z:e=0,cullRect:i}){return(t.subViewports||[t]).map((t=>Qe(t,e,i)))}function Qe(t,e,i){if(!Array.isArray(e)){const n=i.x-t.x,r=i.y-t.y,{width:o,height:s}=i,a={targetZ:e},l=t.unproject([n,r],a),c=t.unproject([n+o,r],a),u=t.unproject([n,r+s],a),h=t.unproject([n+o,r+s],a);return[Math.min(l[0],c[0],u[0],h[0]),Math.min(l[1],c[1],u[1],h[1]),Math.max(l[0],c[0],u[0],h[0]),Math.max(l[1],c[1],u[1],h[1])]}const n=Qe(t,e[0],i),r=Qe(t,e[1],i);return[Math.min(n[0],r[0]),Math.min(n[1],r[1]),Math.max(n[2],r[2]),Math.max(n[3],r[3])]}function Ye(t,e){return Math.pow(2,t)*Ze/e}function Xe(t,e,i){const n=Ye(i,Ze),r=t/n*360-180,o=Math.PI-2*Math.PI*e/n;return[r,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function Je(t,e,i,n){const r=Ye(i,n);return[t/r*Ze,e/r*Ze]}function Ke(t,e,i,n,r=512){if(t.isGeospatial){const[t,r]=Xe(e,i,n),[o,s]=Xe(e+1,i+1,n);return{west:t,north:r,east:o,south:s}}const[o,s]=Je(e,i,n,r),[a,l]=Je(e+1,i+1,n,r);return{left:o,top:s,right:a,bottom:l}}function $e({viewport:t,maxZoom:e,minZoom:i,zRange:n,extent:r,tileSize:o=512,modelMatrix:s,modelMatrixInverse:a,zoomOffset:l=0}){let c=t.isGeospatial?Math.round(t.zoom+Math.log2(Ze/o))+l:Math.ceil(t.zoom)+l;if("number"==typeof i&&Number.isFinite(i)&&c<i){if(!r)return[];c=i}"number"==typeof e&&Number.isFinite(e)&&c>e&&(c=e);let u=r;return s&&a&&r&&!t.isGeospatial&&(u=Ve(r,s)),t.isGeospatial?function(t,e,i,n){const r=t instanceof At.Z&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map((({normal:t,distance:e})=>new ge(t.clone().negate(),e))),s=new be(o),a=t.distanceScales.unitsPerMeter[2],l=i&&i[0]*a||0,c=i&&i[1]*a||0,u=t instanceof ft.Z&&t.pitch<=60?e:0;if(n){const[t,e,i,r]=n,o=(0,N.w5)([t,r]),s=(0,N.w5)([i,e]);n=[o[0],Re-o[1],s[0],Re-s[1]]}const h=new Ue(0,0,0),d={viewport:t,project:r,cullingVolume:s,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:n,offset:0};if(h.update(d),t instanceof ft.Z&&t.subViewports&&t.subViewports.length>1){for(d.offset=-1;h.update(d)&&!(--d.offset<-3););for(d.offset=1;h.update(d)&&!(++d.offset>3););}return h.getSelected()}(t,c,n,r):function(t,e,i,n,r){const o=function(t,e,i){let n;return n=t.getBounds(),t.isGeospatial?[Math.max(n[0],i[0]),Math.max(n[1],i[1]),Math.min(n[2],i[2]),Math.min(n[3],i[3])]:[Math.max(Math.min(n[0],i[2]),i[0]),Math.max(Math.min(n[1],i[3]),i[1]),Math.min(Math.max(n[2],i[0]),i[2]),Math.min(Math.max(n[3],i[1]),i[3])]}(t,0,n),s=Ye(e,i),[a,l,c,u]=function(t,e,i){if(i){const n=Ve(t,i).map((t=>t*e/Ze));return n}return t.map((t=>t*e/Ze))}(o,s,r),h=[];for(let t=Math.floor(a);t<c;t++)for(let i=Math.floor(l);i<u;i++)h.push({x:t,y:i,z:e});return h}(t,c,o,u||He,a)}function ti(t,e){if(t===e)return!0;if(Array.isArray(t)){const i=t.length;if(!e||e.length!==i)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}return!1}const ei="best-available",ii={[ei]:function(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!oi(e)&&si(e);for(const e of t)e.isVisible=Boolean(2&e.state)},"no-overlap":function(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&oi(e);const e=Array.from(t).sort(((t,e)=>t.zoom-e.zoom));for(const t of e)if(t.isVisible=Boolean(2&t.state),t.children&&(t.isVisible||1&t.state))for(const e of t.children)e.state=1;else t.isSelected&&si(t)},never:()=>{}},ni={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class ri{constructor(t){(0,d.Z)(this,"opts",void 0),(0,d.Z)(this,"_requestScheduler",void 0),(0,d.Z)(this,"_cache",void 0),(0,d.Z)(this,"_dirty",void 0),(0,d.Z)(this,"_tiles",void 0),(0,d.Z)(this,"_cacheByteSize",void 0),(0,d.Z)(this,"_viewport",void 0),(0,d.Z)(this,"_zRange",void 0),(0,d.Z)(this,"_selectedTiles",void 0),(0,d.Z)(this,"_frameNumber",void 0),(0,d.Z)(this,"_modelMatrix",void 0),(0,d.Z)(this,"_modelMatrixInverse",void 0),(0,d.Z)(this,"_maxZoom",void 0),(0,d.Z)(this,"_minZoom",void 0),(0,d.Z)(this,"onTileLoad",void 0),(0,d.Z)(this,"_getCullBounds",function(t){let e,i={};return n=>{for(const r in n)if(!ti(n[r],i[r])){e=t(n),i=n;break}return e}}(qe)),this.opts={...ni,...t},this.onTileLoad=t=>{var e,i;null===(e=(i=this.opts).onTileLoad)||void 0===e||e.call(i,t),this.opts.maxCacheByteSize&&(this._cacheByteSize+=t.byteLength,this._resizeCache())},this._requestScheduler=new ct({maxRequests:t.maxRequests,throttleRequests:Boolean(t.maxRequests&&t.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new ut.Z,this._modelMatrixInverse=new ut.Z,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((t=>t.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((t=>t.needsReload))}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const e=this._cache.get(t);this._selectedTiles&&this._selectedTiles.includes(e)?e.setNeedsReload():this._cache.delete(t)}}update(t,{zRange:e,modelMatrix:i}={}){const n=new ut.Z(i),r=!n.equals(this._modelMatrix);if(this._viewport&&t.equals(this._viewport)&&(0,ht.fS)(this._zRange,e)&&!r)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((t=>this._getTile(t.index,!0))));else{r&&(this._modelMatrixInverse=n.clone().invert(),this._modelMatrix=n),this._viewport=t,this._zRange=e;const i=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:e,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=i.map((t=>this._getTile(t,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(t,e){if(!t.isVisible)return!1;if(e&&this._viewport){const i=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:e}),{bbox:n}=t;for(const[t,e,r,o]of i){let i;if("west"in n)i=n.west<r&&n.east>t&&n.south<o&&n.north>e;else{const s=Math.min(n.top,n.bottom),a=Math.max(n.top,n.bottom);i=n.left<r&&n.right>t&&s<o&&a>e}if(i)return!0}return!1}return!0}getTileIndices({viewport:t,maxZoom:e,minZoom:i,zRange:n,modelMatrix:r,modelMatrixInverse:o}){const{tileSize:s,extent:a,zoomOffset:l}=this.opts;return $e({viewport:t,maxZoom:e,minZoom:i,zRange:n,tileSize:s,extent:a,modelMatrix:r,modelMatrixInverse:o,zoomOffset:l})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:e}=this.opts;return{bbox:Ke(this._viewport,t.x,t.y,t.z,e)}}getParentIndex(t){return{x:Math.floor(t.x/2),y:Math.floor(t.y/2),z:t.z-1}}updateTileStates(){const t=this.opts.refinementStrategy||ei,e=new Array(this._cache.size);let i=0;for(const t of this._cache.values())e[i++]=t.isVisible,t.isSelected=!1,t.isVisible=!1;for(const t of this._selectedTiles)t.isSelected=!0,t.isVisible=!0;("function"==typeof t?t:ii[t])(Array.from(this._cache.values())),i=0;for(const t of this._cache.values())if(e[i++]!==t.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t=0}=this.opts,e=[];let i=0;for(const t of this._cache.values())t.isLoading&&(i++,t.isSelected||t.isVisible||e.push(t));for(;t>0&&i>t&&e.length>0;)e.shift().abort(),i--}_rebuildTree(){const{_cache:t}=this;for(const e of t.values())e.parent=null,e.children&&(e.children.length=0);for(const e of t.values()){const t=this._getNearestAncestor(e);e.parent=t,null!=t&&t.children&&t.children.push(e)}}_resizeCache(){const{_cache:t,opts:e}=this,i=e.maxCacheSize||(e.maxCacheByteSize?1/0:5*this.selectedTiles.length),n=e.maxCacheByteSize||1/0;if(t.size>i||this._cacheByteSize>n){for(const[s,a]of t){var r,o;if(a.isVisible||a.isSelected||(this._cacheByteSize-=e.maxCacheByteSize?a.byteLength:0,t.delete(s),null===(r=(o=this.opts).onTileUnload)||void 0===r||r.call(o,a)),t.size<=i&&this._cacheByteSize<=n)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((t,e)=>t.zoom-e.zoom)),this._dirty=!1)}_getTile(t,e){const i=this.getTileId(t);let n=this._cache.get(i),r=!1;return!n&&e?(n=new dt(t),Object.assign(n,this.getTileMetadata(n.index)),Object.assign(n,{id:i,zoom:this.getTileZoom(n.index)}),r=!0,this._cache.set(i,n),this._dirty=!0):n&&n.needsReload&&(r=!0),n&&r&&n.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),n}_getNearestAncestor(t){const{_minZoom:e=0}=this;let i=t.index;for(;this.getTileZoom(i)>e;){i=this.getParentIndex(i);const t=this._getTile(i);if(t)return t}return null}}function oi(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=2,!0;e=e.parent}return!1}function si(t){for(const e of t.children)e.isLoaded||e.content?e.state|=2:si(e)}const ai={TilesetClass:ri,data:{type:"data",value:[]},dataComparator:Ge.equal,renderSubLayers:{type:"function",value:t=>new st.Z(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:ei,zRange:null,maxRequests:6,zoomOffset:0};class li extends A.Z{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,e;null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||e.finalize()}get isLoaded(){var t,e;return null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e?void 0:e.selectedTiles.every((t=>t.isLoaded&&t.layers&&t.layers.every((t=>t.isLoaded))))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:e}=this.state;const i=t.propsOrDataChanged||t.updateTriggersChanged,n=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);e?i&&(e.setOptions(this._getTilesetOptions()),n?e.reloadAll():this.state.tileset.tiles.forEach((t=>{t.layers=null}))):(e=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:e})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:e,maxCacheByteSize:i,refinementStrategy:n,extent:r,maxZoom:o,minZoom:s,maxRequests:a,zoomOffset:l}=this.props;return{maxCacheSize:e,maxCacheByteSize:i,maxZoom:o,minZoom:s,tileSize:t,refinementStrategy:n,extent:r,maxRequests:a,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:e,modelMatrix:i}=this.props,n=t.update(this.context.viewport,{zRange:e,modelMatrix:i}),{isLoaded:r}=t,o=this.state.isLoaded!==r,s=this.state.frameNumber!==n;r&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:n}),this.state.isLoaded=r}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:e}=this.props;e&&e(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,e){this.props.onTileError(t),e.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:e,getTileData:i,fetch:n}=this.props,{signal:r}=t;return t.url="string"==typeof e||Array.isArray(e)?We(e,t):null,i?i(t):n&&t.url?n(t.url,{propName:"data",layer:this,signal:r}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:e}){const i=e.props.tile;return t.picked&&(t.tile=i),t.sourceTile=i,t}_updateAutoHighlight(t){const e=t.sourceTile;if(e&&e.layers)for(const i of e.layers)i.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map((t=>{const e=this.getSubLayerPropsByTile(t);if(t.isLoaded||t.content)if(t.layers)e&&t.layers[0]&&Object.keys(e).some((i=>t.layers[0].props[i]!==e[i]))&&(t.layers=t.layers.map((t=>t.clone(e))));else{const i=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=(0,ot.x)(i,Boolean).map((i=>i.clone({tile:t,...e})))}return t.layers}))}filterSubLayer({layer:t,cullRect:e}){const{tile:i}=t.props;return this.state.tileset.isTileVisible(i,e)}}(0,d.Z)(li,"defaultProps",ai),(0,d.Z)(li,"layerName","TileLayer");var ci=i(2112);class ui extends ci.Z{getShaders(){const t=super.getShaders();return t.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform bool fadeTrail;\nuniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"if(fadeTrail) {\n  color.a *= 1.0 - (currentTime - vTime) / trailLength;\n}\n"},t}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}draw(t){const{fadeTrail:e,trailLength:i,currentTime:n}=this.props;t.uniforms={...t.uniforms,fadeTrail:e,trailLength:i,currentTime:n},super.draw(t)}}(0,d.Z)(ui,"layerName","TripsLayer"),(0,d.Z)(ui,"defaultProps",{fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:t=>t.timestamps}});var hi=function(t){var e,i=void 0!==(t=t||{})?t:{},n={};for(e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);var r,o=[],s="";document.currentScript&&(s=document.currentScript.src),s=0!==s.indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):"",r=function(t,e,i){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)e(n.response);else{var r=Q(t);r?e(r.buffer):i()}},n.onerror=i,n.send(null)};var a=i.print||console.log.bind(console),l=i.printErr||console.warn.bind(console);for(e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);n=null,i.arguments&&(o=i.arguments);var c=0,u=function(){return c},h=!1;function d(t){var e=i["_"+t];return e||st("Assertion failed: "+("Cannot call unknown function "+t+", make sure it is exported")),e}function A(t,e,i,n,r){var o={string:function(t){var e=0;if(null!=t&&0!==t){var i=1+(t.length<<2);!function(t,e,i){!function(t,e,i,n){if(!(n>0))return 0;for(var r=i+n-1,o=0;o<t.length;++o){var s=t.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++o)),s<=127){if(i>=r)break;e[i++]=s}else if(s<=2047){if(i+1>=r)break;e[i++]=192|s>>6,e[i++]=128|63&s}else if(s<=65535){if(i+2>=r)break;e[i++]=224|s>>12,e[i++]=128|s>>6&63,e[i++]=128|63&s}else{if(i+3>=r)break;e[i++]=240|s>>18,e[i++]=128|s>>12&63,e[i++]=128|s>>6&63,e[i++]=128|63&s}}e[i]=0}(t,g,e,i)}(t,e=K(i),i)}return e},array:function(t){var e=K(t.length);return function(t,e){p.set(t,e)}(t,e),e}},s=d(t),a=[],l=0;if(n)for(var c=0;c<n.length;c++){var u=o[i[c]];u?(0===l&&(l=tt()),a[c]=u(n[c])):a[c]=n[c]}var h=s.apply(null,a);return h=function(t){return"string"===e?w(t):"boolean"===e?Boolean(t):t}(h),0!==l&&$(l),h}var f,p,g,m,v,y,b,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(t,e){return t?function(t,e,i){for(var n=e+i,r=e;t[r]&&!(r>=n);)++r;if(r-e>16&&t.subarray&&_)return _.decode(t.subarray(e,r));for(var o="";e<r;){var s=t[e++];if(128&s){var a=63&t[e++];if(192!=(224&s)){var l=63&t[e++];if((s=224==(240&s)?(15&s)<<12|a<<6|l:(7&s)<<18|a<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}(g,t,e):""}function x(t,e){return t%e>0&&(t+=e-t%e),t}function C(t){f=t,i.HEAP8=p=new Int8Array(t),i.HEAP16=m=new Int16Array(t),i.HEAP32=v=new Int32Array(t),i.HEAPU8=g=new Uint8Array(t),i.HEAPU16=new Uint16Array(t),i.HEAPU32=new Uint32Array(t),i.HEAPF32=y=new Float32Array(t),i.HEAPF64=b=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var E=i.TOTAL_MEMORY||33554432;function k(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"==typeof n?void 0===e.arg?i.dynCall_v(n):i.dynCall_vi(n,e.arg):n(void 0===e.arg?null:e.arg)}else e()}}E=(f=i.buffer?i.buffer:new ArrayBuffer(E)).byteLength,C(f),v[6004]=5266928;var T=[],B=[],S=[],P=[],M=Math.abs,I=Math.ceil,O=Math.floor,D=Math.min,L=0,F=null,R=null;i.preloadedImages={},i.preloadedAudios={};var N,z,j=null,U="data:application/octet-stream;base64,";function Z(t){return String.prototype.startsWith?t.startsWith(U):0===t.indexOf(U)}function H(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t==t?t:t+" ["+t+"]"}))}function G(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function V(){return p.length}function W(t){try{var e=new ArrayBuffer(t);if(e.byteLength!=t)return;return new Int8Array(e).set(p),J(e),C(e),1}catch(t){}}j="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var q="function"==typeof atob?atob:function(t){var e,i,n,r,o,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=a.indexOf(t.charAt(c++))<<2|(r=a.indexOf(t.charAt(c++)))>>4,i=(15&r)<<4|(o=a.indexOf(t.charAt(c++)))>>2,n=(3&o)<<6|(s=a.indexOf(t.charAt(c++))),l+=String.fromCharCode(e),64!==o&&(l+=String.fromCharCode(i)),64!==s&&(l+=String.fromCharCode(n))}while(c<t.length);return l};function Q(t){if(Z(t))return function(t){try{for(var e=q(t),i=new Uint8Array(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}catch(t){throw new Error("Converting base64 string to bytes failed.")}}(t.slice(U.length))}var Y,X=function(t,e,i){var n=new t.Int8Array(i),r=new t.Int32Array(i),o=(new t.Uint8Array(i),new t.Float32Array(i),new t.Float64Array(i)),s=0|e.p,a=t.Math.floor,l=t.Math.abs,c=t.Math.sqrt,u=t.Math.pow,h=t.Math.cos,d=t.Math.sin,A=t.Math.tan,f=t.Math.acos,p=t.Math.asin,g=t.Math.atan,m=t.Math.atan2,v=t.Math.ceil,y=t.Math.imul,b=t.Math.min,_=t.Math.clz32,w=e.b,x=e.c,C=e.d,E=e.e,k=e.f,T=e.g,B=e.h,S=e.i,P=24048;function M(t,e,i,n){var r,o;0|I(t|=0,e|=0,i|=0,n|=0,0)&&(Be(0|n,0,(o=1+(0|y(3*i|0,i+1|0))|0)<<3|0),(r=0|ye(o,4))&&(O(t,e,i,n,r,o,0),ve(r)))}function I(t,e,i,n,o){t|=0,e|=0,i|=0,o|=0;var s,a=0,l=0,c=0,u=0,h=0,d=0,A=0,f=0;if(s=P,P=P+16|0,f=s,r[(a=n|=0)>>2]=t,r[a+4>>2]=e,(a=0!=(0|o))&&(r[o>>2]=0),0|Dt(t,e))return P=s,1;r[f>>2]=0;t:do{if((0|i)>=1)if(a)for(h=0,d=1,A=1,l=0,a=t;;){if(!(l|h)){if(0==(0|(a=0|D(a,e,4,f)))&0==(0|(e=0|x()))){a=2;break t}if(0|Dt(a,e)){a=1;break t}}if(0==(0|(a=0|D(a,e,0|r[16+(h<<2)>>2],f)))&0==(0|(e=0|x()))){a=2;break t}if(r[(t=n+(A<<3)|0)>>2]=a,r[t+4>>2]=e,r[o+(A<<2)>>2]=d,t=(0|(l=l+1|0))==(0|d),u=6==(0|(c=h+1|0)),0|Dt(a,e)){a=1;break t}if((0|(d=d+(u&t&1)|0))>(0|i)){a=0;break}h=t?u?0:c:h,A=A+1|0,l=t?0:l}else for(h=0,d=1,A=1,l=0,a=t;;){if(!(l|h)){if(0==(0|(a=0|D(a,e,4,f)))&0==(0|(e=0|x()))){a=2;break t}if(0|Dt(a,e)){a=1;break t}}if(0==(0|(a=0|D(a,e,0|r[16+(h<<2)>>2],f)))&0==(0|(e=0|x()))){a=2;break t}if(r[(t=n+(A<<3)|0)>>2]=a,r[t+4>>2]=e,t=(0|(l=l+1|0))==(0|d),u=6==(0|(c=h+1|0)),0|Dt(a,e)){a=1;break t}if((0|(d=d+(u&t&1)|0))>(0|i)){a=0;break}h=t?u?0:c:h,A=A+1|0,l=t?0:l}else a=0}while(0);return P=s,0|a}function O(t,e,i,n,o,s,a){i|=0,n|=0,o|=0,s|=0,a|=0;var l,c,u=0,h=0,d=0,A=0,f=0;if(c=P,P=P+16|0,l=c,0==(0|(t|=0))&0==(0|(e|=0)))P=c;else{if(u=0|we(0|t,0|e,0|s,((0|s)<0)<<31>>31|0),x(),!(0==(0|(f=0|r[(A=h=n+(u<<3)|0)>>2]))&0==(0|(A=0|r[A+4>>2]))|(d=(0|f)==(0|t)&(0|A)==(0|e))))do{d=(0|(A=0|r[(f=h=n+((u=(u+1|0)%(0|s)|0)<<3)|0)>>2]))==(0|t)&(0|(f=0|r[f+4>>2]))==(0|e)}while(!(0==(0|A)&0==(0|f)|d));u=o+(u<<2)|0,d&&(0|r[u>>2])<=(0|a)||(r[(f=h)>>2]=t,r[f+4>>2]=e,r[u>>2]=a,(0|a)>=(0|i)||(f=a+1|0,r[l>>2]=0,O(A=0|D(t,e,2,l),0|x(),i,n,o,s,f),r[l>>2]=0,O(A=0|D(t,e,3,l),0|x(),i,n,o,s,f),r[l>>2]=0,O(A=0|D(t,e,1,l),0|x(),i,n,o,s,f),r[l>>2]=0,O(A=0|D(t,e,5,l),0|x(),i,n,o,s,f),r[l>>2]=0,O(A=0|D(t,e,4,l),0|x(),i,n,o,s,f),r[l>>2]=0,O(A=0|D(t,e,6,l),0|x(),i,n,o,s,f))),P=c}}function D(t,e,i,n){t|=0,e|=0,i|=0;var o,s,a=0,l=0,c=0,u=0,h=0,d=0,A=0;if((0|r[(n|=0)>>2])>0){a=0;do{i=0|lt(i),a=a+1|0}while((0|a)<(0|r[n>>2]))}o=0|xe(0|t,0|e,45),x(),s=127&o,l=0|Lt(t,e),a=0|xe(0|t,0|e,52),x(),a&=15;t:do{if(a)for(;;){if(d=0|xe(0|t,0|e,0|(h=3*(15-a|0)|0)),x(),d&=7,A=0==(0|jt(a)),a=a+-1|0,u=0|Ce(7,0,0|h),e&=~(0|x()),t=(h=0|Ce(0|r[(A?464:48)+(28*d|0)+(i<<2)>>2],0,0|h))|t&~u,e|=0|x(),!(i=0|r[(A?672:256)+(28*d|0)+(i<<2)>>2])){i=0;break t}if(!a){c=6;break}}else c=6}while(0);6==(0|c)&&(t|=d=0|Ce(0|(A=0|r[880+(28*s|0)+(i<<2)>>2]),0,45),e=0|x()|-1040385&e,i=0|r[4304+(28*s|0)+(i<<2)>>2],127==(127&A|0)&&(A=0|Ce(0|r[880+(28*s|0)+20>>2],0,45),e=0|x()|-1040385&e,i=0|r[4304+(28*s|0)+20>>2],t=0|Rt(A|t,e),e=0|x(),r[n>>2]=1+(0|r[n>>2]))),c=0|xe(0|t,0|e,45),x(),c&=127;t:do{if(0|F(c)){e:do{if(1==(0|Lt(t,e))){if((0|s)!=(0|c)){if(0|j(c,0|r[7728+(28*s|0)>>2])){t=0|zt(t,e),l=1,e=0|x();break}t=0|Rt(t,e),l=1,e=0|x();break}switch(0|l){case 5:t=0|zt(t,e),e=0|x(),r[n>>2]=5+(0|r[n>>2]),l=0;break e;case 3:t=0|Rt(t,e),e=0|x(),r[n>>2]=1+(0|r[n>>2]),l=0;break e;default:return A=0,w(0|(d=0)),0|A}}else l=0}while(0);if((0|i)>0){a=0;do{t=0|Ft(t,e),e=0|x(),a=a+1|0}while((0|a)!=(0|i))}if((0|s)!=(0|c)){if(!(0|R(c))){if(0!=(0|l)|5!=(0|Lt(t,e)))break;r[n>>2]=1+(0|r[n>>2]);break}switch(127&o){case 8:case 118:break t}3!=(0|Lt(t,e))&&(r[n>>2]=1+(0|r[n>>2]))}}else if((0|i)>0){a=0;do{t=0|Rt(t,e),e=0|x(),a=a+1|0}while((0|a)!=(0|i))}}while(0);return r[n>>2]=((0|r[n>>2])+i|0)%6|0,A=t,w(0|(d=e)),0|A}function L(t,e,i,n,s,a){e|=0,i|=0,n|=0,s|=0,a|=0;var l,c,u,h,d,A,f,p,g,m=0,v=0,y=0,b=0,_=0,w=0,C=0,E=0,k=0,T=0,B=0,S=0,M=0,I=0;if(g=P,P=P+48|0,A=g+32|0,f=g+16|0,p=g,(0|(m=0|r[(t|=0)>>2]))<=0)return P=g,0;l=t+4|0,c=A+8|0,u=f+8|0,h=p+8|0,d=((0|e)<0)<<31>>31,B=0;t:for(;;){k=(v=0|r[l>>2])+(B<<4)|0,r[A>>2]=r[k>>2],r[A+4>>2]=r[k+4>>2],r[A+8>>2]=r[k+8>>2],r[A+12>>2]=r[k+12>>2],(0|B)==(m+-1|0)?(r[f>>2]=r[v>>2],r[f+4>>2]=r[v+4>>2],r[f+8>>2]=r[v+8>>2],r[f+12>>2]=r[v+12>>2]):(k=v+(B+1<<4)|0,r[f>>2]=r[k>>2],r[f+4>>2]=r[k+4>>2],r[f+8>>2]=r[k+8>>2],r[f+12>>2]=r[k+12>>2]),k=0|W(A,f,i);e:do{if((0|k)>0){T=+(0|k),E=0;i:for(;;){I=+(k-E|0),M=+(0|E),o[p>>3]=+o[A>>3]*I/T+ +o[f>>3]*M/T,o[h>>3]=+o[c>>3]*I/T+ +o[u>>3]*M/T,v=0|we(0|(w=0|Ut(p,i)),0|(C=0|x()),0|e,0|d),x(),b=0|r[(y=m=a+(v<<3)|0)>>2],y=0|r[y+4>>2];n:do{if(0==(0|b)&0==(0|y))S=14;else for(_=0;;){if((0|_)>(0|e)){m=1;break n}if((0|b)==(0|w)&(0|y)==(0|C)){m=7;break n}if(0==(0|(b=0|r[(y=m=a+((v=(v+1|0)%(0|e)|0)<<3)|0)>>2]))&0==(0|(y=0|r[y+4>>2]))){S=14;break}_=_+1|0}}while(0);switch(14==(0|S)&&(S=0,0==(0|w)&0==(0|C)?m=7:(r[m>>2]=w,r[m+4>>2]=C,m=0|r[n>>2],r[(_=s+(m<<3)|0)>>2]=w,r[_+4>>2]=C,r[n>>2]=m+1,m=0)),7&m){case 7:case 0:break;default:break i}if((0|k)<=(0|(E=E+1|0))){S=8;break e}}if(0|m){m=-1,S=20;break t}}else S=8}while(0);if(8==(0|S)&&(S=0),(0|(B=B+1|0))>=(0|(m=0|r[t>>2]))){m=0,S=20;break}}return 20==(0|S)?(P=g,0|m):0}function F(t){return 0|r[7728+(28*(t|=0)|0)+16>>2]}function R(t){return 4==(0|(t|=0))|117==(0|t)|0}function N(t){return 0|r[11152+(216*(0|r[(t|=0)>>2])|0)+(72*(0|r[t+4>>2])|0)+(24*(0|r[t+8>>2])|0)+(r[t+12>>2]<<3)>>2]}function z(t){return 0|r[11152+(216*(0|r[(t|=0)>>2])|0)+(72*(0|r[t+4>>2])|0)+(24*(0|r[t+8>>2])|0)+(r[t+12>>2]<<3)+4>>2]}function j(t,e){return e|=0,(0|r[7728+(28*(t|=0)|0)+20>>2])==(0|e)?0|(e=1):0|(e=(0|r[7728+(28*t|0)+24>>2])==(0|e))}function U(t,e){return 0|r[880+(28*(t|=0)|0)+((e|=0)<<2)>>2]}function Z(t,e){return e|=0,(0|r[880+(28*(t|=0)|0)>>2])==(0|e)?0|(e=0):(0|r[880+(28*t|0)+4>>2])==(0|e)?0|(e=1):(0|r[880+(28*t|0)+8>>2])==(0|e)?0|(e=2):(0|r[880+(28*t|0)+12>>2])==(0|e)?0|(e=3):(0|r[880+(28*t|0)+16>>2])==(0|e)?0|(e=4):(0|r[880+(28*t|0)+20>>2])==(0|e)?0|(e=5):0|((0|r[880+(28*t|0)+24>>2])==(0|e)?6:7)}function H(t){return+o[16+(t|=0)>>3]<+o[t+24>>3]|0}function G(t,e){t|=0;var i,n,r=0;return(r=+o[(e|=0)>>3])>=+o[t+8>>3]&&r<=+o[t>>3]?(i=+o[t+16>>3],r=+o[t+24>>3],e=(n=+o[e+8>>3])>=r,t=n<=i&1,i<r?e&&(t=1):e||(t=0),0|(e=0!=(0|t))):0|(e=0)}function V(t,e){t|=0,e|=0;var i,n,s,a,c,u,h=0,d=0;a=P,P=P+288|0,i=a+264|0,n=a+96|0,d=(h=s=a)+96|0;do{r[h>>2]=0,h=h+4|0}while((0|h)<(0|d));return Wt(e,s),Gt(d=0|r[(h=s)>>2],h=0|r[h+4>>2],i),Vt(d,h,n),c=+Bt(i,n+8|0),o[i>>3]=+o[t>>3],o[(h=i+8|0)>>3]=+o[t+16>>3],o[n>>3]=+o[t+8>>3],o[(d=n+8|0)>>3]=+o[t+24>>3],u=+Bt(i,n),d=~~+v(+u*u/+Ee(+ +l(+(+o[h>>3]-+o[d>>3])/(+o[i>>3]-+o[n>>3])),3)/(c*(2.59807621135*c)*.8)),P=a,0|(0==(0|d)?1:d)}function W(t,e,i){t|=0,e|=0,i|=0;var n,o,s,a,l,c=0,u=0;a=P,P=P+288|0,n=a+264|0,o=a+96|0,u=(c=s=a)+96|0;do{r[c>>2]=0,c=c+4|0}while((0|c)<(0|u));return Wt(i,s),Gt(c=0|r[(u=s)>>2],u=0|r[u+4>>2],n),Vt(c,u,o),l=+Bt(n,o+8|0),u=~~+v(+ +Bt(t,e)/(2*l)),P=a,0|(0==(0|u)?1:u)}function q(t,e,i,n){e|=0,i|=0,n|=0,r[(t|=0)>>2]=e,r[t+4>>2]=i,r[t+8>>2]=n}function Q(t,e){t|=0;var i,n,s,a,c=0,u=0,h=0,d=0,A=0,f=0,p=0;r[(a=8+(e|=0)|0)>>2]=0,n=+o[t>>3],d=+l(+n),s=+o[t+8>>3],d+=.5*(A=+l(+s)/.8660254037844386),d-=+(0|(c=~~d)),A-=+(0|(t=~~A));do{if(d<.5){if(d<.3333333333333333){if(r[e>>2]=c,A<.5*(d+1)){r[e+4>>2]=t;break}t=t+1|0,r[e+4>>2]=t;break}if(t=(1&!(A<(p=1-d)))+t|0,r[e+4>>2]=t,p<=A&A<2*d){c=c+1|0,r[e>>2]=c;break}r[e>>2]=c;break}if(!(d<.6666666666666666)){if(c=c+1|0,r[e>>2]=c,A<.5*d){r[e+4>>2]=t;break}t=t+1|0,r[e+4>>2]=t;break}if(A<1-d){if(r[e+4>>2]=t,2*d-1<A){r[e>>2]=c;break}}else t=t+1|0,r[e+4>>2]=t;c=c+1|0,r[e>>2]=c}while(0);do{if(n<0){if(1&t){c=~~(+(0|c)-(2*(+((f=0|be(0|c,((0|c)<0)<<31>>31|0,0|(f=(t+1|0)/2|0),((0|f)<0)<<31>>31|0))>>>0)+4294967296*+(0|x()))+1)),r[e>>2]=c;break}c=~~(+(0|c)-2*(+((f=0|be(0|c,((0|c)<0)<<31>>31|0,0|(f=(0|t)/2|0),((0|f)<0)<<31>>31|0))>>>0)+4294967296*+(0|x()))),r[e>>2]=c;break}}while(0);f=e+4|0,s<0&&(c=c-((1|t<<1)/2|0)|0,r[e>>2]=c,t=0-t|0,r[f>>2]=t),u=t-c|0,(0|c)<0?(h=0-c|0,r[f>>2]=u,r[a>>2]=h,r[e>>2]=0,t=u,c=0):h=0,(0|t)<0&&(c=c-t|0,r[e>>2]=c,h=h-t|0,r[a>>2]=h,r[f>>2]=0,t=0),i=c-h|0,u=t-h|0,(0|h)<0&&(r[e>>2]=i,r[f>>2]=u,r[a>>2]=0,t=u,c=i,h=0),(0|(u=(0|h)<(0|(u=(0|t)<(0|c)?t:c))?h:u))<=0||(r[e>>2]=c-u,r[f>>2]=t-u,r[a>>2]=h-u)}function Y(t){var e,i=0,n=0,o=0,s=0,a=0;i=0|r[(t|=0)>>2],n=0|r[(e=t+4|0)>>2],(0|i)<0&&(n=n-i|0,r[e>>2]=n,r[(a=t+8|0)>>2]=(0|r[a>>2])-i,r[t>>2]=0,i=0),(0|n)<0?(i=i-n|0,r[t>>2]=i,s=(0|r[(a=t+8|0)>>2])-n|0,r[a>>2]=s,r[e>>2]=0,n=0):(a=s=t+8|0,s=0|r[s>>2]),(0|s)<0&&(i=i-s|0,r[t>>2]=i,n=n-s|0,r[e>>2]=n,r[a>>2]=0,s=0),(0|(o=(0|s)<(0|(o=(0|n)<(0|i)?n:i))?s:o))<=0||(r[t>>2]=i-o,r[e>>2]=n-o,r[a>>2]=s-o)}function X(t,e){var i,n;e|=0,n=0|r[8+(t|=0)>>2],i=+((0|r[t+4>>2])-n|0),o[e>>3]=+((0|r[t>>2])-n|0)-.5*i,o[e+8>>3]=.8660254037844386*i}function J(t,e,i){t|=0,e|=0,r[(i|=0)>>2]=(0|r[e>>2])+(0|r[t>>2]),r[i+4>>2]=(0|r[e+4>>2])+(0|r[t+4>>2]),r[i+8>>2]=(0|r[e+8>>2])+(0|r[t+8>>2])}function K(t,e,i){t|=0,e|=0,r[(i|=0)>>2]=(0|r[t>>2])-(0|r[e>>2]),r[i+4>>2]=(0|r[t+4>>2])-(0|r[e+4>>2]),r[i+8>>2]=(0|r[t+8>>2])-(0|r[e+8>>2])}function $(t,e){e|=0;var i,n=0;n=0|y(0|r[(t|=0)>>2],e),r[t>>2]=n,i=0|y(0|r[(n=t+4|0)>>2],e),r[n>>2]=i,e=0|y(0|r[(t=t+8|0)>>2],e),r[t>>2]=e}function tt(t){var e,i,n=0,o=0,s=0,a=0,l=0;l=(0|(i=0|r[(t|=0)>>2]))<0,t=(t=(o=(0|(a=((e=(0|(s=(0|r[t+4>>2])-(l?i:0)|0))<0)?0-s|0:0)+((0|r[t+8>>2])-(l?i:0))|0))<0)?0:a)-((s=(0|(o=(0|t)<(0|(o=(0|(n=(e?0:s)-(o?a:0)|0))<(0|(a=(l?0:i)-(e?s:0)-(o?a:0)|0))?n:a))?t:o))>0)?o:0)|0,n=n-(s?o:0)|0;t:do{switch(a-(s?o:0)|0){case 0:switch(0|n){case 0:return 0|(0==(0|t)?0:1==(0|t)?1:7);case 1:return 0|(0==(0|t)?2:1==(0|t)?3:7);default:break t}case 1:switch(0|n){case 0:return 0|(0==(0|t)?4:1==(0|t)?5:7);case 1:if(t)break t;return 6;default:break t}}}while(0);return 7}function et(t){var e,i,n=0,o=0,s=0,a=0,l=0;o=0|r[(e=8+(t|=0)|0)>>2],s=0|ge(+((3*(n=(0|r[t>>2])-o|0)|0)-(o=(0|r[(i=t+4|0)>>2])-o|0)|0)/7),r[t>>2]=s,n=0|ge(+((o<<1)+n|0)/7),r[i>>2]=n,r[e>>2]=0,o=n-s|0,(0|s)<0?(l=0-s|0,r[i>>2]=o,r[e>>2]=l,r[t>>2]=0,n=o,s=0,o=l):o=0,(0|n)<0&&(s=s-n|0,r[t>>2]=s,o=o-n|0,r[e>>2]=o,r[i>>2]=0,n=0),l=s-o|0,a=n-o|0,(0|o)<0?(r[t>>2]=l,r[i>>2]=a,r[e>>2]=0,n=a,a=l,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|n)<(0|a)?n:a))?o:s))<=0||(r[t>>2]=a-s,r[i>>2]=n-s,r[e>>2]=o-s)}function it(t){var e,i,n=0,o=0,s=0,a=0,l=0;o=0|r[(e=8+(t|=0)|0)>>2],s=0|ge(+(((n=(0|r[t>>2])-o|0)<<1)+(o=(0|r[(i=t+4|0)>>2])-o|0)|0)/7),r[t>>2]=s,n=0|ge(+((3*o|0)-n|0)/7),r[i>>2]=n,r[e>>2]=0,o=n-s|0,(0|s)<0?(l=0-s|0,r[i>>2]=o,r[e>>2]=l,r[t>>2]=0,n=o,s=0,o=l):o=0,(0|n)<0&&(s=s-n|0,r[t>>2]=s,o=o-n|0,r[e>>2]=o,r[i>>2]=0,n=0),l=s-o|0,a=n-o|0,(0|o)<0?(r[t>>2]=l,r[i>>2]=a,r[e>>2]=0,n=a,a=l,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|n)<(0|a)?n:a))?o:s))<=0||(r[t>>2]=a-s,r[i>>2]=n-s,r[e>>2]=o-s)}function nt(t){var e,i,n,o=0,s=0,a=0,l=0;o=0|r[(t|=0)>>2],s=0|r[(i=t+4|0)>>2],a=0|r[(n=t+8|0)>>2],l=s+(3*o|0)|0,r[t>>2]=l,s=a+(3*s|0)|0,r[i>>2]=s,o=(3*a|0)+o|0,r[n>>2]=o,a=s-l|0,(0|l)<0?(o=o-l|0,r[i>>2]=a,r[n>>2]=o,r[t>>2]=0,s=a,a=0):a=l,(0|s)<0&&(a=a-s|0,r[t>>2]=a,o=o-s|0,r[n>>2]=o,r[i>>2]=0,s=0),e=a-o|0,l=s-o|0,(0|o)<0?(r[t>>2]=e,r[i>>2]=l,r[n>>2]=0,a=e,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(r[t>>2]=a-s,r[i>>2]=l-s,r[n>>2]=o-s)}function rt(t){var e,i,n,o=0,s=0,a=0,l=0;l=0|r[(t|=0)>>2],a=(3*(o=0|r[(i=t+4|0)>>2])|0)+l|0,l=(s=0|r[(n=t+8|0)>>2])+(3*l|0)|0,r[t>>2]=l,r[i>>2]=a,o=(3*s|0)+o|0,r[n>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,r[i>>2]=s,r[n>>2]=o,r[t>>2]=0,l=0):s=a,(0|s)<0&&(l=l-s|0,r[t>>2]=l,o=o-s|0,r[n>>2]=o,r[i>>2]=0,s=0),e=l-o|0,a=s-o|0,(0|o)<0?(r[t>>2]=e,r[i>>2]=a,r[n>>2]=0,l=e,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|a)<(0|l)?a:l))?o:s))<=0||(r[t>>2]=l-s,r[i>>2]=a-s,r[n>>2]=o-s)}function ot(t,e){t|=0;var i,n,o,s=0,a=0,l=0;((e|=0)-1|0)>>>0>=6||(l=(0|r[15472+(12*e|0)>>2])+(0|r[t>>2])|0,r[t>>2]=l,o=t+4|0,a=(0|r[15472+(12*e|0)+4>>2])+(0|r[o>>2])|0,r[o>>2]=a,n=t+8|0,e=(0|r[15472+(12*e|0)+8>>2])+(0|r[n>>2])|0,r[n>>2]=e,s=a-l|0,(0|l)<0?(e=e-l|0,r[o>>2]=s,r[n>>2]=e,r[t>>2]=0,a=0):(s=a,a=l),(0|s)<0&&(a=a-s|0,r[t>>2]=a,e=e-s|0,r[n>>2]=e,r[o>>2]=0,s=0),i=a-e|0,l=s-e|0,(0|e)<0?(r[t>>2]=i,r[o>>2]=l,r[n>>2]=0,a=i,e=0):l=s,(0|(s=(0|e)<(0|(s=(0|l)<(0|a)?l:a))?e:s))<=0||(r[t>>2]=a-s,r[o>>2]=l-s,r[n>>2]=e-s))}function st(t){var e,i,n,o=0,s=0,a=0,l=0;l=0|r[(t|=0)>>2],a=(o=0|r[(i=t+4|0)>>2])+l|0,l=(s=0|r[(n=t+8|0)>>2])+l|0,r[t>>2]=l,r[i>>2]=a,o=s+o|0,r[n>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,r[i>>2]=s,r[n>>2]=o,r[t>>2]=0,a=0):(s=a,a=l),(0|s)<0&&(a=a-s|0,r[t>>2]=a,o=o-s|0,r[n>>2]=o,r[i>>2]=0,s=0),e=a-o|0,l=s-o|0,(0|o)<0?(r[t>>2]=e,r[i>>2]=l,r[n>>2]=0,a=e,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(r[t>>2]=a-s,r[i>>2]=l-s,r[n>>2]=o-s)}function at(t){var e,i,n,o=0,s=0,a=0,l=0;o=0|r[(t|=0)>>2],a=0|r[(i=t+4|0)>>2],s=0|r[(n=t+8|0)>>2],l=a+o|0,r[t>>2]=l,a=s+a|0,r[i>>2]=a,o=s+o|0,r[n>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,r[i>>2]=s,r[n>>2]=o,r[t>>2]=0,a=0):(s=a,a=l),(0|s)<0&&(a=a-s|0,r[t>>2]=a,o=o-s|0,r[n>>2]=o,r[i>>2]=0,s=0),e=a-o|0,l=s-o|0,(0|o)<0?(r[t>>2]=e,r[i>>2]=l,r[n>>2]=0,a=e,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(r[t>>2]=a-s,r[i>>2]=l-s,r[n>>2]=o-s)}function lt(t){switch(0|(t|=0)){case 1:t=5;break;case 5:t=4;break;case 4:t=6;break;case 6:t=2;break;case 2:t=3;break;case 3:t=1}return 0|t}function ct(t){switch(0|(t|=0)){case 1:t=3;break;case 3:t=2;break;case 2:t=6;break;case 6:t=4;break;case 4:t=5;break;case 5:t=1}return 0|t}function ut(t){var e,i,n,o=0,s=0,a=0,l=0;o=0|r[(t|=0)>>2],s=0|r[(i=t+4|0)>>2],a=0|r[(n=t+8|0)>>2],l=s+(o<<1)|0,r[t>>2]=l,s=a+(s<<1)|0,r[i>>2]=s,o=(a<<1)+o|0,r[n>>2]=o,a=s-l|0,(0|l)<0?(o=o-l|0,r[i>>2]=a,r[n>>2]=o,r[t>>2]=0,s=a,a=0):a=l,(0|s)<0&&(a=a-s|0,r[t>>2]=a,o=o-s|0,r[n>>2]=o,r[i>>2]=0,s=0),e=a-o|0,l=s-o|0,(0|o)<0?(r[t>>2]=e,r[i>>2]=l,r[n>>2]=0,a=e,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(r[t>>2]=a-s,r[i>>2]=l-s,r[n>>2]=o-s)}function ht(t){var e,i,n,o=0,s=0,a=0,l=0;l=0|r[(t|=0)>>2],a=((o=0|r[(i=t+4|0)>>2])<<1)+l|0,l=(s=0|r[(n=t+8|0)>>2])+(l<<1)|0,r[t>>2]=l,r[i>>2]=a,o=(s<<1)+o|0,r[n>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,r[i>>2]=s,r[n>>2]=o,r[t>>2]=0,l=0):s=a,(0|s)<0&&(l=l-s|0,r[t>>2]=l,o=o-s|0,r[n>>2]=o,r[i>>2]=0,s=0),e=l-o|0,a=s-o|0,(0|o)<0?(r[t>>2]=e,r[i>>2]=a,r[n>>2]=0,l=e,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|a)<(0|l)?a:l))?o:s))<=0||(r[t>>2]=l-s,r[i>>2]=a-s,r[n>>2]=o-s)}function dt(t,e){e|=0;var i,n,o,s=0,a=0,l=0;return o=(0|(n=(0|r[(t|=0)>>2])-(0|r[e>>2])|0))<0,i=(0|(a=(0|r[t+4>>2])-(0|r[e+4>>2])-(o?n:0)|0))<0,e=(e=(t=(0|(l=(o?0-n|0:0)+(0|r[t+8>>2])-(0|r[e+8>>2])+(i?0-a|0:0)|0))<0)?0:l)-((a=(0|(t=(0|e)<(0|(t=(0|(s=(i?0:a)-(t?l:0)|0))<(0|(l=(o?0:n)-(i?a:0)-(t?l:0)|0))?s:l))?e:t))>0)?t:0)|0,s=s-(a?t:0)|0,0|((0|(t=(0|(t=l-(a?t:0)|0))>-1?t:0-t|0))>(0|(e=(0|(s=(0|s)>-1?s:0-s|0))>(0|(e=(0|e)>-1?e:0-e|0))?s:e))?t:e)}function At(t,e){var i;e|=0,i=0|r[8+(t|=0)>>2],r[e>>2]=(0|r[t>>2])-i,r[e+4>>2]=(0|r[t+4>>2])-i}function ft(t,e){e|=0;var i,n,o,s=0,a=0,l=0;a=0|r[(t|=0)>>2],r[e>>2]=a,t=0|r[t+4>>2],r[(n=e+4|0)>>2]=t,r[(o=e+8|0)>>2]=0,s=t-a|0,(0|a)<0?(t=0-a|0,r[n>>2]=s,r[o>>2]=t,r[e>>2]=0,a=0):(s=t,t=0),(0|s)<0&&(a=a-s|0,r[e>>2]=a,t=t-s|0,r[o>>2]=t,r[n>>2]=0,s=0),i=a-t|0,l=s-t|0,(0|t)<0?(r[e>>2]=i,r[n>>2]=l,r[o>>2]=0,s=l,l=i,t=0):l=a,(0|(a=(0|t)<(0|(a=(0|s)<(0|l)?s:l))?t:a))<=0||(r[e>>2]=l-a,r[n>>2]=s-a,r[o>>2]=t-a)}function pt(t){var e,i,n,o;i=(o=0|r[(e=8+(t|=0)|0)>>2])-(0|r[t>>2])|0,r[t>>2]=i,t=(0|r[(n=t+4|0)>>2])-o|0,r[n>>2]=t,r[e>>2]=0-(t+i)}function gt(t){var e,i,n=0,o=0,s=0,a=0,l=0;n=0-(o=0|r[(t|=0)>>2])|0,r[t>>2]=n,r[(e=t+8|0)>>2]=0,a=(s=0|r[(i=t+4|0)>>2])+o|0,(0|o)>0?(r[i>>2]=a,r[e>>2]=o,r[t>>2]=0,n=0,s=a):o=0,(0|s)<0?(l=n-s|0,r[t>>2]=l,o=o-s|0,r[e>>2]=o,r[i>>2]=0,a=l-o|0,n=0-o|0,(0|o)<0?(r[t>>2]=a,r[i>>2]=n,r[e>>2]=0,s=n,o=0):(s=0,a=l)):a=n,(0|(n=(0|o)<(0|(n=(0|s)<(0|a)?s:a))?o:n))<=0||(r[t>>2]=a-n,r[i>>2]=s-n,r[e>>2]=o-n)}function mt(t,e,i,n){e|=0,i|=0,n|=0;var s,a=0,l=0,c=0,u=0;if(s=P,P=P+32|0,function(t,e){e|=0;var i,n,r=0;r=+o[(t|=0)>>3],i=+h(+r),r=+d(+r),o[e+16>>3]=r,r=+o[t+8>>3],n=i*+h(+r),o[e>>3]=n,r=i*+d(+r),o[e+8>>3]=r}(t|=0,l=s),r[i>>2]=0,a=+le(15888,l),(c=+le(15912,l))<a&&(r[i>>2]=1,a=c),(c=+le(15936,l))<a&&(r[i>>2]=2,a=c),(c=+le(15960,l))<a&&(r[i>>2]=3,a=c),(c=+le(15984,l))<a&&(r[i>>2]=4,a=c),(c=+le(16008,l))<a&&(r[i>>2]=5,a=c),(c=+le(16032,l))<a&&(r[i>>2]=6,a=c),(c=+le(16056,l))<a&&(r[i>>2]=7,a=c),(c=+le(16080,l))<a&&(r[i>>2]=8,a=c),(c=+le(16104,l))<a&&(r[i>>2]=9,a=c),(c=+le(16128,l))<a&&(r[i>>2]=10,a=c),(c=+le(16152,l))<a&&(r[i>>2]=11,a=c),(c=+le(16176,l))<a&&(r[i>>2]=12,a=c),(c=+le(16200,l))<a&&(r[i>>2]=13,a=c),(c=+le(16224,l))<a&&(r[i>>2]=14,a=c),(c=+le(16248,l))<a&&(r[i>>2]=15,a=c),(c=+le(16272,l))<a&&(r[i>>2]=16,a=c),(c=+le(16296,l))<a&&(r[i>>2]=17,a=c),(c=+le(16320,l))<a&&(r[i>>2]=18,a=c),(c=+le(16344,l))<a&&(r[i>>2]=19,a=c),(c=+f(+(1-.5*a)))<1e-16)return r[n>>2]=0,r[n+4>>2]=0,r[n+8>>2]=0,r[n+12>>2]=0,void(P=s);if(i=0|r[i>>2],a=+kt((a=+o[16368+(24*i|0)>>3])-+kt(+function(t,e){t|=0;var i,n,r,s,a;return s=+o[(e|=0)>>3],n=+h(+s),r=+o[e+8>>3]-+o[t+8>>3],a=n*+d(+r),i=+o[t>>3],+ +m(+a,+(+d(+s)*+h(+i)-+h(+r)*(n*+d(+i))))}(15568+(i<<4)|0,t))),u=0|jt(e)?+kt(a+-.3334731722518321):a,a=+A(+c)/.381966011250105,(0|e)>0){l=0;do{a*=2.6457513110645907,l=l+1|0}while((0|l)!=(0|e))}c=+h(+u)*a,o[n>>3]=c,u=+d(+u)*a,o[n+8>>3]=u,P=s}function vt(t,e,i,n,s){e|=0,i|=0,n|=0,s|=0;var a=0,u=0;if(a=+function(t){var e,i;return i=+o[(t|=0)>>3],e=+o[t+8>>3],+ +c(+(i*i+e*e))}(t|=0),a<1e-16)return e=15568+(e<<4)|0,r[s>>2]=r[e>>2],r[s+4>>2]=r[e+4>>2],r[s+8>>2]=r[e+8>>2],void(r[s+12>>2]=r[e+12>>2]);if(u=+m(+ +o[t+8>>3],+ +o[t>>3]),(0|i)>0){t=0;do{a/=2.6457513110645907,t=t+1|0}while((0|t)!=(0|i))}n?(a/=3,i=0==(0|jt(i)),a=+g(.381966011250105*(i?a:a/2.6457513110645907))):(a=+g(.381966011250105*a),0|jt(i)&&(u=+kt(u+.3334731722518321))),function(t,e,i,n){t|=0,e=+e,n|=0;var s=0,a=0,c=0,u=0;if((i=+i)<1e-16)return r[n>>2]=r[t>>2],r[n+4>>2]=r[t+4>>2],r[n+8>>2]=r[t+8>>2],void(r[n+12>>2]=r[t+12>>2]);a=e<0?e+6.283185307179586:e,a=e>=6.283185307179586?a+-6.283185307179586:a;do{if(!(a<1e-16)){if(s=+l(+(a+-3.141592653589793))<1e-16,e=+o[t>>3],s){e-=i,o[n>>3]=e,s=n;break}if(c=+h(+i),i=+d(+i),e=c*+d(+e)+ +h(+a)*(i*+h(+e)),e=+p(+((e=e>1?1:e)<-1?-1:e)),o[n>>3]=e,+l(+(e+-1.5707963267948966))<1e-16)return o[n>>3]=1.5707963267948966,void(o[n+8>>3]=0);if(+l(+(e+1.5707963267948966))<1e-16)return o[n>>3]=-1.5707963267948966,void(o[n+8>>3]=0);if(u=+h(+e),a=i*+d(+a)/u,i=+o[t>>3],e=(c-+d(+e)*+d(+i))/+h(+i)/u,c=a>1?1:a,e=e>1?1:e,(e=+o[t+8>>3]+ +m(+(c<-1?-1:c),+(e<-1?-1:e)))>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);return void(o[n+8>>3]=e)}e=+o[t>>3]+i,o[n>>3]=e,s=n}while(0);if(+l(+(e+-1.5707963267948966))<1e-16)return o[s>>3]=1.5707963267948966,void(o[n+8>>3]=0);if(+l(+(e+1.5707963267948966))<1e-16)return o[s>>3]=-1.5707963267948966,void(o[n+8>>3]=0);if((e=+o[t+8>>3])>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);o[n+8>>3]=e}(15568+(e<<4)|0,+kt(+o[16368+(24*e|0)>>3]-u),a,s)}function yt(t,e,i){var n,o;e|=0,i|=0,n=P,P=P+16|0,X(4+(t|=0)|0,o=n),vt(o,0|r[t>>2],e,0,i),P=n}function bt(t,e,i,n,s){t|=0,e|=0,i|=0,n|=0,s|=0;var a,l,c,u,h,d,A,f,p,g,m,v,y,b,_,w,x,E,k,T,B,S,M=0,I=0,O=0,D=0,L=0,F=0;if(S=P,P=P+272|0,D=S+240|0,k=S,T=S+224|0,B=S+208|0,m=S+176|0,v=S+160|0,y=S+192|0,b=S+144|0,_=S+128|0,w=S+112|0,x=S+96|0,E=S+80|0,r[(M=S+256|0)>>2]=e,r[D>>2]=r[t>>2],r[D+4>>2]=r[t+4>>2],r[D+8>>2]=r[t+8>>2],r[D+12>>2]=r[t+12>>2],_t(D,M,k),r[s>>2]=0,(0|(D=n+i+(5==(0|n)&1)|0))<=(0|i))P=S;else{l=T+4|0,c=m+4|0,u=i+5|0,h=16848+((a=0|r[M>>2])<<2)|0,d=16928+(a<<2)|0,A=_+8|0,f=w+8|0,p=x+8|0,g=B+4|0,O=i;t:for(;;){I=k+(((0|O)%5|0)<<4)|0,r[B>>2]=r[I>>2],r[B+4>>2]=r[I+4>>2],r[B+8>>2]=r[I+8>>2],r[B+12>>2]=r[I+12>>2];do{}while(2==(0|wt(B,a,0,1)));if((0|O)>(0|i)&0!=(0|jt(e))){if(r[m>>2]=r[B>>2],r[m+4>>2]=r[B+4>>2],r[m+8>>2]=r[B+8>>2],r[m+12>>2]=r[B+12>>2],X(l,v),n=0|r[m>>2],M=0|r[17008+(80*n|0)+(r[T>>2]<<2)>>2],r[m>>2]=r[18608+(80*n|0)+(20*M|0)>>2],(0|(I=0|r[18608+(80*n|0)+(20*M|0)+16>>2]))>0){t=0;do{st(c),t=t+1|0}while((0|t)<(0|I))}switch(I=18608+(80*n|0)+(20*M|0)+4|0,r[y>>2]=r[I>>2],r[y+4>>2]=r[I+4>>2],r[y+8>>2]=r[I+8>>2],$(y,3*(0|r[h>>2])|0),J(c,y,c),Y(c),X(c,b),L=+(0|r[d>>2]),o[_>>3]=3*L,o[A>>3]=0,F=-1.5*L,o[w>>3]=F,o[f>>3]=2.598076211353316*L,o[x>>3]=F,o[p>>3]=-2.598076211353316*L,0|r[17008+(80*(0|r[m>>2])|0)+(r[B>>2]<<2)>>2]){case 1:t=w,n=_;break;case 3:t=x,n=w;break;case 2:t=_,n=x;break;default:t=12;break t}se(v,b,n,t,E),vt(E,0|r[m>>2],a,1,s+8+(r[s>>2]<<4)|0),r[s>>2]=1+(0|r[s>>2])}if((0|O)<(0|u)&&(X(g,m),vt(m,0|r[B>>2],a,1,s+8+(r[s>>2]<<4)|0),r[s>>2]=1+(0|r[s>>2])),r[T>>2]=r[B>>2],r[T+4>>2]=r[B+4>>2],r[T+8>>2]=r[B+8>>2],r[T+12>>2]=r[B+12>>2],(0|(O=O+1|0))>=(0|D)){t=3;break}}3!=(0|t)?12==(0|t)&&C(22474,22521,581,22531):P=S}}function _t(t,e,i){t|=0,e|=0,i|=0;var n,o=0,s=0,a=0,l=0,c=0;n=P,P=P+128|0,s=n,l=20208,c=60+(a=o=n+64|0)|0;do{r[a>>2]=r[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));l=20272,c=(a=s)+60|0;do{r[a>>2]=r[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));o=(c=0==(0|jt(0|r[e>>2])))?o:s,ut(s=t+4|0),ht(s),0|jt(0|r[e>>2])&&(rt(s),r[e>>2]=1+(0|r[e>>2])),r[i>>2]=r[t>>2],J(s,o,e=i+4|0),Y(e),r[i+16>>2]=r[t>>2],J(s,o+12|0,e=i+20|0),Y(e),r[i+32>>2]=r[t>>2],J(s,o+24|0,e=i+36|0),Y(e),r[i+48>>2]=r[t>>2],J(s,o+36|0,e=i+52|0),Y(e),r[i+64>>2]=r[t>>2],J(s,o+48|0,i=i+68|0),Y(i),P=n}function wt(t,e,i,n){i|=0,n|=0;var o,s,a,l,c,u,h=0,d=0,A=0,f=0,p=0;if(u=P,P=P+32|0,c=u+12|0,s=u,p=4+(t|=0)|0,f=0|r[16928+((e|=0)<<2)>>2],f=(l=0!=(0|n))?3*f|0:f,h=0|r[p>>2],o=0|r[(a=t+8|0)>>2],l){if((0|(h=o+h+(n=0|r[(d=t+12|0)>>2])|0))==(0|f))return P=u,1;A=d}else h=o+h+(n=0|r[(A=t+12|0)>>2])|0;if((0|h)<=(0|f))return P=u,0;do{if((0|n)>0){if(n=0|r[t>>2],(0|o)>0){d=18608+(80*n|0)+60|0,n=t;break}n=18608+(80*n|0)+40|0,i?(q(c,f,0,0),K(p,c,s),at(s),J(s,c,p),d=n,n=t):(d=n,n=t)}else d=18608+(80*(0|r[t>>2])|0)+20|0,n=t}while(0);if(r[n>>2]=r[d>>2],(0|r[(h=d+16|0)>>2])>0){n=0;do{st(p),n=n+1|0}while((0|n)<(0|r[h>>2]))}return t=d+4|0,r[c>>2]=r[t>>2],r[c+4>>2]=r[t+4>>2],r[c+8>>2]=r[t+8>>2],e=0|r[16848+(e<<2)>>2],$(c,l?3*e|0:e),J(p,c,p),Y(p),n=l&&((0|r[a>>2])+(0|r[p>>2])+(0|r[A>>2])|0)==(0|f)?1:2,P=u,0|n}function xt(t,e){t|=0,e|=0;var i=0;do{i=0|wt(t,e,0,1)}while(2==(0|i));return 0|i}function Ct(t,e,i,n,s){t|=0,e|=0,i|=0,n|=0,s|=0;var a,l,c,u,h,d,A,f,p,g,m,v,y,b,_,w,x,E,k=0,T=0,B=0,S=0,M=0;if(E=P,P=P+240|0,b=E+208|0,_=E,w=E+192|0,x=E+176|0,p=E+160|0,g=E+144|0,m=E+128|0,v=E+112|0,y=E+96|0,r[(k=E+224|0)>>2]=e,r[b>>2]=r[t>>2],r[b+4>>2]=r[t+4>>2],r[b+8>>2]=r[t+8>>2],r[b+12>>2]=r[t+12>>2],Et(b,k,_),r[s>>2]=0,(0|(f=n+i+(6==(0|n)&1)|0))<=(0|i))P=E;else{l=i+6|0,c=16928+((a=0|r[k>>2])<<2)|0,u=g+8|0,h=m+8|0,d=v+8|0,A=w+4|0,T=0,B=i,n=-1;t:for(;;){if(t=_+((k=(0|B)%6|0)<<4)|0,r[w>>2]=r[t>>2],r[w+4>>2]=r[t+4>>2],r[w+8>>2]=r[t+8>>2],r[w+12>>2]=r[t+12>>2],t=T,T=0|wt(w,a,0,1),(0|B)>(0|i)&0!=(0|jt(e))&&1!=(0|t)&&(0|r[w>>2])!=(0|n)){switch(X(_+(((k+5|0)%6|0)<<4)+4|0,x),X(_+(k<<4)+4|0,p),S=+(0|r[c>>2]),o[g>>3]=3*S,o[u>>3]=0,M=-1.5*S,o[m>>3]=M,o[h>>3]=2.598076211353316*S,o[v>>3]=M,o[d>>3]=-2.598076211353316*S,k=0|r[b>>2],0|r[17008+(80*k|0)+(((0|n)==(0|k)?0|r[w>>2]:n)<<2)>>2]){case 1:t=m,n=g;break;case 3:t=v,n=m;break;case 2:t=g,n=v;break;default:t=8;break t}se(x,p,n,t,y),0|ae(x,y)||0|ae(p,y)||(vt(y,0|r[b>>2],a,1,s+8+(r[s>>2]<<4)|0),r[s>>2]=1+(0|r[s>>2]))}if((0|B)<(0|l)&&(X(A,x),vt(x,0|r[w>>2],a,1,s+8+(r[s>>2]<<4)|0),r[s>>2]=1+(0|r[s>>2])),(0|(B=B+1|0))>=(0|f)){t=3;break}n=0|r[w>>2]}3!=(0|t)?8==(0|t)&&C(22557,22521,746,22602):P=E}}function Et(t,e,i){t|=0,e|=0,i|=0;var n,o=0,s=0,a=0,l=0,c=0;n=P,P=P+160|0,s=n,l=20336,c=72+(a=o=n+80|0)|0;do{r[a>>2]=r[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));l=20416,c=(a=s)+72|0;do{r[a>>2]=r[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));o=(c=0==(0|jt(0|r[e>>2])))?o:s,ut(s=t+4|0),ht(s),0|jt(0|r[e>>2])&&(rt(s),r[e>>2]=1+(0|r[e>>2])),r[i>>2]=r[t>>2],J(s,o,e=i+4|0),Y(e),r[i+16>>2]=r[t>>2],J(s,o+12|0,e=i+20|0),Y(e),r[i+32>>2]=r[t>>2],J(s,o+24|0,e=i+36|0),Y(e),r[i+48>>2]=r[t>>2],J(s,o+36|0,e=i+52|0),Y(e),r[i+64>>2]=r[t>>2],J(s,o+48|0,e=i+68|0),Y(e),r[i+80>>2]=r[t>>2],J(s,o+60|0,i=i+84|0),Y(i),P=n}function kt(t){var e;return e=(t=+t)<0?t+6.283185307179586:t,+(t>=6.283185307179586?e+-6.283185307179586:e)}function Tt(t,e){return e|=0,+l(+(+o[(t|=0)>>3]-+o[e>>3]))<17453292519943298e-27?0|(e=+l(+(+o[t+8>>3]-+o[e+8>>3]))<17453292519943298e-27):0|(e=0)}function Bt(t,e){t|=0;var i,n,r,s=0;return n=+o[(e|=0)>>3],i=+o[t>>3],s=(r=+d(.5*(n-i)))*r+(s=+d(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+h(+n)*+h(+i)*s),2*+m(+ +c(+s),+ +c(+(1-s)))*6371.007180918475}function St(t,e,i){t|=0,i|=0;var n,r,s,a,l=0,u=0,f=0,p=0,v=0,y=0;return y=+o[(e|=0)>>3],s=+o[t>>3],v=+d(.5*(y-s)),f=+o[e+8>>3],r=+o[t+8>>3],p=+d(.5*(f-r)),n=+h(+s),a=+h(+y),p=2*+m(+ +c(+(p=v*v+p*(a*n*p))),+ +c(+(1-p))),v=+o[i>>3],y=+d(.5*(v-y)),l=+o[i+8>>3],f=+d(.5*(l-f)),u=+h(+v),f=2*+m(+ +c(+(f=y*y+f*(a*u*f))),+ +c(+(1-f))),v=+d(.5*(s-v)),l=+d(.5*(r-l)),l=2*+m(+ +c(+(l=v*v+l*(n*u*l))),+ +c(+(1-l))),4*+g(+ +c(+ +A(.5*(u=.5*(p+f+l)))*+A(.5*(u-p))*+A(.5*(u-f))*+A(.5*(u-l))))}function Pt(t,e){return e=0|xe(0|(t|=0),0|(e|=0),45),x(),127&e|0}function Mt(t,e){var i=0,n=0,r=0,o=0,s=0,a=0;if(!(!0&134217728==(-16777216&(e|=0)|0)))return 0;if(s=0|xe(0|(t|=0),0|e,45),x(),(s&=127)>>>0>121)return 0;i=0|xe(0|t,0|e,52),x(),i&=15;do{if(0|i){for(r=1,n=0;;){if(o=0|xe(0|t,0|e,3*(15-r|0)|0),x(),0!=(0|(o&=7))&(1^n)){if(1==(0|o)&0!=(0|F(s))){a=0,n=13;break}n=1}if(7==(0|o)){a=0,n=13;break}if(!(r>>>0<i>>>0)){n=9;break}r=r+1|0}if(9==(0|n)){if(15!=(0|i))break;return 1}if(13==(0|n))return 0|a}}while(0);for(;;){if(a=0|xe(0|t,0|e,3*(14-i|0)|0),x(),!(7==(7&a|0)&!0)){a=0,n=13;break}if(!(i>>>0<14)){a=1,n=13;break}i=i+1|0}return 13==(0|n)?0|a:0}function It(t,e,i){i|=0;var n=0,r=0;if(n=0|xe(0|(t|=0),0|(e|=0),52),x(),(0|(n&=15))>=(0|i)){if((0|n)!=(0|i))if(i>>>0<=15){if(t|=r=0|Ce(0|i,0,52),e=0|x()|-15728641&e,(0|n)>(0|i))do{r=0|Ce(7,0,3*(14-i|0)|0),i=i+1|0,t|=r,e=0|x()|e}while((0|i)<(0|n))}else e=0,t=0}else e=0,t=0;return w(0|e),0|t}function Ot(t,e,i,n){i|=0,n|=0;var o,s=0,a=0,l=0,c=0,u=0,h=0;if(l=0|xe(0|(t|=0),0|(e|=0),52),x(),(0|i)<16&(0|(l&=15))<=(0|i)){if((0|l)==(0|i))return r[(i=n)>>2]=t,void(r[i+4>>2]=e);if(o=(0|(u=0|ee(7,i-l|0)))/7|0,c=0|xe(0|t,0|e,45),x(),0|F(127&c)){t:do{if(l)for(a=1;;){if(s=0|xe(0|t,0|e,3*(15-a|0)|0),x(),0|(s&=7))break t;if(!(a>>>0<l>>>0)){s=0;break}a=a+1|0}else s=0}while(0);a=0==(0|s)}else a=0;if(h=0|Ce(l+1|0,0,52),s=0|x()|-15728641&e,Ot(e=(h|t)&~(e=0|Ce(7,0,0|(c=3*(14-l|0)|0))),l=s&~(0|x()),i,n),s=n+(o<<3)|0,!a)return Ot((h=0|Ce(1,0,0|c))|e,0|x()|l,i,s),h=s+(o<<3)|0,Ot((u=0|Ce(2,0,0|c))|e,0|x()|l,i,h),h=h+(o<<3)|0,Ot((u=0|Ce(3,0,0|c))|e,0|x()|l,i,h),h=h+(o<<3)|0,Ot((u=0|Ce(4,0,0|c))|e,0|x()|l,i,h),h=h+(o<<3)|0,Ot((u=0|Ce(5,0,0|c))|e,0|x()|l,i,h),void Ot((u=0|Ce(6,0,0|c))|e,0|x()|l,i,h+(o<<3)|0);a=s+(o<<3)|0,(0|u)>6&&(Be(0|s,0,8+(h=(a>>>0>(u=s+8|0)>>>0?a:u)+-1+(0-s)|0)&-8|0),s=u+(h>>>3<<3)|0),Ot((h=0|Ce(2,0,0|c))|e,0|x()|l,i,s),h=s+(o<<3)|0,Ot((u=0|Ce(3,0,0|c))|e,0|x()|l,i,h),h=h+(o<<3)|0,Ot((u=0|Ce(4,0,0|c))|e,0|x()|l,i,h),h=h+(o<<3)|0,Ot((u=0|Ce(5,0,0|c))|e,0|x()|l,i,h),Ot((u=0|Ce(6,0,0|c))|e,0|x()|l,i,h+(o<<3)|0)}}function Dt(t,e){var i=0,n=0,r=0;if(r=0|xe(0|(t|=0),0|(e|=0),45),x(),!(0|F(127&r)))return 0;r=0|xe(0|t,0|e,52),x(),r&=15;t:do{if(r)for(n=1;;){if(i=0|xe(0|t,0|e,3*(15-n|0)|0),x(),0|(i&=7))break t;if(!(n>>>0<r>>>0)){i=0;break}n=n+1|0}else i=0}while(0);return 0|0==(0|i)&1}function Lt(t,e){var i=0,n=0,r=0;if(r=0|xe(0|(t|=0),0|(e|=0),52),x(),!(r&=15))return 0;for(n=1;;){if(i=0|xe(0|t,0|e,3*(15-n|0)|0),x(),0|(i&=7)){n=5;break}if(!(n>>>0<r>>>0)){i=0,n=5;break}n=n+1|0}return 5==(0|n)?0|i:0}function Ft(t,e){var i=0,n=0,r=0,o=0,s=0,a=0,l=0;if(l=0|xe(0|(t|=0),0|(e|=0),52),x(),!(l&=15))return l=t,w(0|(a=e)),0|l;for(a=1,i=0;;){n=0|Ce(7,0,0|(o=3*(15-a|0)|0)),r=0|x(),s=0|xe(0|t,0|e,0|o),x(),t=(o=0|Ce(0|lt(7&s),0,0|o))|t&~n,e=(s=0|x())|e&~r;t:do{if(!i)if(0==(o&n|0)&0==(s&r|0))i=0;else if(n=0|xe(0|t,0|e,52),x(),n&=15){i=1;e:for(;;){switch(s=0|xe(0|t,0|e,3*(15-i|0)|0),x(),7&s){case 1:break e;case 0:break;default:i=1;break t}if(!(i>>>0<n>>>0)){i=1;break t}i=i+1|0}for(i=1;;){if(r=0|xe(0|t,0|e,0|(s=3*(15-i|0)|0)),x(),o=0|Ce(7,0,0|s),e&=~(0|x()),t=t&~o|(s=0|Ce(0|lt(7&r),0,0|s)),e=0|e|x(),!(i>>>0<n>>>0)){i=1;break}i=i+1|0}}else i=1}while(0);if(!(a>>>0<l>>>0))break;a=a+1|0}return w(0|e),0|t}function Rt(t,e){var i=0,n=0,r=0,o=0,s=0;if(n=0|xe(0|(t|=0),0|(e|=0),52),x(),!(n&=15))return n=t,w(0|(i=e)),0|n;for(i=1;s=0|xe(0|t,0|e,0|(o=3*(15-i|0)|0)),x(),r=0|Ce(7,0,0|o),e&=~(0|x()),t=(o=0|Ce(0|lt(7&s),0,0|o))|t&~r,e=0|x()|e,i>>>0<n>>>0;)i=i+1|0;return w(0|e),0|t}function Nt(t,e){var i=0,n=0,r=0,o=0,s=0,a=0,l=0;if(l=0|xe(0|(t|=0),0|(e|=0),52),x(),!(l&=15))return l=t,w(0|(a=e)),0|l;for(a=1,i=0;;){n=0|Ce(7,0,0|(o=3*(15-a|0)|0)),r=0|x(),s=0|xe(0|t,0|e,0|o),x(),t=(o=0|Ce(0|ct(7&s),0,0|o))|t&~n,e=(s=0|x())|e&~r;t:do{if(!i)if(0==(o&n|0)&0==(s&r|0))i=0;else if(n=0|xe(0|t,0|e,52),x(),n&=15){i=1;e:for(;;){switch(s=0|xe(0|t,0|e,3*(15-i|0)|0),x(),7&s){case 1:break e;case 0:break;default:i=1;break t}if(!(i>>>0<n>>>0)){i=1;break t}i=i+1|0}for(i=1;;){if(o=0|Ce(7,0,0|(r=3*(15-i|0)|0)),s=e&~(0|x()),e=0|xe(0|t,0|e,0|r),x(),t=t&~o|(e=0|Ce(0|ct(7&e),0,0|r)),e=0|s|x(),!(i>>>0<n>>>0)){i=1;break}i=i+1|0}}else i=1}while(0);if(!(a>>>0<l>>>0))break;a=a+1|0}return w(0|e),0|t}function zt(t,e){var i=0,n=0,r=0,o=0,s=0;if(n=0|xe(0|(t|=0),0|(e|=0),52),x(),!(n&=15))return n=t,w(0|(i=e)),0|n;for(i=1;o=0|Ce(7,0,0|(s=3*(15-i|0)|0)),r=e&~(0|x()),e=0|xe(0|t,0|e,0|s),x(),t=(e=0|Ce(0|ct(7&e),0,0|s))|t&~o,e=0|x()|r,i>>>0<n>>>0;)i=i+1|0;return w(0|e),0|t}function jt(t){return 0|(0|(t|=0))%2}function Ut(t,e){var i,n;return t|=0,n=P,P=P+16|0,i=n,(e|=0)>>>0<=15&&2146435072!=(2146435072&r[t+4>>2]|0)&&2146435072!=(2146435072&r[t+8+4>>2]|0)?(function(t,e,i){var n,r;n=P,P=P+16|0,mt(t|=0,e|=0,i|=0,r=n),Q(r,i+4|0),P=n}(t,e,i),e=0|function(t,e){t|=0;var i,n=0,o=0,s=0,a=0,l=0,c=0,u=0,h=0;if(i=P,P=P+64|0,c=i+40|0,o=i+24|0,s=i+12|0,a=i,Ce(0|(e|=0),0,52),n=134225919|x(),!e)return(0|r[t+4>>2])>2||(0|r[t+8>>2])>2||(0|r[t+12>>2])>2?(c=0,w(0|(l=0)),P=i,0|c):(Ce(0|N(t),0,45),l=0|x()|n,c=-1,w(0|l),P=i,0|c);if(r[c>>2]=r[t>>2],r[c+4>>2]=r[t+4>>2],r[c+8>>2]=r[t+8>>2],r[c+12>>2]=r[t+12>>2],l=c+4|0,(0|e)>0)for(t=-1;r[o>>2]=r[l>>2],r[o+4>>2]=r[l+4>>2],r[o+8>>2]=r[l+8>>2],1&e?(et(l),r[s>>2]=r[l>>2],r[s+4>>2]=r[l+4>>2],r[s+8>>2]=r[l+8>>2],nt(s)):(it(l),r[s>>2]=r[l>>2],r[s+4>>2]=r[l+4>>2],r[s+8>>2]=r[l+8>>2],rt(s)),K(o,s,a),Y(a),u=0|Ce(7,0,0|(h=3*(15-e|0)|0)),n&=~(0|x()),t=(h=0|Ce(0|tt(a),0,0|h))|t&~u,n=0|x()|n,(0|e)>1;)e=e+-1|0;else t=-1;t:do{if((0|r[l>>2])<=2&&(0|r[c+8>>2])<=2&&(0|r[c+12>>2])<=2){if(e=0|Ce(0|(o=0|N(c)),0,45),e|=t,t=0|x()|-1040385&n,a=0|z(c),!(0|F(o))){if((0|a)<=0)break;for(s=0;;){if(o=0|xe(0|e,0|t,52),x(),o&=15)for(n=1;c=0|xe(0|e,0|t,0|(h=3*(15-n|0)|0)),x(),u=0|Ce(7,0,0|h),t&=~(0|x()),e=e&~u|(h=0|Ce(0|lt(7&c),0,0|h)),t=0|t|x(),n>>>0<o>>>0;)n=n+1|0;if((0|(s=s+1|0))==(0|a))break t}}s=0|xe(0|e,0|t,52),x(),s&=15;e:do{if(s){n=1;i:for(;;){switch(h=0|xe(0|e,0|t,3*(15-n|0)|0),x(),7&h){case 1:break i;case 0:break;default:break e}if(!(n>>>0<s>>>0))break e;n=n+1|0}if(0|j(o,0|r[c>>2]))for(n=1;u=0|Ce(7,0,0|(c=3*(15-n|0)|0)),h=t&~(0|x()),t=0|xe(0|e,0|t,0|c),x(),e=e&~u|(t=0|Ce(0|ct(7&t),0,0|c)),t=0|h|x(),n>>>0<s>>>0;)n=n+1|0;else for(n=1;c=0|xe(0|e,0|t,0|(h=3*(15-n|0)|0)),x(),u=0|Ce(7,0,0|h),t&=~(0|x()),e=e&~u|(h=0|Ce(0|lt(7&c),0,0|h)),t=0|t|x(),n>>>0<s>>>0;)n=n+1|0}}while(0);if((0|a)>0){n=0;do{e=0|Ft(e,t),t=0|x(),n=n+1|0}while((0|n)!=(0|a))}}else e=0,t=0}while(0);return h=e,w(0|(u=t)),P=i,0|h}(i,e),t=0|x()):(t=0,e=0),w(0|t),P=n,0|e}function Zt(t,e,i){var n,o=0,s=0,a=0;if(n=4+(i|=0)|0,s=0|xe(0|(t|=0),0|(e|=0),52),x(),s&=15,a=0|xe(0|t,0|e,45),x(),o=0==(0|s),0|F(127&a)){if(o)return 1;o=1}else{if(o)return 0;o=0==(0|r[n>>2])&&0==(0|r[i+8>>2])?0!=(0|r[i+12>>2])&1:1}for(i=1;1&i?nt(n):rt(n),a=0|xe(0|t,0|e,3*(15-i|0)|0),x(),ot(n,7&a),i>>>0<s>>>0;)i=i+1|0;return 0|o}function Ht(t,e,i){i|=0;var n,o,s=0,a=0,l=0,c=0,u=0,h=0;o=P,P=P+16|0,n=o,h=0|xe(0|(t|=0),0|(e|=0),45),x(),h&=127;t:do{if(0!=(0|F(h))&&(l=0|xe(0|t,0|e,52),x(),0!=(0|(l&=15)))){s=1;e:for(;;){switch(u=0|xe(0|t,0|e,3*(15-s|0)|0),x(),7&u){case 5:break e;case 0:break;default:s=e;break t}if(!(s>>>0<l>>>0)){s=e;break t}s=s+1|0}for(a=1,s=e;c=0|Ce(7,0,0|(e=3*(15-a|0)|0)),u=s&~(0|x()),s=0|xe(0|t,0|s,0|e),x(),t=t&~c|(s=0|Ce(0|ct(7&s),0,0|e)),s=0|u|x(),a>>>0<l>>>0;)a=a+1|0}else s=e}while(0);if(u=7728+(28*h|0)|0,r[i>>2]=r[u>>2],r[i+4>>2]=r[u+4>>2],r[i+8>>2]=r[u+8>>2],r[i+12>>2]=r[u+12>>2],0|Zt(t,s,i)){if(c=i+4|0,r[n>>2]=r[c>>2],r[n+4>>2]=r[c+4>>2],r[n+8>>2]=r[c+8>>2],l=0|xe(0|t,0|s,52),x(),u=15&l,1&l?(rt(c),l=u+1|0):l=u,0|F(h)){t:do{if(u)for(e=1;;){if(a=0|xe(0|t,0|s,3*(15-e|0)|0),x(),0|(a&=7)){s=a;break t}if(!(e>>>0<u>>>0)){s=0;break}e=e+1|0}else s=0}while(0);s=4==(0|s)&1}else s=0;if(0|wt(i,l,s,0)){if(0|F(h))do{}while(0!=(0|wt(i,l,0,0)));(0|l)!=(0|u)&&it(c)}else(0|l)!=(0|u)&&(r[c>>2]=r[n>>2],r[c+4>>2]=r[n+4>>2],r[c+8>>2]=r[n+8>>2]);P=o}else P=o}function Gt(t,e,i){var n,r;i|=0,n=P,P=P+16|0,Ht(t|=0,e|=0,r=n),e=0|xe(0|t,0|e,52),x(),yt(r,15&e,i),P=n}function Vt(t,e,i){i|=0;var n,r,o=0,s=0;r=P,P=P+16|0,Ht(t|=0,e|=0,n=r),o=0|xe(0|t,0|e,45),x(),o=0==(0|F(127&o)),s=0|xe(0|t,0|e,52),x(),s&=15;t:do{if(!o){if(0|s)for(o=1;;){if(!(0==((0|Ce(7,0,3*(15-o|0)|0))&t|0)&0==((0|x())&e|0)))break t;if(!(o>>>0<s>>>0))break;o=o+1|0}return bt(n,s,0,5,i),void(P=r)}}while(0);Ct(n,s,0,6,i),P=r}function Wt(t,e){e|=0;var i,n=0,o=0,s=0,a=0,l=0,c=0;if(Ce(0|(t|=0),0,52),i=134225919|x(),(0|t)<1){o=0,n=0;do{0|F(o)&&(Ce(0|o,0,45),l=0|i|x(),r[(t=e+(n<<3)|0)>>2]=-1,r[t+4>>2]=l,n=n+1|0),o=o+1|0}while(122!=(0|o))}else{l=0,n=0;do{if(0|F(l)){for(Ce(0|l,0,45),o=1,s=-1,a=0|i|x();s&=~(c=0|Ce(7,0,3*(15-o|0)|0)),a&=~(0|x()),(0|o)!=(0|t);)o=o+1|0;r[(c=e+(n<<3)|0)>>2]=s,r[c+4>>2]=a,n=n+1|0}l=l+1|0}while(122!=(0|l))}}function qt(t,e,i,n){var o,s=0,a=0,l=0,c=0,u=0;if(o=P,P=P+64|0,l=o,(0|(t|=0))==(0|(i|=0))&(0|(e|=0))==(0|(n|=0))|!1|134217728!=(2013265920&e|0)|!1|134217728!=(2013265920&n|0))return P=o,0;if(s=0|xe(0|t,0|e,52),x(),s&=15,a=0|xe(0|i,0|n,52),x(),(0|s)!=(15&a|0))return P=o,0;if(a=s+-1|0,s>>>0>1&&(u=0|It(t,e,a),c=0|x(),(0|u)==(0|(a=0|It(i,n,a)))&(0|c)==(0|x()))){if(s=0|xe(0|t,0|e,0|(a=3*(15^s)|0)),x(),s&=7,a=0|xe(0|i,0|n,0|a),x(),0==(0|s)|0==(0|(a&=7)))return P=o,1;if((0|r[21136+(s<<2)>>2])==(0|a))return P=o,1;if((0|r[21168+(s<<2)>>2])==(0|a))return P=o,1}a=(s=l)+56|0;do{r[s>>2]=0,s=s+4|0}while((0|s)<(0|a));return M(t,e,1,l),s=(0|r[(u=l)>>2])==(0|i)&&(0|r[u+4>>2])==(0|n)||(0|r[(u=l+8|0)>>2])==(0|i)&&(0|r[u+4>>2])==(0|n)||(0|r[(u=l+16|0)>>2])==(0|i)&&(0|r[u+4>>2])==(0|n)||(0|r[(u=l+24|0)>>2])==(0|i)&&(0|r[u+4>>2])==(0|n)||(0|r[(u=l+32|0)>>2])==(0|i)&&(0|r[u+4>>2])==(0|n)||(0|r[(u=l+40|0)>>2])==(0|i)&&(0|r[u+4>>2])==(0|n)?1:1&((0|r[(s=l+48|0)>>2])==(0|i)?(0|r[s+4>>2])==(0|n):0),P=o,0|s}function Qt(t,e,i){i|=0;var n,o,s,a,l=0;if(s=P,P=P+16|0,o=s,l=0|xe(0|(t|=0),0|(e|=0),56),x(),e=0|function(t,e,i){i|=0;var n,o=0;return o=0|Dt(t|=0,e|=0),(i+-1|0)>>>0>5||1==(0|i)&(n=0!=(0|o))?-1:(o=0|function(t,e){var i,n,o,s=0,a=0,l=0,c=0,u=0;if(o=P,P=P+32|0,n=o,Ht(t|=0,e|=0,i=o+16|0),l=0|Pt(t,e),u=0|Lt(t,e),function(t,e){t=7728+(28*(t|=0)|0)|0,r[(e|=0)>>2]=r[t>>2],r[e+4>>2]=r[t+4>>2],r[e+8>>2]=r[t+8>>2],r[e+12>>2]=r[t+12>>2]}(l,n),e=0|function(t,e){t|=0;var i=0,n=0;if((e|=0)>>>0>20)return-1;do{if((0|r[11152+(216*e|0)>>2])!=(0|t))if((0|r[11152+(216*e|0)+8>>2])!=(0|t))if((0|r[11152+(216*e|0)+16>>2])!=(0|t))if((0|r[11152+(216*e|0)+24>>2])!=(0|t))if((0|r[11152+(216*e|0)+32>>2])!=(0|t))if((0|r[11152+(216*e|0)+40>>2])!=(0|t))if((0|r[11152+(216*e|0)+48>>2])!=(0|t))if((0|r[11152+(216*e|0)+56>>2])!=(0|t))if((0|r[11152+(216*e|0)+64>>2])!=(0|t))if((0|r[11152+(216*e|0)+72>>2])!=(0|t))if((0|r[11152+(216*e|0)+80>>2])!=(0|t))if((0|r[11152+(216*e|0)+88>>2])!=(0|t))if((0|r[11152+(216*e|0)+96>>2])!=(0|t))if((0|r[11152+(216*e|0)+104>>2])!=(0|t))if((0|r[11152+(216*e|0)+112>>2])!=(0|t))if((0|r[11152+(216*e|0)+120>>2])!=(0|t))if((0|r[11152+(216*e|0)+128>>2])!=(0|t)){if((0|r[11152+(216*e|0)+136>>2])!=(0|t)){if((0|r[11152+(216*e|0)+144>>2])==(0|t)){t=0,i=2,n=0;break}if((0|r[11152+(216*e|0)+152>>2])==(0|t)){t=0,i=2,n=1;break}if((0|r[11152+(216*e|0)+160>>2])==(0|t)){t=0,i=2,n=2;break}if((0|r[11152+(216*e|0)+168>>2])==(0|t)){t=1,i=2,n=0;break}if((0|r[11152+(216*e|0)+176>>2])==(0|t)){t=1,i=2,n=1;break}if((0|r[11152+(216*e|0)+184>>2])==(0|t)){t=1,i=2,n=2;break}if((0|r[11152+(216*e|0)+192>>2])==(0|t)){t=2,i=2,n=0;break}if((0|r[11152+(216*e|0)+200>>2])==(0|t)){t=2,i=2,n=1;break}if((0|r[11152+(216*e|0)+208>>2])==(0|t)){t=2,i=2,n=2;break}return-1}t=2,i=1,n=2}else t=2,i=1,n=1;else t=2,i=1,n=0;else t=1,i=1,n=2;else t=1,i=1,n=1;else t=1,i=1,n=0;else t=0,i=1,n=2;else t=0,i=1,n=1;else t=0,i=1,n=0;else t=2,i=0,n=2;else t=2,i=0,n=1;else t=2,i=0,n=0;else t=1,i=0,n=2;else t=1,i=0,n=1;else t=1,i=0,n=0;else t=0,i=0,n=2;else t=0,i=0,n=1;else t=0,i=0,n=0}while(0);return 0|r[11152+(216*e|0)+(72*i|0)+(24*t|0)+(n<<3)+4>>2]}(l,0|r[i>>2]),!(0|F(l)))return P=o,0|e;switch(0|l){case 4:t=0,s=14;break;case 14:t=1,s=14;break;case 24:t=2,s=14;break;case 38:t=3,s=14;break;case 49:t=4,s=14;break;case 58:t=5,s=14;break;case 63:t=6,s=14;break;case 72:t=7,s=14;break;case 83:t=8,s=14;break;case 97:t=9,s=14;break;case 107:t=10,s=14;break;case 117:t=11,s=14;break;default:c=0,a=0}return 14==(0|s)&&(c=0|r[22096+(24*t|0)+8>>2],a=0|r[22096+(24*t|0)+16>>2]),(0|(t=0|r[i>>2]))!=(0|r[n>>2])&&(l=0|R(l))|(0|(t=0|r[i>>2]))==(0|a)&&(e=(e+1|0)%6|0),3==(0|u)&(0|t)==(0|a)?(P=o,0|(e+5|0)%6):5==(0|u)&(0|t)==(0|c)?(P=o,0|(e+1|0)%6):(P=o,0|e)}(t,e),n?0|(i=(5-o+(0|r[22384+(i<<2)>>2])|0)%5|0):0|(i=(6-o+(0|r[22416+(i<<2)>>2])|0)%6|0))}(n=(a=!0&268435456==(2013265920&e|0))?t:0,t=a?-2130706433&e|134217728:0,7&l),-1==(0|e))return r[i>>2]=0,void(P=s);Ht(n,t,o),l=0|xe(0|n,0|t,52),x(),l&=15,0|Dt(n,t)?bt(o,l,e,2,i):Ct(o,l,e,2,i),P=s}function Yt(t){t|=0;var e,i,n=0;return(e=0|ye(1,12))||C(22691,22646,49,22704),0|(n=0|r[(i=t+4|0)>>2])?(r[(n=n+8|0)>>2]=e,r[i>>2]=e,0|e):(0|r[t>>2]&&C(22721,22646,61,22744),r[(n=t)>>2]=e,r[i>>2]=e,0|e)}function Xt(t,e){var i,n;return t|=0,e|=0,(n=0|me(24))||C(22758,22646,78,22772),r[n>>2]=r[e>>2],r[n+4>>2]=r[e+4>>2],r[n+8>>2]=r[e+8>>2],r[n+12>>2]=r[e+12>>2],r[n+16>>2]=0,0|(i=0|r[(e=t+4|0)>>2])?(r[i+16>>2]=n,r[e>>2]=n,0|n):(0|r[t>>2]&&C(22787,22646,82,22772),r[t>>2]=n,r[e>>2]=n,0|n)}function Jt(t){var e,i,n=0,s=0,a=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0,x=0,E=0,k=0,T=0,B=0,S=0,P=0,M=0,I=0,O=0,D=0,L=0,F=0;if(0|r[(c=8+(t|=0)|0)>>2])return 1;if(!(a=0|r[t>>2]))return 0;n=a,s=0;do{s=s+1|0,n=0|r[n+8>>2]}while(0!=(0|n));if(s>>>0<2)return 0;(i=0|me(s<<2))||C(22807,22646,317,22826),(e=0|me(s<<5))||C(22848,22646,321,22826),r[t>>2]=0,r[(B=t+4|0)>>2]=0,r[c>>2]=0,s=0,D=0,T=0,g=0;t:for(;;){if(p=0|r[a>>2]){u=0,h=p;do{if(A=+o[h+8>>3],n=h,h=0|r[h+16>>2],d=+o[(c=(f=0==(0|h))?p:h)+8>>3],+l(+(A-d))>3.141592653589793){F=14;break}u+=(d-A)*(+o[n>>3]+ +o[c>>3])}while(!f);if(14==(0|F)){F=0,u=0,n=p;do{k=+o[n+8>>3],I=0|r[(O=n+16|0)>>2],E=+o[(I=0==(0|I)?p:I)+8>>3],u+=(+o[n>>3]+ +o[I>>3])*((E<0?E+6.283185307179586:E)-(k<0?k+6.283185307179586:k)),n=0|r[(0==(0|n)?a:O)>>2]}while(0!=(0|n))}u>0?(r[i+(D<<2)>>2]=a,D=D+1|0,c=T,n=g):F=19}else F=19;if(19==(0|F)){F=0;do{if(!s){if(g){c=B,h=g+8|0,n=a,s=t;break}if(0|r[t>>2]){F=27;break t}c=B,h=t,n=a,s=t;break}if(0|r[(n=s+8|0)>>2]){F=21;break t}if(!(s=0|ye(1,12))){F=23;break t}r[n>>2]=s,c=s+4|0,h=s,n=g}while(0);if(r[h>>2]=a,r[c>>2]=a,h=e+(T<<5)|0,f=0|r[a>>2]){for(o[(p=e+(T<<5)+8|0)>>3]=17976931348623157e292,o[(g=e+(T<<5)+24|0)>>3]=17976931348623157e292,o[h>>3]=-17976931348623157e292,o[(m=e+(T<<5)+16|0)>>3]=-17976931348623157e292,w=17976931348623157e292,x=-17976931348623157e292,c=0,v=f,A=17976931348623157e292,b=17976931348623157e292,_=-17976931348623157e292,d=-17976931348623157e292;u=+o[v>>3],k=+o[v+8>>3],v=0|r[v+16>>2],E=+o[((y=0==(0|v))?f:v)+8>>3],u<A&&(o[p>>3]=u,A=u),k<b&&(o[g>>3]=k,b=k),u>_?o[h>>3]=u:u=_,k>d&&(o[m>>3]=k,d=k),w=k>0&k<w?k:w,x=k<0&k>x?k:x,c|=+l(+(k-E))>3.141592653589793,!y;)_=u;c&&(o[m>>3]=x,o[g>>3]=w)}else r[h>>2]=0,r[h+4>>2]=0,r[h+8>>2]=0,r[h+12>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,r[h+24>>2]=0,r[h+28>>2]=0;c=T+1|0}if(a=0|r[(O=a+8|0)>>2],r[O>>2]=0,!a){F=45;break}T=c,g=n}if(21==(0|F))C(22624,22646,35,22658);else if(23==(0|F))C(22678,22646,37,22658);else if(27==(0|F))C(22721,22646,61,22744);else if(45==(0|F)){t:do{if((0|D)>0){for(O=0==(0|c),M=c<<2,I=0==(0|t),P=0,n=0;;){if(S=0|r[i+(P<<2)>>2],O)F=73;else{if(!(T=0|me(M))){F=50;break}if(!(B=0|me(M))){F=52;break}e:do{if(I)s=0;else{for(c=0,s=0,h=t;a=e+(c<<5)|0,0|Kt(0|r[h>>2],a,0|r[S>>2])?(r[T+(s<<2)>>2]=h,r[B+(s<<2)>>2]=a,y=s+1|0):y=s,h=0|r[h+8>>2];)c=c+1|0,s=y;if((0|y)>0)if(a=0|r[T>>2],1==(0|y))s=a;else for(m=0,v=-1,s=a,g=a;;){for(f=0|r[g>>2],a=0,h=0;p=(0|(c=0|r[r[T+(h<<2)>>2]>>2]))==(0|f)?a:a+(1&(0|Kt(c,0|r[B+(h<<2)>>2],0|r[f>>2])))|0,(0|(h=h+1|0))!=(0|y);)a=p;if(s=(c=(0|p)>(0|v))?g:s,(0|(a=m+1|0))==(0|y))break e;m=a,v=c?p:v,g=0|r[T+(a<<2)>>2]}else s=0}}while(0);if(ve(T),ve(B),s){if(a=0|r[(c=s+4|0)>>2])s=a+8|0;else if(0|r[s>>2]){F=70;break}r[s>>2]=S,r[c>>2]=S}else F=73}if(73==(0|F)){if(F=0,0|(n=0|r[S>>2]))do{B=n,n=0|r[n+16>>2],ve(B)}while(0!=(0|n));ve(S),n=2}if((0|(P=P+1|0))>=(0|D)){L=n;break t}}50==(0|F)?C(22863,22646,249,22882):52==(0|F)?C(22901,22646,252,22882):70==(0|F)&&C(22721,22646,61,22744)}else L=0}while(0);return ve(i),ve(e),0|L}return 0}function Kt(t,e,i){t|=0;var n,s=0,a=0,l=0,c=0,u=0,h=0,d=0;if(!(0|G(e|=0,i|=0)))return 0;if(e=0|H(e),n=+o[i>>3],s=e&(s=+o[i+8>>3])<0?s+6.283185307179586:s,!(t=0|r[t>>2]))return 0;if(e){e=0,i=t;t:for(;;){for(;c=+o[i>>3],h=+o[i+8>>3],d=0|r[(i=i+16|0)>>2],l=+o[(d=0==(0|d)?t:d)>>3],a=+o[d+8>>3],c>l?(u=c,c=h):(u=l,l=c,c=a,a=h),n<l|n>u;)if(!(i=0|r[i>>2])){i=22;break t}if(s=(c=c<0?c+6.283185307179586:c)==s|(h=a<0?a+6.283185307179586:a)==s?s+-2220446049250313e-31:s,((h+=(n-l)/(u-l)*(c-h))<0?h+6.283185307179586:h)>s&&(e^=1),!(i=0|r[i>>2])){i=22;break}}if(22==(0|i))return 0|e}else{e=0,i=t;t:for(;;){for(;c=+o[i>>3],h=+o[i+8>>3],d=0|r[(i=i+16|0)>>2],l=+o[(d=0==(0|d)?t:d)>>3],a=+o[d+8>>3],c>l?(u=c,c=h):(u=l,l=c,c=a,a=h),n<l|n>u;)if(!(i=0|r[i>>2])){i=22;break t}if(a+(n-l)/(u-l)*(c-a)>(s=c==s|a==s?s+-2220446049250313e-31:s)&&(e^=1),!(i=0|r[i>>2])){i=22;break}}if(22==(0|i))return 0|e}return 0}function $t(t,e,i,o,s){i|=0,o|=0,s|=0;var a,l,c,u,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0;if(u=P,P=P+32|0,b=u+16|0,c=u,h=0|xe(0|(t|=0),0|(e|=0),52),x(),h&=15,m=0|xe(0|i,0|o,52),x(),(0|h)!=(15&m|0))return P=u,1;if(p=0|xe(0|t,0|e,45),x(),p&=127,g=0|xe(0|i,0|o,45),x(),m=(0|p)!=(0|(g&=127))){if(7==(0|(A=0|Z(p,g))))return P=u,2;7==(0|(f=0|Z(g,p)))?C(22925,22949,151,22959):(v=A,d=f)}else v=0,d=0;a=0|F(p),l=0|F(g),r[b>>2]=0,r[b+4>>2]=0,r[b+8>>2]=0,r[b+12>>2]=0;do{if(v){if(A=(0|(g=0|r[4304+(28*p|0)+(v<<2)>>2]))>0,l)if(A){p=0,f=i,A=o;do{f=0|Nt(f,A),A=0|x(),1==(0|(d=0|ct(d)))&&(d=0|ct(1)),p=p+1|0}while((0|p)!=(0|g));g=d,p=f,f=A}else g=d,p=i,f=o;else if(A){p=0,f=i,A=o;do{f=0|zt(f,A),A=0|x(),d=0|ct(d),p=p+1|0}while((0|p)!=(0|g));g=d,p=f,f=A}else g=d,p=i,f=o;if(Zt(p,f,b),m||C(22972,22949,181,22959),(A=0!=(0|a))&(d=0!=(0|l))&&C(22999,22949,182,22959),A){if(d=0|Lt(t,e),0|n[22032+(7*d|0)+v>>0]){h=3;break}p=f=0|r[21200+(28*d|0)+(v<<2)>>2],y=26}else if(d){if(d=0|Lt(p,f),0|n[22032+(7*d|0)+g>>0]){h=4;break}p=0,f=0|r[21200+(28*g|0)+(d<<2)>>2],y=26}else d=0;if(26==(0|y))if((0|f)<=-1&&C(23030,22949,212,22959),(0|p)<=-1&&C(23053,22949,213,22959),(0|f)>0){A=b+4|0,d=0;do{at(A),d=d+1|0}while((0|d)!=(0|f));d=p}else d=p;if(r[c>>2]=0,r[c+4>>2]=0,r[c+8>>2]=0,ot(c,v),0|h)for(;0|jt(h)?nt(c):rt(c),(0|h)>1;)h=h+-1|0;if((0|d)>0){h=0;do{at(c),h=h+1|0}while((0|h)!=(0|d))}J(y=b+4|0,c,y),Y(y),y=50}else if(Zt(i,o,b),0!=(0|a)&0!=(0|l))if((0|g)!=(0|p)&&C(23077,22949,243,22959),d=0|Lt(t,e),h=0|Lt(i,o),0|n[22032+(7*d|0)+h>>0])h=5;else if((0|(d=0|r[21200+(28*d|0)+(h<<2)>>2]))>0){A=b+4|0,h=0;do{at(A),h=h+1|0}while((0|h)!=(0|d));y=50}else y=50;else y=50}while(0);return 50==(0|y)&&(h=b+4|0,r[s>>2]=r[h>>2],r[s+4>>2]=r[h+4>>2],r[s+8>>2]=r[h+8>>2],h=0),P=u,0|h}function te(t,e,i,n){i|=0,n|=0;var o,s,a=0,l=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0;if(s=P,P=P+48|0,c=s+36|0,u=s+24|0,h=s+12|0,d=s,l=0|xe(0|(t|=0),0|(e|=0),52),x(),l&=15,f=0|xe(0|t,0|e,45),x(),o=0|F(f&=127),Ce(0|l,0,52),m=134225919|x(),r[(g=n)>>2]=-1,r[g+4>>2]=m,!l)return(0|r[i>>2])>1||(0|r[i+4>>2])>1||(0|r[i+8>>2])>1||127==(0|(a=0|U(f,0|tt(i))))?(P=s,0|(m=1)):(p=0|Ce(0|a,0,45),g=0|x(),g=-1040385&r[(f=n)+4>>2]|g,r[(m=n)>>2]=r[f>>2]|p,r[m+4>>2]=g,P=s,0|(m=0));for(r[c>>2]=r[i>>2],r[c+4>>2]=r[i+4>>2],r[c+8>>2]=r[i+8>>2];r[u>>2]=r[c>>2],r[u+4>>2]=r[c+4>>2],r[u+8>>2]=r[c+8>>2],0|jt(l)?(et(c),r[h>>2]=r[c>>2],r[h+4>>2]=r[c+4>>2],r[h+8>>2]=r[c+8>>2],nt(h)):(it(c),r[h>>2]=r[c>>2],r[h+4>>2]=r[c+4>>2],r[h+8>>2]=r[c+8>>2],rt(h)),K(u,h,d),Y(d),v=0|r[(g=n)>>2],g=0|r[g+4>>2],i=0|Ce(7,0,0|(y=3*(15-l|0)|0)),g&=~(0|x()),y=0|Ce(0|tt(d),0,0|y),g=0|x()|g,r[(m=n)>>2]=y|v&~i,r[m+4>>2]=g,(0|l)>1;)l=l+-1|0;t:do{if((0|r[c>>2])<=1&&(0|r[c+4>>2])<=1&&(0|r[c+8>>2])<=1){d=127==(0|(u=0|U(f,l=0|tt(c))))?0:0|F(u);e:do{if(l){if(o){if(c=21408+(28*(0|Lt(t,e))|0)+(l<<2)|0,(0|(c=0|r[c>>2]))>0){i=0;do{l=0|lt(l),i=i+1|0}while((0|i)!=(0|c))}if(1==(0|l)){a=3;break t}127==(0|(i=0|U(f,l)))&&C(23104,22949,376,23134),0|F(i)?C(23147,22949,377,23134):(p=c,A=l,a=i)}else p=0,A=l,a=u;if((0|(h=0|r[4304+(28*f|0)+(A<<2)>>2]))<=-1&&C(23178,22949,384,23134),!d){if((0|p)<=-1&&C(23030,22949,417,23134),0|p){l=0,i=0|r[(c=n)>>2],c=0|r[c+4>>2];do{i=0|Rt(i,c),c=0|x(),r[(y=n)>>2]=i,r[y+4>>2]=c,l=l+1|0}while((0|l)<(0|p))}if((0|h)<=0){l=54;break}for(l=0,i=0|r[(c=n)>>2],c=0|r[c+4>>2];;)if(i=0|Rt(i,c),c=0|x(),r[(y=n)>>2]=i,r[y+4>>2]=c,(0|(l=l+1|0))==(0|h)){l=54;break e}}if(7==(0|(u=0|Z(a,f)))&&C(22925,22949,393,23134),i=0|r[(l=n)>>2],l=0|r[l+4>>2],(0|h)>0){c=0;do{i=0|Rt(i,l),l=0|x(),r[(y=n)>>2]=i,r[y+4>>2]=l,c=c+1|0}while((0|c)!=(0|h))}if(i=0|Lt(i,l),y=0|R(a),(0|(i=0|r[(y?21824:21616)+(28*u|0)+(i<<2)>>2]))<=-1&&C(23030,22949,412,23134),i){l=0,c=0|r[(u=n)>>2],u=0|r[u+4>>2];do{c=0|Ft(c,u),u=0|x(),r[(y=n)>>2]=c,r[y+4>>2]=u,l=l+1|0}while((0|l)<(0|i));l=54}else l=54}else if(0!=(0|o)&0!=(0|d))if(l=21408+(28*(y=0|Lt(t,e))|0)+((0|Lt(0|r[(l=n)>>2],0|r[l+4>>2]))<<2)|0,(0|(l=0|r[l>>2]))<=-1&&C(23201,22949,433,23134),l){a=0,i=0|r[(c=n)>>2],c=0|r[c+4>>2];do{i=0|Rt(i,c),c=0|x(),r[(y=n)>>2]=i,r[y+4>>2]=c,a=a+1|0}while((0|a)<(0|l));a=u,l=54}else a=u,l=55;else a=u,l=54}while(0);if(54==(0|l)&&d&&(l=55),55==(0|l)&&1==(0|Lt(0|r[(y=n)>>2],0|r[y+4>>2]))){a=4;break}m=0|r[(y=n)>>2],y=-1040385&r[y+4>>2],v=0|Ce(0|a,0,45),y=0|y|x(),r[(a=n)>>2]=m|v,r[a+4>>2]=y,a=0}else a=2}while(0);return P=s,0|a}function ee(t,e){var i=0;if(!(e|=0))return 1;i=t|=0,t=1;do{t=0|y(0==(1&e|0)?1:i,t),e>>=1,i=0|y(i,i)}while(0!=(0|e));return 0|t}function ie(t,e,i){t|=0;var n,s,a=0,l=0,c=0,u=0,h=0,d=0,A=0,f=0;if(!(0|G(e|=0,i|=0)))return 0;if(e=0|H(e),s=+o[i>>3],a=e&(a=+o[i+8>>3])<0?a+6.283185307179586:a,(0|(f=0|r[t>>2]))<=0)return 0;if(n=0|r[t+4>>2],e){e=0,i=-1,t=0;t:for(;;){for(A=t;u=+o[n+(A<<4)>>3],d=+o[n+(A<<4)+8>>3],c=+o[n+((t=(i+2|0)%(0|f)|0)<<4)>>3],l=+o[n+(t<<4)+8>>3],u>c?(h=u,u=d):(h=c,c=u,u=l,l=d),s<c|s>h;){if(!((0|(i=A+1|0))<(0|f))){i=22;break t}t=A,A=i,i=t}if(a=(u=u<0?u+6.283185307179586:u)==a|(d=l<0?l+6.283185307179586:l)==a?a+-2220446049250313e-31:a,((d+=(s-c)/(h-c)*(u-d))<0?d+6.283185307179586:d)>a&&(e^=1),(0|(t=A+1|0))>=(0|f)){i=22;break}i=A}if(22==(0|i))return 0|e}else{e=0,i=-1,t=0;t:for(;;){for(A=t;u=+o[n+(A<<4)>>3],d=+o[n+(A<<4)+8>>3],c=+o[n+((t=(i+2|0)%(0|f)|0)<<4)>>3],l=+o[n+(t<<4)+8>>3],u>c?(h=u,u=d):(h=c,c=u,u=l,l=d),s<c|s>h;){if(!((0|(i=A+1|0))<(0|f))){i=22;break t}t=A,A=i,i=t}if(l+(s-c)/(h-c)*(u-l)>(a=u==a|l==a?a+-2220446049250313e-31:a)&&(e^=1),(0|(t=A+1|0))>=(0|f)){i=22;break}i=A}if(22==(0|i))return 0|e}return 0}function ne(t,e){e|=0;var i,n,s,a,c,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0;if(!(n=0|r[(t|=0)>>2]))return r[e>>2]=0,r[e+4>>2]=0,r[e+8>>2]=0,r[e+12>>2]=0,r[e+16>>2]=0,r[e+20>>2]=0,r[e+24>>2]=0,void(r[e+28>>2]=0);if(o[(s=e+8|0)>>3]=17976931348623157e292,o[(a=e+24|0)>>3]=17976931348623157e292,o[e>>3]=-17976931348623157e292,o[(c=e+16|0)>>3]=-17976931348623157e292,!((0|n)<=0)){for(i=0|r[t+4>>2],m=17976931348623157e292,v=-17976931348623157e292,y=0,t=-1,A=17976931348623157e292,f=17976931348623157e292,g=-17976931348623157e292,h=-17976931348623157e292,b=0;u=+o[i+(b<<4)>>3],p=+o[i+(b<<4)+8>>3],d=+o[i+(((0|(t=t+2|0))==(0|n)?0:t)<<4)+8>>3],u<A&&(o[s>>3]=u,A=u),p<f&&(o[a>>3]=p,f=p),u>g?o[e>>3]=u:u=g,p>h&&(o[c>>3]=p,h=p),m=p>0&p<m?p:m,v=p<0&p>v?p:v,y|=+l(+(p-d))>3.141592653589793,(0|(t=b+1|0))!=(0|n);)_=b,g=u,b=t,t=_;y&&(o[c>>3]=v,o[a>>3]=m)}}function re(t,e){e|=0;var i,n=0,s=0,a=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0,x=0,C=0,E=0,k=0;if(v=0|r[(t|=0)>>2]){if(o[(y=e+8|0)>>3]=17976931348623157e292,o[(b=e+24|0)>>3]=17976931348623157e292,o[e>>3]=-17976931348623157e292,o[(_=e+16|0)>>3]=-17976931348623157e292,(0|v)>0){for(a=0|r[t+4>>2],g=17976931348623157e292,m=-17976931348623157e292,s=0,n=-1,d=17976931348623157e292,A=17976931348623157e292,p=-17976931348623157e292,u=-17976931348623157e292,w=0;c=+o[a+(w<<4)>>3],f=+o[a+(w<<4)+8>>3],h=+o[a+(((0|(E=n+2|0))==(0|v)?0:E)<<4)+8>>3],c<d&&(o[y>>3]=c,d=c),f<A&&(o[b>>3]=f,A=f),c>p?o[e>>3]=c:c=p,f>u&&(o[_>>3]=f,u=f),g=f>0&f<g?f:g,m=f<0&f>m?f:m,s|=+l(+(f-h))>3.141592653589793,(0|(n=w+1|0))!=(0|v);)E=w,p=c,w=n,n=E;s&&(o[_>>3]=m,o[b>>3]=g)}}else r[e>>2]=0,r[e+4>>2]=0,r[e+8>>2]=0,r[e+12>>2]=0,r[e+16>>2]=0,r[e+20>>2]=0,r[e+24>>2]=0,r[e+28>>2]=0;if(!((0|(n=0|r[(E=t+8|0)>>2]))<=0)){i=t+12|0,C=0;do{if(a=0|r[i>>2],s=C,b=e+((C=C+1|0)<<5)|0,_=0|r[a+(s<<3)>>2]){if(o[(w=e+(C<<5)+8|0)>>3]=17976931348623157e292,o[(t=e+(C<<5)+24|0)>>3]=17976931348623157e292,o[b>>3]=-17976931348623157e292,o[(x=e+(C<<5)+16|0)>>3]=-17976931348623157e292,(0|_)>0){for(v=0|r[a+(s<<3)+4>>2],g=17976931348623157e292,m=-17976931348623157e292,a=0,s=-1,y=0,d=17976931348623157e292,A=17976931348623157e292,f=-17976931348623157e292,u=-17976931348623157e292;c=+o[v+(y<<4)>>3],p=+o[v+(y<<4)+8>>3],h=+o[v+(((0|(s=s+2|0))==(0|_)?0:s)<<4)+8>>3],c<d&&(o[w>>3]=c,d=c),p<A&&(o[t>>3]=p,A=p),c>f?o[b>>3]=c:c=f,p>u&&(o[x>>3]=p,u=p),g=p>0&p<g?p:g,m=p<0&p>m?p:m,a|=+l(+(p-h))>3.141592653589793,(0|(s=y+1|0))!=(0|_);)k=y,y=s,f=c,s=k;a&&(o[x>>3]=m,o[t>>3]=g)}}else r[b>>2]=0,r[b+4>>2]=0,r[b+8>>2]=0,r[b+12>>2]=0,r[b+16>>2]=0,r[b+20>>2]=0,r[b+24>>2]=0,r[b+28>>2]=0,n=0|r[E>>2]}while((0|C)<(0|n))}}function oe(t,e,i){var n=0,o=0,s=0;if(!(0|ie(t|=0,e|=0,i|=0)))return 0;if((0|r[(o=t+8|0)>>2])<=0)return 1;for(n=t+12|0,t=0;;){if(s=t,t=t+1|0,0|ie((0|r[n>>2])+(s<<3)|0,e+(t<<5)|0,i)){t=0,n=6;break}if((0|t)>=(0|r[o>>2])){t=1,n=6;break}}return 6==(0|n)?0|t:0}function se(t,e,i,n,r){e|=0,i|=0,n|=0,r|=0;var s,a,l,c,u,h,d,A=0;c=+o[(t|=0)>>3],l=+o[e>>3]-c,a=+o[t+8>>3],s=+o[e+8>>3]-a,h=+o[i>>3],A=((A=+o[n>>3]-h)*(a-(d=+o[i+8>>3]))-(c-h)*(u=+o[n+8>>3]-d))/(l*u-s*A),o[r>>3]=c+l*A,o[r+8>>3]=a+s*A}function ae(t,e){return e|=0,+o[(t|=0)>>3]!=+o[e>>3]?0|(e=0):0|(e=+o[t+8>>3]==+o[e+8>>3])}function le(t,e){var i,n,r;return e|=0,+((r=+o[(t|=0)>>3]-+o[e>>3])*r+(n=+o[t+8>>3]-+o[e+8>>3])*n+(i=+o[t+16>>3]-+o[e+16>>3])*i)}function ce(t,e,i){t|=0,i|=0;var n=0;(0|(e|=0))>0?(n=0|ye(e,4),r[t>>2]=n,n||C(23230,23253,40,23267)):r[t>>2]=0,r[t+4>>2]=e,r[t+8>>2]=0,r[t+12>>2]=i}function ue(t){var e,i,n,s=0,a=0,c=0,h=0;e=4+(t|=0)|0,i=t+12|0,n=t+8|0;t:for(;;){for(a=0|r[e>>2],s=0;;){if((0|s)>=(0|a))break t;if(c=0|r[t>>2],h=0|r[c+(s<<2)>>2])break;s=s+1|0}s=c+(~~(+l(+ +u(10,+ +(15-(0|r[i>>2])|0))*(+o[h>>3]+ +o[h+8>>3]))%+(0|a))>>>0<<2)|0,a=0|r[s>>2];e:do{if(0|a){if(c=h+32|0,(0|a)==(0|h))r[s>>2]=r[c>>2];else{if(!(s=0|r[(a=a+32|0)>>2]))break;for(;(0|s)!=(0|h);)if(!(s=0|r[(a=s+32|0)>>2]))break e;r[a>>2]=r[c>>2]}ve(h),r[n>>2]=(0|r[n>>2])-1}}while(0)}ve(0|r[t>>2])}function he(t){var e,i=0,n=0;for(e=0|r[4+(t|=0)>>2],n=0;;){if((0|n)>=(0|e)){i=0,n=4;break}if(i=0|r[(0|r[t>>2])+(n<<2)>>2]){n=4;break}n=n+1|0}return 4==(0|n)?0|i:0}function de(t,e){e|=0;var i=0,n=0,s=0,a=0;if(i=~~(+l(+ +u(10,+ +(15-(0|r[12+(t|=0)>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|r[t+4>>2]))>>>0,i=(0|r[t>>2])+(i<<2)|0,!(n=0|r[i>>2]))return 1;a=e+32|0;do{if((0|n)!=(0|e)){if(!(i=0|r[n+32>>2]))return 1;for(s=i;;){if((0|s)==(0|e)){s=8;break}if(!(i=0|r[s+32>>2])){i=1,s=10;break}n=s,s=i}if(8==(0|s)){r[n+32>>2]=r[a>>2];break}if(10==(0|s))return 0|i}else r[i>>2]=r[a>>2]}while(0);return ve(e),r[(a=t+8|0)>>2]=(0|r[a>>2])-1,0}function Ae(t,e,i){t|=0,e|=0,i|=0;var n,s=0,a=0,c=0;(n=0|me(40))||C(23283,23253,98,23296),r[n>>2]=r[e>>2],r[n+4>>2]=r[e+4>>2],r[n+8>>2]=r[e+8>>2],r[n+12>>2]=r[e+12>>2],r[(a=n+16|0)>>2]=r[i>>2],r[a+4>>2]=r[i+4>>2],r[a+8>>2]=r[i+8>>2],r[a+12>>2]=r[i+12>>2],r[n+32>>2]=0,a=~~(+l(+ +u(10,+ +(15-(0|r[t+12>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|r[t+4>>2]))>>>0,a=(0|r[t>>2])+(a<<2)|0,s=0|r[a>>2];do{if(s){for(;!(0|Tt(s,e)&&0|Tt(s+16|0,i));)if(a=0|r[s+32>>2],!(0|r[(s=0==(0|a)?s:a)+32>>2])){c=10;break}if(10==(0|c)){r[s+32>>2]=n;break}return ve(n),0|s}r[a>>2]=n}while(0);return r[(c=t+8|0)>>2]=1+(0|r[c>>2]),0|n}function fe(t,e,i){e|=0,i|=0;var n=0,s=0;if(s=~~(+l(+ +u(10,+ +(15-(0|r[12+(t|=0)>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|r[t+4>>2]))>>>0,!(s=0|r[(0|r[t>>2])+(s<<2)>>2]))return 0;if(!i){for(t=s;;){if(0|Tt(t,e)){n=10;break}if(!(t=0|r[t+32>>2])){t=0,n=10;break}}if(10==(0|n))return 0|t}for(t=s;;){if(0|Tt(t,e)&&0|Tt(t+16|0,i)){n=10;break}if(!(t=0|r[t+32>>2])){t=0,n=10;break}}return 10==(0|n)?0|t:0}function pe(t,e){e|=0;var i=0;if(i=~~(+l(+ +u(10,+ +(15-(0|r[12+(t|=0)>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|r[t+4>>2]))>>>0,!(t=0|r[(0|r[t>>2])+(i<<2)>>2]))return 0;for(;;){if(0|Tt(t,e)){e=5;break}if(!(t=0|r[t+32>>2])){t=0,e=5;break}}return 5==(0|e)?0|t:0}function ge(t){return 0|~~+function(t){return+ +Se(+(t=+t))}(t=+t)}function me(t){t|=0;var e,i=0,n=0,o=0,s=0,a=0,l=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0;e=P,P=P+16|0,f=e;do{if(t>>>0<245){if(t=(h=t>>>0<11?16:t+11&-8)>>>3,3&(n=(A=0|r[5829])>>>t)|0)return o=0|r[(n=8+(t=23356+((i=(1&n^1)+t|0)<<1<<2)|0)|0)>>2],(0|(a=0|r[(s=o+8|0)>>2]))==(0|t)?r[5829]=A&~(1<<i):(r[a+12>>2]=t,r[n>>2]=a),w=i<<3,r[o+4>>2]=3|w,r[(w=o+w+4|0)>>2]=1|r[w>>2],P=e,0|s;if(h>>>0>(d=0|r[5831])>>>0){if(0|n)return i=((i=n<<t&((i=2<<t)|0-i))&0-i)-1|0,a=0|r[(t=8+(i=23356+((o=((n=(i>>>=c=i>>>12&16)>>>5&8)|c|(a=(i>>>=n)>>>2&4)|(t=(i>>>=a)>>>1&2)|(o=(i>>>=t)>>>1&1))+(i>>>o)|0)<<1<<2)|0)|0)>>2],(0|(n=0|r[(c=a+8|0)>>2]))==(0|i)?(t=A&~(1<<o),r[5829]=t):(r[n+12>>2]=i,r[t>>2]=n,t=A),l=(w=o<<3)-h|0,r[a+4>>2]=3|h,r[4+(s=a+h|0)>>2]=1|l,r[a+w>>2]=l,0|d&&(o=0|r[5834],n=23356+((i=d>>>3)<<1<<2)|0,t&(i=1<<i)?i=0|r[(t=n+8|0)>>2]:(r[5829]=t|i,i=n,t=n+8|0),r[t>>2]=o,r[i+12>>2]=o,r[o+8>>2]=i,r[o+12>>2]=n),r[5831]=l,r[5834]=s,P=e,0|c;if(a=0|r[5830]){for(n=(a&0-a)-1|0,n=u=0|r[23620+(((o=(n>>>=s=n>>>12&16)>>>5&8)|s|(l=(n>>>=o)>>>2&4)|(c=(n>>>=l)>>>1&2)|(u=(n>>>=c)>>>1&1))+(n>>>u)<<2)>>2],c=u,u=(-8&r[u+4>>2])-h|0;(t=0|r[n+16>>2])||(t=0|r[n+20>>2]);)n=t,c=(s=(l=(-8&r[t+4>>2])-h|0)>>>0<u>>>0)?t:c,u=s?l:u;if((l=c+h|0)>>>0>c>>>0){s=0|r[c+24>>2],i=0|r[c+12>>2];do{if((0|i)==(0|c)){if(!(i=0|r[(t=c+20|0)>>2])&&!(i=0|r[(t=c+16|0)>>2])){n=0;break}for(;;)if(n=0|r[(o=i+20|0)>>2])i=n,t=o;else{if(!(n=0|r[(o=i+16|0)>>2]))break;i=n,t=o}r[t>>2]=0,n=i}else n=0|r[c+8>>2],r[n+12>>2]=i,r[i+8>>2]=n,n=i}while(0);do{if(0|s){if(i=0|r[c+28>>2],(0|c)==(0|r[(t=23620+(i<<2)|0)>>2])){if(r[t>>2]=n,!n){r[5830]=a&~(1<<i);break}}else if(r[((0|r[(w=s+16|0)>>2])==(0|c)?w:s+20|0)>>2]=n,!n)break;r[n+24>>2]=s,0|(i=0|r[c+16>>2])&&(r[n+16>>2]=i,r[i+24>>2]=n),0|(i=0|r[c+20>>2])&&(r[n+20>>2]=i,r[i+24>>2]=n)}}while(0);return u>>>0<16?(w=u+h|0,r[c+4>>2]=3|w,r[(w=c+w+4|0)>>2]=1|r[w>>2]):(r[c+4>>2]=3|h,r[l+4>>2]=1|u,r[l+u>>2]=u,0|d&&(o=0|r[5834],n=23356+((i=d>>>3)<<1<<2)|0,(i=1<<i)&A?i=0|r[(t=n+8|0)>>2]:(r[5829]=i|A,i=n,t=n+8|0),r[t>>2]=o,r[i+12>>2]=o,r[o+8>>2]=i,r[o+12>>2]=n),r[5831]=u,r[5834]=l),P=e,0|c+8}A=h}else A=h}else A=h}else if(t>>>0<=4294967231)if(h=-8&(t=t+11|0),o=0|r[5830]){s=0-h|0,u=(t>>>=8)?h>>>0>16777215?31:h>>>(7+(u=14-((c=(520192+(m=t<<(A=(t+1048320|0)>>>16&8))|0)>>>16&4)|A|(u=(245760+(m<<=c)|0)>>>16&2))+(m<<u>>>15)|0)|0)&1|u<<1:0,n=0|r[23620+(u<<2)>>2];t:do{if(n)for(t=0,c=h<<(31==(0|u)?0:25-(u>>>1)|0),a=0;;){if((l=(-8&r[n+4>>2])-h|0)>>>0<s>>>0){if(!l){t=n,s=0,m=65;break t}t=n,s=l}if(a=0==(0|(m=0|r[n+20>>2]))|(0|m)==(0|(n=0|r[n+16+(c>>>31<<2)>>2]))?a:m,!n){n=a,m=61;break}c<<=1}else n=0,t=0,m=61}while(0);if(61==(0|m)){if(0==(0|n)&0==(0|t)){if(!(t=((t=2<<u)|0-t)&o)){A=h;break}A=(t&0-t)-1|0,t=0,n=0|r[23620+(((a=(A>>>=l=A>>>12&16)>>>5&8)|l|(c=(A>>>=a)>>>2&4)|(u=(A>>>=c)>>>1&2)|(n=(A>>>=u)>>>1&1))+(A>>>n)<<2)>>2]}n?m=65:(c=t,l=s)}if(65==(0|m))for(a=n;;){if(s=(n=(A=(-8&r[a+4>>2])-h|0)>>>0<s>>>0)?A:s,t=n?a:t,(n=0|r[a+16>>2])||(n=0|r[a+20>>2]),!n){c=t,l=s;break}a=n}if(0!=(0|c)&&l>>>0<((0|r[5831])-h|0)>>>0&&(d=c+h|0)>>>0>c>>>0){a=0|r[c+24>>2],i=0|r[c+12>>2];do{if((0|i)==(0|c)){if(!(i=0|r[(t=c+20|0)>>2])&&!(i=0|r[(t=c+16|0)>>2])){i=0;break}for(;;)if(n=0|r[(s=i+20|0)>>2])i=n,t=s;else{if(!(n=0|r[(s=i+16|0)>>2]))break;i=n,t=s}r[t>>2]=0}else w=0|r[c+8>>2],r[w+12>>2]=i,r[i+8>>2]=w}while(0);do{if(a){if(t=0|r[c+28>>2],(0|c)==(0|r[(n=23620+(t<<2)|0)>>2])){if(r[n>>2]=i,!i){o&=~(1<<t),r[5830]=o;break}}else if(r[((0|r[(w=a+16|0)>>2])==(0|c)?w:a+20|0)>>2]=i,!i)break;r[i+24>>2]=a,0|(t=0|r[c+16>>2])&&(r[i+16>>2]=t,r[t+24>>2]=i),(t=0|r[c+20>>2])&&(r[i+20>>2]=t,r[t+24>>2]=i)}}while(0);t:do{if(l>>>0<16)w=l+h|0,r[c+4>>2]=3|w,r[(w=c+w+4|0)>>2]=1|r[w>>2];else{if(r[c+4>>2]=3|h,r[d+4>>2]=1|l,r[d+l>>2]=l,i=l>>>3,l>>>0<256){n=23356+(i<<1<<2)|0,(t=0|r[5829])&(i=1<<i)?i=0|r[(t=n+8|0)>>2]:(r[5829]=t|i,i=n,t=n+8|0),r[t>>2]=d,r[i+12>>2]=d,r[d+8>>2]=i,r[d+12>>2]=n;break}if(i=23620+((n=(i=l>>>8)?l>>>0>16777215?31:l>>>(7+(n=14-((b=(520192+(w=i<<(_=(i+1048320|0)>>>16&8))|0)>>>16&4)|_|(n=(245760+(w<<=b)|0)>>>16&2))+(w<<n>>>15)|0)|0)&1|n<<1:0)<<2)|0,r[d+28>>2]=n,r[4+(t=d+16|0)>>2]=0,r[t>>2]=0,!(o&(t=1<<n))){r[5830]=o|t,r[i>>2]=d,r[d+24>>2]=i,r[d+12>>2]=d,r[d+8>>2]=d;break}i=0|r[i>>2];e:do{if((-8&r[i+4>>2]|0)!=(0|l)){for(o=l<<(31==(0|n)?0:25-(n>>>1)|0);t=0|r[(n=i+16+(o>>>31<<2)|0)>>2];){if((-8&r[t+4>>2]|0)==(0|l)){i=t;break e}o<<=1,i=t}r[n>>2]=d,r[d+24>>2]=i,r[d+12>>2]=d,r[d+8>>2]=d;break t}}while(0);w=0|r[(_=i+8|0)>>2],r[w+12>>2]=d,r[_>>2]=d,r[d+8>>2]=w,r[d+12>>2]=i,r[d+24>>2]=0}}while(0);return P=e,0|c+8}A=h}else A=h;else A=-1}while(0);if((n=0|r[5831])>>>0>=A>>>0)return i=n-A|0,t=0|r[5834],i>>>0>15?(w=t+A|0,r[5834]=w,r[5831]=i,r[w+4>>2]=1|i,r[t+n>>2]=i,r[t+4>>2]=3|A):(r[5831]=0,r[5834]=0,r[t+4>>2]=3|n,r[(w=t+n+4|0)>>2]=1|r[w>>2]),P=e,0|t+8;if((l=0|r[5832])>>>0>A>>>0)return b=l-A|0,r[5832]=b,_=(w=0|r[5835])+A|0,r[5835]=_,r[_+4>>2]=1|b,r[w+4>>2]=3|A,P=e,0|w+8;if(0|r[5947]?t=0|r[5949]:(r[5949]=4096,r[5948]=4096,r[5950]=-1,r[5951]=-1,r[5952]=0,r[5940]=0,r[5947]=-16&f^1431655768,t=4096),c=A+48|0,(h=(a=t+(u=A+47|0)|0)&(s=0-t|0))>>>0<=A>>>0)return P=e,0;if(0|(t=0|r[5939])&&(f=(d=0|r[5937])+h|0)>>>0<=d>>>0|f>>>0>t>>>0)return P=e,0;t:do{if(4&r[5940])i=0,m=143;else{n=0|r[5835];e:do{if(n){for(o=23764;!((f=0|r[o>>2])>>>0<=n>>>0&&(f+(0|r[o+4>>2])|0)>>>0>n>>>0);){if(!(t=0|r[o+8>>2])){m=128;break e}o=t}if((i=a-l&s)>>>0<2147483647)if((0|(t=0|Pe(0|i)))==((0|r[o>>2])+(0|r[o+4>>2])|0)){if(-1!=(0|t)){l=i,a=t,m=145;break t}}else o=t,m=136;else i=0}else m=128}while(0);do{if(128==(0|m))if(-1!=(0|(n=0|Pe(0)))&&(i=n,g=(i=(0==((g=(p=0|r[5948])-1|0)&i|0)?0:(g+i&0-p)-i|0)+h|0)+(p=0|r[5937])|0,i>>>0>A>>>0&i>>>0<2147483647)){if(0|(f=0|r[5939])&&g>>>0<=p>>>0|g>>>0>f>>>0){i=0;break}if((0|(t=0|Pe(0|i)))==(0|n)){l=i,a=n,m=145;break t}o=t,m=136}else i=0}while(0);do{if(136==(0|m)){if(n=0-i|0,!(c>>>0>i>>>0&i>>>0<2147483647&-1!=(0|o))){if(-1==(0|o)){i=0;break}l=i,a=o,m=145;break t}if((t=u-i+(t=0|r[5949])&0-t)>>>0>=2147483647){l=i,a=o,m=145;break t}if(-1==(0|Pe(0|t))){Pe(0|n),i=0;break}l=t+i|0,a=o,m=145;break t}}while(0);r[5940]=4|r[5940],m=143}}while(0);if(143==(0|m)&&h>>>0<2147483647&&!(-1==(0|(b=0|Pe(0|h)))|1^(y=(v=(g=0|Pe(0))-b|0)>>>0>(A+40|0)>>>0)|b>>>0<g>>>0&-1!=(0|b)&-1!=(0|g)^1)&&(l=y?v:i,a=b,m=145),145==(0|m)){i=(0|r[5937])+l|0,r[5937]=i,i>>>0>(0|r[5938])>>>0&&(r[5938]=i),u=0|r[5835];t:do{if(u){for(i=23764;;){if((0|a)==((t=0|r[i>>2])+(n=0|r[i+4>>2])|0)){m=154;break}if(!(o=0|r[i+8>>2]))break;i=o}if(154==(0|m)&&(_=i+4|0,0==(8&r[i+12>>2]|0))&&a>>>0>u>>>0&t>>>0<=u>>>0){r[_>>2]=n+l,_=u+(b=0==(7&(b=u+8|0)|0)?0:0-b&7)|0,b=(w=(0|r[5832])+l|0)-b|0,r[5835]=_,r[5832]=b,r[_+4>>2]=1|b,r[u+w+4>>2]=40,r[5836]=r[5951];break}for(a>>>0<(0|r[5833])>>>0&&(r[5833]=a),n=a+l|0,i=23764;;){if((0|r[i>>2])==(0|n)){m=162;break}if(!(t=0|r[i+8>>2]))break;i=t}if(162==(0|m)&&0==(8&r[i+12>>2]|0)){r[i>>2]=a,r[(d=i+4|0)>>2]=(0|r[d>>2])+l,h=(d=a+(0==(7&(d=a+8|0)|0)?0:0-d&7)|0)+A|0,c=(i=n+(0==(7&(i=n+8|0)|0)?0:0-i&7)|0)-d-A|0,r[d+4>>2]=3|A;e:do{if((0|u)==(0|i))w=(0|r[5832])+c|0,r[5832]=w,r[5835]=h,r[h+4>>2]=1|w;else{if((0|r[5834])==(0|i)){w=(0|r[5831])+c|0,r[5831]=w,r[5834]=h,r[h+4>>2]=1|w,r[h+w>>2]=w;break}if(1==(3&(t=0|r[i+4>>2])|0)){l=-8&t,o=t>>>3;i:do{if(t>>>0<256){if(t=0|r[i+8>>2],(0|(n=0|r[i+12>>2]))==(0|t)){r[5829]=r[5829]&~(1<<o);break}r[t+12>>2]=n,r[n+8>>2]=t;break}a=0|r[i+24>>2],t=0|r[i+12>>2];do{if((0|t)==(0|i)){if(t=0|r[(o=4+(n=i+16|0)|0)>>2])n=o;else if(!(t=0|r[n>>2])){t=0;break}for(;;)if(o=0|r[(s=t+20|0)>>2])t=o,n=s;else{if(!(o=0|r[(s=t+16|0)>>2]))break;t=o,n=s}r[n>>2]=0}else w=0|r[i+8>>2],r[w+12>>2]=t,r[t+8>>2]=w}while(0);if(!a)break;o=23620+((n=0|r[i+28>>2])<<2)|0;do{if((0|r[o>>2])==(0|i)){if(r[o>>2]=t,0|t)break;r[5830]=r[5830]&~(1<<n);break i}if(r[((0|r[(w=a+16|0)>>2])==(0|i)?w:a+20|0)>>2]=t,!t)break i}while(0);if(r[t+24>>2]=a,0|(o=0|r[(n=i+16|0)>>2])&&(r[t+16>>2]=o,r[o+24>>2]=t),!(n=0|r[n+4>>2]))break;r[t+20>>2]=n,r[n+24>>2]=t}while(0);i=i+l|0,s=l+c|0}else s=c;if(r[(i=i+4|0)>>2]=-2&r[i>>2],r[h+4>>2]=1|s,r[h+s>>2]=s,i=s>>>3,s>>>0<256){n=23356+(i<<1<<2)|0,(t=0|r[5829])&(i=1<<i)?i=0|r[(t=n+8|0)>>2]:(r[5829]=t|i,i=n,t=n+8|0),r[t>>2]=h,r[i+12>>2]=h,r[h+8>>2]=i,r[h+12>>2]=n;break}i=s>>>8;do{if(i){if(s>>>0>16777215){o=31;break}o=s>>>(7+(o=14-((b=(520192+(w=i<<(_=(i+1048320|0)>>>16&8))|0)>>>16&4)|_|(o=(245760+(w<<=b)|0)>>>16&2))+(w<<o>>>15)|0)|0)&1|o<<1}else o=0}while(0);if(i=23620+(o<<2)|0,r[h+28>>2]=o,r[4+(t=h+16|0)>>2]=0,r[t>>2]=0,!((t=0|r[5830])&(n=1<<o))){r[5830]=t|n,r[i>>2]=h,r[h+24>>2]=i,r[h+12>>2]=h,r[h+8>>2]=h;break}i=0|r[i>>2];i:do{if((-8&r[i+4>>2]|0)!=(0|s)){for(o=s<<(31==(0|o)?0:25-(o>>>1)|0);t=0|r[(n=i+16+(o>>>31<<2)|0)>>2];){if((-8&r[t+4>>2]|0)==(0|s)){i=t;break i}o<<=1,i=t}r[n>>2]=h,r[h+24>>2]=i,r[h+12>>2]=h,r[h+8>>2]=h;break e}}while(0);w=0|r[(_=i+8|0)>>2],r[w+12>>2]=h,r[_>>2]=h,r[h+8>>2]=w,r[h+12>>2]=i,r[h+24>>2]=0}}while(0);return P=e,0|d+8}for(i=23764;!((t=0|r[i>>2])>>>0<=u>>>0&&(w=t+(0|r[i+4>>2])|0)>>>0>u>>>0);)i=0|r[i+8>>2];i=(t=(t=(s=w+-47|0)+(0==(7&(t=s+8|0)|0)?0:0-t&7)|0)>>>0<(s=u+16|0)>>>0?u:t)+8|0,_=a+(b=0==(7&(b=a+8|0)|0)?0:0-b&7)|0,b=(n=l+-40|0)-b|0,r[5835]=_,r[5832]=b,r[_+4>>2]=1|b,r[a+n+4>>2]=40,r[5836]=r[5951],r[(n=t+4|0)>>2]=27,r[i>>2]=r[5941],r[i+4>>2]=r[5942],r[i+8>>2]=r[5943],r[i+12>>2]=r[5944],r[5941]=a,r[5942]=l,r[5944]=0,r[5943]=i,i=t+24|0;do{_=i,r[(i=i+4|0)>>2]=7}while((_+8|0)>>>0<w>>>0);if((0|t)!=(0|u)){if(a=t-u|0,r[n>>2]=-2&r[n>>2],r[u+4>>2]=1|a,r[t>>2]=a,i=a>>>3,a>>>0<256){n=23356+(i<<1<<2)|0,(t=0|r[5829])&(i=1<<i)?i=0|r[(t=n+8|0)>>2]:(r[5829]=t|i,i=n,t=n+8|0),r[t>>2]=u,r[i+12>>2]=u,r[u+8>>2]=i,r[u+12>>2]=n;break}if(n=23620+((o=(i=a>>>8)?a>>>0>16777215?31:a>>>(7+(o=14-((b=(520192+(w=i<<(_=(i+1048320|0)>>>16&8))|0)>>>16&4)|_|(o=(245760+(w<<=b)|0)>>>16&2))+(w<<o>>>15)|0)|0)&1|o<<1:0)<<2)|0,r[u+28>>2]=o,r[u+20>>2]=0,r[s>>2]=0,!((i=0|r[5830])&(t=1<<o))){r[5830]=i|t,r[n>>2]=u,r[u+24>>2]=n,r[u+12>>2]=u,r[u+8>>2]=u;break}i=0|r[n>>2];e:do{if((-8&r[i+4>>2]|0)!=(0|a)){for(o=a<<(31==(0|o)?0:25-(o>>>1)|0);t=0|r[(n=i+16+(o>>>31<<2)|0)>>2];){if((-8&r[t+4>>2]|0)==(0|a)){i=t;break e}o<<=1,i=t}r[n>>2]=u,r[u+24>>2]=i,r[u+12>>2]=u,r[u+8>>2]=u;break t}}while(0);w=0|r[(_=i+8|0)>>2],r[w+12>>2]=u,r[_>>2]=u,r[u+8>>2]=w,r[u+12>>2]=i,r[u+24>>2]=0}}else 0==(0|(w=0|r[5833]))|a>>>0<w>>>0&&(r[5833]=a),r[5941]=a,r[5942]=l,r[5944]=0,r[5838]=r[5947],r[5837]=-1,r[5842]=23356,r[5841]=23356,r[5844]=23364,r[5843]=23364,r[5846]=23372,r[5845]=23372,r[5848]=23380,r[5847]=23380,r[5850]=23388,r[5849]=23388,r[5852]=23396,r[5851]=23396,r[5854]=23404,r[5853]=23404,r[5856]=23412,r[5855]=23412,r[5858]=23420,r[5857]=23420,r[5860]=23428,r[5859]=23428,r[5862]=23436,r[5861]=23436,r[5864]=23444,r[5863]=23444,r[5866]=23452,r[5865]=23452,r[5868]=23460,r[5867]=23460,r[5870]=23468,r[5869]=23468,r[5872]=23476,r[5871]=23476,r[5874]=23484,r[5873]=23484,r[5876]=23492,r[5875]=23492,r[5878]=23500,r[5877]=23500,r[5880]=23508,r[5879]=23508,r[5882]=23516,r[5881]=23516,r[5884]=23524,r[5883]=23524,r[5886]=23532,r[5885]=23532,r[5888]=23540,r[5887]=23540,r[5890]=23548,r[5889]=23548,r[5892]=23556,r[5891]=23556,r[5894]=23564,r[5893]=23564,r[5896]=23572,r[5895]=23572,r[5898]=23580,r[5897]=23580,r[5900]=23588,r[5899]=23588,r[5902]=23596,r[5901]=23596,r[5904]=23604,r[5903]=23604,_=a+(b=0==(7&(b=a+8|0)|0)?0:0-b&7)|0,b=(w=l+-40|0)-b|0,r[5835]=_,r[5832]=b,r[_+4>>2]=1|b,r[a+w+4>>2]=40,r[5836]=r[5951]}while(0);if((i=0|r[5832])>>>0>A>>>0)return b=i-A|0,r[5832]=b,_=(w=0|r[5835])+A|0,r[5835]=_,r[_+4>>2]=1|b,r[w+4>>2]=3|A,P=e,0|w+8}return r[(w=23312)>>2]=12,P=e,0}function ve(t){var e=0,i=0,n=0,o=0,s=0,a=0,l=0,c=0;if(t|=0){i=t+-8|0,o=0|r[5833],c=i+(e=-8&(t=0|r[t+-4>>2]))|0;do{if(1&t)l=i,a=i;else{if(n=0|r[i>>2],!(3&t))return;if(s=n+e|0,(a=i+(0-n)|0)>>>0<o>>>0)return;if((0|r[5834])==(0|a)){if(3!=(3&(e=0|r[(t=c+4|0)>>2])|0)){l=a,e=s;break}return r[5831]=s,r[t>>2]=-2&e,r[a+4>>2]=1|s,void(r[a+s>>2]=s)}if(i=n>>>3,n>>>0<256){if(t=0|r[a+8>>2],(0|(e=0|r[a+12>>2]))==(0|t)){r[5829]=r[5829]&~(1<<i),l=a,e=s;break}r[t+12>>2]=e,r[e+8>>2]=t,l=a,e=s;break}o=0|r[a+24>>2],t=0|r[a+12>>2];do{if((0|t)==(0|a)){if(t=0|r[(i=4+(e=a+16|0)|0)>>2])e=i;else if(!(t=0|r[e>>2])){t=0;break}for(;;)if(i=0|r[(n=t+20|0)>>2])t=i,e=n;else{if(!(i=0|r[(n=t+16|0)>>2]))break;t=i,e=n}r[e>>2]=0}else l=0|r[a+8>>2],r[l+12>>2]=t,r[t+8>>2]=l}while(0);if(o){if(e=0|r[a+28>>2],(0|r[(i=23620+(e<<2)|0)>>2])==(0|a)){if(r[i>>2]=t,!t){r[5830]=r[5830]&~(1<<e),l=a,e=s;break}}else if(r[((0|r[(l=o+16|0)>>2])==(0|a)?l:o+20|0)>>2]=t,!t){l=a,e=s;break}r[t+24>>2]=o,0|(i=0|r[(e=a+16|0)>>2])&&(r[t+16>>2]=i,r[i+24>>2]=t),(e=0|r[e+4>>2])?(r[t+20>>2]=e,r[e+24>>2]=t,l=a,e=s):(l=a,e=s)}else l=a,e=s}}while(0);if(!(a>>>0>=c>>>0)&&1&(n=0|r[(t=c+4|0)>>2])){if(2&n)r[t>>2]=-2&n,r[l+4>>2]=1|e,r[a+e>>2]=e,o=e;else{if((0|r[5835])==(0|c)){if(c=(0|r[5832])+e|0,r[5832]=c,r[5835]=l,r[l+4>>2]=1|c,(0|l)!=(0|r[5834]))return;return r[5834]=0,void(r[5831]=0)}if((0|r[5834])==(0|c))return c=(0|r[5831])+e|0,r[5831]=c,r[5834]=a,r[l+4>>2]=1|c,void(r[a+c>>2]=c);o=(-8&n)+e|0,i=n>>>3;do{if(n>>>0<256){if(e=0|r[c+8>>2],(0|(t=0|r[c+12>>2]))==(0|e)){r[5829]=r[5829]&~(1<<i);break}r[e+12>>2]=t,r[t+8>>2]=e;break}s=0|r[c+24>>2],t=0|r[c+12>>2];do{if((0|t)==(0|c)){if(t=0|r[(i=4+(e=c+16|0)|0)>>2])e=i;else if(!(t=0|r[e>>2])){i=0;break}for(;;)if(i=0|r[(n=t+20|0)>>2])t=i,e=n;else{if(!(i=0|r[(n=t+16|0)>>2]))break;t=i,e=n}r[e>>2]=0,i=t}else i=0|r[c+8>>2],r[i+12>>2]=t,r[t+8>>2]=i,i=t}while(0);if(0|s){if(t=0|r[c+28>>2],(0|r[(e=23620+(t<<2)|0)>>2])==(0|c)){if(r[e>>2]=i,!i){r[5830]=r[5830]&~(1<<t);break}}else if(r[((0|r[(n=s+16|0)>>2])==(0|c)?n:s+20|0)>>2]=i,!i)break;r[i+24>>2]=s,0|(e=0|r[(t=c+16|0)>>2])&&(r[i+16>>2]=e,r[e+24>>2]=i),0|(t=0|r[t+4>>2])&&(r[i+20>>2]=t,r[t+24>>2]=i)}}while(0);if(r[l+4>>2]=1|o,r[a+o>>2]=o,(0|l)==(0|r[5834]))return void(r[5831]=o)}if(t=o>>>3,o>>>0<256)return i=23356+(t<<1<<2)|0,(e=0|r[5829])&(t=1<<t)?t=0|r[(e=i+8|0)>>2]:(r[5829]=e|t,t=i,e=i+8|0),r[e>>2]=l,r[t+12>>2]=l,r[l+8>>2]=t,void(r[l+12>>2]=i);t=23620+((n=(t=o>>>8)?o>>>0>16777215?31:o>>>(7+(n=14-((s=(520192+(c=t<<(a=(t+1048320|0)>>>16&8))|0)>>>16&4)|a|(n=(245760+(c<<=s)|0)>>>16&2))+(c<<n>>>15)|0)|0)&1|n<<1:0)<<2)|0,r[l+28>>2]=n,r[l+20>>2]=0,r[l+16>>2]=0,e=0|r[5830],i=1<<n;t:do{if(e&i){t=0|r[t>>2];e:do{if((-8&r[t+4>>2]|0)!=(0|o)){for(n=o<<(31==(0|n)?0:25-(n>>>1)|0);e=0|r[(i=t+16+(n>>>31<<2)|0)>>2];){if((-8&r[e+4>>2]|0)==(0|o)){t=e;break e}n<<=1,t=e}r[i>>2]=l,r[l+24>>2]=t,r[l+12>>2]=l,r[l+8>>2]=l;break t}}while(0);c=0|r[(a=t+8|0)>>2],r[c+12>>2]=l,r[a>>2]=l,r[l+8>>2]=c,r[l+12>>2]=t,r[l+24>>2]=0}else r[5830]=e|i,r[t>>2]=l,r[l+24>>2]=t,r[l+12>>2]=l,r[l+8>>2]=l}while(0);if(c=(0|r[5837])-1|0,r[5837]=c,!(0|c)){for(t=23772;t=0|r[t>>2];)t=t+8|0;r[5837]=-1}}}}function ye(t,e){e|=0;var i=0;return(t|=0)?(i=0|y(e,t),(e|t)>>>0>65535&&(i=(0|(i>>>0)/(t>>>0))==(0|e)?i:-1)):i=0,(t=0|me(i))&&3&r[t+-4>>2]?(Be(0|t,0,0|i),0|t):0|t}function be(t,e,i,n){return 0|(w(0|(n=(e|=0)-(n|=0)-((i|=0)>>>0>(t|=0)>>>0|0)>>>0)),t-i>>>0|0)}function _e(t){return 0|((t|=0)?31-(0|_(t^t-1))|0:32)}function we(t,e,i,n){var o,s;return s=P,P=P+16|0,function(t,e,i,n,o){o|=0;var s=0,a=0,l=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0;if(h=t|=0,a=i|=0,l=A=n|=0,!(u=c=e|=0))return s=0!=(0|o),l?s?(r[o>>2]=0|t,r[o+4>>2]=0&e,o=0,0|(w(0|(A=0)),o)):(o=0,0|(w(0|(A=0)),o)):(s&&(r[o>>2]=(h>>>0)%(a>>>0),r[o+4>>2]=0),o=(h>>>0)/(a>>>0)>>>0,0|(w(0|(A=0)),o));s=0==(0|l);do{if(a){if(!s){if((s=(0|_(0|l))-(0|_(0|u))|0)>>>0<=31){a=d=s+1|0,t=h>>>(d>>>0)&(e=s-31>>31)|u<<(l=31-s|0),e&=u>>>(d>>>0),s=0,l=h<<l;break}return o?(r[o>>2]=0|t,r[o+4>>2]=c|0&e,o=0,0|(w(0|(A=0)),o)):(o=0,0|(w(0|(A=0)),o))}if((s=a-1|0)&a|0){a=l=33+(0|_(0|a))-(0|_(0|u))|0,t=(d=32-l|0)-1>>31&u>>>((f=l-32|0)>>>0)|(u<<d|h>>>(l>>>0))&(e=f>>31),e&=u>>>(l>>>0),s=h<<(p=64-l|0)&(c=d>>31),l=(u<<p|h>>>(f>>>0))&c|h<<d&l-33>>31;break}return 0|o&&(r[o>>2]=s&h,r[o+4>>2]=0),1==(0|a)?(p=0|t,0|(w(0|(f=c|0&e)),p)):(f=u>>>((p=0|_e(0|a))>>>0)|0,p=u<<32-p|h>>>(p>>>0)|0,0|(w(0|f),p))}if(s)return 0|o&&(r[o>>2]=(u>>>0)%(a>>>0),r[o+4>>2]=0),p=(u>>>0)/(a>>>0)>>>0,0|(w(0|(f=0)),p);if(!h)return 0|o&&(r[o>>2]=0,r[o+4>>2]=(u>>>0)%(l>>>0)),p=(u>>>0)/(l>>>0)>>>0,0|(w(0|(f=0)),p);if(!((s=l-1|0)&l))return 0|o&&(r[o>>2]=0|t,r[o+4>>2]=s&u|0&e),f=0,p=u>>>((0|_e(0|l))>>>0),0|(w(0|f),p);if((s=(0|_(0|l))-(0|_(0|u))|0)>>>0<=30){a=e=s+1|0,t=u<<(l=31-s|0)|h>>>(e>>>0),e=u>>>(e>>>0),s=0,l=h<<l;break}return o?(r[o>>2]=0|t,r[o+4>>2]=c|0&e,p=0,0|(w(0|(f=0)),p)):(p=0,0|(w(0|(f=0)),p))}while(0);if(a){u=0|function(t,e,i,n){return 0|(w((e|=0)+(n|=0)+((i=(t|=0)+(i|=0)>>>0)>>>0<t>>>0|0)>>>0|0),0|i)}(0|(d=0|i),0|(h=A|0&n),-1,-1),i=0|x(),c=l,l=0;do{n=c,c=s>>>31|c<<1,s=l|s<<1,be(0|u,0|i,0|(n=t<<1|n>>>31|0),0|(A=t>>>31|e<<1|0)),l=1&(f=(p=0|x())>>31|((0|p)<0?-1:0)<<1),t=0|be(0|n,0|A,f&d|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&h|0),e=0|x(),a=a-1|0}while(0!=(0|a));u=c,c=0}else u=l,c=0,l=0;a=0,0|o&&(r[o>>2]=t,r[o+4>>2]=e),p=-2&(s<<1|0)|l,w(0|(f=(0|s)>>>31|(u|a)<<1|0&(a<<1|s>>>31)|c))}(t|=0,e|=0,i|=0,n|=0,o=0|s),P=s,0|(w(0|r[o+4>>2]),0|r[o>>2])}function xe(t,e,i){return t|=0,e|=0,(0|(i|=0))<32?(w(e>>>i|0),t>>>i|(e&(1<<i)-1)<<32-i):(w(0),e>>>i-32|0)}function Ce(t,e,i){return t|=0,(0|(i|=0))<32?(w((e|=0)<<i|(t&(1<<i)-1<<32-i)>>>32-i|0),t<<i):(w(t<<i-32|0),0)}function Ee(t,e){return e=+e,(t=+t)!=t?+e:e!=e?+t:+b(+t,+e)}function ke(t){return(t=+t)>=0?+a(t+.5):+v(t-.5)}function Te(t,e,i){t|=0,e|=0;var o,s,a=0;if((0|(i|=0))>=8192)return T(0|t,0|e,0|i),0|t;if(s=0|t,o=t+i|0,(3&t)==(3&e)){for(;3&t;){if(!i)return 0|s;n[t>>0]=0|n[e>>0],t=t+1|0,e=e+1|0,i=i-1|0}for(a=(i=-4&o|0)-64|0;(0|t)<=(0|a);)r[t>>2]=r[e>>2],r[t+4>>2]=r[e+4>>2],r[t+8>>2]=r[e+8>>2],r[t+12>>2]=r[e+12>>2],r[t+16>>2]=r[e+16>>2],r[t+20>>2]=r[e+20>>2],r[t+24>>2]=r[e+24>>2],r[t+28>>2]=r[e+28>>2],r[t+32>>2]=r[e+32>>2],r[t+36>>2]=r[e+36>>2],r[t+40>>2]=r[e+40>>2],r[t+44>>2]=r[e+44>>2],r[t+48>>2]=r[e+48>>2],r[t+52>>2]=r[e+52>>2],r[t+56>>2]=r[e+56>>2],r[t+60>>2]=r[e+60>>2],t=t+64|0,e=e+64|0;for(;(0|t)<(0|i);)r[t>>2]=r[e>>2],t=t+4|0,e=e+4|0}else for(i=o-4|0;(0|t)<(0|i);)n[t>>0]=0|n[e>>0],n[t+1>>0]=0|n[e+1>>0],n[t+2>>0]=0|n[e+2>>0],n[t+3>>0]=0|n[e+3>>0],t=t+4|0,e=e+4|0;for(;(0|t)<(0|o);)n[t>>0]=0|n[e>>0],t=t+1|0,e=e+1|0;return 0|s}function Be(t,e,i){e|=0;var o,s=0,a=0,l=0;if(o=(t|=0)+(i|=0)|0,e&=255,(0|i)>=67){for(;3&t;)n[t>>0]=e,t=t+1|0;for(l=e|e<<8|e<<16|e<<24,a=(s=-4&o|0)-64|0;(0|t)<=(0|a);)r[t>>2]=l,r[t+4>>2]=l,r[t+8>>2]=l,r[t+12>>2]=l,r[t+16>>2]=l,r[t+20>>2]=l,r[t+24>>2]=l,r[t+28>>2]=l,r[t+32>>2]=l,r[t+36>>2]=l,r[t+40>>2]=l,r[t+44>>2]=l,r[t+48>>2]=l,r[t+52>>2]=l,r[t+56>>2]=l,r[t+60>>2]=l,t=t+64|0;for(;(0|t)<(0|s);)r[t>>2]=l,t=t+4|0}for(;(0|t)<(0|o);)n[t>>0]=e,t=t+1|0;return o-i|0}function Se(t){return(t=+t)>=0?+a(t+.5):+v(t-.5)}function Pe(t){var e,i,n;return t|=0,n=0|k(),(0|t)>0&(0|(e=(i=0|r[s>>2])+t|0))<(0|i)|(0|e)<0?(S(0|e),E(12),-1):(0|e)>(0|n)&&!(0|B(0|e))?(E(12),-1):(r[s>>2]=e,0|i)}return{___uremdi3:we,_bitshift64Lshr:xe,_bitshift64Shl:Ce,_calloc:ye,_cellAreaKm2:function(t,e){var i,n,o,s=0;if(o=P,P=P+192|0,n=o,Gt(t|=0,e|=0,i=o+168|0),Vt(t,e,n),(0|(e=0|r[n>>2]))>0){if(s=+St(n+8|0,n+8+((1!=(0|e)&1)<<4)|0,i)+0,1!=(0|e)){t=1;do{s+=+St(n+8+(t<<4)|0,n+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,i)}while((0|t)<(0|e))}}else s=0;return P=o,6371.007180918475*s*6371.007180918475},_cellAreaM2:function(t,e){var i,n,o,s=0;if(o=P,P=P+192|0,n=o,Gt(t|=0,e|=0,i=o+168|0),Vt(t,e,n),(0|(e=0|r[n>>2]))>0){if(s=+St(n+8|0,n+8+((1!=(0|e)&1)<<4)|0,i)+0,1!=(0|e)){t=1;do{s+=+St(n+8+(t<<4)|0,n+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,i)}while((0|t)<(0|e))}}else s=0;return P=o,6371.007180918475*s*6371.007180918475*1e3*1e3},_cellAreaRads2:function(t,e){var i,n,o,s=0;if(o=P,P=P+192|0,n=o,Gt(t|=0,e|=0,i=o+168|0),Vt(t,e,n),(0|(e=0|r[n>>2]))<=0)return P=o,+(s=0);if(s=+St(n+8|0,n+8+((1!=(0|e)&1)<<4)|0,i)+0,1==(0|e))return P=o,+s;t=1;do{s+=+St(n+8+(t<<4)|0,n+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,i)}while((0|t)<(0|e));return P=o,+s},_compact:function(t,e,i){e|=0;var n,o=0,s=0,a=0,l=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0,C=0,E=0,k=0;if(!(i|=0))return 0;if(o=0|r[(s=t|=0)>>2],!0&0==(15728640&(s=0|r[s+4>>2])|0)){if((0|i)<=0)return 0;if(r[(E=e)>>2]=o,r[E+4>>2]=s,1==(0|i))return 0;o=1;do{C=0|r[4+(w=t+(o<<3)|0)>>2],r[(E=e+(o<<3)|0)>>2]=r[w>>2],r[E+4>>2]=C,o=o+1|0}while((0|o)!=(0|i));return 0}if(!(C=0|me(w=i<<3)))return-3;if(Te(0|C,0|t,0|w),!(n=0|ye(i,8)))return ve(C),-3;o=i;t:for(;;){b=0|xe(0|(d=0|r[(l=C)>>2]),0|(l=0|r[l+4>>2]),52),x(),_=(b&=15)-1|0,y=(0|o)>0;e:do{if(y){if(v=((0|o)<0)<<31>>31,g=0|Ce(0|_,0,52),m=0|x(),_>>>0>15)for(s=0,t=d,i=l;;){if(!(0==(0|t)&0==(0|i))){if(a=0|xe(0|t,0|i,52),x(),c=(0|(a&=15))<(0|_),a=(0|a)==(0|_),i=0|we(0|(h=c?0:a?t:0),0|(t=c?0:a?i:0),0|o,0|v),x(),0==(0|(u=0|r[(c=a=n+(i<<3)|0)>>2]))&0==(0|(c=0|r[c+4>>2])))i=h;else for(g=0,p=i,f=c,i=h;;){if((0|g)>(0|o)){E=41;break t}if((0|u)==(0|i)&(-117440513&f|0)==(0|t)){h=0|xe(0|u,0|f,56),x(),A=1+(h&=7)|0,m=0|xe(0|u,0|f,45),x();i:do{if(0|F(127&m)){if(u=0|xe(0|u,0|f,52),x(),!(u&=15)){c=6;break}for(c=1;;){if(!(0==((m=0|Ce(7,0,3*(15-c|0)|0))&i|0)&0==((0|x())&t|0))){c=7;break i}if(!(c>>>0<u>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((h+2|0)>>>0>c>>>0){E=51;break t}m=0|Ce(0|A,0,56),t=0|x()|-117440513&t,r[(c=a)>>2]=0,r[c+4>>2]=0,c=p,i|=m}else c=(p+1|0)%(0|o)|0;if(0==(0|(u=0|r[(f=a=n+(c<<3)|0)>>2]))&0==(0|(f=0|r[f+4>>2])))break;g=g+1|0,p=c}r[(m=a)>>2]=i,r[m+4>>2]=t}if((0|(s=s+1|0))>=(0|o))break e;t=0|r[(i=C+(s<<3)|0)>>2],i=0|r[i+4>>2]}for(s=0,t=d,i=l;;){if(!(0==(0|t)&0==(0|i))){if(c=0|xe(0|t,0|i,52),x(),(0|(c&=15))>=(0|_)){if((0|c)!=(0|_)&&(t|=g,i=-15728641&i|m,c>>>0>=b>>>0)){a=_;do{p=0|Ce(7,0,3*(14-a|0)|0),a=a+1|0,t|=p,i=0|x()|i}while(a>>>0<c>>>0)}}else t=0,i=0;if(c=0|we(0|t,0|i,0|o,0|v),x(),!(0==(0|(h=0|r[(u=a=n+(c<<3)|0)>>2]))&0==(0|(u=0|r[u+4>>2]))))for(p=0;;){if((0|p)>(0|o)){E=41;break t}if((0|h)==(0|t)&(-117440513&u|0)==(0|i)){A=0|xe(0|h,0|u,56),x(),f=1+(A&=7)|0,k=0|xe(0|h,0|u,45),x();i:do{if(0|F(127&k)){if(h=0|xe(0|h,0|u,52),x(),!(h&=15)){u=6;break}for(u=1;;){if(!(0==((k=0|Ce(7,0,3*(15-u|0)|0))&t|0)&0==((0|x())&i|0))){u=7;break i}if(!(u>>>0<h>>>0)){u=6;break}u=u+1|0}}else u=7}while(0);if((A+2|0)>>>0>u>>>0){E=51;break t}k=0|Ce(0|f,0,56),i=0|x()|-117440513&i,r[(f=a)>>2]=0,r[f+4>>2]=0,t|=k}else c=(c+1|0)%(0|o)|0;if(0==(0|(h=0|r[(u=a=n+(c<<3)|0)>>2]))&0==(0|(u=0|r[u+4>>2])))break;p=p+1|0}r[(k=a)>>2]=t,r[k+4>>2]=i}if((0|(s=s+1|0))>=(0|o))break e;t=0|r[(i=C+(s<<3)|0)>>2],i=0|r[i+4>>2]}}}while(0);if((o+5|0)>>>0<11){E=99;break}if(!(m=0|ye((0|o)/6|0,8))){E=58;break}e:do{if(y){p=0,f=0;do{if(!(0==(0|(s=0|r[(t=c=n+(p<<3)|0)>>2]))&0==(0|(t=0|r[t+4>>2])))){u=0|xe(0|s,0|t,56),x(),i=1+(u&=7)|0,h=-117440513&t,k=0|xe(0|s,0|t,45),x();i:do{if(0|F(127&k)){if(A=0|xe(0|s,0|t,52),x(),0|(A&=15))for(a=1;;){if(!(0==(s&(k=0|Ce(7,0,3*(15-a|0)|0))|0)&0==(h&(0|x())|0)))break i;if(!(a>>>0<A>>>0))break;a=a+1|0}s|=t=0|Ce(0|i,0,56),t=0|x()|h,r[(i=c)>>2]=s,r[i+4>>2]=t,i=u+2|0}}while(0);7==(0|i)&&(r[(k=m+(f<<3)|0)>>2]=s,r[k+4>>2]=-117440513&t,f=f+1|0)}p=p+1|0}while((0|p)!=(0|o));if(y){if(g=((0|o)<0)<<31>>31,A=0|Ce(0|_,0,52),p=0|x(),_>>>0>15)for(t=0,s=0;;){do{if(!(0==(0|d)&0==(0|l))){for(u=0|xe(0|d,0|l,52),x(),a=(0|(u&=15))<(0|_),u=(0|u)==(0|_),a=0|we(0|(c=a?0:u?d:0),0|(u=a?0:u?l:0),0|o,0|g),x(),i=0;;){if((0|i)>(0|o)){E=98;break t}if((-117440513&(h=0|r[4+(k=n+(a<<3)|0)>>2])|0)==(0|u)&&(0|r[k>>2])==(0|c)){E=70;break}if((0|r[(k=n+((a=(a+1|0)%(0|o)|0)<<3)|0)>>2])==(0|c)&&(0|r[k+4>>2])==(0|u))break;i=i+1|0}if(70==(0|E)&&(E=0,!0&100663296==(117440512&h|0)))break;r[(k=e+(s<<3)|0)>>2]=d,r[k+4>>2]=l,s=s+1|0}}while(0);if((0|(t=t+1|0))>=(0|o)){o=f;break e}d=0|r[(l=C+(t<<3)|0)>>2],l=0|r[l+4>>2]}for(t=0,s=0;;){do{if(!(0==(0|d)&0==(0|l))){if(u=0|xe(0|d,0|l,52),x(),(0|(u&=15))>=(0|_))if((0|u)!=(0|_))if(i=d|A,a=-15728641&l|p,u>>>0<b>>>0)u=a;else{c=_;do{k=0|Ce(7,0,3*(14-c|0)|0),c=c+1|0,i|=k,a=0|x()|a}while(c>>>0<u>>>0);u=a}else i=d,u=l;else i=0,u=0;for(c=0|we(0|i,0|u,0|o,0|g),x(),a=0;;){if((0|a)>(0|o)){E=98;break t}if((-117440513&(h=0|r[4+(k=n+(c<<3)|0)>>2])|0)==(0|u)&&(0|r[k>>2])==(0|i)){E=93;break}if((0|r[(k=n+((c=(c+1|0)%(0|o)|0)<<3)|0)>>2])==(0|i)&&(0|r[k+4>>2])==(0|u))break;a=a+1|0}if(93==(0|E)&&(E=0,!0&100663296==(117440512&h|0)))break;r[(k=e+(s<<3)|0)>>2]=d,r[k+4>>2]=l,s=s+1|0}}while(0);if((0|(t=t+1|0))>=(0|o)){o=f;break e}d=0|r[(l=C+(t<<3)|0)>>2],l=0|r[l+4>>2]}}else s=0,o=f}else s=0,o=0}while(0);if(Be(0|n,0,0|w),Te(0|C,0|m,o<<3|0),ve(m),!o)break;e=e+(s<<3)|0}return 41==(0|E)?(ve(C),ve(n),0|(k=-1)):51==(0|E)?(ve(C),ve(n),0|(k=-2)):58==(0|E)?(ve(C),ve(n),0|(k=-3)):98==(0|E)?(ve(m),ve(C),ve(n),0|(k=-1)):(99==(0|E)&&Te(0|e,0|C,o<<3|0),ve(C),ve(n),0|(k=0))},_destroyLinkedPolygon:function(t){var e=0,i=0,n=0,o=0;if(t|=0)for(n=1;;){if(0|(e=0|r[t>>2]))do{if(0|(i=0|r[e>>2]))do{o=i,i=0|r[i+16>>2],ve(o)}while(0!=(0|i));o=e,e=0|r[e+8>>2],ve(o)}while(0!=(0|e));if(e=t,t=0|r[t+8>>2],n||ve(e),!t)break;n=0}},_edgeLengthKm:function(t){return+ +o[20752+((t|=0)<<3)>>3]},_edgeLengthM:function(t){return+ +o[20880+((t|=0)<<3)>>3]},_emscripten_replace_memory:function(t){return n=new Int8Array(t),new Uint8Array(t),r=new Int32Array(t),new Float32Array(t),o=new Float64Array(t),i=t,!0},_exactEdgeLengthKm:function(t,e){var i,n,s=0,a=0,l=0,u=0,A=0,f=0;if(n=P,P=P+176|0,Qt(t|=0,e|=0,i=n),(0|(t=0|r[i>>2]))<=1)return P=n,+(l=0);e=t+-1|0,t=0,s=0,a=+o[i+8>>3],l=+o[i+16>>3];do{A=a,a=+o[i+8+((t=t+1|0)<<4)>>3],f=+d(.5*(a-A)),u=l,l=+o[i+8+(t<<4)+8>>3],u=f*f+(u=+d(.5*(l-u)))*(+h(+A)*+h(+a)*u),s+=2*+m(+ +c(+u),+ +c(+(1-u)))}while((0|t)!=(0|e));return P=n,+(f=6371.007180918475*s)},_exactEdgeLengthM:function(t,e){var i,n,s=0,a=0,l=0,u=0,A=0,f=0;if(n=P,P=P+176|0,Qt(t|=0,e|=0,i=n),(0|(t=0|r[i>>2]))<=1)return P=n,+(l=0);e=t+-1|0,t=0,s=0,a=+o[i+8>>3],l=+o[i+16>>3];do{A=a,a=+o[i+8+((t=t+1|0)<<4)>>3],f=+d(.5*(a-A)),u=l,l=+o[i+8+(t<<4)+8>>3],u=f*f+(u=+d(.5*(l-u)))*(+h(+A)*+h(+a)*u),s+=2*+m(+ +c(+u),+ +c(+(1-u)))}while((0|t)!=(0|e));return P=n,+(f=6371.007180918475*s*1e3)},_exactEdgeLengthRads:function(t,e){var i,n,s=0,a=0,l=0,u=0,A=0,f=0;if(n=P,P=P+176|0,Qt(t|=0,e|=0,i=n),(0|(t=0|r[i>>2]))<=1)return P=n,+(l=0);e=t+-1|0,t=0,s=0,a=+o[i+8>>3],l=+o[i+16>>3];do{A=a,a=+o[i+8+((t=t+1|0)<<4)>>3],f=+d(.5*(a-A)),u=l,l=+o[i+8+(t<<4)+8>>3],u=f*f+(u=+d(.5*(l-u)))*(+h(+a)*+h(+A)*u),s+=2*+m(+ +c(+u),+ +c(+(1-u)))}while((0|t)<(0|e));return P=n,+s},_experimentalH3ToLocalIj:function(t,e,i,n,r){var o,s;return r|=0,s=P,P=P+16|0,(t=0|$t(t|=0,e|=0,i|=0,n|=0,o=s))||(At(o,r),t=0),P=s,0|t},_experimentalLocalIjToH3:function(t,e,i,n){var r,o;return t|=0,e|=0,n|=0,r=P,P=P+16|0,ft(i|=0,o=r),n=0|te(t,e,o,n),P=r,0|n},_free:ve,_geoToH3:Ut,_getDestinationH3IndexFromUnidirectionalEdge:function(t,e){t|=0;var i,n,o=0;return i=P,P=P+16|0,o=i,!0&268435456==(2013265920&(e|=0)|0)?(n=0|xe(0|t,0|e,56),x(),r[o>>2]=0,o=0|D(t,-2130706433&e|134217728,7&n,o),e=0|x(),w(0|e),P=i,0|o):(o=0,w(0|(e=0)),P=i,0|o)},_getH3IndexesFromUnidirectionalEdge:function(t,e,i){t|=0;var n,o,s,a,l=0;s=P,P=P+16|0,n=s,a=!0&268435456==(2013265920&(e|=0)|0),o=-2130706433&e|134217728,r[(l=i|=0)>>2]=a?t:0,r[l+4>>2]=a?o:0,a?(e=0|xe(0|t,0|e,56),x(),r[n>>2]=0,t=0|D(t,o,7&e,n),e=0|x()):(t=0,e=0),r[(l=i+8|0)>>2]=t,r[l+4>>2]=e,P=s},_getH3UnidirectionalEdge:function(t,e,i,n){var o,s,a=0,l=0,c=0,u=0,h=0;if(s=P,P=P+16|0,o=s,!(0|qt(t|=0,e|=0,i|=0,n|=0)))return u=0,w(0|(c=0)),P=s,0|u;for(c=-2130706433&e,a=(a=0==(0|Dt(t,e)))?1:2;r[o>>2]=0,l=a+1|0,!((0|(h=0|D(t,e,a,o)))==(0|i)&(0|x())==(0|n));){if(!(l>>>0<7)){a=0,t=0,u=6;break}a=l}return 6==(0|u)?(w(0|a),P=s,0|t):(h=0|Ce(0|a,0,56),u=0|c|x()|268435456,h|=t,w(0|u),P=s,0|h)},_getH3UnidirectionalEdgeBoundary:Qt,_getH3UnidirectionalEdgesFromHexagon:function(t,e,i){i|=0;var n,o=0;n=0==(0|Dt(t|=0,e|=0)),e&=-2130706433,r[(o=i)>>2]=n?t:0,r[o+4>>2]=n?285212672|e:0,r[(o=i+8|0)>>2]=t,r[o+4>>2]=301989888|e,r[(o=i+16|0)>>2]=t,r[o+4>>2]=318767104|e,r[(o=i+24|0)>>2]=t,r[o+4>>2]=335544320|e,r[(o=i+32|0)>>2]=t,r[o+4>>2]=352321536|e,r[(i=i+40|0)>>2]=t,r[i+4>>2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(t,e){var i;return t|=0,w(0|((i=!0&268435456==(2013265920&(e|=0)|0))?-2130706433&e|134217728:0)),0|(i?t:0)},_getPentagonIndexes:Wt,_getRes0Indexes:function(t){t|=0;var e=0,i=0,n=0;e=0;do{Ce(0|e,0,45),n=134225919|x(),r[(i=t+(e<<3)|0)>>2]=-1,r[i+4>>2]=n,e=e+1|0}while(122!=(0|e))},_h3Distance:function(t,e,i,n){var r,o,s;return i|=0,n|=0,s=P,P=P+32|0,o=s,t=0==(0|$t(t|=0,e|=0,t,e,r=s+12|0))&&0==(0|$t(t,e,i,n,o))?0|dt(r,o):-1,P=s,0|t},_h3GetBaseCell:Pt,_h3GetFaces:function t(e,i,n){n|=0;var o,s=0,a=0,l=0,c=0,u=0,h=0,d=0,A=0;o=P,P=P+128|0,d=o+112|0,l=o+96|0,A=o,a=0|xe(0|(e|=0),0|(i|=0),52),x(),u=15&a,r[d>>2]=u,c=0|xe(0|e,0|i,45),x(),c&=127;t:do{if(0|F(c)){if(0|u)for(s=1;;){if(!(0==((h=0|Ce(7,0,3*(15-s|0)|0))&e|0)&0==((0|x())&i|0))){a=0;break t}if(!(s>>>0<u>>>0))break;s=s+1|0}if(!(1&a))return h=0|Ce(u+1|0,0,52),A=0|x()|-15728641&i,t((h|e)&~(d=0|Ce(7,0,3*(14-u|0)|0)),A&~(0|x()),n),void(P=o);a=1}else a=0}while(0);Ht(e,i,l),a?(_t(l,d,A),h=5):(Et(l,d,A),h=6);t:do{if(0|F(c))if(u)for(s=1;;){if(!(0==((c=0|Ce(7,0,3*(15-s|0)|0))&e|0)&0==((0|x())&i|0))){s=8;break t}if(!(s>>>0<u>>>0)){s=20;break}s=s+1|0}else s=20;else s=8}while(0);if(Be(0|n,-1,0|s),a){a=0;do{for(xt(l=A+(a<<4)|0,0|r[d>>2]),l=0|r[l>>2],s=0;!(-1==(0|(u=0|r[(c=n+(s<<2)|0)>>2]))|(0|u)==(0|l));)s=s+1|0;r[c>>2]=l,a=a+1|0}while((0|a)!=(0|h))}else{a=0;do{for(wt(l=A+(a<<4)|0,0|r[d>>2],0,1),l=0|r[l>>2],s=0;!(-1==(0|(u=0|r[(c=n+(s<<2)|0)>>2]))|(0|u)==(0|l));)s=s+1|0;r[c>>2]=l,a=a+1|0}while((0|a)!=(0|h))}P=o},_h3GetResolution:function(t,e){return e=0|xe(0|(t|=0),0|(e|=0),52),x(),15&e|0},_h3IndexesAreNeighbors:qt,_h3IsPentagon:Dt,_h3IsResClassIII:function(t,e){return e=0|xe(0|(t|=0),0|(e|=0),52),x(),1&e|0},_h3IsValid:Mt,_h3Line:function(t,e,i,n,o){i|=0,n|=0,o|=0;var s,a=0,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0,x=0,C=0;if(s=P,P=P+48|0,c=s+12|0,x=s,0==(0|$t(t|=0,e|=0,t,e,a=s+24|0))&&0==(0|$t(t,e,i,n,c))){if((0|(w=0|dt(a,c)))<0)return P=s,0|w;for(r[a>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[c>>2]=0,r[c+4>>2]=0,r[c+8>>2]=0,$t(t,e,t,e,a),$t(t,e,i,n,c),pt(a),pt(c),w?(g=+(0|w),_=a,i=A=0|r[a>>2],n=f=0|r[(y=a+4|0)>>2],a=p=0|r[(b=a+8|0)>>2],m=+((0|r[c>>2])-A|0)/g,v=+((0|r[c+4>>2])-f|0)/g,g=+((0|r[c+8>>2])-p|0)/g):(y=n=a+4|0,b=p=a+8|0,_=a,i=0|r[a>>2],n=0|r[n>>2],a=0|r[p>>2],m=0,v=0,g=0),r[x>>2]=i,r[(p=x+4|0)>>2]=n,r[(f=x+8|0)>>2]=a,A=0;;){C=m*(h=+(0|A))+ +(0|i),u=v*h+ +(0|r[y>>2]),h=g*h+ +(0|r[b>>2]),n=~~+ke(+C),c=~~+ke(+u),i=~~+ke(+h),C=+l(+(+(0|n)-C)),u=+l(+(+(0|c)-u)),h=+l(+(+(0|i)-h));do{if(!(C>u&C>h)){if(d=0-n|0,u>h){a=d-i|0;break}a=c,i=d-c|0;break}n=0-(c+i)|0,a=c}while(0);if(r[x>>2]=n,r[p>>2]=a,r[f>>2]=i,gt(x),te(t,e,x,o+(A<<3)|0),(0|A)==(0|w))break;A=A+1|0,i=0|r[_>>2]}return P=s,0}return P=s,-1},_h3LineSize:function(t,e,i,n){var r,o,s;return i|=0,n|=0,s=P,P=P+32|0,o=s,t=0==(0|$t(t|=0,e|=0,t,e,r=s+12|0))&&0==(0|$t(t,e,i,n,o))?0|dt(r,o):-1,P=s,(t>>>31^1)+t|0},_h3SetToLinkedGeo:function(t,e,i){i|=0;var n,o,s,a=0;if(s=P,P=P+32|0,n=s,function(t,e,i){t|=0,i|=0;var n,o,s=0,a=0,l=0,c=0,u=0;if(o=P,P=P+176|0,n=o,(0|(e|=0))<1)return ce(i,0,0),void(P=o);c=0|xe(0|r[(c=t)>>2],0|r[c+4>>2],52),x(),ce(i,(0|e)>6?e:6,15&c),c=0;do{if(Vt(0|r[(s=t+(c<<3)|0)>>2],0|r[s+4>>2],n),(0|(s=0|r[n>>2]))>0){u=0;do{l=n+8+(u<<4)|0,(a=0|fe(i,s=n+8+(((0|(u=u+1|0))%(0|s)|0)<<4)|0,l))?de(i,a):Ae(i,l,s),s=0|r[n>>2]}while((0|u)<(0|s))}c=c+1|0}while((0|c)!=(0|e));P=o}(t|=0,e|=0,o=s+16|0),r[i>>2]=0,r[i+4>>2]=0,r[i+8>>2]=0,!(t=0|he(o)))return Jt(i),ue(o),void(P=s);do{e=0|Yt(i);do{Xt(e,t),a=t+16|0,r[n>>2]=r[a>>2],r[n+4>>2]=r[a+4>>2],r[n+8>>2]=r[a+8>>2],r[n+12>>2]=r[a+12>>2],de(o,t),t=0|pe(o,n)}while(0!=(0|t));t=0|he(o)}while(0!=(0|t));Jt(i),ue(o),P=s},_h3ToCenterChild:function(t,e,i){i|=0;var n=0,r=0;if(n=0|xe(0|(t|=0),0|(e|=0),52),x(),(0|i)<16&(0|(n&=15))<=(0|i)){if((0|n)!=(0|i)&&(t|=r=0|Ce(0|i,0,52),e=0|x()|-15728641&e,(0|n)<(0|i)))do{r=0|Ce(7,0,3*(14-n|0)|0),n=n+1|0,t&=~r,e&=~(0|x())}while((0|n)<(0|i))}else e=0,t=0;return w(0|e),0|t},_h3ToChildren:Ot,_h3ToGeo:Gt,_h3ToGeoBoundary:Vt,_h3ToParent:It,_h3UnidirectionalEdgeIsValid:function(t,e){var i=0;if(!(!0&268435456==(2013265920&(e|=0)|0)))return 0;switch(i=0|xe(0|(t|=0),0|e,56),x(),7&i){case 0:case 7:return 0}return!0&16777216==(117440512&e|0)&0!=(0|Dt(t,i=-2130706433&e|134217728))?0|(i=0):0|(i=0|Mt(t,i))},_hexAreaKm2:function(t){return+ +o[20496+((t|=0)<<3)>>3]},_hexAreaM2:function(t){return+ +o[20624+((t|=0)<<3)>>3]},_hexRing:function(t,e,i,n){t|=0,e|=0,n|=0;var o,s=0,a=0,l=0,c=0,u=0,h=0,d=0;if(o=P,P=P+16|0,d=o,!(i|=0))return r[(d=n)>>2]=t,r[d+4>>2]=e,P=o,0;r[d>>2]=0;t:do{if(0|Dt(t,e))t=1;else{if(a=(0|i)>0){s=0,h=t;do{if(0==(0|(h=0|D(h,e,4,d)))&0==(0|(e=0|x()))){t=2;break t}if(s=s+1|0,0|Dt(h,e)){t=1;break t}}while((0|s)<(0|i));if(r[(u=n)>>2]=h,r[u+4>>2]=e,u=i+-1|0,a){a=0,l=1,s=h,t=e;do{if(0==(0|(s=0|D(s,t,2,d)))&0==(0|(t=0|x()))){t=2;break t}if(r[(c=n+(l<<3)|0)>>2]=s,r[c+4>>2]=t,l=l+1|0,0|Dt(s,t)){t=1;break t}a=a+1|0}while((0|a)<(0|i));c=0,a=l;do{if(0==(0|(s=0|D(s,t,3,d)))&0==(0|(t=0|x()))){t=2;break t}if(r[(l=n+(a<<3)|0)>>2]=s,r[l+4>>2]=t,a=a+1|0,0|Dt(s,t)){t=1;break t}c=c+1|0}while((0|c)<(0|i));l=0;do{if(0==(0|(s=0|D(s,t,1,d)))&0==(0|(t=0|x()))){t=2;break t}if(r[(c=n+(a<<3)|0)>>2]=s,r[c+4>>2]=t,a=a+1|0,0|Dt(s,t)){t=1;break t}l=l+1|0}while((0|l)<(0|i));l=0;do{if(0==(0|(s=0|D(s,t,5,d)))&0==(0|(t=0|x()))){t=2;break t}if(r[(c=n+(a<<3)|0)>>2]=s,r[c+4>>2]=t,a=a+1|0,0|Dt(s,t)){t=1;break t}l=l+1|0}while((0|l)<(0|i));l=0;do{if(0==(0|(s=0|D(s,t,4,d)))&0==(0|(t=0|x()))){t=2;break t}if(r[(c=n+(a<<3)|0)>>2]=s,r[c+4>>2]=t,a=a+1|0,0|Dt(s,t)){t=1;break t}l=l+1|0}while((0|l)<(0|i));for(l=0;;){if(0==(0|(s=0|D(s,t,6,d)))&0==(0|(t=0|x()))){t=2;break t}if((0|l)!=(0|u)){if(r[(c=n+(a<<3)|0)>>2]=s,r[c+4>>2]=t,0|Dt(s,t)){t=1;break t}a=a+1|0}if((0|(l=l+1|0))>=(0|i)){l=h,a=e;break}}}else l=h,s=h,a=e,t=e}else r[(l=n)>>2]=t,r[l+4>>2]=e,l=t,s=t,a=e,t=e;t=1&((0|l)!=(0|s)|(0|a)!=(0|t))}}while(0);return P=o,0|t},_i64Subtract:be,_kRing:M,_kRingDistances:function(t,e,i,n,r){var o;if(0|I(t|=0,e|=0,i|=0,n|=0,r|=0)){if(Be(0|n,0,(o=1+(0|y(3*i|0,i+1|0))|0)<<3|0),0|r)return Be(0|r,0,o<<2|0),void O(t,e,i,n,r,o,0);(r=0|ye(o,4))&&(O(t,e,i,n,r,o,0),ve(r))}},_llvm_minnum_f64:Ee,_llvm_round_f64:ke,_malloc:me,_maxFaceCount:function(t,e){var i=0,n=0;if(n=0|xe(0|(t|=0),0|(e|=0),45),x(),!(0|F(127&n)))return 2;if(n=0|xe(0|t,0|e,52),x(),!(n&=15))return 5;for(i=1;;){if(!(0==((0|Ce(7,0,3*(15-i|0)|0))&t|0)&0==((0|x())&e|0))){i=2,t=6;break}if(!(i>>>0<n>>>0)){i=5,t=6;break}i=i+1|0}return 6==(0|t)?0|i:0},_maxH3ToChildrenSize:function(t,e,i){return i|=0,t=0|xe(0|(t|=0),0|(e|=0),52),x(),(0|i)<16&(0|(t&=15))<=(0|i)?0|(i=0|ee(7,i-t|0)):0|(i=0)},_maxKringSize:function(t){return 1+(0|y(3*(t|=0)|0,t+1|0))|0},_maxPolyfillSize:function(t,e){e|=0;var i,n=0,o=0,s=0,a=0,l=0;if(i=P,P=P+48|0,s=i+8|0,o=i,a=0|r[4+(l=t|=0)>>2],r[(n=o)>>2]=r[l>>2],r[n+4>>2]=a,ne(o,s),s=0|V(s,e),e=0|r[o>>2],(0|(o=0|r[t+8>>2]))<=0)return P=i,0|(l=(a=(0|s)<(0|(l=e)))?l:s)+12;n=0|r[t+12>>2],t=0;do{e=(0|r[n+(t<<3)>>2])+e|0,t=t+1|0}while((0|t)<(0|o));return P=i,0|(l=(l=(0|s)<(0|e))?e:s)+12},_maxUncompactSize:function(t,e,i){t|=0;var n=0,o=0,s=0,a=0;if((0|(e|=0))<=0)return 0;if((0|(i|=0))>=16){for(n=0;;){if(!(0==(0|r[(a=t+(n<<3)|0)>>2])&0==(0|r[a+4>>2]))){n=-1,o=13;break}if((0|(n=n+1|0))>=(0|e)){n=0,o=13;break}}if(13==(0|o))return 0|n}n=0,a=0;t:for(;;){s=0|r[(o=t+(a<<3)|0)>>2],o=0|r[o+4>>2];do{if(!(0==(0|s)&0==(0|o))){if(o=0|xe(0|s,0|o,52),x(),(0|(o&=15))>(0|i)){n=-1,o=13;break t}if((0|o)==(0|i)){n=n+1|0;break}n=(0|ee(7,i-o|0))+n|0;break}}while(0);if((0|(a=a+1|0))>=(0|e)){o=13;break}}return 13==(0|o)?0|n:0},_memcpy:Te,_memset:Be,_numHexagons:function(t){var e;return t=0|r[(e=21008+((t|=0)<<3)|0)>>2],w(0|r[e+4>>2]),0|t},_pentagonIndexCount:function(){return 12},_pointDistKm:Bt,_pointDistM:function(t,e){t|=0;var i,n,r,s=0;return n=+o[(e|=0)>>3],i=+o[t>>3],s=(r=+d(.5*(n-i)))*r+(s=+d(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+h(+n)*+h(+i)*s),2*+m(+ +c(+s),+ +c(+(1-s)))*6371.007180918475*1e3},_pointDistRads:function(t,e){t|=0;var i,n,r,s=0;return n=+o[(e|=0)>>3],i=+o[t>>3],s=(r=+d(.5*(n-i)))*r+(s=+d(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+h(+n)*+h(+i)*s),2*+m(+ +c(+s),+ +c(+(1-s)))},_polyfill:function(t,e,i){var n,o=0,s=0,a=0,l=0,c=0;if(n=P,P=P+48|0,o=n+8|0,s=n,0|function(t,e,i){e|=0,i|=0;var n,o,s,a,l,c=0,u=0,h=0,d=0,A=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0,E=0,k=0,T=0,B=0,S=0,M=0,D=0,F=0,R=0,N=0,z=0;if(l=P,P=P+112|0,o=l+80|0,f=l+72|0,s=l,a=l+56|0,(z=0|me(32+(r[(p=8+(t|=0)|0)>>2]<<5)|0))||C(22848,22448,800,22456),re(t,z),c=0|r[(h=t)+4>>2],r[(A=f)>>2]=r[h>>2],r[A+4>>2]=c,ne(f,o),A=0|V(o,e),c=0|r[f>>2],(0|(h=0|r[p>>2]))>0){d=0|r[t+12>>2],u=0;do{c=(0|r[d+(u<<3)>>2])+c|0,u=u+1|0}while((0|u)!=(0|h))}if(u=0|ye(n=(A=(0|A)<(0|c)?c:A)+12|0,8),g=0|ye(n,8),r[o>>2]=0,N=0|r[(R=t)+4>>2],r[(c=f)>>2]=r[R>>2],r[c+4>>2]=N,0|(c=0|L(f,n,e,o,u,g)))return ve(u),ve(g),ve(z),P=l,0|c;t:do{if((0|r[p>>2])>0){for(h=t+12|0,c=0;d=0|L((0|r[h>>2])+(c<<3)|0,n,e,o,u,g),c=c+1|0,!(0|d);)if((0|c)>=(0|r[p>>2]))break t;return ve(u),ve(g),ve(z),P=l,0|d}}while(0);(0|A)>-12&&Be(0|g,0,((0|n)>1?n:1)<<3|0);t:do{if((0|r[o>>2])>0){N=((0|n)<0)<<31>>31,B=u,S=g,M=u,D=u,F=g,R=u,c=u,w=u,E=g,k=g,T=g,u=g;e:for(;;){for(_=0|r[o>>2],y=0,b=0,h=0;;){A=(d=s)+56|0;do{r[d>>2]=0,d=d+4|0}while((0|d)<(0|A));if(0|I(f=0|r[(e=B+(y<<3)|0)>>2],e=0|r[e+4>>2],1,s,0)){A=(d=s)+56|0;do{r[d>>2]=0,d=d+4|0}while((0|d)<(0|A));0|(d=0|ye(7,4))&&(O(f,e,1,s,d,7,0),ve(d))}v=0;do{g=0|r[(m=s+(v<<3)|0)>>2],m=0|r[m+4>>2];i:do{if(!(0==(0|g)&0==(0|m))){if(f=0|we(0|g,0|m,0|n,0|N),x(),!(0==(0|(e=0|r[(A=d=i+(f<<3)|0)>>2]))&0==(0|(A=0|r[A+4>>2]))))for(p=0;;){if((0|p)>(0|n))break e;if((0|e)==(0|g)&(0|A)==(0|m))break i;if(0==(0|(e=0|r[(A=d=i+((f=(f+1|0)%(0|n)|0)<<3)|0)>>2]))&0==(0|(A=0|r[A+4>>2])))break;p=p+1|0}0==(0|g)&0==(0|m)||(Gt(g,m,a),0|oe(t,z,a)&&(r[(p=d)>>2]=g,r[p+4>>2]=m,r[(p=S+(h<<3)|0)>>2]=g,r[p+4>>2]=m,h=h+1|0))}}while(0);v=v+1|0}while(v>>>0<7);if((0|(b=b+1|0))>=(0|_))break;y=y+1|0}if((0|_)>0&&Be(0|M,0,_<<3|0),r[o>>2]=h,!((0|h)>0))break t;g=u,m=T,v=R,y=k,b=E,_=S,u=w,T=c,k=D,E=M,w=g,c=m,R=F,F=v,D=y,M=b,S=B,B=_}return ve(D),ve(F),ve(z),P=l,-1}c=g}while(0);return ve(z),ve(u),ve(c),P=l,0}(t|=0,e|=0,i|=0)){if(a=0|r[(c=t)+4>>2],r[(l=s)>>2]=r[c>>2],r[l+4>>2]=a,ne(s,o),l=0|V(o,e),e=0|r[s>>2],(0|(a=0|r[t+8>>2]))>0){s=0|r[t+12>>2],o=0;do{e=(0|r[s+(o<<3)>>2])+e|0,o=o+1|0}while((0|o)!=(0|a))}(0|(e=(0|l)<(0|e)?e:l))<=-12||Be(0|i,0,8+(((0|(c=e+11|0))>0?c:0)<<3)|0),P=n}else P=n},_res0IndexCount:function(){return 122},_round:Se,_sbrk:Pe,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(t,e,i,n,o){t|=0,i|=0,n|=0;var s=0,a=0,l=0,c=0,u=0,h=0;if((0|(e|=0))<=0)return 0;if((0|(o|=0))>=16){for(s=0;;){if(!(0==(0|r[(h=t+(s<<3)|0)>>2])&0==(0|r[h+4>>2]))){s=14;break}if((0|(s=s+1|0))>=(0|e)){a=0,s=16;break}}if(14==(0|s))return 0|((0|n)>0?-2:-1);if(16==(0|s))return 0|a}s=0,h=0;t:for(;;){a=0|r[(l=u=t+(h<<3)|0)>>2],l=0|r[l+4>>2];do{if(!(0==(0|a)&0==(0|l))){if((0|s)>=(0|n)){a=-1,s=16;break t}if(c=0|xe(0|a,0|l,52),x(),(0|(c&=15))>(0|o)){a=-2,s=16;break t}if((0|c)==(0|o)){r[(u=i+(s<<3)|0)>>2]=a,r[u+4>>2]=l,s=s+1|0;break}if((0|(a=(0|ee(7,o-c|0))+s|0))>(0|n)){a=-1,s=16;break t}Ot(0|r[u>>2],0|r[u+4>>2],o,i+(s<<3)|0),s=a}}while(0);if((0|(h=h+1|0))>=(0|e)){a=0,s=16;break}}return 16==(0|s)?0|a:0},establishStackSpace:function(t,e){P=t|=0},stackAlloc:function(t){var e;return e=P,P=15+(P=P+(t|=0)|0)&-16,0|e},stackRestore:function(t){P=t|=0},stackSave:function(){return 0|P}}}({Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},{a:st,b:function(t){c=t},c:u,d:function(t,e,i,n){st("Assertion failed: "+w(t)+", at: "+[e?w(e):"unknown filename",i,n?w(n):"unknown function"])},e:function(t){return i.___errno_location&&(v[i.___errno_location()>>2]=t),t},f:V,g:function(t,e,i){g.set(g.subarray(e,e+i),t)},h:function(t){var e=V(),i=16777216,n=2130706432;if(t>n)return!1;for(var r=Math.max(e,16777216);r<t;)r=r<=536870912?x(2*r,i):Math.min(x((3*r+2147483648)/4,i),n);return!!W(r)},i:function(t){st("OOM")},j:function(t){return t},k:H,l:W,m:G,n:function(){var t=G();return i.extraStackTrace&&(t+="\n"+i.extraStackTrace()),H(t)},o:24032,p:24016},f),J=(i.___uremdi3=X.___uremdi3,i._bitshift64Lshr=X._bitshift64Lshr,i._bitshift64Shl=X._bitshift64Shl,i._calloc=X._calloc,i._cellAreaKm2=X._cellAreaKm2,i._cellAreaM2=X._cellAreaM2,i._cellAreaRads2=X._cellAreaRads2,i._compact=X._compact,i._destroyLinkedPolygon=X._destroyLinkedPolygon,i._edgeLengthKm=X._edgeLengthKm,i._edgeLengthM=X._edgeLengthM,i._emscripten_replace_memory=X._emscripten_replace_memory),K=(i._exactEdgeLengthKm=X._exactEdgeLengthKm,i._exactEdgeLengthM=X._exactEdgeLengthM,i._exactEdgeLengthRads=X._exactEdgeLengthRads,i._experimentalH3ToLocalIj=X._experimentalH3ToLocalIj,i._experimentalLocalIjToH3=X._experimentalLocalIjToH3,i._free=X._free,i._geoToH3=X._geoToH3,i._getDestinationH3IndexFromUnidirectionalEdge=X._getDestinationH3IndexFromUnidirectionalEdge,i._getH3IndexesFromUnidirectionalEdge=X._getH3IndexesFromUnidirectionalEdge,i._getH3UnidirectionalEdge=X._getH3UnidirectionalEdge,i._getH3UnidirectionalEdgeBoundary=X._getH3UnidirectionalEdgeBoundary,i._getH3UnidirectionalEdgesFromHexagon=X._getH3UnidirectionalEdgesFromHexagon,i._getOriginH3IndexFromUnidirectionalEdge=X._getOriginH3IndexFromUnidirectionalEdge,i._getPentagonIndexes=X._getPentagonIndexes,i._getRes0Indexes=X._getRes0Indexes,i._h3Distance=X._h3Distance,i._h3GetBaseCell=X._h3GetBaseCell,i._h3GetFaces=X._h3GetFaces,i._h3GetResolution=X._h3GetResolution,i._h3IndexesAreNeighbors=X._h3IndexesAreNeighbors,i._h3IsPentagon=X._h3IsPentagon,i._h3IsResClassIII=X._h3IsResClassIII,i._h3IsValid=X._h3IsValid,i._h3Line=X._h3Line,i._h3LineSize=X._h3LineSize,i._h3SetToLinkedGeo=X._h3SetToLinkedGeo,i._h3ToCenterChild=X._h3ToCenterChild,i._h3ToChildren=X._h3ToChildren,i._h3ToGeo=X._h3ToGeo,i._h3ToGeoBoundary=X._h3ToGeoBoundary,i._h3ToParent=X._h3ToParent,i._h3UnidirectionalEdgeIsValid=X._h3UnidirectionalEdgeIsValid,i._hexAreaKm2=X._hexAreaKm2,i._hexAreaM2=X._hexAreaM2,i._hexRing=X._hexRing,i._i64Subtract=X._i64Subtract,i._kRing=X._kRing,i._kRingDistances=X._kRingDistances,i._llvm_minnum_f64=X._llvm_minnum_f64,i._llvm_round_f64=X._llvm_round_f64,i._malloc=X._malloc,i._maxFaceCount=X._maxFaceCount,i._maxH3ToChildrenSize=X._maxH3ToChildrenSize,i._maxKringSize=X._maxKringSize,i._maxPolyfillSize=X._maxPolyfillSize,i._maxUncompactSize=X._maxUncompactSize,i._memcpy=X._memcpy,i._memset=X._memset,i._numHexagons=X._numHexagons,i._pentagonIndexCount=X._pentagonIndexCount,i._pointDistKm=X._pointDistKm,i._pointDistM=X._pointDistM,i._pointDistRads=X._pointDistRads,i._polyfill=X._polyfill,i._res0IndexCount=X._res0IndexCount,i._round=X._round,i._sbrk=X._sbrk,i._sizeOfCoordIJ=X._sizeOfCoordIJ,i._sizeOfGeoBoundary=X._sizeOfGeoBoundary,i._sizeOfGeoCoord=X._sizeOfGeoCoord,i._sizeOfGeoPolygon=X._sizeOfGeoPolygon,i._sizeOfGeofence=X._sizeOfGeofence,i._sizeOfH3Index=X._sizeOfH3Index,i._sizeOfLinkedGeoPolygon=X._sizeOfLinkedGeoPolygon,i._uncompact=X._uncompact,i.establishStackSpace=X.establishStackSpace,i.stackAlloc=X.stackAlloc),$=i.stackRestore=X.stackRestore,tt=i.stackSave=X.stackSave;if(i.asm=X,i.cwrap=function(t,e,i,n){var r=(i=i||[]).every((function(t){return"number"===t}));return"string"!==e&&r&&!n?d(t):function(){return A(t,e,i,arguments)}},i.setValue=function(t,e,i,n){switch("*"===(i=i||"i8").charAt(i.length-1)&&(i="i32"),i){case"i1":case"i8":p[t>>0]=e;break;case"i16":m[t>>1]=e;break;case"i32":v[t>>2]=e;break;case"i64":z=[e>>>0,(N=e,+M(N)>=1?N>0?(0|D(+O(N/4294967296),4294967295))>>>0:~~+I((N-+(~~N>>>0))/4294967296)>>>0:0)],v[t>>2]=z[0],v[t+4>>2]=z[1];break;case"float":y[t>>2]=e;break;case"double":b[t>>3]=e;break;default:st("invalid type for setValue: "+i)}},i.getValue=function(t,e,i){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return p[t>>0];case"i16":return m[t>>1];case"i32":case"i64":return v[t>>2];case"float":return y[t>>2];case"double":return b[t>>3];default:st("invalid type for getValue: "+e)}return null},i.getTempRet0=u,j){Z(j)||(j=function(t){return i.locateFile?i.locateFile(t,s):s+t}(j)),L++,i.monitorRunDependencies&&i.monitorRunDependencies(L);var et=function(t){t.byteLength&&(t=new Uint8Array(t)),g.set(t,8),i.memoryInitializerRequest&&delete i.memoryInitializerRequest.response,function(t){if(L--,i.monitorRunDependencies&&i.monitorRunDependencies(L),0==L&&(null!==F&&(clearInterval(F),F=null),R)){var e=R;R=null,e()}}()},it=function(){r(j,et,(function(){throw"could not load memory initializer "+j}))},nt=Q(j);if(nt)et(nt.buffer);else if(i.memoryInitializerRequest){var rt=function(){var t=i.memoryInitializerRequest,e=t.response;if(200!==t.status&&0!==t.status){var n=Q(i.memoryInitializerRequestURL);if(!n)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+t.status+", retrying "+j),void it();e=n.buffer}et(e)};i.memoryInitializerRequest.response?setTimeout(rt,0):i.memoryInitializerRequest.addEventListener("load",rt)}else it()}function ot(t){function e(){Y||(Y=!0,h||(k(B),k(S),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)t=i.postRun.shift(),P.unshift(t);var t;k(P)}()))}t=t||o,L>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)t=i.preRun.shift(),T.unshift(t);var t;k(T)}(),L>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e()))}function st(t){throw i.onAbort&&i.onAbort(t),a(t+=""),l(t),h=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(R=function t(){Y||ot(),Y||(R=t)},i.run=ot,i.abort=st,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return ot(),t}("object"==typeof hi?hi:{}),di="number",Ai={};[["sizeOfH3Index",di],["sizeOfGeoCoord",di],["sizeOfGeoBoundary",di],["sizeOfGeoPolygon",di],["sizeOfGeofence",di],["sizeOfLinkedGeoPolygon",di],["sizeOfCoordIJ",di],["h3IsValid",di,[di,di]],["geoToH3",di,[di,di,di]],["h3ToGeo",null,[di,di,di]],["h3ToGeoBoundary",null,[di,di,di]],["maxKringSize",di,[di]],["kRing",null,[di,di,di,di]],["kRingDistances",null,[di,di,di,di,di]],["hexRing",null,[di,di,di,di]],["maxPolyfillSize",di,[di,di]],["polyfill",null,[di,di,di]],["h3SetToLinkedGeo",null,[di,di,di]],["destroyLinkedPolygon",null,[di]],["compact",di,[di,di,di]],["uncompact",di,[di,di,di,di,di]],["maxUncompactSize",di,[di,di,di]],["h3IsPentagon",di,[di,di]],["h3IsResClassIII",di,[di,di]],["h3GetBaseCell",di,[di,di]],["h3GetResolution",di,[di,di]],["maxFaceCount",di,[di,di]],["h3GetFaces",null,[di,di,di]],["h3ToParent",di,[di,di,di]],["h3ToChildren",null,[di,di,di,di]],["h3ToCenterChild",di,[di,di,di]],["maxH3ToChildrenSize",di,[di,di,di]],["h3IndexesAreNeighbors",di,[di,di,di,di]],["getH3UnidirectionalEdge",di,[di,di,di,di]],["getOriginH3IndexFromUnidirectionalEdge",di,[di,di]],["getDestinationH3IndexFromUnidirectionalEdge",di,[di,di]],["h3UnidirectionalEdgeIsValid",di,[di,di]],["getH3IndexesFromUnidirectionalEdge",null,[di,di,di]],["getH3UnidirectionalEdgesFromHexagon",null,[di,di,di]],["getH3UnidirectionalEdgeBoundary",null,[di,di,di]],["h3Distance",di,[di,di,di,di]],["h3Line",di,[di,di,di,di,di]],["h3LineSize",di,[di,di,di,di]],["experimentalH3ToLocalIj",di,[di,di,di,di,di]],["experimentalLocalIjToH3",di,[di,di,di,di]],["hexAreaM2",di,[di]],["hexAreaKm2",di,[di]],["edgeLengthM",di,[di]],["edgeLengthKm",di,[di]],["pointDistM",di,[di,di]],["pointDistKm",di,[di,di]],["pointDistRads",di,[di,di]],["cellAreaM2",di,[di,di]],["cellAreaKm2",di,[di,di]],["cellAreaRads2",di,[di,di]],["exactEdgeLengthM",di,[di,di]],["exactEdgeLengthKm",di,[di,di]],["exactEdgeLengthRads",di,[di,di]],["numHexagons",di,[di]],["getRes0Indexes",null,[di]],["res0IndexCount",di],["getPentagonIndexes",null,[di,di]],["pentagonIndexCount",di]].forEach((function(t){Ai[t[0]]=hi.cwrap.apply(hi,t)}));var fi=16,pi=Ai.sizeOfH3Index(),gi=Ai.sizeOfGeoCoord(),mi=Ai.sizeOfGeoBoundary(),vi=(Ai.sizeOfGeoPolygon(),Ai.sizeOfGeofence(),Ai.sizeOfLinkedGeoPolygon()),yi=(Ai.sizeOfCoordIJ(),"m");var bi=/[^0-9a-fA-F]/;function _i(t){if(Array.isArray(t)&&2===t.length&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if("string"!=typeof t||bi.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),fi);return[parseInt(t.substring(t.length-8),fi),e]}function wi(t){if(t>=0)return t.toString(fi);var e=xi(8,(t&=2147483647).toString(fi));return(parseInt(e[0],fi)+8).toString(fi)+e.substring(1)}function xi(t,e){for(var i=t-e.length,n="",r=0;r<i;r++)n+="0";return n+e}function Ci(t){var e=function(t){return[t,hi.getTempRet0()]}(t),i=e[0],n=e[1];return n?function(t,e){return wi(e)+xi(8,wi(t))}(i,n):null}function Ei(t,e,i){hi.HEAPU32.set(_i(t),e/4+2*i)}function ki(t){return 180*hi.getValue(t,"double")/Math.PI}function Ti(t){return[ki(t),ki(t+8)]}function Bi(t){return[ki(t+8),ki(t)]}function Si(t){var e=_i(t),i=e[0],n=e[1];return Boolean(Ai.h3IsPentagon(i,n))}function Pi(t){var e=hi._malloc(gi),i=_i(t),n=i[0],r=i[1];Ai.h3ToGeo(n,r,e);var o=Ti(e);return hi._free(e),o}function Mi(t,e){if(!t||!t.length)return[];var i=t.length,n=hi._calloc(i,pi);!function(t,e){for(var i=e.length,n=0;n<i;n++)Ei(e[n],t,n)}(n,t);var r=hi._calloc(vi),o=r;Ai.h3SetToLinkedGeo(n,i,r);var s=function(t,e){for(var i,n,r,o,s=[],a=e?Bi:Ti;t;){for(s.push(i=[]),n=hi.getValue(t,"i8*");n;){for(i.push(r=[]),o=hi.getValue(n,"i8*");o;)r.push(a(o)),o=hi.getValue(o+16,"i8*");e&&r.push(r[0]),n=hi.getValue(n+8,"i8*")}t=hi.getValue(t+8,"i8*")}return s}(r,e);return Ai.destroyLinkedPolygon(o),hi._free(o),hi._free(n),s}function Ii(t,e){switch(function(t){if("number"!=typeof t||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}(t),e){case yi:return Ai.edgeLengthM(t);case"km":return Ai.edgeLengthKm(t);default:throw new Error("Unknown unit: "+e)}}function Oi(t){return t*Math.PI/180}var Di=i(8550),Li=i(5103);function Fi(t,e){e=void 0===e?t[0][0]:e;for(const i of t){const t=i[0]-e;t>180?i[0]-=360:t<-180&&(i[0]+=360)}}function Ri(t,e,i){const n=t(e,i),[r,o]=Pi(n);return[o,r]}function Ni(t,e=1){const i=function(t,e){var i=hi._malloc(mi),n=_i(t),r=n[0],o=n[1];Ai.h3ToGeoBoundary(r,o,i);var s=function(t,e,i){for(var n=hi.getValue(t,"i32"),r=t+8,o=[],s=e?Bi:Ti,a=0;a<2*n;a+=2)o.push(s(r+8*a));return i&&o.push(o[0]),o}(i,true,true);return hi._free(i),s}(t);return 1!==e?function(t,e,i){const[n,r]=Pi(t),o=e.length;Fi(e,r);const s=e[0]===e[o-1]?o-1:o;for(let t=0;t<s;t++)e[t][0]=(0,ht.t7)(r,e[t][0],i),e[t][1]=(0,ht.t7)(n,e[t][1],i)}(t,i,e):Fi(i),i}const zi={...V.Z.defaultProps,highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:t=>t.hexagon},extruded:!0};class ji extends A.Z{constructor(...t){super(...t),(0,d.Z)(this,"state",void 0)}initializeState(){ji._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState({changeFlags:t}){return this._shouldUseHighPrecision()?t.propsOrDataChanged:t.somethingChanged}updateState({props:t,changeFlags:e}){if(!0!==t.highPrecision&&(e.dataChanged||e.updateTriggersChanged&&e.updateTriggersChanged.getHexagon)){const t=this._calculateH3DataProps();this.setState(t)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let t=-1,e=!1,i=!1;const{iterable:n,objectInfo:r}=(0,Di.jB)(this.props.data);for(const l of n){r.index++;const n=this.props.getHexagon(l,r),c=(void 0,void 0,void 0,s=(o=_i(n))[0],a=o[1],Ai.h3IsValid(s,a)?Ai.h3GetResolution(s,a):-1);if(t<0){if(t=c,!this.props.highPrecision)break}else if(t!==c){i=!0;break}if(Si(n)){e=!0;break}}var o,s,a;return{resolution:t,edgeLengthKM:t>=0?Ii(t,"km"):0,hasMultipleRes:i,hasPentagon:e}}_shouldUseHighPrecision(){if("auto"===this.props.highPrecision){const{resolution:t,hasPentagon:e,hasMultipleRes:i}=this.state,{viewport:n}=this.context;return Boolean(null==n?void 0:n.resolution)||i||e||t>=0&&t<=5}return this.props.highPrecision}_updateVertices(t){if(this._shouldUseHighPrecision())return;const{resolution:e,edgeLengthKM:i,centerHex:n}=this.state;if(e<0)return;const r=this.props.centerHexagon||function(t,e,i){var n=hi._malloc(gi);hi.HEAPF64.set([t,e].map(Oi),n/8);var r=Ci(Ai.geoToH3(n,i));return hi._free(n),r}(t.latitude,t.longitude,e);if(n===r)return;if(n){const t=(o=r,a=(s=_i(n))[0],l=s[1],u=(c=_i(o))[0],h=c[1],Ai.h3Distance(a,l,u,h));if(t>=0&&t*i<10)return}var o,s,a,l,c,u,h;const{unitsPerMeter:d}=t.distanceScales;let A=Ni(r);const[f,p]=Pi(r),[g,m]=t.projectFlat([p,f]);A=A.map((e=>{const i=t.projectFlat(e);return[(i[0]-g)/d[0],(i[1]-m)/d[1]]})),this.setState({centerHex:r,vertices:A})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:t,material:e,coverage:i,extruded:n,wireframe:r,stroked:o,filled:s,lineWidthUnits:a,lineWidthScale:l,lineWidthMinPixels:c,lineWidthMaxPixels:u,getFillColor:h,getElevation:d,getLineColor:A,getLineWidth:f,transitions:p,updateTriggers:g}=this.props;return{elevationScale:t,extruded:n,coverage:i,wireframe:r,stroked:o,filled:s,lineWidthUnits:a,lineWidthScale:l,lineWidthMinPixels:c,lineWidthMaxPixels:u,material:e,getElevation:d,getFillColor:h,getLineColor:A,getLineWidth:f,transitions:p,updateTriggers:{getFillColor:g.getFillColor,getElevation:g.getElevation,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}}_renderPolygonLayer(){const{data:t,getHexagon:e,updateTriggers:i,coverage:n}=this.props,r=this.getSubLayerClass("hexagon-cell-hifi",V.Z),o=this._getForwardProps();return o.updateTriggers.getPolygon=function(t,e){let i;return i=null==t?e:"object"==typeof t?{...t,coverage:e}:{getHexagon:t,coverage:e},i}(i.getHexagon,n),new r(o,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:o.updateTriggers}),{data:t,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(t,i)=>function(t){const e=new Float64Array(2*t.length);let i=0;for(const n of t)e[i++]=n[0],e[i++]=n[1];return e}(Ni(e(t,i),n))})}_renderColumnLayer(){const{data:t,getHexagon:e,updateTriggers:i}=this.props,n=this.getSubLayerClass("hexagon-cell",Li.Z),r=this._getForwardProps();return r.updateTriggers.getPosition=i.getHexagon,new n(r,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:r.updateTriggers}),{data:t,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:Ri.bind(null,e)})}}(0,d.Z)(ji,"defaultProps",zi),(0,d.Z)(ji,"layerName","H3HexagonLayer"),(0,d.Z)(ji,"_checkH3Lib",(()=>{}));class Ui extends q{initializeState(){ji._checkH3Lib()}updateState({props:t,changeFlags:e}){if(e.dataChanged||e.updateTriggersChanged&&e.updateTriggersChanged.getHexagons){const{data:e,getHexagons:i}=t,n=[],{iterable:r,objectInfo:o}=(0,Di.jB)(e);for(const t of r){o.index++;const e=Mi(i(t,o),!0);for(const i of e)n.push(this.getSubLayerRow({polygon:i},t,o.index))}this.setState({polygons:n})}}indexToBounds(){const{getElevation:t,getFillColor:e,getLineColor:i,getLineWidth:n}=this.props;return{data:this.state.polygons,getPolygon:t=>t.polygon,getElevation:this.getSubLayerAccessor(t),getFillColor:this.getSubLayerAccessor(e),getLineColor:this.getSubLayerAccessor(i),getLineWidth:this.getSubLayerAccessor(n)}}}(0,d.Z)(Ui,"layerName","H3ClusterLayer"),(0,d.Z)(Ui,"defaultProps",{getHexagons:{type:"accessor",value:t=>t.hexagons}});var Zi=i(3982),Hi=i(744),Gi=i(7693),Vi=i(4185),Wi=i(3844),qi=i(1331),Qi=i(9450);const Yi={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[i(7024).H]};var Xi=i(4538),Ji=i(2525);class Ki{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e}=t;this.id=e||(0,Xi.hQ)(this.constructor.name),this.display=!0,this.position=new gt.Z,this.rotation=new gt.Z,this.scale=new gt.Z(1,1,1),this.matrix=new ut.Z,this.userData={},this.props={},this._setScenegraphNodeProps(t)}delete(){}setProps(t){return this._setScenegraphNodeProps(t),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(t){return(0,Ji.h)(3===t.length,"setPosition requires vector argument"),this.position=t,this}setRotation(t){return(0,Ji.h)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}setScale(t){return(0,Ji.h)(3===t.length,"setScale requires vector argument"),this.scale=t,this}setMatrix(t){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=t:this.matrix.copy(t)}setMatrixComponents(t){let{position:e,rotation:i,scale:n,update:r=!0}=t;return e&&this.setPosition(e),i&&this.setRotation(i),n&&this.setScale(n),r&&this.updateMatrix(),this}updateMatrix(){const t=this.position,e=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(i),this}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:e,rotation:i,scale:n}=t;return e&&this.setPosition(e),i&&this.setRotation(i),n&&this.setScale(n),this.updateMatrix(),this}getCoordinateUniforms(t,e){(0,Ji.h)(t),e=e||this.matrix;const i=new ut.Z(t).multiplyRight(e),n=i.invert(),r=n.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:i,worldInverseMatrix:n,worldInverseTransposeMatrix:r}}_setScenegraphNodeProps(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}var $i=i(3478),tn=i(4072);class en extends Ki{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Array.isArray(t)?{children:t}:t;const{children:e=[]}=t;Qi.cM.assert(e.every((t=>t instanceof Ki)),"every child must an instance of ScenegraphNode"),super(t),this.children=e}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(t){const e=this.children,i=e.indexOf(t);return i>-1&&e.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach((t=>t.delete())),this.removeAll(),super.delete()}getBounds(){const t=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse(((e,i)=>{let{worldMatrix:n}=i;const r=e.getBounds();if(!r)return;const[o,s]=r,a=new gt.Z(o).add(s).divide([2,2,2]);n.transformAsPoint(a,a);const l=new gt.Z(s).subtract(o).divide([2,2,2]);n.transformAsVector(l,l);for(let e=0;e<8;e++){const i=new gt.Z(1&e?-1:1,2&e?-1:1,4&e?-1:1).multiply(l).add(a);for(let e=0;e<3;e++)t[0][e]=Math.min(t[0][e],i[e]),t[1][e]=Math.max(t[1][e],i[e])}})),Number.isFinite(t[0][0])?t:null}traverse(t){let{worldMatrix:e=new ut.Z}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new ut.Z(e).multiplyRight(this.matrix);for(const e of this.children)e instanceof en?e.traverse(t,{worldMatrix:i}):t(e,{worldMatrix:i})}}const nn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function on(t){if(!t._animation){const e=rn[t.componentType],i=nn[t.type],n=i*t.count,{buffer:r,byteOffset:o}=t.bufferView.data,s=new e(r,o+(t.byteOffset||0),n);if(1===i)t._animation=Array.from(s);else{const e=[];for(let t=0;t<s.length;t+=i)e.push(Array.from(s.slice(t,t+i)));t._animation=e}}return t._animation}const sn=new ut.Z,an=new re;class ln{constructor(t){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,t)}animate(t){if(!this.playing)return;const e=(t/1e3-this.startTime)*this.speed;this.channels.forEach((t=>{let{sampler:i,target:n,path:r}=t;(function(t,e,i,n){let{input:r,interpolation:o,output:s}=e;const a=t%r[r.length-1],l=r.findIndex((t=>t>=a)),c=Math.max(0,l-1);if(!Array.isArray(i[n]))switch(n){case"translation":i[n]=[0,0,0];break;case"rotation":i[n]=[0,0,0,1];break;case"scale":i[n]=[1,1,1];break;default:Qi.cM.warn("Bad animation path ".concat(n))()}(0,Ji.h)(i[n].length===s[c].length);const u=r[c],h=r[l];switch(o){case"STEP":!function(t,e,i){for(let n=0;n<i.length;n++)t[e][n]=i[n]}(i,n,s[c]);break;case"LINEAR":if(h>u){const t=(a-u)/(h-u);!function(t,e,i,n,r){if("rotation"===e){an.slerp({start:i,target:n,ratio:r});for(let i=0;i<an.length;i++)t[e][i]=an[i]}else for(let o=0;o<i.length;o++)t[e][o]=r*n[o]+(1-r)*i[o]}(i,n,s[c],s[l],t)}break;case"CUBICSPLINE":if(h>u){const t=(a-u)/(h-u),e=h-u;!function(t,e,i){let{p0:n,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:l}=i;for(let i=0;i<t[e].length;i++){const c=r[i]*a,u=o[i]*a;t[e][i]=(2*Math.pow(l,3)-3*Math.pow(l,2)+1)*n[i]+(Math.pow(l,3)-2*Math.pow(l,2)+l)*c+(-2*Math.pow(l,3)+3*Math.pow(l,2))*s[i]+(Math.pow(l,3)-Math.pow(l,2))*u}}(i,n,{p0:s[3*c+1],outTangent0:s[3*c+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:e,ratio:t})}break;default:Qi.cM.warn("Interpolation ".concat(o," not supported"))()}})(e,i,n,r),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const i=sn.fromQuaternion(t.rotation);e.matrix.multiplyRight(i)}t.scale&&e.matrix.scale(t.scale)}(n,n._node)}))}}class cn{constructor(t){this.animations=t.animations.map(((e,i)=>{const n=e.name||"Animation-".concat(i),r=e.samplers.map((e=>{let{input:i,interpolation:n="LINEAR",output:r}=e;return{input:on(t.accessors[i]),interpolation:n,output:on(t.accessors[r])}})),o=e.channels.map((e=>{let{sampler:i,target:n}=e;return{sampler:r[i],target:t.nodes[n.node],path:n.path}}));return new ln({name:n,channels:o})}))}animate(t){this.setTime(t)}setTime(t){this.animations.forEach((e=>e.animate(t)))}getAnimations(){return this.animations}}var un=i(9769);class hn extends Ki{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.onBeforeRender=null,this.AfterRender=null,t instanceof un.Z?(this.model=t,this._setModelNodeProps(e)):this.model=new un.Z(t,e),this.bounds=null,this.managedResources=e.managedResources||[]}setProps(t){return super.setProps(t),this._setModelNodeProps(t),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((t=>t.delete())),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(t){this.model.setProps(t)}}var dn=i(4211),An=i(6948),fn=i(4912);class pn{constructor(t,e){let{attributes:i,material:n,pbrDebug:r,imageBasedLightingEnvironment:o,lights:s,useTangents:a}=e;this.gl=t,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},(0,dn.U6)(t,An.h.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),r&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(r,"PBR_DEBUG"),n&&this.parseMaterial(n)}defineIfPresent(t,e){t&&(this.defines[e]=1)}parseTexture(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},r=t.texture.source.image;let o,s={};r.compressed?(o=r,s={[this.gl.TEXTURE_MIN_FILTER]:r.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:r};const a=new fn.Z(this.gl,{id:t.name||t.id,parameters:{...n,...s},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[e]=a,this.defineIfPresent(i,i),this.generatedTextures.push(a)}parsePbrMetallicRoughness(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:e=1,roughnessFactor:i=1}=t;this.uniforms.u_MetallicRoughnessValues=[e,i]}parseMaterial(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:e=1}=t.normalTexture;this.uniforms.u_NormalScale=e}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:e=1}=t.occlusionTexture;this.uniforms.u_OcclusionStrength=e}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){const{alphaCutoff:e=.5}=t;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=e}else"BLEND"===t.alphaMode&&(Qi.cM.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach((t=>t.delete()))}}function gn(t,e){return(0,Qi.D0)(t)?"#version 300 es\n".concat(e):e}const mn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vn={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class yn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.options=Object.assign({},vn,e)}instantiate(t){return this.gltf=t,(t.scenes||[]).map((t=>this.createScene(t)))}createAnimator(){return Array.isArray(this.gltf.animations)?new cn(this.gltf):null}createScene(t){const e=(t.nodes||[]).map((t=>this.createNode(t)));return new en({id:t.name||t.id,children:e})}createNode(t){if(!t._node){const e=(t.children||[]).map((t=>this.createNode(t)));t.mesh&&e.push(this.createMesh(t.mesh));const i=new en({id:t.name||t.id,children:e});if(t.matrix)i.setMatrix(t.matrix);else{if(i.matrix.identity(),t.translation&&i.matrix.translate(t.translation),t.rotation){const e=(new ut.Z).fromQuaternion(t.rotation);i.matrix.multiplyRight(e)}t.scale&&i.matrix.scale(t.scale)}t._node=i}return t._node}createMesh(t){if(!t._mesh){const e=(t.primitives||[]).map(((e,i)=>this.createPrimitive(e,i,t))),i=new en({id:t.name||t.id,children:e});t._mesh=i}return t._mesh}getVertexCount(t){Qi.cM.warn("getVertexCount() not found")()}createPrimitive(t,e,i){const n=function(t,e){const{id:i,drawMode:n,vertexCount:r,attributes:o,modelOptions:s}=e,a=new pn(t,e);Qi.cM.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(o).map((t=>t.buffer)));const c=new hn(t,Object.assign({id:i,drawMode:n,vertexCount:r,modules:[Yi],defines:a.defines,parameters:a.parameters,vs:gn(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:gn(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},s));return c.setProps({attributes:o}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:t.name||"".concat(i.name||i.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options));return n.bounds=[t.attributes.POSITION.min,t.attributes.POSITION.max],n}createAttributes(t,e){const i={};return Object.keys(t).forEach((e=>{i[e]=this.createAccessor(t[e],this.createBuffer(t[e],this.gl.ARRAY_BUFFER))})),e&&(i.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),Qi.cM.info(4,"glTF Attributes",{attributes:t,indices:e,generated:i})(),i}createBuffer(t,e){t.bufferView||(t.bufferView={});const{bufferView:i}=t;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[e]||(i.lumaBuffers[e]=new $i.Z(this.gl,{id:"from-".concat(i.id),data:i.data||t.value,target:e})),i.lumaBuffers[e]}createAccessor(t,e){return new tn.Z({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:mn[t.type]})}createSampler(t){return t}needsPOT(){return!1}}var bn=i(6013),_n=i(9125),wn=i(6040);const xn={};async function Cn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e&&(t=En(t,e,i)),xn[t]=xn[t]||kn(t),await xn[t]}function En(t,e,i){if(t.startsWith("http"))return t;const n=i.modules||{};return n[t]?n[t]:bn.jU?i.CDN?((0,wn.h)(i.CDN.startsWith("http")),"".concat(i.CDN,"/").concat(e,"@").concat("3.3.5","/dist/libs/").concat(t)):bn.hJ?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}async function kn(t){if(t.endsWith("wasm")){const e=await fetch(t);return await e.arrayBuffer()}if(!bn.jU)try{return _n&&_n.requireFromFile&&await _n.requireFromFile(t)}catch{return null}if(bn.hJ)return importScripts(t);const e=await fetch(t);return function(t,e){if(!bn.jU)return _n.requireFromString&&_n.requireFromString(t,e);if(bn.hJ)return eval.call(bn.CO,t),null;const i=document.createElement("script");i.id=e;try{i.appendChild(document.createTextNode(t))}catch(e){i.text=t}return document.body.appendChild(i),null}(await e.text(),t)}const Tn="3.3.5",Bn="https://unpkg.com/@loaders.gl/textures@".concat(Tn,"/dist/libs/basis_encoder.wasm"),Sn="https://unpkg.com/@loaders.gl/textures@".concat(Tn,"/dist/libs/basis_encoder.js");let Pn,Mn;async function In(t){const e=t.modules||{};return e.basis?e.basis:(Pn=Pn||async function(t){let e=null,i=null;return[e,i]=await Promise.all([await Cn("basis_transcoder.js","textures",t),await Cn("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,await function(t,e){const i={};return e&&(i.wasmBinary=e),new Promise((e=>{t(i).then((t=>{const{BasisFile:i,initializeBasis:n}=t;n(),e({BasisFile:i})}))}))}(e,i)}(t),await Pn)}async function On(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(Mn=Mn||async function(t){let e=null,i=null;return[e,i]=await Promise.all([await Cn(Sn,"textures",t),await Cn(Bn,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const i={};return e&&(i.wasmBinary=e),new Promise((e=>{t(i).then((t=>{const{BasisFile:i,KTX2File:n,initializeBasis:r,BasisEncoder:o}=t;r(),e({BasisFile:i,KTX2File:n,BasisEncoder:o})}))}))}(e,i)}(t),await Mn)}const Dn=["","WEBKIT_","MOZ_"],Ln={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let Fn=null;var Rn,Nn,zn,jn,Un,Zn,Hn,Gn,Vn;new Uint8Array([0]),(Vn=Rn||(Rn={}))[Vn.NONE=0]="NONE",Vn[Vn.BASISLZ=1]="BASISLZ",Vn[Vn.ZSTD=2]="ZSTD",Vn[Vn.ZLIB=3]="ZLIB",function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(Nn||(Nn={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(zn||(zn={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(jn||(jn={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(Un||(Un={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(Zn||(Zn={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(Hn||(Hn={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(Gn||(Gn={}));const Wn=[171,75,84,88,32,50,48,187,13,10,26,10],qn={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function Qn(t,e,i){const n=new t(new Uint8Array(e));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");const t=n.getNumImages(),e=[];for(let r=0;r<t;r++){const t=n.getNumLevels(r),o=[];for(let e=0;e<t;e++)o.push(Yn(n,r,e,i));e.push(o)}return e}finally{n.close(),n.delete()}}function Yn(t,e,i,n){const r=t.getImageWidth(e,i),o=t.getImageHeight(e,i),s=t.getHasAlpha(),{compressed:a,format:l,basisFormat:c}=Kn(n,s),u=t.getImageTranscodedSizeInBytes(e,i,c),h=new Uint8Array(u);if(!t.transcodeImage(h,e,i,c,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:l,hasAlpha:s}}function Xn(t,e,i){const n=new t(new Uint8Array(e));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");const t=n.getLevels(),e=[];for(let r=0;r<t;r++){e.push(Jn(n,r,i));break}return[e]}finally{n.close(),n.delete()}}function Jn(t,e,i){const{alphaFlag:n,height:r,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:l}=Kn(i,n),c=t.getImageTranscodedSizeInBytes(e,0,0,l),u=new Uint8Array(c);if(!t.transcodeImage(u,e,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:u,compressed:s,levelSize:c,hasAlpha:n,format:a}}function Kn(t,e){let i=t&&t.basis&&t.basis.format;return"auto"===i&&(i=$n()),"object"==typeof i&&(i=e?i.alpha:i.noAlpha),i=i.toLowerCase(),qn[i]}function $n(){const t=function(t){if(!Fn){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,Fn=new Set;for(const e of Dn)for(const i in Ln)if(t&&t.getExtension("".concat(e).concat(i))){const t=Ln[i];Fn.add(t)}}return Fn}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const tr={...{name:"Basis",id:bn.jU?"basis":"basis-nodejs",module:"textures",version:"3.3.5",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},parse:async function(t,e){if("auto"===e.basis.containerFormat){if(function(t){const e=new Uint8Array(t);return!(e.byteLength<Wn.length||e[0]!==Wn[0]||e[1]!==Wn[1]||e[2]!==Wn[2]||e[3]!==Wn[3]||e[4]!==Wn[4]||e[5]!==Wn[5]||e[6]!==Wn[6]||e[7]!==Wn[7]||e[8]!==Wn[8]||e[9]!==Wn[9]||e[10]!==Wn[10]||e[11]!==Wn[11])}(t))return Xn((await On(e)).KTX2File,t,e);const{BasisFile:i}=await In(e);return Qn(i,t,e)}if("encoder"===e.basis.module){const i=await On(e);return"ktx2"===e.basis.containerFormat?Xn(i.KTX2File,t,e):Qn(i.BasisFile,t,e)}{const{BasisFile:i}=await In(e);return Qn(i,t,e)}}};function er(t,e,i){if(t.byteLength<=e+i)return"";const n=new DataView(t);let r="";for(let t=0;t<i;t++)r+=String.fromCharCode(n.getUint8(e+t));return r}var ir=i(4609);function nr(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function rr(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}var or=i(9105),sr=i(6269);function ar(t,e){return(0,sr.h)(t>=0),(0,sr.h)(e>0),t+(e-1)&~(e-1)}function lr(t,e,i){let n;if(t instanceof ArrayBuffer)n=new Uint8Array(t);else{const e=t.byteOffset,i=t.byteLength;n=new Uint8Array(t.buffer||t.arrayBuffer,e,i)}return e.set(n,i),i+ar(n.byteLength,4)}const cr=["SCALAR","VEC2","VEC3","VEC4"],ur=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],hr=new Map(ur),dr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ar={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},fr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function pr(t){return cr[t-1]||cr[0]}function gr(t){const e=hr.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function mr(t,e){const i=fr[t.componentType],n=dr[t.type],r=Ar[t.componentType],o=t.count*n,s=t.count*n*r;return nr(s>=0&&s<=e.byteLength),{ArrayType:i,length:o,byteLength:s}}function vr(t){let{images:e,bufferViews:i}=t;e=e||[],i=i||[];const n=e.map((t=>t.bufferView));i=i.filter((t=>!n.includes(t)));const r=i.reduce(((t,e)=>t+e.byteLength),0),o=e.reduce(((t,e)=>{const{width:i,height:n}=e.image;return t+i*n}),0);return r+Math.ceil(4*o*1.33)}const yr={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class br{constructor(t){(0,d.Z)(this,"gltf",void 0),(0,d.Z)(this,"sourceBuffers",void 0),(0,d.Z)(this,"byteLength",void 0),this.gltf=t||{json:{...yr},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}getExtension(t){const e=this.getUsedExtensions().find((e=>e===t)),i=this.json.extensions||{};return e?i[t]||!0:null}getRequiredExtension(t){return this.getRequiredExtensions().find((e=>e===t))?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(t,e){return(t.extensions||{})[e]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,e){if("object"==typeof e)return e;const i=this.json[t]&&this.json[t][e];if(!i)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(e,"]"));return i}getTypedArrayForBufferView(t){const e=(t=this.getBufferView(t)).buffer,i=this.gltf.buffers[e];nr(i);const n=(t.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,n,t.byteLength)}getTypedArrayForAccessor(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),i=this.getBuffer(e.buffer).data,{ArrayType:n,length:r}=mr(t,e);return new n(i,e.byteOffset+t.byteOffset,r)}getTypedArrayForImageData(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),i=this.getBuffer(e.buffer).data,n=e.byteOffset||0;return new Uint8Array(i,n,e.byteLength)}addApplicationData(t,e){return this.json[t]=e,this}addExtraData(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}addObjectExtension(t,e,i){return t.extensions=t.extensions||{},t.extensions[e]=i,this.registerUsedExtension(e),this}setObjectExtension(t,e,i){(t.extensions||{})[e]=i}removeObjectExtension(t,e){const i=t.extensions||{},n=i[e];return delete i[e],n}addExtension(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nr(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}addRequiredExtension(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nr(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((e=>e===t))||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((e=>e===t))||this.json.extensionsRequired.push(t)}removeExtension(t){if(!this.getExtension(t))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const e=this.json.extensionsRemoved;e.includes(t)||e.push(t)}setDefaultScene(t){this.json.scene=t}addScene(t){const{nodeIndices:e}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}addNode(t){const{meshIndex:e,matrix:i}=t;this.json.nodes=this.json.nodes||[];const n={mesh:e};return i&&(n.matrix=i),this.json.nodes.push(n),this.json.nodes.length-1}addMesh(t){const{attributes:e,indices:i,material:n,mode:r=4}=t,o={primitives:[{attributes:this._addAttributes(e),mode:r}]};if(i){const t=this._addIndices(i);o.primitives[0].indices=t}return Number.isFinite(n)&&(o.primitives[0].material=n),this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}addPointCloud(t){const e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}addImage(t,e){const i=(0,or.I)(t),n=e||(null==i?void 0:i.mimeType),r={bufferView:this.addBufferView(t),mimeType:n};return this.json.images=this.json.images||[],this.json.images.push(r),this.json.images.length-1}addBufferView(t){const e=t.byteLength;nr(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);const i={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=ar(e,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(t,e){const i={bufferView:t,type:pr(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const i=this.addBufferView(t);let n={min:e.min,max:e.max};n.min&&n.max||(n=this._getAccessorMinMax(t,e.size));const r={size:e.size,componentType:gr(t),count:Math.round(t.length/e.size),min:n.min,max:n.max};return this.addAccessor(i,Object.assign(r,e))}addTexture(t){const{imageIndex:e}=t,i={source:e};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){var t,e;this.gltf.buffers=[];const i=this.byteLength,n=new ArrayBuffer(i),r=new Uint8Array(n);let o=0;for(const t of this.sourceBuffers||[])o=lr(t,r,o);null!==(t=this.json)&&void 0!==t&&null!==(e=t.buffers)&&void 0!==e&&e[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=n,this.sourceBuffers=[n]}_removeStringFromArray(t,e){let i=!0;for(;i;){const n=t.indexOf(e);n>-1?t.splice(n,1):i=!1}}_addAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={};for(const i in t){const n=t[i],r=this._getGltfAttributeName(i),o=this.addBinaryBuffer(n.value,n);e[r]=o}return e}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,e){const i={min:null,max:null};if(t.length<e)return i;i.min=[],i.max=[];const n=t.subarray(0,e);for(const t of n)i.min.push(t),i.max.push(t);for(let n=e;n<t.length;n+=e)for(let r=0;r<e;r++)i.min[0+r]=Math.min(i.min[0+r],t[n+r]),i.max[0+r]=Math.max(i.max[0+r],t[n+r]);return i}}const _r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),wr=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),xr={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Cr={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let Er;async function kr(){return Er||(Er=async function(){let t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(_r)&&(t="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const n=t.charCodeAt(i);e[i]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let i=0;for(let n=0;n<t.length;++n)e[i++]=e[n]<60?wr[e[n]]:64*(e[n]-60)+e[++n];return e.buffer.slice(0,i)}(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}()),Er}function Tr(t,e,i,n,r,o,s){const a=t.exports.sbrk,l=n+3&-4,c=a(l*r),u=a(o.length),h=new Uint8Array(t.exports.memory.buffer);h.set(o,u);const d=e(c,n,r,u,o.length);if(0===d&&s&&s(c,l,r),i.set(h.subarray(c,c+n*r)),a(c-a(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}const Br="EXT_meshopt_compression",Sr=Br;async function Pr(t,e){var i;const n=new br(t);if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=[];for(const e of t.json.bufferViews||[])r.push(Mr(n,e));await Promise.all(r),n.removeExtension(Br)}async function Mr(t,e){const i=t.getObjectExtension(e,Br);if(i){const{byteOffset:n=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:l="NONE",buffer:c}=i,u=t.gltf.buffers[c],h=new Uint8Array(u.arrayBuffer,u.byteOffset+n,r),d=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return await async function(t,e,i,n,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=await kr();Tr(s,s.exports[Cr[r]],t,e,i,n,s.exports[xr[o||"NONE"]])}(d,s,o,h,a,l),d}return null}var Ir=i(4959);const Or=["image/png","image/jpeg","image/gif"],Dr={};const Lr="EXT_texture_webp",Fr=Lr;function Rr(t,e){const i=new br(t);if(void 0===Dr[n="image/webp"]&&(Dr[n]=function(t){switch(t){case"image/webp":return function(){if(!Ir.jU)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return Ir.jU;default:if(!Ir.jU){const{_parseImageNode:e}=globalThis;return Boolean(e)&&Or.includes(t)}return!0}}(n)),!Dr[n]){if(i.getRequiredExtensions().includes(Lr))throw new Error("gltf: Required extension ".concat(Lr," not supported by browser"));return}var n;const{json:r}=i;for(const t of r.textures||[]){const e=i.getObjectExtension(t,Lr);e&&(t.source=e.source),i.removeObjectExtension(t,Lr)}i.removeExtension(Lr)}const Nr="KHR_texture_basisu",zr=Nr;function jr(t,e){const i=new br(t),{json:n}=i;for(const t of n.textures||[]){const e=i.getObjectExtension(t,Nr);e&&(t.source=e.source),i.removeObjectExtension(t,Nr)}i.removeExtension(Nr)}const Ur={draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},Zr={name:"Draco",id:bn.jU?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.3.5",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:Ur};class Hr{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;(0,d.Z)(this,"name",void 0),(0,d.Z)(this,"type",void 0),(0,d.Z)(this,"nullable",void 0),(0,d.Z)(this,"metadata",void 0),this.name=t,this.type=e,this.nullable=i,this.metadata=n}get typeId(){return this.type&&this.type.typeId}clone(){return new Hr(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Gr,Vr,Wr,qr,Qr,Yr,Xr,Jr,Kr;var $r;($r=Gr||(Gr={}))[$r.NONE=0]="NONE",$r[$r.Null=1]="Null",$r[$r.Int=2]="Int",$r[$r.Float=3]="Float",$r[$r.Binary=4]="Binary",$r[$r.Utf8=5]="Utf8",$r[$r.Bool=6]="Bool",$r[$r.Decimal=7]="Decimal",$r[$r.Date=8]="Date",$r[$r.Time=9]="Time",$r[$r.Timestamp=10]="Timestamp",$r[$r.Interval=11]="Interval",$r[$r.List=12]="List",$r[$r.Struct=13]="Struct",$r[$r.Union=14]="Union",$r[$r.FixedSizeBinary=15]="FixedSizeBinary",$r[$r.FixedSizeList=16]="FixedSizeList",$r[$r.Map=17]="Map",$r[$r.Dictionary=-1]="Dictionary",$r[$r.Int8=-2]="Int8",$r[$r.Int16=-3]="Int16",$r[$r.Int32=-4]="Int32",$r[$r.Int64=-5]="Int64",$r[$r.Uint8=-6]="Uint8",$r[$r.Uint16=-7]="Uint16",$r[$r.Uint32=-8]="Uint32",$r[$r.Uint64=-9]="Uint64",$r[$r.Float16=-10]="Float16",$r[$r.Float32=-11]="Float32",$r[$r.Float64=-12]="Float64",$r[$r.DateDay=-13]="DateDay",$r[$r.DateMillisecond=-14]="DateMillisecond",$r[$r.TimestampSecond=-15]="TimestampSecond",$r[$r.TimestampMillisecond=-16]="TimestampMillisecond",$r[$r.TimestampMicrosecond=-17]="TimestampMicrosecond",$r[$r.TimestampNanosecond=-18]="TimestampNanosecond",$r[$r.TimeSecond=-19]="TimeSecond",$r[$r.TimeMillisecond=-20]="TimeMillisecond",$r[$r.TimeMicrosecond=-21]="TimeMicrosecond",$r[$r.TimeNanosecond=-22]="TimeNanosecond",$r[$r.DenseUnion=-23]="DenseUnion",$r[$r.SparseUnion=-24]="SparseUnion",$r[$r.IntervalDayTime=-25]="IntervalDayTime",$r[$r.IntervalYearMonth=-26]="IntervalYearMonth";class to{static isNull(t){return t&&t.typeId===Gr.Null}static isInt(t){return t&&t.typeId===Gr.Int}static isFloat(t){return t&&t.typeId===Gr.Float}static isBinary(t){return t&&t.typeId===Gr.Binary}static isUtf8(t){return t&&t.typeId===Gr.Utf8}static isBool(t){return t&&t.typeId===Gr.Bool}static isDecimal(t){return t&&t.typeId===Gr.Decimal}static isDate(t){return t&&t.typeId===Gr.Date}static isTime(t){return t&&t.typeId===Gr.Time}static isTimestamp(t){return t&&t.typeId===Gr.Timestamp}static isInterval(t){return t&&t.typeId===Gr.Interval}static isList(t){return t&&t.typeId===Gr.List}static isStruct(t){return t&&t.typeId===Gr.Struct}static isUnion(t){return t&&t.typeId===Gr.Union}static isFixedSizeBinary(t){return t&&t.typeId===Gr.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===Gr.FixedSizeList}static isMap(t){return t&&t.typeId===Gr.Map}static isDictionary(t){return t&&t.typeId===Gr.Dictionary}get typeId(){return Gr.NONE}compareTo(t){return this===t}}Symbol.toStringTag,Symbol.toStringTag,Vr=Symbol.toStringTag;class eo extends to{constructor(t,e){super(),(0,d.Z)(this,"isSigned",void 0),(0,d.Z)(this,"bitWidth",void 0),this.isSigned=t,this.bitWidth=e}get typeId(){return Gr.Int}get[Vr](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class io extends eo{constructor(){super(!0,8)}}class no extends eo{constructor(){super(!0,16)}}class ro extends eo{constructor(){super(!0,32)}}class oo extends eo{constructor(){super(!1,8)}}class so extends eo{constructor(){super(!1,16)}}class ao extends eo{constructor(){super(!1,32)}}Wr=Symbol.toStringTag;class lo extends to{constructor(t){super(),(0,d.Z)(this,"precision",void 0),this.precision=t}get typeId(){return Gr.Float}get[Wr](){return"Float"}toString(){return"Float".concat(this.precision)}}class co extends lo{constructor(){super(32)}}class uo extends lo{constructor(){super(64)}}Symbol.toStringTag,Symbol.toStringTag,qr=Symbol.toStringTag,Qr=Symbol.toStringTag,Yr=Symbol.toStringTag,Xr=Symbol.toStringTag,Jr=Symbol.toStringTag;class ho extends to{constructor(t,e){super(),(0,d.Z)(this,"listSize",void 0),(0,d.Z)(this,"children",void 0),this.listSize=t,this.children=[e]}get typeId(){return Gr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Jr](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}Kr=Symbol.toStringTag;class Ao{constructor(t,e){(0,d.Z)(this,"fields",void 0),(0,d.Z)(this,"metadata",void 0),function(t,e){if(!t)throw new Error("loader assertion failed.")}(Array.isArray(t)),function(t){const e={};for(const i of t)e[i.name]&&console.warn("Schema: duplicated field name",i.name,i),e[i.name]=!0}(t),this.fields=t,this.metadata=e||new Map}compareTo(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(let e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}select(){const t=Object.create(null);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(const e of i)t[e]=!0;const r=this.fields.filter((e=>t[e.name]));return new Ao(r,this.metadata)}selectAt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=e.map((t=>this.fields[t])).filter(Boolean);return new Ao(n,this.metadata)}assign(t){let e,i=this.metadata;if(t instanceof Ao){const n=t;e=n.fields,i=fo(fo(new Map,this.metadata),n.metadata)}else e=t;const n=Object.create(null);for(const t of this.fields)n[t.name]=t;for(const t of e)n[t.name]=t;const r=Object.values(n);return new Ao(r,i)}}function fo(t,e){return new Map([...t||new Map,...e||new Map])}function po(t,e,i){return function(t,e,i){const n=function(t){switch(t.constructor){case Int8Array:return new io;case Uint8Array:return new oo;case Int16Array:return new no;case Uint16Array:return new so;case Int32Array:return new ro;case Uint32Array:return new ao;case Float32Array:return new co;case Float64Array:return new uo;default:throw new Error("array type not supported")}}(e.value),r=i||function(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new Hr(t,new ho(e.size,new Hr("value",n)),!1,r)}(t,e,i?go(i.metadata):void 0)}function go(t){const e=new Map;for(const i in t)e.set("".concat(i,".string"),JSON.stringify(t[i]));return e}const mo={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},vo={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class yo{constructor(t){(0,d.Z)(this,"draco",void 0),(0,d.Z)(this,"decoder",void 0),(0,d.Z)(this,"metadataQuerier",void 0),this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);const n=this.decoder.GetEncodedGeometryType(i),r=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(n){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(i,r);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(i,r);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!r.ptr){const e="DRACO decompression failed: ".concat(t.error_msg());throw new Error(e)}const o=this._getDracoLoaderData(r,n,e),s=this._getMeshData(r,o,e),a=function(t){let e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],l=a&&a.length;for(let t=0;t<l;t+=3){const l=a[t],c=a[t+1],u=a[t+2];e=l<e?l:e,i=c<i?c:i,n=u<n?u:n,r=l>r?l:r,o=c>o?c:o,s=u>s?u:s}return[[e,i,n],[r,o,s]]}(s.attributes),l=function(t,e,i){const n=go(e.metadata),r=[],o=function(t){const e={};for(const i in t){const n=t[i];e[n.name||"undefined"]=n}return e}(e.attributes);for(const e in t){const i=po(e,t[e],o[e]);r.push(i)}if(i){const t=po("indices",i);r.push(t)}return new Ao(r,n)}(s.attributes,o,s.indices);return{loader:"draco",loaderData:o,header:{vertexCount:r.num_points(),boundingBox:a},...s,schema:l}}finally{this.draco.destroy(i),r&&this.draco.destroy(r)}}_getDracoLoaderData(t,e,i){const n=this._getTopLevelMetadata(t),r=this._getDracoAttributes(t,i);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:n,attributes:r}}_getDracoAttributes(t,e){const i={};for(let n=0;n<t.num_attributes();n++){const r=this.decoder.GetAttribute(t,n),o=this._getAttributeMetadata(t,n);i[r.unique_id()]={unique_id:r.unique_id(),attribute_type:r.attribute_type(),data_type:r.data_type(),num_components:r.num_components(),byte_offset:r.byte_offset(),byte_stride:r.byte_stride(),normalized:r.normalized(),attribute_index:n,metadata:o};const s=this._getQuantizationTransform(r,e);s&&(i[r.unique_id()].quantization_transform=s);const a=this._getOctahedronTransform(r,e);a&&(i[r.unique_id()].octahedron_transform=a)}return i}_getMeshData(t,e,i){const n=this._getMeshAttributes(e,t,i);if(!n.POSITION)throw new Error("DRACO: No position attribute found.");return t instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:n,indices:{value:this._getTriangleStripIndices(t),size:1}}:{topology:"triangle-list",mode:5,attributes:n,indices:{value:this._getTriangleListIndices(t),size:1}}:{topology:"point-list",mode:0,attributes:n}}_getMeshAttributes(t,e,i){const n={};for(const r of Object.values(t.attributes)){const t=this._deduceAttributeName(r,i);r.name=t;const{value:o,size:s}=this._getAttributeValues(e,r);n[t]={value:o,size:s,byteOffset:r.byte_offset,byteStride:r.byte_stride,normalized:r.normalized}}return n}_getTriangleListIndices(t){const e=3*t.num_faces(),i=4*e,n=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(t,i,n),new Uint32Array(this.draco.HEAPF32.buffer,n,e).slice()}finally{this.draco._free(n)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){const e=t.size(),i=new Int32Array(e);for(let n=0;n<e;n++)i[n]=t.GetValue(n);return i}(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const i=vo[e.data_type],n=e.num_components,r=t.num_points()*n,o=r*i.BYTES_PER_ELEMENT,s=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let a;const l=this.draco._malloc(o);try{const n=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,n,s,o,l),a=new i(this.draco.HEAPF32.buffer,l,r).slice()}finally{this.draco._free(l)}return{value:a,size:n}}_deduceAttributeName(t,e){const i=t.unique_id;for(const[t,n]of Object.entries(e.extraAttributes||{}))if(n===i)return t;const n=t.attribute_type;for(const t in mo)if(this.draco[t]===n)return mo[t];const r=e.attributeNameEntry||"name";return t.metadata[r]?t.metadata[r].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const i=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(i)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},i=this.metadataQuerier.NumEntries(t);for(let n=0;n<i;n++){const i=this.metadataQuerier.GetEntryName(t,n);e[i]=this._getDracoMetadataField(t,i)}return e}_getDracoMetadataField(t,e){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,i);const n=function(t){const e=t.size(),i=new Int32Array(e);for(let n=0;n<e;n++)i[n]=t.GetValue(n);return i}(i);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:n}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:i=[]}=t,n=[...e,...i];for(const t of n)this.decoder.SkipAttributeTransform(this.draco[t])}_getQuantizationTransform(t,e){const{quantizedAttributes:i=[]}=e,n=t.attribute_type();if(i.map((t=>this.decoder[t])).includes(n)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map((t=>e.min_value(t)))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:i=[]}=e,n=t.attribute_type();if(i.map((t=>this.decoder[t])).includes(n)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}const bo="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),_o="".concat(bo,"/draco_decoder.js"),wo="".concat(bo,"/draco_wasm_wrapper.js"),xo="".concat(bo,"/draco_decoder.wasm");let Co;"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js"),bn.jU;const Eo={...Zr,parse:async function(t,e){const{draco:i}=await async function(t){const e=t.modules||{};return Co=e.draco3d?Co||e.draco3d.createDecoderModule({}).then((t=>({draco:t}))):Co||async function(t){let e,i;return"js"===(t.draco&&t.draco.decoderType)?e=await Cn(_o,"draco",t):[e,i]=await Promise.all([await Cn(wo,"draco",t),await Cn(xo,"draco",t)]),e=e||globalThis.DracoDecoderModule,await function(t,e){const i={};return e&&(i.wasmBinary=e),new Promise((e=>{t({...i,onModuleLoaded:t=>e({draco:t})})}))}(e,i)}(t),await Co}(e),n=new yo(i);try{return n.parseSync(t,null==e?void 0:e.draco)}finally{n.destroy()}}};function ko(t){const{buffer:e,size:i,count:n}=function(t){let e=t,i=1,n=0;return t&&t.value&&(e=t.value,i=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?Array.isArray(t)?new e(t):!i||t instanceof e?t:new e(t):null}(e,Float32Array)),n=e.length/i),{buffer:e,size:i,count:n}}(t);return{value:e,size:i,byteOffset:0,count:n,type:pr(i),componentType:gr(e)}}const To="KHR_draco_mesh_compression",Bo=To;function So(t,e,i){const n=new br(t);for(const t of Do(n))n.getObjectExtension(t,To)}async function Po(t,e,i){var n;if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=new br(t),o=[];for(const t of Do(r))r.getObjectExtension(t,To)&&o.push(Io(r,t,e,i));await Promise.all(o),r.removeExtension(To)}function Mo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new br(t);for(const t of i.json.meshes||[])Oo(t,e),i.addRequiredExtension(To)}async function Io(t,e,i,n){const r=t.getObjectExtension(e,To);if(!r)return;const o=t.getTypedArrayForBufferView(r.bufferView),s=(0,ir.qv)(o.buffer,o.byteOffset),{parse:a}=n,l={...i};delete l["3d-tiles"];const c=await a(s,Eo,l,n),u=function(t){const e={};for(const i in t){const n=t[i];if("indices"!==i){const t=ko(n);e[i]=t}}return e}(c.attributes);for(const[i,n]of Object.entries(u))if(i in e.attributes){const r=e.attributes[i],o=t.getAccessor(r);null!=o&&o.min&&null!=o&&o.max&&(n.min=o.min,n.max=o.max)}e.attributes=u,c.indices&&(e.indices=ko(c.indices)),function(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}function Oo(t,e){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=r.DracoWriter.encodeSync({attributes:t}),a=null==o||null===(i=o.parseSync)||void 0===i?void 0:i.call(o,{attributes:t}),l=r._addFauxAttributes(a.attributes),c=r.addBufferView(s),u={primitives:[{attributes:l,mode:n,extensions:{[To]:{bufferView:c,attributes:l}}}]};return u}function*Do(t){for(const e of t.json.meshes||[])for(const t of e.primitives)yield t}const Lo={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Fo={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ro="KHR_texture_transform",No=Ro,zo=new gt.Z,jo=new Dt,Uo=new Dt;async function Zo(t,e){if(!new br(t).getExtension(Ro))return;const i=t.json.materials||[];for(let e=0;e<i.length;e++)Ho(e,t)}function Ho(t,e){var i,n,r;const o=[],s=null===(i=e.json.materials)||void 0===i?void 0:i[t],a=null==s||null===(n=s.pbrMetallicRoughness)||void 0===n?void 0:n.baseColorTexture;a&&Go(e,t,a,o);const l=null==s?void 0:s.emissiveTexture;l&&Go(e,t,l,o);const c=null==s?void 0:s.normalTexture;c&&Go(e,t,c,o);const u=null==s?void 0:s.occlusionTexture;u&&Go(e,t,u,o);const h=null==s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.metallicRoughnessTexture;h&&Go(e,t,h,o)}function Go(t,e,i,n){const r=function(t,e){var i;const n=null===(i=t.extensions)||void 0===i?void 0:i.KHR_texture_transform,{texCoord:r=0}=t,{texCoord:o=r}=n;if(-1===e.findIndex((t=>{let[e,i]=t;return e===r&&i===o}))){const i=function(t){const{offset:e=[0,0],rotation:i=0,scale:n=[1,1]}=t,r=(new Dt).set(1,0,0,0,1,0,e[0],e[1],1),o=jo.set(Math.cos(i),Math.sin(i),0,-Math.sin(i),Math.cos(i),0,0,0,1),s=Uo.set(n[0],0,0,0,n[1],0,0,0,1);return r.multiplyRight(o).multiplyRight(s)}(n);return r!==o&&(t.texCoord=o),e.push([r,o]),{originalTexCoord:r,texCoord:o,matrix:i}}return null}(i,n);if(!r)return;const o=t.json.meshes||[];for(const i of o)for(const n of i.primitives){const i=n.material;Number.isFinite(i)&&e===i&&Vo(t,n,r)}}function Vo(t,e,i){const{originalTexCoord:n,texCoord:r,matrix:o}=i,s=e.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(s)){var a;const i=null===(a=t.json.accessors)||void 0===a?void 0:a[s];if(i&&i.bufferView){var l;const s=null===(l=t.json.bufferViews)||void 0===l?void 0:l[i.bufferView];if(s){const{arrayBuffer:a,byteOffset:l}=t.buffers[s.buffer],c=(l||0)+(i.byteOffset||0)+(s.byteOffset||0),{ArrayType:u,length:h}=mr(i,s),d=Fo[i.componentType],A=Lo[i.type],f=s.byteStride||d*A,p=new Float32Array(h);for(let t=0;t<i.count;t++){const e=new u(a,c+t*f,2);zo.set(e[0],e[1],1),zo.transformByMatrix3(o),p.set([zo[0],zo[1]],t*A)}n===r?function(t,e,i,n){t.componentType=5126,i.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),e.buffer=i.length-1,e.byteLength=n.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(i,s,t.buffers,p):function(t,e,i,n,r){n.buffers.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength});const o=n.json.bufferViews;if(!o)return;o.push({buffer:n.buffers.length-1,byteLength:r.buffer.byteLength,byteOffset:0});const s=n.json.accessors;s&&(s.push({bufferView:(null==o?void 0:o.length)-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),i.attributes["TEXCOORD_".concat(t)]=s.length-1)}(r,i,e,t,p)}}}}const Wo="KHR_lights_punctual",qo=Wo;async function Qo(t){const e=new br(t),{json:i}=e,n=e.getExtension(Wo);n&&(e.json.lights=n.lights,e.removeExtension(Wo));for(const t of i.nodes||[]){const i=e.getObjectExtension(t,Wo);i&&(t.light=i.light),e.removeObjectExtension(t,Wo)}}async function Yo(t){const e=new br(t),{json:i}=e;if(i.lights){const t=e.addExtension(Wo);nr(!t.lights),t.lights=i.lights,delete i.lights}if(e.json.lights){for(const t of e.json.lights){const i=t.node;e.addObjectExtension(i,Wo,t)}delete e.json.lights}}const Xo="KHR_materials_unlit",Jo=Xo;async function Ko(t){const e=new br(t),{json:i}=e;for(const t of i.materials||[])t.extensions&&t.extensions.KHR_materials_unlit&&(t.unlit=!0),e.removeObjectExtension(t,Xo);e.removeExtension(Xo)}function $o(t){const e=new br(t),{json:i}=e;if(e.materials)for(const t of i.materials||[])t.unlit&&(delete t.unlit,e.addObjectExtension(t,Xo,{}),e.addExtension(Xo))}const ts="KHR_techniques_webgl",es=ts;async function is(t){const e=new br(t),{json:i}=e,n=e.getExtension(ts);if(n){const t=function(t,e){const{programs:i=[],shaders:n=[],techniques:r=[]}=t,o=new TextDecoder;return n.forEach((t=>{if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=o.decode(e.getTypedArrayForBufferView(t.bufferView))})),i.forEach((t=>{t.fragmentShader=n[t.fragmentShader],t.vertexShader=n[t.vertexShader]})),r.forEach((t=>{t.program=i[t.program]})),r}(n,e);for(const n of i.materials||[]){const i=e.getObjectExtension(n,ts);i&&(n.technique=Object.assign({},i,t[i.technique]),n.technique.values=rs(n.technique,e)),e.removeObjectExtension(n,ts)}e.removeExtension(ts)}}async function ns(t,e){}function rs(t,e){const i=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((e=>{t.uniforms[e].value&&!(e in i)&&(i[e]=t.uniforms[e].value)})),Object.keys(i).forEach((t=>{"object"==typeof i[t]&&void 0!==i[t].index&&(i[t].texture=e.getTexture(i[t].index))})),i}const os="EXT_feature_metadata",ss=os;async function as(t){!function(t){var e;const i=t.getExtension(os),n=null==i||null===(e=i.schema)||void 0===e?void 0:e.classes,r=null==i?void 0:i.featureTables;if((null==i?void 0:i.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),n&&r)for(const e in n){const i=n[e],o=us(r,e);o&&ls(t,o,i)}}(new br(t))}function ls(t,e,i){for(const r in i.properties){var n;const o=i.properties[r],s=null==e||null===(n=e.properties)||void 0===n?void 0:n[r],a=e.count;if(s){const e=cs(t,o,a,s);s.data=e}}}function cs(t,e,i,n){const r=n.bufferView;let o=t.getTypedArrayForBufferView(r);switch(e.type){case"STRING":{const e=n.stringOffsetBufferView;o=function(t,e,i){const n=[],r=new TextDecoder("utf8");let o=0;for(let s=0;s<i;s++){const i=e[4*(s+1)]-e[4*s],a=t.subarray(o,i+o),l=r.decode(a);n.push(l),o+=i}return n}(o,t.getTypedArrayForBufferView(e),i);break}}return o}function us(t,e){for(const i in t){const n=t[i];if(n.class===e)return n}return null}const hs=[n,r,o,s,l,c,u,a,h];function ds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n=hs.filter((t=>fs(t.name,e)));for(const o of n){var r;null===(r=o.preprocess)||void 0===r||r.call(o,t,e,i)}}async function As(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n=hs.filter((t=>fs(t.name,e)));for(const o of n){var r;await(null===(r=o.decode)||void 0===r?void 0:r.call(o,t,e,i))}}function fs(t,e){var i;const n=(null==e||null===(i=e.gltf)||void 0===i?void 0:i.excludeExtensions)||{};return!(t in n&&!n[t])}const ps="KHR_binary_glTF",gs={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},ms={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class vs{constructor(){(0,d.Z)(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),(0,d.Z)(this,"json",void 0)}normalize(t,e){this.json=t.json;const i=t.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function(t){const e=new br(t),{json:i}=e;for(const t of i.images||[]){const i=e.getObjectExtension(t,ps);i&&Object.assign(t,i),e.removeObjectExtension(t,ps)}i.buffers&&i.buffers[0]&&delete i.buffers[0].uri,e.removeExtension(ps)}(t),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(const e in gs)this._convertTopLevelObjectToArray(t,e)}_convertTopLevelObjectToArray(t,e){const i=t[e];if(i&&!Array.isArray(i)){t[e]=[];for(const n in i){const r=i[n];r.id=r.id||n;const o=t[e].length;t[e].push(r),this.idToIndexMap[e][n]=o}}}_convertObjectIdsToArrayIndices(t){for(const e in gs)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(const e of t.textures)this._convertTextureIds(e);for(const e of t.meshes)this._convertMeshIds(e);for(const e of t.nodes)this._convertNodeIds(e);for(const e of t.scenes)this._convertSceneIds(e)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(const e of t.primitives){const{attributes:t,indices:i,material:n}=e;for(const e in t)t[e]=this._convertIdToIndex(t[e],"accessor");i&&(e.indices=this._convertIdToIndex(i,"accessor")),n&&(e.material=this._convertIdToIndex(n,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map((t=>this._convertIdToIndex(t,"node")))),t.meshes&&(t.meshes=t.meshes.map((t=>this._convertIdToIndex(t,"mesh"))))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map((t=>this._convertIdToIndex(t,"node"))))}_convertIdsToIndices(t,e){t[e]||(console.warn("gltf v1: json doesn't contain attribute ".concat(e)),t[e]=[]);for(const i of t[e])for(const t in i){const e=i[t],n=this._convertIdToIndex(e,t);i[t]=n}}_convertIdToIndex(t,e){const i=ms[e];if(i in this.idToIndexMap){const n=this.idToIndexMap[i][t];if(!Number.isFinite(n))throw new Error("gltf v1: failed to resolve ".concat(e," with id ").concat(t));return n}return t}_updateObjects(t){for(const t of this.json.buffers)delete t.type}_updateMaterial(t){for(const r of t.materials){var e,i,n;r.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(e=r.values)||void 0===e?void 0:e.tex)||(null===(i=r.values)||void 0===i?void 0:i.texture2d_0)||(null===(n=r.values)||void 0===n?void 0:n.diffuseTex),s=t.textures.findIndex((t=>t.id===o));-1!==s&&(r.pbrMetallicRoughness.baseColorTexture={index:s})}}}function ys(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new vs).normalize(t,e)}const bs={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_s={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ws={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},xs={10240:9729,10241:9986,10242:10497,10243:10497};class Cs{constructor(){(0,d.Z)(this,"baseUri",""),(0,d.Z)(this,"json",{}),(0,d.Z)(this,"buffers",[]),(0,d.Z)(this,"images",[])}postProcess(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:i,buffers:n=[],images:r=[],baseUri:o=""}=t;return nr(i),this.baseUri=o,this.json=i,this.buffers=n,this.images=r,this._resolveTree(this.json,e),this.json}_resolveTree(t){t.bufferViews&&(t.bufferViews=t.bufferViews.map(((t,e)=>this._resolveBufferView(t,e)))),t.images&&(t.images=t.images.map(((t,e)=>this._resolveImage(t,e)))),t.samplers&&(t.samplers=t.samplers.map(((t,e)=>this._resolveSampler(t,e)))),t.textures&&(t.textures=t.textures.map(((t,e)=>this._resolveTexture(t,e)))),t.accessors&&(t.accessors=t.accessors.map(((t,e)=>this._resolveAccessor(t,e)))),t.materials&&(t.materials=t.materials.map(((t,e)=>this._resolveMaterial(t,e)))),t.meshes&&(t.meshes=t.meshes.map(((t,e)=>this._resolveMesh(t,e)))),t.nodes&&(t.nodes=t.nodes.map(((t,e)=>this._resolveNode(t,e)))),t.skins&&(t.skins=t.skins.map(((t,e)=>this._resolveSkin(t,e)))),t.scenes&&(t.scenes=t.scenes.map(((t,e)=>this._resolveScene(t,e)))),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])}getScene(t){return this._get("scenes",t)}getNode(t){return this._get("nodes",t)}getSkin(t){return this._get("skins",t)}getMesh(t){return this._get("meshes",t)}getMaterial(t){return this._get("materials",t)}getAccessor(t){return this._get("accessors",t)}getCamera(t){return null}getTexture(t){return this._get("textures",t)}getSampler(t){return this._get("samplers",t)}getImage(t){return this._get("images",t)}getBufferView(t){return this._get("bufferViews",t)}getBuffer(t){return this._get("buffers",t)}_get(t,e){if("object"==typeof e)return e;const i=this.json[t]&&this.json[t][e];return i||console.warn("glTF file error: Could not find ".concat(t,"[").concat(e,"]")),i}_resolveScene(t,e){return t.id=t.id||"scene-".concat(e),t.nodes=(t.nodes||[]).map((t=>this.getNode(t))),t}_resolveNode(t,e){return t.id=t.id||"node-".concat(e),t.children&&(t.children=t.children.map((t=>this.getNode(t)))),void 0!==t.mesh?t.mesh=this.getMesh(t.mesh):void 0!==t.meshes&&t.meshes.length&&(t.mesh=t.meshes.reduce(((t,e)=>{const i=this.getMesh(e);return t.id=i.id,t.primitives=t.primitives.concat(i.primitives),t}),{primitives:[]})),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t}_resolveSkin(t,e){return t.id=t.id||"skin-".concat(e),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}_resolveMesh(t,e){return t.id=t.id||"mesh-".concat(e),t.primitives&&(t.primitives=t.primitives.map((t=>{const e=(t={...t}).attributes;t.attributes={};for(const i in e)t.attributes[i]=this.getAccessor(e[i]);return void 0!==t.indices&&(t.indices=this.getAccessor(t.indices)),void 0!==t.material&&(t.material=this.getMaterial(t.material)),t}))),t}_resolveMaterial(t,e){if(t.id=t.id||"material-".concat(e),t.normalTexture&&(t.normalTexture={...t.normalTexture},t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture={...t.occlustionTexture},t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture={...t.emmisiveTexture},t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness={...t.pbrMetallicRoughness};const e=t.pbrMetallicRoughness;e.baseColorTexture&&(e.baseColorTexture={...e.baseColorTexture},e.baseColorTexture.texture=this.getTexture(e.baseColorTexture.index)),e.metallicRoughnessTexture&&(e.metallicRoughnessTexture={...e.metallicRoughnessTexture},e.metallicRoughnessTexture.texture=this.getTexture(e.metallicRoughnessTexture.index))}return t}_resolveAccessor(t,e){var i,n;if(t.id=t.id||"accessor-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=(i=t.componentType,_s[i]),t.components=(n=t.type,bs[n]),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){const e=t.bufferView.buffer,{ArrayType:i,byteLength:n}=mr(t,t.bufferView),r=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+e.byteOffset;let o=e.arrayBuffer.slice(r,r+n);t.bufferView.byteStride&&(o=this._getValueFromInterleavedBuffer(e,r,t.bufferView.byteStride,t.bytesPerElement,t.count)),t.value=new i(o)}return t}_getValueFromInterleavedBuffer(t,e,i,n,r){const o=new Uint8Array(r*n);for(let s=0;s<r;s++){const r=e+s*i;o.set(new Uint8Array(t.arrayBuffer.slice(r,r+n)),s*n)}return o.buffer}_resolveTexture(t,e){return t.id=t.id||"texture-".concat(e),t.sampler="sampler"in t?this.getSampler(t.sampler):xs,t.source=this.getImage(t.source),t}_resolveSampler(t,e){t.id=t.id||"sampler-".concat(e),t.parameters={};for(const e in t){const i=this._enumSamplerParameter(e);void 0!==i&&(t.parameters[i]=t[e])}return t}_enumSamplerParameter(t){return ws[t]}_resolveImage(t,e){t.id=t.id||"image-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));const i=this.images[e];return i&&(t.image=i),t}_resolveBufferView(t,e){const i=t.buffer,n={id:"bufferView-".concat(e),...t,buffer:this.buffers[i]},r=this.buffers[i].arrayBuffer;let o=this.buffers[i].byteOffset||0;return"byteOffset"in t&&(o+=t.byteOffset),n.data=new Uint8Array(r,o,t.byteLength),n}_resolveCamera(t,e){return t.id=t.id||"camera-".concat(e),t.perspective,t.orthographic,t}}function Es(t,e){return(new Cs).postProcess(t,e)}const ks=1735152710,Ts=!0;function Bs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function Ss(t,e,i){(0,sr.h)(t.header.byteLength>20);const n=e.getUint32(i+0,Ts),r=e.getUint32(i+4,Ts);return i+=8,(0,sr.h)(0===r),Ms(t,e,i,n),(i+=n)+Is(t,e,i,t.header.byteLength)}function Ps(t,e,i,n){return(0,sr.h)(t.header.byteLength>20),function(t,e,i,n){for(;i+8<=t.header.byteLength;){const r=e.getUint32(i+0,Ts),o=e.getUint32(i+4,Ts);switch(i+=8,o){case 1313821514:Ms(t,e,i,r);break;case 5130562:Is(t,e,i,r);break;case 0:n.strict||Ms(t,e,i,r);break;case 1:n.strict||Is(t,e,i,r)}i+=ar(r,4)}}(t,e,i,n),i+t.header.byteLength}function Ms(t,e,i,n){const r=new Uint8Array(e.buffer,i,n),o=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(o),ar(n,4)}function Is(t,e,i,n){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:i,byteLength:n,arrayBuffer:e.buffer}),ar(n,4)}async function Os(t,e){var i,n,r,o;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;Ds(t,e,s,a),ys(t,{normalize:null==a||null===(i=a.gltf)||void 0===i?void 0:i.normalize}),ds(t,a,l);const c=[];if(null!=a&&null!==(n=a.gltf)&&void 0!==n&&n.loadBuffers&&t.json.buffers&&await Ls(t,a,l),null!=a&&null!==(r=a.gltf)&&void 0!==r&&r.loadImages){const e=Fs(t,a,l);c.push(e)}const u=As(t,a,l);return c.push(u),await Promise.all(c),null!=a&&null!==(o=a.gltf)&&void 0!==o&&o.postProcess?Es(t,a):t}function Ds(t,e,i,n){if(n.uri&&(t.baseUri=n.uri),e instanceof ArrayBuffer&&!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new DataView(t),{magic:r=ks}=i,o=n.getUint32(e,!1);return o===r||o===ks}(e,i,n)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?er(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?er(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const r={};i=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=new DataView(e),o=Bs(r,i+0),s=r.getUint32(i+4,Ts),a=r.getUint32(i+8,Ts);switch(Object.assign(t,{header:{byteOffset:i,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),i+=12,t.version){case 1:return Ss(t,r,i);case 2:return Ps(t,r,i,n={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(r,e,i,n.glb),nr("glTF"===r.type,"Invalid GLB magic string ".concat(r.type)),t._glb=r,t.json=r.json}else nr(!1,"GLTF: must be ArrayBuffer or string");const r=t.json.buffers||[];if(t.buffers=new Array(r.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:e}=t._glb;t.buffers[0]={arrayBuffer:e[0].arrayBuffer,byteOffset:e[0].byteOffset,byteLength:e[0].byteLength}}const o=t.json.images||[];t.images=new Array(o.length).fill({})}async function Ls(t,e,i){const n=t.json.buffers||[];for(let s=0;s<n.length;++s){const a=n[s];if(a.uri){var r,o;const{fetch:n}=i;nr(n);const l=rr(a.uri,e),c=await(null==i||null===(r=i.fetch)||void 0===r?void 0:r.call(i,l)),u=await(null==c||null===(o=c.arrayBuffer)||void 0===o?void 0:o.call(c));t.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete a.uri}else null===t.buffers[s]&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}async function Fs(t,e,i){const n=function(t){const e=new Set,i=t.json.textures||[];for(const t of i)void 0!==t.source&&e.add(t.source);return Array.from(e).sort()}(t),r=t.json.images||[],o=[];for(const s of n)o.push(Rs(t,r[s],s,e,i));return await Promise.all(o)}async function Rs(t,e,i,n,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const t=rr(e.uri,n),i=await o(t);a=await i.arrayBuffer(),e.bufferView={data:a}}if(Number.isFinite(e.bufferView)){const i=function(t,e,i){const n=t.bufferViews[i];nr(n);const r=e[n.buffer];nr(r);const o=(n.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,o,n.byteLength)}(t.json,t.buffers,e.bufferView);a=(0,ir.qv)(i.buffer,i.byteOffset,i.byteLength)}nr(a,"glTF image has no data");let l=await s(a,[v.S,tr],{mimeType:e.mimeType,basis:n.basis||{format:$n()}},r);l&&l[0]&&(l={compressed:!0,mipmaps:!1,width:l[0].width,height:l[0].height,data:l[0]}),t.images=t.images||[],t.images[i]=l}const Ns={name:"glTF",id:"gltf",module:"gltf",version:"3.3.5",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;e={...Ns.options,...e},e.gltf={...Ns.options.gltf,...e.gltf};const{byteOffset:n=0}=e,r={};return await Os(r,t,n,e,i)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};const zs=Math.PI/180,js=new Float32Array(16),Us=new Float32Array(12);function Zs(t,e,i){const n=e[0]*zs,r=e[1]*zs,o=e[2]*zs,s=Math.sin(o),a=Math.sin(n),l=Math.sin(r),c=Math.cos(o),u=Math.cos(n),h=Math.cos(r),d=i[0],A=i[1],f=i[2];t[0]=d*h*u,t[1]=d*l*u,t[2]=d*-a,t[3]=A*(-l*c+h*a*s),t[4]=A*(h*c+l*a*s),t[5]=A*u*s,t[6]=f*(l*s+h*a*c),t[7]=f*(-h*s+l*a*c),t[8]=f*u*c}function Hs(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const Gs={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:i}){const{data:n,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,l=Array.isArray(a),c=l&&16===a.length,u=Array.isArray(o),h=Array.isArray(r),d=Array.isArray(s),A=c||!l&&Boolean(a(n[0]));t.constant=A?c:h&&u&&d;const f=t.value;if(t.constant){let e;A?(js.set(a),e=Hs(js)):(e=Us,Zs(e,r,o),e.set(s,9)),t.value=new Float32Array(e)}else{let l=e*t.size;const{iterable:p,objectInfo:g}=(0,Di.jB)(n,e,i);for(const t of p){let e;g.index++,A?(js.set(c?a:a(t,g)),e=Hs(js)):(e=Us,Zs(e,h?r:r(t,g),u?o:o(t,g)),e.set(d?s:s(t,g),9)),f[l++]=e[0],f[l++]=e[1],f[l++]=e[2],f[l++]=e[3],f[l++]=e[4],f[l++]=e[5],f[l++]=e[6],f[l++]=e[7],f[l++]=e[8],f[l++]=e[9],f[l++]=e[10],f[l++]=e[11]}}}};function Vs(t,e){return e===p.Df.CARTESIAN||e===p.Df.METER_OFFSETS||e===p.Df.DEFAULT&&!t.isGeospatial}const Ws=[255,255,255,255],qs={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Ws},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Ns]};class Qs extends Vi.Z{constructor(...t){super(...t),(0,d.Z)(this,"state",void 0)}getShaders(){const t=[Wi.Z,qi.Z];return"pbr"===this.props._lighting&&t.push(Yi),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:Ws,transition:!0},instanceModelMatrix:Gs})}updateState(t){super.updateState(t);const{props:e,oldProps:i}=t;e.scenegraph!==i.scenegraph?this._updateScenegraph():e._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,e._animations)}finalizeState(t){super.finalizeState(t),this._deleteScenegraph()}_updateScenegraph(){const t=this.props,{gl:e}=this.context;let i=null;if(t.scenegraph instanceof Ki)i={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const n=t.scenegraph,r=function(t,e,i){const n=new yn(t,i);return{scenes:n.instantiate(e),animator:n.createAnimator()}}(e,n,this._getModelOptions());i={gltf:n,...r},async function(t){const e=[];return t.scenes.forEach((t=>{t.traverse((t=>{Object.values(t.model.getUniforms()).forEach((t=>{!1===t.loaded&&e.push(t)}))}))})),await async function(t){for(;e.some((t=>!t.loaded));)await new Promise((t=>requestAnimationFrame(t)))}()}(r).then((()=>this.setNeedsRedraw()))}else t.scenegraph&&(Hi.Z.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=t.scenegraph);const n={layer:this,gl:e},r=t.getScene(i,n),o=t.getAnimator(i,n);r instanceof Ki?(this._deleteScenegraph(),this._applyAllAttributes(r),this._applyAnimationsProp(r,o,t._animations),this.setState({scenegraph:r,animator:o})):null!==r&&Hi.Z.warn("invalid scenegraph:",r)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const e=this.getAttributeManager().getAttributes();t.traverse((t=>{this._setModelAttributes(t.model,e)}))}}_applyAnimationsProp(t,e,i){if(!t||!e||!i)return;const n=e.getAnimations();Object.keys(i).sort().forEach((t=>{const e=i[t];if("*"===t)n.forEach((t=>{Object.assign(t,e)}));else if(Number.isFinite(Number(t))){const i=Number(t);i>=0&&i<n.length?Object.assign(n[i],e):Hi.Z.warn("animation ".concat(t," not found"))()}else{const i=n.find((({name:e})=>e===t));i?Object.assign(i,e):Hi.Z.warn("animation ".concat(t," not found"))()}}))}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof Ki&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let e=null;return t&&(e="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:e,modelOptions:{isInstanced:!0,transpileToGLSL100:!(0,Qi.D0)(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((e=>{this._setModelAttributes(e.model,t)}))}draw({moduleParameters:t=null,parameters:e={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:n}=this.context,{sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s,opacity:a,coordinateSystem:l}=this.props,c=this.getNumInstances();this.state.scenegraph.traverse(((i,{worldMatrix:u})=>{i.model.setInstanceCount(c),i.updateModuleSettings(t),i.draw({parameters:e,uniforms:{sizeScale:r,opacity:a,sizeMinPixels:o,sizeMaxPixels:s,composeModelMatrix:Vs(n,l),sceneModelMatrix:u,u_Camera:i.model.getUniforms().project_uCameraPosition}})}))}}(0,d.Z)(Qs,"defaultProps",qs),(0,d.Z)(Qs,"layerName","ScenegraphLayer");var Ys=i(7287);function Xs(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),Hi.Z.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Js(t,e){if(t.attributes)return Xs(t.attributes,e),t instanceof Zi.Z?t:new Zi.Z(t);if(t.positions||t.POSITION)return Xs(t,e),new Zi.Z({attributes:t});throw Error("Invalid mesh")}class Ks extends Vi.Z{constructor(...t){super(...t),(0,d.Z)(this,"state",void 0)}getShaders(){const t=!(0,Qi.D0)(this.context.gl),e={};return(0,dn.U6)(this.context.gl,An.h.GLSL_DERIVATIVES)&&(e.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Wi.Z,Ys.s,qi.Z],transpileToGLSL100:t,defines:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Gs}),this.setState({emptyTexture:new fn.Z(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(t){super.updateState(t);const{props:e,oldProps:i,changeFlags:n}=t;if(e.mesh!==i.mesh||n.extensionsChanged){var r;if(null===(r=this.state.model)||void 0===r||r.delete(),e.mesh){this.state.model=this.getModel(e.mesh);const t=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(t.NORMAL||t.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==i.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(t){super.finalizeState(t),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;const{viewport:e}=this.context,{sizeScale:i,coordinateSystem:n,_instanced:r}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:i,composeModelMatrix:!r||Vs(e,n),flatShading:!this.state.hasNormals}).draw()}getModel(t){const e=new un.Z(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Js(t,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:n}=this.state;return e.setUniforms({sampler:i||n,hasTexture:Boolean(i)}),e}setTexture(t){const{emptyTexture:e,model:i}=this.state;i&&i.setUniforms({sampler:t||e,hasTexture:Boolean(t)})}}(0,d.Z)(Ks,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),(0,d.Z)(Ks,"layerName","SimpleMeshLayer");class $s extends Ks{getShaders(){const t=super.getShaders();return t.modules.push(Yi),{...t,vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nuniform bool pickFeatureIds;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec4 uvRegions;\nin vec3 featureIdsPickingColors;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvec2 applyUVRegion(vec2 uv) {\n  #ifdef HAS_UV_REGIONS\n    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;\n  #else\n    return uv;\n  #endif\n}\n\nvoid main(void) {\n  vec2 uv = applyUVRegion(texCoords);\n  geometry.uv = uv;\n\n  if (pickFeatureIds) {\n    geometry.pickingColor = featureIdsPickingColors;\n  } else {\n    geometry.pickingColor = instancePickingColors;\n  }\n\n  vTexCoord = uv;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale;\n  vec3 projectedPosition = project_position(positions);\n  position_commonspace = vec4(projectedPosition, 1.0);\n  gl_Position = project_common_position_to_clipspace(position_commonspace);\n\n  geometry.position = position_commonspace;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  geometry.normal = normals_commonspace;\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = uv;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  \n#ifdef MODULE_PBR\n\n  fragColor = vColor * pbr_filterColor(vec4(0));\n  geometry.uv = pbr_vUV;\n  fragColor.a *= opacity;\n\n#else\n\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n#endif\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}}initializeState(){const{featureIds:t}=this.props;super.initializeState();const e=this.getAttributeManager();t&&e.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}updateState(t){super.updateState(t);const{props:e,oldProps:i}=t;e.pbrMaterial!==i.pbrMaterial&&this.updatePbrMaterialUniforms(e.pbrMaterial)}draw(t){const{featureIds:e}=this.props;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,pickFeatureIds:Boolean(e)}),super.draw(t))}getModel(t){const{id:e,pbrMaterial:i}=this.props,n=this.parseMaterial(i,t);this.setState({materialParser:n});const r=this.getShaders();var o;return(o=t.attributes).COLOR_0||o.colors||(o.colors={constant:!0,value:new Float32Array([1,1,1])}),new un.Z(this.context.gl,{...this.getShaders(),id:e,geometry:t,defines:{...r.defines,...null==n?void 0:n.defines,HAS_UV_REGIONS:t.attributes.uvRegions},parameters:null==n?void 0:n.parameters,isInstanced:!0})}updatePbrMaterialUniforms(t){const{model:e}=this.state;if(e){const{mesh:i}=this.props,n=this.parseMaterial(t,i);this.setState({materialParser:n}),e.setUniforms(n.uniforms)}}parseMaterial(t,e){var i;const n=Boolean(t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorTexture);return null===(i=this.state.materialParser)||void 0===i||i.delete(),new pn(this.context.gl,{attributes:{NORMAL:e.attributes.normals,TEXCOORD_0:e.attributes.texCoords},material:{unlit:n,...t},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}calculateFeatureIdsPickingColors(t){const e=this.props.featureIds,i=new Uint8ClampedArray(e.length*t.size),n=[];for(let t=0;t<e.length;t++)this.encodePickingColor(e[t],n),i[3*t]=n[0],i[3*t+1]=n[1],i[3*t+2]=n[2];t.value=i}finalizeState(t){var e;super.finalizeState(t),null===(e=this.state.materialParser)||void 0===e||e.delete(),this.setState({materialParser:null})}}(0,d.Z)($s,"layerName","MeshLayer"),(0,d.Z)($s,"defaultProps",{pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}});var ta=i(3878);const ea=6378137,ia=6378137,na=6356752.314245179;function ra(t){return t}Math.max(ea,ia,na),new gt.Z;const oa=new gt.Z,sa=new gt.Z,aa=new gt.Z,la=new gt.Z,ca={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},ua={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},ha={east:new gt.Z,north:new gt.Z,up:new gt.Z,west:new gt.Z,south:new gt.Z,down:new gt.Z},da=new gt.Z,Aa=new gt.Z,fa=new gt.Z;function pa(t,e,i,n,r,o){const s=ca[e]&&ca[e][i];let a,l,c;(0,Ae.Z)(s&&(!n||n===s));const u=la.copy(r);if((0,ht.fS)(u.x,0,1e-14)&&(0,ht.fS)(u.y,0,1e-14)){const t=Math.sign(u.z);a=da.fromArray(ua[e]),"east"!==e&&"west"!==e&&a.scale(t),l=Aa.fromArray(ua[i]),"east"!==i&&"west"!==i&&l.scale(t),c=fa.fromArray(ua[n]),"east"!==n&&"west"!==n&&c.scale(t)}else{const{up:r,east:o,north:s}=ha;o.set(-u.y,u.x,0).normalize(),t.geodeticSurfaceNormal(u,r),s.copy(r).cross(o);const{down:h,west:d,south:A}=ha;h.copy(r).scale(-1),d.copy(o).scale(-1),A.copy(s).scale(-1),a=ha[e],l=ha[i],c=ha[n]}return o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=0,o[4]=l.x,o[5]=l.y,o[6]=l.z,o[7]=0,o[8]=c.x,o[9]=c.y,o[10]=c.z,o[11]=0,o[12]=u.x,o[13]=u.y,o[14]=u.z,o[15]=1,o}const ga=new gt.Z,ma=new gt.Z,va=new gt.Z,ya=new gt.Z,ba=new gt.Z,_a=new gt.Z;class wa{constructor(t=0,e=0,i=0){(0,d.Z)(this,"radii",void 0),(0,d.Z)(this,"radiiSquared",void 0),(0,d.Z)(this,"radiiToTheFourth",void 0),(0,d.Z)(this,"oneOverRadii",void 0),(0,d.Z)(this,"oneOverRadiiSquared",void 0),(0,d.Z)(this,"minimumRadius",void 0),(0,d.Z)(this,"maximumRadius",void 0),(0,d.Z)(this,"centerToleranceSquared",.1),(0,d.Z)(this,"squaredXOverSquaredZ",void 0),(0,Ae.Z)(t>=0),(0,Ae.Z)(e>=0),(0,Ae.Z)(i>=0),this.radii=new gt.Z(t,e,i),this.radiiSquared=new gt.Z(t*t,e*e,i*i),this.radiiToTheFourth=new gt.Z(t*t*t*t,e*e*e*e,i*i*i*i),this.oneOverRadii=new gt.Z(0===t?0:1/t,0===e?0:1/e,0===i?0:1/i),this.oneOverRadiiSquared=new gt.Z(0===t?0:1/(t*t),0===e?0:1/(e*e),0===i?0:1/(i*i)),this.minimumRadius=Math.min(t,e,i),this.maximumRadius=Math.max(t,e,i),0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}toString(){return this.radii.toString()}cartographicToCartesian(t,e=[0,0,0]){const i=ma,n=va,[,,r]=t;this.geodeticSurfaceNormalCartographic(t,i),n.copy(this.radiiSquared).scale(i);const o=Math.sqrt(i.dot(n));return n.scale(1/o),i.scale(r),n.add(i),n.to(e)}cartesianToCartographic(t,e=[0,0,0]){_a.from(t);const i=this.scaleToGeodeticSurface(_a,ya);if(!i)return;const n=this.geodeticSurfaceNormal(i,ma),r=ba;return r.copy(_a).subtract(i),function(t,e){return function(t,e,i=ra){return"longitude"in e?(e.longitude=i(t[0]),e.latitude=i(t[1]),e.height=t[2]):"x"in e?(e.x=i(t[0]),e.y=i(t[1]),e.z=t[2]):(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]),e}(t,e,ht.vc._cartographicRadians?ra:ht.Ux)}([Math.atan2(n.y,n.x),Math.asin(n.z),Math.sign(It.AK(r,_a))*It.kE(r)],e)}eastNorthUpToFixedFrame(t,e=new ut.Z){return pa(this,"east","north","up",t,e)}localFrameToFixedFrame(t,e,i,n,r=new ut.Z){return pa(this,t,e,i,n,r)}geocentricSurfaceNormal(t,e=[0,0,0]){return ga.from(t).normalize().to(e)}geodeticSurfaceNormalCartographic(t,e=[0,0,0]){const i=function(t,e=[]){return function(t,e=[],i=ra){return"longitude"in t?(e[0]=i(t.longitude),e[1]=i(t.latitude),e[2]=t.height):"x"in t?(e[0]=i(t.x),e[1]=i(t.y),e[2]=t.z):(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]),e}(t,e,ht.vc._cartographicRadians?ra:ht.Yr)}(t),n=i[0],r=i[1],o=Math.cos(r);return ga.set(o*Math.cos(n),o*Math.sin(n),Math.sin(r)).normalize(),ga.to(e)}geodeticSurfaceNormal(t,e=[0,0,0]){return ga.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}scaleToGeodeticSurface(t,e){return function(t,e,i=[]){const{oneOverRadii:n,oneOverRadiiSquared:r,centerToleranceSquared:o}=e;oa.from(t);const s=oa.x,a=oa.y,l=oa.z,c=n.x,u=n.y,h=n.z,d=s*s*c*c,A=a*a*u*u,f=l*l*h*h,p=d+A+f,g=Math.sqrt(1/p);if(!Number.isFinite(g))return;const m=sa;if(m.copy(t).scale(g),p<o)return m.to(i);const v=r.x,y=r.y,b=r.z,_=aa;_.set(m.x*v*2,m.y*y*2,m.z*b*2);let w,x,C,E,k=(1-g)*oa.len()/(.5*_.len()),T=0;do{k-=T,w=1/(1+k*v),x=1/(1+k*y),C=1/(1+k*b);const t=w*w,e=x*x,i=C*C;E=d*t+A*e+f*i-1,T=E/(-2*(d*(t*w)*v+A*(e*x)*y+f*(i*C)*b))}while(Math.abs(E)>1e-12);return oa.scale([w,x,C]).to(i)}(t,this,e)}scaleToGeocentricSurface(t,e=[0,0,0]){ya.from(t);const i=ya.x,n=ya.y,r=ya.z,o=this.oneOverRadiiSquared,s=1/Math.sqrt(i*i*o.x+n*n*o.y+r*r*o.z);return ya.multiplyScalar(s).to(e)}transformPositionToScaledSpace(t,e=[0,0,0]){return ya.from(t).scale(this.oneOverRadii).to(e)}transformPositionFromScaledSpace(t,e=[0,0,0]){return ya.from(t).scale(this.radii).to(e)}getSurfaceNormalIntersectionWithZAxis(t,e=0,i=[0,0,0]){(0,Ae.Z)((0,ht.fS)(this.radii.x,this.radii.y,1e-15)),(0,Ae.Z)(this.radii.z>0),ya.from(t);const n=ya.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(n)>=this.radii.z-e))return ya.set(0,0,n).to(i)}}(0,d.Z)(wa,"WGS84",new wa(ea,ia,na));var xa=i(962);class Ca{constructor(t,e,i){(0,d.Z)(this,"item",void 0),(0,d.Z)(this,"previous",void 0),(0,d.Z)(this,"next",void 0),this.item=t,this.previous=e,this.next=i}}class Ea{constructor(){(0,d.Z)(this,"head",null),(0,d.Z)(this,"tail",null),(0,d.Z)(this,"_length",0)}get length(){return this._length}add(t){const e=new Ca(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e}remove(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}splice(t,e){t!==e&&(this.remove(e),this._insert(t,e))}_insert(t,e){const i=t.next;t.next=e,this.tail===t?this.tail=e:i.previous=e,e.next=i,e.previous=t,++this._length}}function ka(t){return null!=t}class Ta{constructor(){(0,d.Z)(this,"_list",void 0),(0,d.Z)(this,"_sentinel",void 0),(0,d.Z)(this,"_trimTiles",void 0),this._list=new Ea,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(t){const e=t._cacheNode;ka(e)&&this._list.splice(this._sentinel,e)}add(t,e,i){ka(e._cacheNode)||(e._cacheNode=this._list.add(e),i&&i(t,e))}unloadTile(t,e,i){const n=e._cacheNode;ka(n)&&(this._list.remove(n),e._cacheNode=void 0,i&&i(t,e))}unloadTiles(t,e){const i=this._trimTiles;this._trimTiles=!1;const n=this._list,r=1024*t.maximumMemoryUsage*1024,o=this._sentinel;let s=n.head;for(;s!==o&&(t.gpuMemoryUsageInBytes>r||i);){const i=s.item;s=s.next,this.unloadTile(t,i,e)}}trim(){this._trimTiles=!0}}const Ba=new gt.Z,Sa=new gt.Z,Pa=new be([new ge,new ge,new ge,new ge,new ge,new ge]);function Ma(t,e){const{cameraDirection:i,cameraUp:n,height:r}=t,{metersPerUnit:o}=t.distanceScales,s=Oa(t,t.center),a=wa.WGS84.eastNorthUpToFixedFrame(s),l=t.unprojectPosition(t.cameraPosition),c=wa.WGS84.cartographicToCartesian(l,new gt.Z),u=new gt.Z(a.transformAsVector(new gt.Z(i).scale(o))).normalize(),h=new gt.Z(a.transformAsVector(new gt.Z(n).scale(o))).normalize();!function(t){const e=t.getFrustumPlanes(),i=Ia(e.near,t.cameraPosition),n=Oa(t,i),r=Oa(t,t.cameraPosition,Sa);let o=0;Pa.planes[o++].fromPointNormal(n,Ba.copy(n).subtract(r));for(const r in e){if("near"===r)continue;const s=Oa(t,Ia(e[r],i,Sa),Sa);Pa.planes[o++].fromPointNormal(s,Ba.copy(n).subtract(s))}}(t);const d=t.constructor,{longitude:A,latitude:f,width:p,bearing:g,zoom:m}=t;return{camera:{position:c,direction:u,up:h},viewport:t,topDownViewport:new d({longitude:A,latitude:f,height:r,width:p,bearing:g,zoom:m,pitch:0}),height:r,cullingVolume:Pa,frameNumber:e,sseDenominator:1.15}}function Ia(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gt.Z;const n=t.normal.dot(e);return i.copy(t.normal).scale(t.distance-n).add(e),i}function Oa(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gt.Z;const n=t.unprojectPosition(e);return wa.WGS84.cartographicToCartesian(n,i)}const Da=6356752.314245179,La=new gt.Z;function Fa(t,e,i){const n=wa.WGS84.cartographicToCartesian([t.xmax,t.ymax,t.zmax],new gt.Z),r=Math.sqrt(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)+Math.pow(n[2]-i[2],2));return Math.log2(Da/(r+e[2]))}const Ra="scenegraph",Na="pointcloud",za="I3S",ja="TILES3D",Ua="geometricError";function Za(t){return null!=t}const Ha=new gt.Z,Ga=new gt.Z,Va=new gt.Z,Wa=new gt.Z;function qa(t,e,i){if((0,sr.h)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,i){const n=new gt.Z(t[0],t[1],t[2]);e.transform(n,n);let r=[];if(10===t.length){const e=t.slice(3,6),i=new re;i.fromArray(t,6);const n=new gt.Z([1,0,0]),o=new gt.Z([0,1,0]),s=new gt.Z([0,0,1]);n.transformByQuaternion(i),n.scale(e[0]),o.transformByQuaternion(i),o.scale(e[1]),s.transformByQuaternion(i),s.scale(e[2]),r=[...n.toArray(),...o.toArray(),...s.toArray()]}else r=[...t.slice(3,6),...t.slice(6,9),...t.slice(9,12)];const o=e.transformAsVector(r.slice(0,3)),s=e.transformAsVector(r.slice(3,6)),a=e.transformAsVector(r.slice(6,9)),l=new Dt([o[0],o[1],o[2],s[0],s[1],s[2],a[0],a[1],a[2]]);return Za(i)?(i.center=n,i.halfAxes=l,i):new de(n,l)}(t.box,e,i);if(t.region){const[e,i,n,r,o,s]=t.region,a=wa.WGS84.cartographicToCartesian([(0,ht.RW)(e),(0,ht.RW)(r),o],Va),l=wa.WGS84.cartographicToCartesian([(0,ht.RW)(n),(0,ht.RW)(i),s],Wa),c=(new gt.Z).addVectors(a,l).multiplyScalar(.5),u=(new gt.Z).subVectors(a,l).len()/2;return Qa([c[0],c[1],c[2],u],new ut.Z)}if(t.sphere)return Qa(t.sphere,e,i);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function Qa(t,e,i){const n=new gt.Z(t[0],t[1],t[2]);e.transform(n,n);const r=e.getScale(Ga),o=Math.max(Math.max(r[0],r[1]),r[2]),s=t[3]*o;return Za(i)?(i.center=n,i.radius=s,i):new xt(n,s)}function Ya(t,e){wa.WGS84.cartesianToCartographic(e,Ha),t[0][0]=Math.min(t[0][0],Ha[0]),t[0][1]=Math.min(t[0][1],Ha[1]),t[0][2]=Math.min(t[0][2],Ha[2]),t[1][0]=Math.max(t[1][0],Ha[0]),t[1][1]=Math.max(t[1][1],Ha[1]),t[1][2]=Math.max(t[1][2],Ha[2])}new gt.Z,new gt.Z,new ut.Z,new gt.Z,new gt.Z,new gt.Z;const Xa=new gt.Z,Ja=new gt.Z,Ka=new gt.Z,$a=new gt.Z,tl=new gt.Z,el=new ut.Z,il=new ut.Z;function nl(t,e){const{topDownViewport:i}=e,n=t.header.mbs[1],r=t.header.mbs[0],o=t.header.mbs[2],s=t.header.mbs[3],a=[...t.boundingVolume.center],l=i.unprojectPosition(i.cameraPosition);wa.WGS84.cartographicToCartesian(l,Xa),Ja.copy(Xa).subtract(a).normalize(),wa.WGS84.eastNorthUpToFixedFrame(a,el),il.copy(el).invert(),Ka.copy(Xa).transform(il);const c=Math.sqrt(Ka[0]*Ka[0]+Ka[1]*Ka[1]),u=c*c/Ka[2];$a.copy([Ka[0],Ka[1],u]);const h=$a.transform(el).subtract(a).normalize(),d=Ja.cross(h).normalize().scale(s).add(a),A=wa.WGS84.cartesianToCartographic(d),f=i.project([r,n,o]),p=i.project(A);return tl.copy(f).subtract(p).magnitude()}class rl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,d.Z)(this,"_map",new Map),(0,d.Z)(this,"_array",void 0),(0,d.Z)(this,"_length",void 0),this._array=new Array(t),this._length=t}get length(){return this._length}set length(t){this._length=t,t>this._array.length&&(this._array.length=t)}get values(){return this._array}get(t){return(0,sr.h)(t<this._array.length),this._array[t]}set(t,e){(0,sr.h)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)}delete(t){const e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)}peek(){return this._array[this._length-1]}push(t){if(!this._map.has(t)){const e=this.length++;this._array[e]=t,this._map.set(t,e)}}pop(){const t=this._array[--this.length];return this._map.delete(t),t}reserve(t){(0,sr.h)(t>=0),t>this._array.length&&(this._array.length=t)}resize(t){(0,sr.h)(t>=0),this.length=t}trim(t){null==t&&(t=this.length),this._array.length=t}reset(){this._array=[],this._map=new Map,this._length=0}find(t){return this._map.has(t)}}const ol={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:""};class sl{traversalFinished(t){return!0}constructor(t){(0,d.Z)(this,"options",void 0),(0,d.Z)(this,"root",void 0),(0,d.Z)(this,"requestedTiles",void 0),(0,d.Z)(this,"selectedTiles",void 0),(0,d.Z)(this,"emptyTiles",void 0),(0,d.Z)(this,"lastUpdate",(new Date).getTime()),(0,d.Z)(this,"updateDebounceTime",1e3),(0,d.Z)(this,"_traversalStack",void 0),(0,d.Z)(this,"_emptyTraversalStack",void 0),(0,d.Z)(this,"_frameNumber",void 0),this.options={...ol,...t},this._traversalStack=new rl,this._emptyTraversalStack=new rl,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}traverse(t,e,i){this.root=t,this.options={...this.options,...i},this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(t,e){const i=this._traversalStack;for(t._selectionDepth=1,i.push(t);i.length>0;){const t=i.pop();let n=!1;this.canTraverse(t,e)&&(this.updateChildTiles(t,e),n=this.updateAndPushChildren(t,e,i,t.hasRenderContent?t._selectionDepth+1:t._selectionDepth));const r=t.parent,o=Boolean(!r||r._shouldRefine),s=!n;t.hasRenderContent?1===t.refine?(this.loadTile(t,e),this.selectTile(t,e)):2===t.refine&&(this.loadTile(t,e),s&&this.selectTile(t,e)):(this.emptyTiles[t.id]=t,this.loadTile(t,e),s&&this.selectTile(t,e)),this.touchTile(t,e),t._shouldRefine=n&&o}const n=(new Date).getTime();(this.traversalFinished(e)||n-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=n,this.options.onTraversalEnd(e))}updateChildTiles(t,e){const i=t.children;for(const t of i)this.updateTile(t,e);return!0}updateAndPushChildren(t,e,i,n){const{loadSiblings:r,skipLevelOfDetail:o}=this.options,s=t.children;s.sort(this.compareDistanceToCamera.bind(this));const a=2===t.refine&&t.hasRenderContent&&!o;let l=!1,c=!0;for(const t of s)if(t._selectionDepth=n,t.isVisibleAndInRequestVolume?(i.find(t)&&i.delete(t),i.push(t),l=!0):(a||r)&&(this.loadTile(t,e),this.touchTile(t,e)),a){let i;if(i=!!t._inRequestVolume&&(t.hasRenderContent?t.contentAvailable:this.executeEmptyTraversal(t,e)),c=c&&i,!c)return!1}return l||(c=!1),c}updateTile(t,e){this.updateTileVisibility(t,e)}selectTile(t,e){this.shouldSelectTile(t)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)}loadTile(t,e){this.shouldLoadTile(t)&&(t._requestedFrame=e.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)}touchTile(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber}canTraverse(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:!(!n&&!t.isVisibleAndInRequestVolume)&&this.shouldRefine(t,e,i))}shouldLoadTile(t){return t.hasUnloadedContent||t.contentExpired}shouldSelectTile(t){return t.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(t,e,i){let n=t._screenSpaceError;return i&&(n=t.getScreenSpaceError(e,!0)),n>this.options.maximumScreenSpaceError}updateTileVisibility(t,e){const i=[];if(this.options.viewportTraversersMap)for(const t in this.options.viewportTraversersMap)this.options.viewportTraversersMap[t]===e.viewport.id&&i.push(t);else i.push(e.viewport.id);t.updateVisibility(e,i)}compareDistanceToCamera(t,e){return t._distanceToCamera-e._distanceToCamera}anyChildrenVisible(t,e){let i=!1;for(const n of t.children)n.updateVisibility(e),i=i||n.isVisibleAndInRequestVolume;return i}executeEmptyTraversal(t,e){let i=!0;const n=this._emptyTraversalStack;for(n.push(t);n.length>0&&i;){const t=n.pop();if(this.updateTile(t,e),t.isVisibleAndInRequestVolume||this.loadTile(t,e),this.touchTile(t,e),!t.hasRenderContent&&this.canTraverse(t,e,!1,!0)){const e=t.children;for(const t of e)n.find(t)&&n.delete(t),n.push(t)}else t.contentAvailable||(i=!1)}return i}}const al=new gt.Z;class ll{constructor(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";(0,d.Z)(this,"tileset",void 0),(0,d.Z)(this,"header",void 0),(0,d.Z)(this,"id",void 0),(0,d.Z)(this,"url",void 0),(0,d.Z)(this,"parent",void 0),(0,d.Z)(this,"refine",void 0),(0,d.Z)(this,"type",void 0),(0,d.Z)(this,"contentUrl",void 0),(0,d.Z)(this,"lodMetricType",void 0),(0,d.Z)(this,"lodMetricValue",void 0),(0,d.Z)(this,"boundingVolume",void 0),(0,d.Z)(this,"content",void 0),(0,d.Z)(this,"contentState",void 0),(0,d.Z)(this,"gpuMemoryUsageInBytes",void 0),(0,d.Z)(this,"children",void 0),(0,d.Z)(this,"depth",void 0),(0,d.Z)(this,"viewportIds",void 0),(0,d.Z)(this,"transform",void 0),(0,d.Z)(this,"extensions",void 0),(0,d.Z)(this,"implicitTiling",void 0),(0,d.Z)(this,"userData",void 0),(0,d.Z)(this,"computedTransform",void 0),(0,d.Z)(this,"hasEmptyContent",void 0),(0,d.Z)(this,"hasTilesetContent",void 0),(0,d.Z)(this,"traverser",void 0),(0,d.Z)(this,"_cacheNode",void 0),(0,d.Z)(this,"_frameNumber",void 0),(0,d.Z)(this,"_lodJudge",void 0),(0,d.Z)(this,"_expireDate",void 0),(0,d.Z)(this,"_expiredContent",void 0),(0,d.Z)(this,"_shouldRefine",void 0),(0,d.Z)(this,"_boundingBox",void 0),(0,d.Z)(this,"_distanceToCamera",void 0),(0,d.Z)(this,"_centerZDepth",void 0),(0,d.Z)(this,"_screenSpaceError",void 0),(0,d.Z)(this,"_visibilityPlaneMask",void 0),(0,d.Z)(this,"_visible",void 0),(0,d.Z)(this,"_inRequestVolume",void 0),(0,d.Z)(this,"_stackLength",void 0),(0,d.Z)(this,"_selectionDepth",void 0),(0,d.Z)(this,"_touchedFrame",void 0),(0,d.Z)(this,"_visitedFrame",void 0),(0,d.Z)(this,"_selectedFrame",void 0),(0,d.Z)(this,"_requestedFrame",void 0),(0,d.Z)(this,"_priority",void 0),(0,d.Z)(this,"_contentBoundingVolume",void 0),(0,d.Z)(this,"_viewerRequestVolume",void 0),(0,d.Z)(this,"_initialTransform",void 0),this.header=e,this.tileset=t,this.id=n||e.id,this.url=e.url,this.parent=i,this.refine=this._getRefine(e.refine),this.type=e.type,this.contentUrl=e.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=0,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new sl({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new ut.Z,this.transform=new ut.Z,this._initializeLodMetric(e),this._initializeTransforms(e),this._initializeBoundingVolumes(e),this._initializeContent(e),this._initializeRenderingState(e),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this.implicitTiling=null,Object.seal(this)}destroy(){this.header=null}isDestroyed(){return null===this.header}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return 3===this.contentState||this.hasEmptyContent}get contentAvailable(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return 0===this.contentState}get contentExpired(){return 4===this.contentState}get contentFailed(){return 5===this.contentState}get distanceToCamera(){return this._distanceToCamera}get screenSpaceError(){return this._screenSpaceError}get boundingBox(){return this._boundingBox||(this._boundingBox=function(t,e){if(t.box)return function(t){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],{halfAxes:i}=t,n=new gt.Z(i.getColumn(0)),r=new gt.Z(i.getColumn(1)),o=new gt.Z(i.getColumn(2));for(let i=0;i<2;i++){for(let i=0;i<2;i++){for(let i=0;i<2;i++)Ha.copy(t.center),Ha.add(n),Ha.add(r),Ha.add(o),Ya(e,Ha),o.negate();r.negate()}n.negate()}return e}(e);if(t.region){const[e,i,n,r,o,s]=t.region;return[[(0,ht.RW)(e),(0,ht.RW)(i),o],[(0,ht.RW)(n),(0,ht.RW)(r),s]]}if(t.sphere)return function(t){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],{center:i,radius:n}=t,r=wa.WGS84.scaleToGeodeticSurface(i,Ha);let o;o=r?wa.WGS84.geodeticSurfaceNormal(r):new gt.Z(0,0,1);let s=new gt.Z(o[2],-o[1],0);s.len()>0?s.normalize():s=new gt.Z(0,1,0);const a=s.clone().cross(o);for(const t of[s,a,o]){Ga.copy(t).scale(n);for(let t=0;t<2;t++)Ha.copy(i),Ha.add(Ga),Ya(e,Ha),Ga.negate()}return e}(e);throw new Error("Unkown boundingVolume type")}(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}getScreenSpaceError(t,e){switch(this.tileset.type){case za:return nl(this,t);case ja:return function(t,e,i){const n=t.tileset,r=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,o=i?r:t.lodMetricValue;if(0===o)return 0;const s=Math.max(t._distanceToCamera,1e-7),{height:a,sseDenominator:l}=e,{viewDistanceScale:c}=n.options;let u=o*a*(c||1)/(s*l);return u-=function(t,e){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){const i=t.dynamicScreenSpaceErrorComputedDensity,n=t.dynamicScreenSpaceErrorFactor,r=function(t,e){const i=t*e;return 1-Math.exp(-i*i)}(e,i)*n;return r}return 0}(n,s),u}(this,t,e);default:throw new Error("Unsupported tileset type")}}unselect(){this._selectedFrame=0}_getGpuMemoryUsageInBytes(){return this.content.gpuMemoryUsageInBytes||this.content.byteLength||0}_getPriority(){const t=this.tileset._traverser,{skipLevelOfDetail:e}=t.options,i=1===this.refine||e;if(i&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(0===this.contentState)return-1;const n=this.parent,r=!n||i&&0!==this._screenSpaceError&&!n.hasTilesetContent?this._screenSpaceError:n._screenSpaceError,o=t.root?t.root._screenSpaceError:0;return Math.max(o-r,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=1;const t=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!t)return this.contentState=0,!1;try{const e=this.tileset.getTileUrl(this.contentUrl),i=this.tileset.loader,n={...this.tileset.loadOptions,[i.id]:{...this.tileset.loadOptions[i.id],isTileset:"json"===this.type,...this._getLoaderSpecificOptions(i.id)}};return this.content=await(0,ta.z)(e,i,n),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=3,this._onContentLoaded(),!0}catch(t){throw this.contentState=5,t}finally{t.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=0,!0}updateVisibility(t,e){if(this._frameNumber===t.frameNumber)return;const i=this.parent,n=i?i._visibilityPlaneMask:be.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){const t=i?i.computedTransform:this.tileset.modelMatrix;this._updateTransform(t)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,n),this._visible=this._visibilityPlaneMask!==be.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=e}visibility(t,e){const{cullingVolume:i}=t,{boundingVolume:n}=this;return i.computeVisibilityWithPlaneMask(n,e)}contentVisibility(){return!0}distanceToTile(t){const e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))}cameraSpaceZDepth(t){let{camera:e}=t;const i=this.boundingVolume;return al.subVectors(i.center,e.position),e.direction.dot(al)}insideViewerRequestVolume(t){const e=this._viewerRequestVolume;return!e||e.distanceSquaredTo(t.camera.position)<=0}updateExpiration(){if(function(t){return null!=t}(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){const t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=4,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}_initializeTransforms(t){this.transform=t.transform?new ut.Z(t.transform):new ut.Z;const e=this.parent,i=this.tileset,n=e&&e.computedTransform?e.computedTransform.clone():i.modelMatrix.clone();this.computedTransform=new ut.Z(n).multiplyRight(this.transform);const r=e&&e._initialTransform?e._initialTransform.clone():new ut.Z;this._initialTransform=new ut.Z(r).multiplyRight(this.transform)}_initializeBoundingVolumes(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}_initializeContent(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=0,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=be.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(t){return t||this.parent&&this.parent.refine||2}_isTileset(){return-1!==this.contentUrl.indexOf(".json")}_onContentLoaded(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()?this.hasTilesetContent=!0:this.gpuMemoryUsageInBytes=this._getGpuMemoryUsageInBytes()}_updateBoundingVolume(t){this.boundingVolume=qa(t.boundingVolume,this.computedTransform,this.boundingVolume);const e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=qa(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=qa(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ut.Z).clone().multiplyRight(this.transform);!t.equals(this.computedTransform)&&(this.computedTransform=t,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(t){return"i3s"===t?{...this.tileset.options.i3s,_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1}:{assetGltfUpAxis:(e=this.tileset.tileset).asset&&e.asset.gltfUpAxis||"Y"};var e}}class cl extends sl{compareDistanceToCamera(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera}updateTileVisibility(t,e){if(super.updateTileVisibility(t,e),!t.isVisibleAndInRequestVolume)return;const i=t.children.length>0;if(t.hasTilesetContent&&i){const i=t.children[0];return this.updateTileVisibility(i,e),void(t._visible=i._visible)}if(this.meetsScreenSpaceErrorEarly(t,e))return void(t._visible=!1);const n=2===t.refine,r=1===t._optimChildrenWithinParent;n&&r&&i&&!this.anyChildrenVisible(t,e)&&(t._visible=!1)}meetsScreenSpaceErrorEarly(t,e){const{parent:i}=t;return!(!i||i.hasTilesetContent||1!==i.refine||this.shouldRefine(t,e,!0))}}class ul{constructor(){(0,d.Z)(this,"frameNumberMap",new Map)}register(t,e){const i=this.frameNumberMap.get(t)||new Map,n=i.get(e)||0;i.set(e,n+1),this.frameNumberMap.set(t,i)}deregister(t,e){const i=this.frameNumberMap.get(t);if(!i)return;const n=i.get(e)||1;i.set(e,n-1)}isZero(t,e){var i;return 0===((null===(i=this.frameNumberMap.get(t))||void 0===i?void 0:i.get(e))||0)}}class hl{constructor(){(0,d.Z)(this,"_statusMap",void 0),(0,d.Z)(this,"pendingTilesRegister",new ul),this._statusMap={}}add(t,e,i,n){if(!this._statusMap[e]){const{frameNumber:r,viewport:{id:o}}=n;this._statusMap[e]={request:t,callback:i,key:e,frameState:n,status:"REQUESTED"},this.pendingTilesRegister.register(o,r),t().then((t=>{this._statusMap[e].status="COMPLETED";const{frameNumber:i,viewport:{id:r}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(r,i),this._statusMap[e].callback(t,n)})).catch((t=>{this._statusMap[e].status="ERROR";const{frameNumber:n,viewport:{id:r}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(r,n),i(t)}))}}update(t,e){if(this._statusMap[t]){const{frameNumber:i,viewport:{id:n}}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(n,i);const{frameNumber:r,viewport:{id:o}}=e;this.pendingTilesRegister.register(o,r),this._statusMap[t].frameState=e}}find(t){return this._statusMap[t]}hasPendingTiles(t,e){return!this.pendingTilesRegister.isZero(t,e)}}class dl extends sl{constructor(t){super(t),(0,d.Z)(this,"_tileManager",void 0),this._tileManager=new hl}traversalFinished(t){return!this._tileManager.hasPendingTiles(t.viewport.id,this._frameNumber||0)}shouldRefine(t,e){return t._lodJudge=function(t,e){if(0===t.lodMetricValue||isNaN(t.lodMetricValue))return"DIG";const i=2*nl(t,e);return i<2?"OUT":!t.header.children||i<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}(t,e),"DIG"===t._lodJudge}updateChildTiles(t,e){const i=t.header.children||[],n=t.children,r=t.tileset;for(const o of i){const i="".concat(o.id,"-").concat(e.viewport.id),s=n&&n.find((t=>t.id===i));if(s)s&&this.updateTile(s,e);else{let n=()=>this._loadTile(o.id,r);this._tileManager.find(i)?this._tileManager.update(i,e):(r.tileset.nodePages&&(n=()=>r.tileset.nodePagesTile.formTileFromNodePages(o.id)),this._tileManager.add(n,i,(e=>this._onTileLoad(e,t,i)),e))}}return!1}async _loadTile(t,e){const{loader:i}=e,n=e.getTileUrl("".concat(e.url,"/nodes/").concat(t)),r={...e.loadOptions,i3s:{...e.loadOptions.i3s,isTileHeader:!0}};return await(0,ta.z)(n,i,r)}_onTileLoad(t,e,i){const n=new ll(e.tileset,t,e,i);e.children.push(n);const r=this._tileManager.find(n.id).frameState;this.updateTile(n,r),this._frameNumber===r.frameNumber&&(this.traversalFinished(r)||(new Date).getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(n,r)}}const Al={description:"",ellipsoid:wa.WGS84,modelMatrix:new ut.Z,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:t=>t,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},fl="Tiles In Tileset(s)",pl="Tiles In Memory",gl="Tiles In View",ml="Tiles To Render",vl="Tiles Loaded",yl="Tiles Loading",bl="Tiles Unloaded",_l="Failed Tile Loads",wl="Points/Vertices",xl="Tile Memory Use";class Cl{constructor(t,e){(0,d.Z)(this,"options",void 0),(0,d.Z)(this,"loadOptions",void 0),(0,d.Z)(this,"type",void 0),(0,d.Z)(this,"tileset",void 0),(0,d.Z)(this,"loader",void 0),(0,d.Z)(this,"url",void 0),(0,d.Z)(this,"basePath",void 0),(0,d.Z)(this,"modelMatrix",void 0),(0,d.Z)(this,"ellipsoid",void 0),(0,d.Z)(this,"lodMetricType",void 0),(0,d.Z)(this,"lodMetricValue",void 0),(0,d.Z)(this,"refine",void 0),(0,d.Z)(this,"root",void 0),(0,d.Z)(this,"roots",void 0),(0,d.Z)(this,"asset",void 0),(0,d.Z)(this,"description",void 0),(0,d.Z)(this,"properties",void 0),(0,d.Z)(this,"extras",void 0),(0,d.Z)(this,"attributions",void 0),(0,d.Z)(this,"credits",void 0),(0,d.Z)(this,"stats",void 0),(0,d.Z)(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),(0,d.Z)(this,"traverseCounter",void 0),(0,d.Z)(this,"geometricError",void 0),(0,d.Z)(this,"selectedTiles",void 0),(0,d.Z)(this,"updatePromise",null),(0,d.Z)(this,"tilesetInitializationPromise",void 0),(0,d.Z)(this,"cartographicCenter",void 0),(0,d.Z)(this,"cartesianCenter",void 0),(0,d.Z)(this,"zoom",void 0),(0,d.Z)(this,"boundingVolume",void 0),(0,d.Z)(this,"gpuMemoryUsageInBytes",void 0),(0,d.Z)(this,"dynamicScreenSpaceErrorComputedDensity",void 0),(0,d.Z)(this,"_traverser",void 0),(0,d.Z)(this,"_cache",void 0),(0,d.Z)(this,"_requestScheduler",void 0),(0,d.Z)(this,"_frameNumber",void 0),(0,d.Z)(this,"_queryParamsString",void 0),(0,d.Z)(this,"_queryParams",void 0),(0,d.Z)(this,"_extensionsUsed",void 0),(0,d.Z)(this,"_tiles",void 0),(0,d.Z)(this,"_pendingCount",void 0),(0,d.Z)(this,"lastUpdatedVieports",void 0),(0,d.Z)(this,"_requestedTiles",void 0),(0,d.Z)(this,"_emptyTiles",void 0),(0,d.Z)(this,"frameStateData",void 0),(0,d.Z)(this,"maximumMemoryUsage",void 0),(0,sr.h)(t),this.options={...Al,...e},this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||xa.XX(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new Ta,this._requestScheduler=new ct({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new at.Z({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(t)}destroy(){this._destroy()}isLoaded(){return 0===this._pendingCount&&0!==this._frameNumber&&0===this._requestedTiles.length}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return this._queryParamsString||(this._queryParamsString=new URLSearchParams(this._queryParams).toString()),this._queryParamsString}setProps(t){this.options={...this.options,...t}}setOptions(t){this.options={...this.options,...t}}getTileUrl(t){return t.startsWith("data:")?t:"".concat(t).concat(t.includes("?")?"&":"?").concat(this.queryParams)}hasExtension(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tilesetInitializationPromise.then((()=>{!t&&this.lastUpdatedVieports?t=this.lastUpdatedVieports:this.lastUpdatedVieports=t,t&&this.doUpdate(t)}))}async selectTiles(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return await this.tilesetInitializationPromise,t&&(this.lastUpdatedVieports=t),this.updatePromise||(this.updatePromise=new Promise((t=>{setTimeout((()=>{this.lastUpdatedVieports&&this.doUpdate(this.lastUpdatedVieports),t(this._frameNumber),this.updatePromise=null}),this.options.debounceTime)}))),this.updatePromise}doUpdate(t){if("loadTiles"in this.options&&!this.options.loadTiles)return;if(this.traverseCounter>0)return;const e=t instanceof Array?t:[t];this._cache.reset(),this._frameNumber++,this.traverseCounter=e.length;const i=[];for(const t of e){const e=t.id;this._needTraverse(e)?i.push(e):this.traverseCounter--}for(const t of e){const e=t.id;if(this.roots[e]||(this.roots[e]=this._initializeTileHeaders(this.tileset,null)),!i.includes(e))continue;const n=Ma(t,this._frameNumber);this._traverser.traverse(this.roots[e],n,this.options)}}_needTraverse(t){let e=t;return this.options.viewportTraversersMap&&(e=this.options.viewportTraversersMap[t]),e===t}_onTraversalEnd(t){const e=t.viewport.id;this.frameStateData[e]||(this.frameStateData[e]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});const i=this.frameStateData[e],n=Object.values(this._traverser.selectedTiles),[r,o]=function(t,e,i){if(0===i||t.length<=i)return[t,[]];const n=[],{longitude:r,latitude:o}=e.viewport;for(const[e,i]of t.entries()){const[t,s]=i.header.mbs,a=Math.abs(r-t),l=Math.abs(o-s),c=Math.sqrt(l*l+a*a);n.push([e,c])}const s=n.sort(((t,e)=>t[1]-e[1])),a=[];for(let e=0;e<i;e++)a.push(t[s[e][0]]);const l=[];for(let e=i;e<s.length;e++)l.push(t[s[e][0]]);return[a,l]}(n,t,this.options.maximumTilesSelected);i.selectedTiles=r;for(const t of o)t.unselect();i._requestedTiles=Object.values(this._traverser.requestedTiles),i._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(const t in this.frameStateData){const e=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(e.selectedTiles),this._requestedTiles=this._requestedTiles.concat(e._requestedTiles),this._emptyTiles=this._emptyTiles.concat(e._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(const t of this.selectedTiles)this._tiles[t.id]=t;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(t,e){if(t.length!==e.length)return!0;const i=new Set(t.map((t=>t.id))),n=new Set(e.map((t=>t.id)));let r=t.filter((t=>!n.has(t.id))).length>0;return r=r||e.filter((t=>!i.has(t.id))).length>0,r}_loadTiles(){for(const t of this._requestedTiles)t.contentUnloaded&&this._loadTile(t)}_unloadTiles(){this._cache.unloadTiles(this,((t,e)=>t._unloadTile(e)))}_updateStats(){let t=0,e=0;for(const i of this.selectedTiles)i.contentAvailable&&i.content&&(t++,i.content.pointCount?e+=i.content.pointCount:e+=i.content.vertexCount);this.stats.get(gl).count=this.selectedTiles.length,this.stats.get(ml).count=t,this.stats.get(wl).count=e}async _initializeTileSet(t){this.type===za&&(this.calculateViewPropsI3S(),t.root=await t.root),this.root=this._initializeTileHeaders(t,null),this.type===ja&&(this._initializeTiles3DTileset(t),this.calculateViewPropsTiles3D()),this.type===za&&this._initializeI3STileset()}calculateViewPropsI3S(){var t;const e=this.tileset.fullExtent;if(e){const{xmin:t,xmax:i,ymin:n,ymax:r,zmin:o,zmax:s}=e;return this.cartographicCenter=new gt.Z(t+(i-t)/2,n+(r-n)/2,o+(s-o)/2),this.cartesianCenter=wa.WGS84.cartographicToCartesian(this.cartographicCenter,new gt.Z),void(this.zoom=Fa(e,this.cartographicCenter,this.cartesianCenter))}const i=null===(t=this.tileset.store)||void 0===t?void 0:t.extent;if(i){const[t,e,n,r]=i;return this.cartographicCenter=new gt.Z(t+(n-t)/2,e+(r-e)/2,0),this.cartesianCenter=wa.WGS84.cartographicToCartesian(this.cartographicCenter,new gt.Z),void(this.zoom=function(t,e,i){const[n,r,o,s]=t;return Fa({xmin:n,xmax:o,ymin:r,ymax:s,zmin:0,zmax:0},e,i)}(i,this.cartographicCenter,this.cartesianCenter))}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new gt.Z,this.zoom=1}calculateViewPropsTiles3D(){const t=this.root;(0,sr.h)(t);const{center:e}=t.boundingVolume;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new gt.Z,void(this.zoom=1);0!==e[0]||0!==e[1]||0!==e[2]?this.cartographicCenter=wa.WGS84.cartesianToCartographic(e,new gt.Z):this.cartographicCenter=new gt.Z(0,0,-wa.WGS84.radii[0]),this.cartesianCenter=e,this.zoom=function(t,e){if(t instanceof de){const{halfAxes:i}=t,n=function(t){t.getColumn(0,La);const e=t.getColumn(1),i=t.getColumn(2);return La.add(e).add(i).len()}(i);return Math.log2(Da/(n+e[2]))}if(t instanceof xt){const{radius:i}=t;return Math.log2(Da/(i+e[2]))}if(t.width&&t.height){const{width:e,height:i}=t;return(Math.log2(6378137/e)+Math.log2(6378137/i))/2}return 1}(t.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(fl),this.stats.get(yl),this.stats.get(pl),this.stats.get(gl),this.stats.get(ml),this.stats.get(vl),this.stats.get(bl),this.stats.get(_l),this.stats.get(wl),this.stats.get(xl,"memory")}_initializeTileHeaders(t,e){const i=new ll(this,t.root,e);if(e&&(e.children.push(i),i.depth=e.depth+1),this.type===ja){const t=[];for(t.push(i);t.length>0;){const e=t.pop();this.stats.get(fl).incrementCount();const i=e.header.children||[];for(const r of i){var n;const i=new ll(this,r,e);if(null!==(n=i.contentUrl)&&void 0!==n&&n.includes("?session=")){const t=new URL(i.contentUrl);this._queryParams.session=t.searchParams.get("session")}e.children.push(i),i.depth=e.depth+1,t.push(i)}}}return i}_initializeTraverser(){let t;switch(this.type){case ja:t=cl;break;case za:t=dl;break;default:t=sl}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(t){this._destroySubtree(t)}async _loadTile(t){let e;try{this._onStartTileLoading(),e=await t.loadContent()}catch(e){this._onTileLoadError(t,e)}finally{this._onEndTileLoading(),this._onTileLoad(t,e)}}_onTileLoadError(t,e){this.stats.get(_l).incrementCount();const i=e.message||e.toString(),n=t.url;console.error("A 3D tile failed to load: ".concat(t.url," ").concat(i)),this.options.onTileError(t,i,n)}_onTileLoad(t,e){if(e){if(this.type===za){var i,n;const t=(null===(i=this.tileset)||void 0===i||null===(n=i.nodePagesTile)||void 0===n?void 0:n.nodesInNodePages)||0;this.stats.get(fl).reset(),this.stats.get(fl).addCount(t)}t&&t.content&&function(t,e){(0,sr.h)(t),(0,sr.h)(e);const{rtcCenter:i,gltfUpAxis:n}=e,{computedTransform:r,boundingVolume:{center:o}}=t;let s=new ut.Z(r);switch(i&&s.translate(i),n){case"Z":default:break;case"Y":const t=(new ut.Z).rotateX(Math.PI/2);s=s.multiplyRight(t);break;case"X":const e=(new ut.Z).rotateY(-Math.PI/2);s=s.multiplyRight(e)}e.isQuantized&&s.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);const a=new gt.Z(o);e.cartesianModelMatrix=s,e.cartesianOrigin=a;const l=wa.WGS84.cartesianToCartographic(a,new gt.Z),c=wa.WGS84.eastNorthUpToFixedFrame(a).invert();e.cartographicModelMatrix=c.multiplyRight(s),e.cartographicOrigin=l,e.coordinateSystem||(e.modelMatrix=e.cartographicModelMatrix)}(t,t.content),this.updateContentTypes(t),this._addTileToCache(t),this.options.onTileLoad(t)}}updateContentTypes(t){if(this.type===za)switch(t.header.isDracoGeometry&&(this.contentFormats.draco=!0),t.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0}else if(this.type===ja){var e;const{extensionsRemoved:i=[]}=(null===(e=t.content)||void 0===e?void 0:e.gltf)||{};i.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),i.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),i.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}_onStartTileLoading(){this._pendingCount++,this.stats.get(yl).incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get(yl).decrementCount()}_addTileToCache(t){this._cache.add(this,t,(e=>e._updateCacheStats(t)))}_updateCacheStats(t){this.stats.get(vl).incrementCount(),this.stats.get(pl).incrementCount(),this.gpuMemoryUsageInBytes+=t.gpuMemoryUsageInBytes||0,this.stats.get(xl).count=this.gpuMemoryUsageInBytes}_unloadTile(t){this.gpuMemoryUsageInBytes-=t.gpuMemoryUsageInBytes||0,this.stats.get(pl).decrementCount(),this.stats.get(bl).incrementCount(),this.stats.get(xl).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}_destroy(){const t=[];for(this.root&&t.push(this.root);t.length>0;){const e=t.pop();for(const i of e.children)t.push(i);this._destroyTile(e)}this.root=null}_destroySubtree(t){const e=t,i=[];for(i.push(e);i.length>0;){t=i.pop();for(const e of t.children)i.push(e);t!==e&&this._destroyTile(t)}e.children=[]}_destroyTile(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}_initializeTiles3DTileset(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras}_initializeI3STileset(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}const El="3.3.5",kl={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};function Tl(t,e,i){(0,sr.h)(t instanceof ArrayBuffer);const n=new TextDecoder("utf8"),r=new Uint8Array(t,e,i);return n.decode(r)}function Bl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=new DataView(t);return"".concat(String.fromCharCode(i.getUint8(e+0))).concat(String.fromCharCode(i.getUint8(e+1))).concat(String.fromCharCode(i.getUint8(e+2))).concat(String.fromCharCode(i.getUint8(e+3)))}Object.keys(kl);const Sl={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Pl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,...Sl},Ml={[Sl.DOUBLE]:Float64Array,[Sl.FLOAT]:Float32Array,[Sl.UNSIGNED_SHORT]:Uint16Array,[Sl.UNSIGNED_INT]:Uint32Array,[Sl.UNSIGNED_BYTE]:Uint8Array,[Sl.BYTE]:Int8Array,[Sl.SHORT]:Int16Array,[Sl.INT]:Int32Array},Il={DOUBLE:Sl.DOUBLE,FLOAT:Sl.FLOAT,UNSIGNED_SHORT:Sl.UNSIGNED_SHORT,UNSIGNED_INT:Sl.UNSIGNED_INT,UNSIGNED_BYTE:Sl.UNSIGNED_BYTE,BYTE:Sl.BYTE,SHORT:Sl.SHORT,INT:Sl.INT},Ol="Failed to convert GL type";class Dl{static fromTypedArray(t){t=ArrayBuffer.isView(t)?t.constructor:t;for(const e in Ml)if(Ml[e]===t)return e;throw new Error(Ol)}static fromName(t){const e=Il[t];if(!e)throw new Error(Ol);return e}static getArrayType(t){switch(t){case Sl.UNSIGNED_SHORT_5_6_5:case Sl.UNSIGNED_SHORT_4_4_4_4:case Sl.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:const e=Ml[t];if(!e)throw new Error(Ol);return e}}static getByteSize(t){return Dl.getArrayType(t).BYTES_PER_ELEMENT}static validate(t){return Boolean(Dl.getArrayType(t))}static createTypedArray(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return void 0===n&&(n=(e.byteLength-i)/Dl.getByteSize(t)),new(Dl.getArrayType(t))(e,i,n)}}class Ll{constructor(t,e){(0,d.Z)(this,"json",void 0),(0,d.Z)(this,"buffer",void 0),(0,d.Z)(this,"featuresLength",0),(0,d.Z)(this,"_cachedTypedArrays",{}),this.json=t,this.buffer=e}getExtension(t){return this.json.extensions&&this.json.extensions[t]}hasProperty(t){return Boolean(this.json[t])}getGlobalProperty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pl.UNSIGNED_INT,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=this.json[t];return n&&Number.isFinite(n.byteOffset)?this._getTypedArrayFromBinary(t,e,i,1,n.byteOffset):n}getPropertyArray(t,e,i){const n=this.json[t];return n&&Number.isFinite(n.byteOffset)?("componentType"in n&&(e=Dl.fromName(n.componentType)),this._getTypedArrayFromBinary(t,e,i,this.featuresLength,n.byteOffset)):this._getTypedArrayFromArray(t,e,n)}getProperty(t,e,i,n,r){const o=this.json[t];if(!o)return o;const s=this.getPropertyArray(t,e,i);if(1===i)return s[n];for(let t=0;t<i;++t)r[t]=s[i*n+t];return r}_getTypedArrayFromBinary(t,e,i,n,r){const o=this._cachedTypedArrays;let s=o[t];return s||(s=Dl.createTypedArray(e,this.buffer.buffer,this.buffer.byteOffset+r,n*i),o[t]=s),s}_getTypedArrayFromArray(t,e,i){const n=this._cachedTypedArrays;let r=n[t];return r||(r=Dl.createTypedArray(e,i),n[t]=r),r}}const Fl={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rl={SCALAR:(t,e)=>t[e],VEC2:(t,e)=>[t[2*e+0],t[2*e+1]],VEC3:(t,e)=>[t[3*e+0],t[3*e+1],t[3*e+2]],VEC4:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT2:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT3:(t,e)=>[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]],MAT4:(t,e)=>[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]},Nl={SCALAR:(t,e,i)=>{e[i]=t},VEC2:(t,e,i)=>{e[2*i+0]=t[0],e[2*i+1]=t[1]},VEC3:(t,e,i)=>{e[3*i+0]=t[0],e[3*i+1]=t[1],e[3*i+2]=t[2]},VEC4:(t,e,i)=>{e[4*i+0]=t[0],e[4*i+1]=t[1],e[4*i+2]=t[2],e[4*i+3]=t[3]},MAT2:(t,e,i)=>{e[4*i+0]=t[0],e[4*i+1]=t[1],e[4*i+2]=t[2],e[4*i+3]=t[3]},MAT3:(t,e,i)=>{e[9*i+0]=t[0],e[9*i+1]=t[1],e[9*i+2]=t[2],e[9*i+3]=t[3],e[9*i+4]=t[4],e[9*i+5]=t[5],e[9*i+6]=t[6],e[9*i+7]=t[7],e[9*i+8]=t[8],e[9*i+9]=t[9]},MAT4:(t,e,i)=>{e[16*i+0]=t[0],e[16*i+1]=t[1],e[16*i+2]=t[2],e[16*i+3]=t[3],e[16*i+4]=t[4],e[16*i+5]=t[5],e[16*i+6]=t[6],e[16*i+7]=t[7],e[16*i+8]=t[8],e[16*i+9]=t[9],e[16*i+10]=t[10],e[16*i+11]=t[11],e[16*i+12]=t[12],e[16*i+13]=t[13],e[16*i+14]=t[14],e[16*i+15]=t[15]}},zl=t=>void 0!==t;function jl(t,e,i){if(!t)return;const n=t.parentCounts;return t.parentIds?i(t,e):n>0?function(t,e,i){const n=t.classIds,r=t.parentCounts,o=t.parentIds,s=t.parentIndexes,a=n.length,l=scratchVisited;l.length=Math.max(l.length,a);const c=++marker,u=scratchStack;for(u.length=0,u.push(e);u.length>0;){if(l[e=u.pop()]===c)continue;l[e]=c;const n=i(t,e);if(zl(n))return n;const a=r[e],h=s[e];for(let t=0;t<a;++t){const i=o[h+t];i!==e&&u.push(i)}}return null}(t,e,i):function(t,e,i){let n=!0;for(;n;){const r=i(t,e);if(zl(r))return r;const o=t.parentIds[e];n=o!==e,e=o}throw new Error("traverseHierarchySingleParent")}(t,e,i)}function Ul(t,e,i){const n=t.parentCounts,r=t.parentIds,o=t.parentIndexes,s=t.classIds.length;if(!zl(r))return;assert(e<s,"Parent index ".concat(e," exceeds the total number of instances: ").concat(s)),assert(-1===i.indexOf(e),"Circular dependency detected in the batch table hierarchy."),i.push(e);const a=zl(n)?n[e]:1,l=zl(n)?o[e]:e;for(let n=0;n<a;++n){const o=r[l+n];o!==e&&Ul(t,o,i)}i.pop(e)}function Zl(t){return null!=t}const Hl=(t,e)=>t,Gl={HIERARCHY:!0,extensions:!0,extras:!0};class Vl{constructor(t,e,i){var n;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,d.Z)(this,"json",void 0),(0,d.Z)(this,"binary",void 0),(0,d.Z)(this,"featureCount",void 0),(0,d.Z)(this,"_extensions",void 0),(0,d.Z)(this,"_properties",void 0),(0,d.Z)(this,"_binaryProperties",void 0),(0,d.Z)(this,"_hierarchy",void 0),(0,sr.h)(i>=0),this.json=t||{},this.binary=e,this.featureCount=i,this._extensions=(null===(n=this.json)||void 0===n?void 0:n.extensions)||{},this._properties={};for(const t in this.json)Gl[t]||(this._properties[t]=this.json[t]);this._binaryProperties=this._initializeBinaryProperties(),r["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=function(t,e,i){if(!e)return null;let n=t.getExtension("3DTILES_batch_table_hierarchy");const r=e.HIERARCHY;return r&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=r,n=r),n?function(t,e){let i,n,r;const o=t.instancesLength,s=t.classes;let a,l=t.classIds,c=t.parentCounts,u=t.parentIds,h=o;if(zl(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,r=getBinaryAccessor(l),l=r.createArrayBufferView(e.buffer,e.byteOffset+l.byteOffset,o)),zl(c))for(zl(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,r=getBinaryAccessor(c),c=r.createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,o)),a=new Uint16Array(o),h=0,i=0;i<o;++i)a[i]=h,h+=c[i];zl(u)&&zl(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,r=getBinaryAccessor(u),u=r.createArrayBufferView(e.buffer,e.byteOffset+u.byteOffset,h));const d=s.length;for(i=0;i<d;++i){const t=s[i].length,n=s[i].instances,r=getBinaryProperties(t,n,e);s[i].instances=combine(r,n)}const A=new Array(d).fill(0),f=new Uint16Array(o);for(i=0;i<o;++i)n=l[i],f[i]=A[n],++A[n];const p={classes:s,classIds:l,classIndexes:f,parentCounts:c,parentIndexes:a,parentIds:u};return function(t){const e=t.classIds.length;for(let i=0;i<e;++i)Ul(t,i,stack)}(p),p}(n,i):null}(this,this.json,this.binary))}getExtension(t){return this.json&&this.json.extensions&&this.json.extensions[t]}memorySizeInBytes(){return 0}isClass(t,e){return this._checkBatchId(t),(0,sr.h)("string"==typeof e,e),!!this._hierarchy&&Zl(jl(this._hierarchy,t,((t,i)=>{const n=t.classIds[i];return t.classes[n].name===e})))}isExactClass(t,e){return(0,sr.h)("string"==typeof e,e),this.getExactClassName(t)===e}getExactClassName(t){if(this._checkBatchId(t),this._hierarchy){const e=this._hierarchy.classIds[t];return this._hierarchy.classes[e].name}}hasProperty(t,e){return this._checkBatchId(t),(0,sr.h)("string"==typeof e,e),Zl(this._properties[e])||this._hasPropertyInHierarchy(t,e)}getPropertyNames(t,e){this._checkBatchId(t),(e=Zl(e)?e:[]).length=0;const i=Object.keys(this._properties);return e.push(...i),this._hierarchy&&this._getPropertyNamesInHierarchy(t,e),e}getProperty(t,e){if(this._checkBatchId(t),(0,sr.h)("string"==typeof e,e),this._binaryProperties){const i=this._binaryProperties[e];if(Zl(i))return this._getBinaryProperty(i,t)}const i=this._properties[e];if(Zl(i))return Hl(i[t]);if(this._hierarchy){const i=this._getHierarchyProperty(t,e);if(Zl(i))return i}}setProperty(t,e,i){const n=this.featureCount;if(this._checkBatchId(t),(0,sr.h)("string"==typeof e,e),this._binaryProperties){const n=this._binaryProperties[e];if(n)return void this._setBinaryProperty(n,t,i)}if(this._hierarchy&&this._setHierarchyProperty(this,t,e,i))return;let r=this._properties[e];Zl(r)||(this._properties[e]=new Array(n),r=this._properties[e]),r[t]=Hl(i)}_checkBatchId(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}_getBinaryProperty(t,e){return t.unpack(t.typedArray,e)}_setBinaryProperty(t,e,i){t.pack(i,t.typedArray,e)}_initializeBinaryProperties(){let t=null;for(const e in this._properties){const i=this._properties[e],n=this._initializeBinaryProperty(e,i);n&&(t=t||{},t[e]=n)}return t}_initializeBinaryProperty(t,e){if("byteOffset"in e){const i=e;(0,sr.h)(this.binary,"Property ".concat(t," requires a batch table binary.")),(0,sr.h)(i.type,"Property ".concat(t," requires a type."));const n=function(t,e,i,n){const{componentType:r}=t;(0,sr.h)(t.componentType);const o="string"==typeof r?Dl.fromName(r):r,s=Fl[t.type],a=Rl[t.type],l=Nl[t.type];return i+=t.byteOffset,{values:Dl.createTypedArray(o,e,i,s*n),type:o,size:s,unpacker:a,packer:l}}(i,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:n.values,componentCount:n.size,unpack:n.unpacker,pack:n.packer}}return null}_hasPropertyInHierarchy(t,e){if(!this._hierarchy)return!1;const i=jl(this._hierarchy,t,((t,i)=>{const n=t.classIds[i];return Zl(t.classes[n].instances[e])}));return Zl(i)}_getPropertyNamesInHierarchy(t,e){jl(this._hierarchy,t,((t,i)=>{const n=t.classIds[i],r=t.classes[n].instances;for(const t in r)r.hasOwnProperty(t)&&-1===e.indexOf(t)&&e.push(t)}))}_getHierarchyProperty(t,e){return jl(this._hierarchy,t,((t,i)=>{const n=t.classIds[i],r=t.classes[n],o=t.classIndexes[i],s=r.instances[e];return Zl(s)?Zl(s.typedArray)?this._getBinaryProperty(s,o):Hl(s[o]):null}))}_setHierarchyProperty(t,e,i,n){const r=jl(this._hierarchy,e,((t,r)=>{const o=t.classIds[r],s=t.classes[o],a=t.classIndexes[r],l=s.instances[i];return!!Zl(l)&&((0,sr.h)(r===e,'Inherited property "'.concat(i,'" is read-only.')),Zl(l.typedArray)?this._setBinaryProperty(l,a,n):l[a]=Hl(n),!0)}));return Zl(r)}}function Wl(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=new DataView(e);if(t.magic=n.getUint32(i,!0),i+=4,t.version=n.getUint32(i,!0),i+=4,t.byteLength=n.getUint32(i,!0),i+=4,1!==t.version)throw new Error("3D Tile Version ".concat(t.version," not supported"));return i}const ql="b3dm tile in legacy format.";function Ql(t,e,i){const n=new DataView(e);let r;t.header=t.header||{};let o=n.getUint32(i,!0);i+=4;let s=n.getUint32(i,!0);i+=4;let a=n.getUint32(i,!0);i+=4;let l=n.getUint32(i,!0);return i+=4,a>=570425344?(i-=8,r=o,a=s,l=0,o=0,s=0,console.warn(ql)):l>=570425344&&(i-=4,r=a,a=o,l=s,o=0,s=0,console.warn(ql)),t.header.featureTableJsonByteLength=o,t.header.featureTableBinaryByteLength=s,t.header.batchTableJsonByteLength=a,t.header.batchTableBinaryByteLength=l,t.header.batchLength=r,i}function Yl(t,e,i,n){return i=function(t,e,i,n){const{featureTableJsonByteLength:r,featureTableBinaryByteLength:o,batchLength:s}=t.header;if(t.featureTableJson={BATCH_LENGTH:s||0},r>0){const n=Tl(e,i,r);t.featureTableJson=JSON.parse(n)}return i+=r,t.featureTableBinary=new Uint8Array(e,i,o),i+o}(t,e,i),i=function(t,e,i,n){const{batchTableJsonByteLength:r,batchTableBinaryByteLength:o}=t.header;if(r>0){const n=Tl(e,i,r);t.batchTableJson=JSON.parse(n),i+=r,o>0&&(t.batchTableBinary=new Uint8Array(e,i,o),t.batchTableBinary=new Uint8Array(t.batchTableBinary),i+=o)}return i}(t,e,i),i}function Xl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];const i=t>>11&31,n=t>>5&63,r=31&t;return e[0]=i<<3,e[1]=n<<2,e[2]=r<<3,e}function Jl(t,e,i){if(!(e||t&&t.batchIds&&i))return null;const{batchIds:n,isRGB565:r,pointCount:o}=t;if(n&&i){const t=new Uint8ClampedArray(3*o);for(let e=0;e<o;e++){const r=n[e],o=i.getProperty(r,"dimensions").map((t=>255*t));t[3*e]=o[0],t[3*e+1]=o[1],t[3*e+2]=o[2]}return{type:Pl.UNSIGNED_BYTE,value:t,size:3,normalized:!0}}if(r){const t=new Uint8ClampedArray(3*o);for(let i=0;i<o;i++){const n=Xl(e[i]);t[3*i]=n[0],t[3*i+1]=n[1],t[3*i+2]=n[2]}return{type:Pl.UNSIGNED_BYTE,value:t,size:3,normalized:!0}}return e&&e.length===3*o?{type:Pl.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:Pl.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}class Kl extends Nt.Z{constructor(t=0,e=0){super(2),(0,ht.kJ)(t)&&1===arguments.length?this.copy(t):(ht.vc.debug&&((0,Et.u5)(t),(0,Et.u5)(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return ht.vc.debug&&((0,Et.u5)(t.x),(0,Et.u5)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Mt.fF(this,this,t),this.check()}transformAsVector(t){return(0,kt.pb)(this,this,t),this.check()}transformByMatrix3(t){return Mt.kK(this,this,t),this.check()}transformByMatrix2x3(t){return Mt.iu(this,this,t),this.check()}transformByMatrix2(t){return Mt.c(this,this,t),this.check()}}function $l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return(0,ht.uZ)(t,0,e)/e*2-1}function tc(t){return t<0?-1:1}function ec(t,e,i){return function(t,e,i,n){if(function(t,e){if(!t)throw new Error("math.gl assertion failed. ".concat(void 0))}(n),t<0||t>i||e<0||e>i)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(i));if(n.x=$l(t,i),n.y=$l(e,i),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){const t=n.x;n.x=(1-Math.abs(n.y))*tc(t),n.y=(1-Math.abs(t))*tc(n.y)}return n.normalize()}(t,e,255,i)}new Kl,new gt.Z,new Kl,new Kl,new Uint8Array(1);const ic=new gt.Z;async function nc(t,e,i,n,r){i=Yl(t,e,i=Ql(t,e,i=Wl(t,e,i))),function(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}(t);const{featureTable:o,batchTable:s}=function(t){const e=new Ll(t.featureTableJson,t.featureTableBinary),i=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(i))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=i,t.featuresLength=i,t.pointsLength=i,t.pointCount=i,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",Pl.FLOAT,3);const n=function(t,e){let i=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",Pl.UNSIGNED_SHORT,1),t.batchIds)){const n=e.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");const{batchTableJson:r,batchTableBinary:o}=t;i=new Vl(r,o,n)}return i}(t,e);return{featureTable:e,batchTable:n}}(t);return await async function(t,e,i,n,r){let o,s,a;const l=t.batchTableJson&&t.batchTableJson.extensions&&t.batchTableJson.extensions["3DTILES_draco_point_compression"];l&&(a=l.properties);const c=e.getExtension("3DTILES_draco_point_compression");if(c){s=c.properties;const e=c.byteOffset,i=c.byteLength;if(!s||!Number.isFinite(e)||!i)throw new Error("Draco properties, byteOffset, and byteLength must be defined");o=t.featureTableBinary.slice(e,e+i),t.hasPositions=Number.isFinite(s.POSITION),t.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),t.hasNormals=Number.isFinite(s.NORMAL),t.hasBatchIds=Number.isFinite(s.BATCH_ID),t.isTranslucent=Number.isFinite(s.RGBA)}if(!o)return!0;const u={buffer:o,properties:{...s,...a},featureTableProperties:s,batchTableProperties:a,dequantizeInShader:!1};return await async function(t,e,i,n){const{parse:r}=n,o={...i,draco:{...i.draco,extraAttributes:e.batchTableProperties||{}}};delete o["3d-tiles"];const s=await r(e.buffer,Eo,o),a=s.attributes.POSITION&&s.attributes.POSITION.value,l=s.attributes.COLOR_0&&s.attributes.COLOR_0.value,c=s.attributes.NORMAL&&s.attributes.NORMAL.value,u=s.attributes.BATCH_ID&&s.attributes.BATCH_ID.value,h=a&&s.attributes.POSITION.value.quantization,d=c&&s.attributes.NORMAL.value.quantization;if(h){const e=s.POSITION.data.quantization,i=e.range;t.quantizedVolumeScale=new gt.Z(i,i,i),t.quantizedVolumeOffset=new gt.Z(e.minValues),t.quantizedRange=(1<<e.quantizationBits)-1,t.isQuantizedDraco=!0}d&&(t.octEncodedRange=(1<<s.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0);const A={};if(e.batchTableProperties)for(const t of Object.keys(e.batchTableProperties))s.attributes[t]&&s.attributes[t].value&&(A[t.toLowerCase()]=s.attributes[t].value);t.attributes={positions:a,colors:Jl(t,l,void 0),normals:c,batchIds:u,...A}}(t,u,n,r)}(t,o,0,n,r),function(t,e,i){if(!t.attributes.positions)if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",Pl.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){const n=e.getPropertyArray("POSITION_QUANTIZED",Pl.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Pl.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Pl.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=function(t,e,i){return t.isQuantized?i["3d-tiles"]&&i["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,function(t,e){const i=new gt.Z,n=new Float32Array(3*t.pointCount);for(let r=0;r<t.pointCount;r++)i.set(e[3*r],e[3*r+1],e[3*r+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(n,3*r);return n}(t,e)):{type:Pl.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}(t,n,i)}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}(t,o,n),function(t,e,i){if(!t.attributes.colors){let n=null;e.hasProperty("RGBA")?(n=e.getPropertyArray("RGBA",Pl.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?n=e.getPropertyArray("RGB",Pl.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(n=e.getPropertyArray("RGB565",Pl.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=Jl(t,n,i)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",Pl.UNSIGNED_BYTE,4))}(t,o,s),function(t,e){if(!t.attributes.normals){let i=null;e.hasProperty("NORMAL")?i=e.getPropertyArray("NORMAL",Pl.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(i=e.getPropertyArray("NORMAL_OCT16P",Pl.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=function(t,e){if(!e)return null;if(t.isOctEncoded16P){const i=new Float32Array(3*t.pointsLength);for(let n=0;n<t.pointsLength;n++)ec(e[2*n],e[2*n+1],ic),ic.toArray(i,3*n);return{type:Pl.FLOAT,size:2,value:i}}return{type:Pl.FLOAT,size:2,value:e}}(t,i)}}(t,o),i}function rc(t,e,i,n){t.rotateYtoZ=!0;const r=t.byteOffset+t.byteLength-i;if(0===r)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=(0,ir.qv)(e,i,r),t.gltfByteOffset=0,t.gltfByteLength=r,i%4==0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}async function oc(t,e,i,n){const r=i["3d-tiles"]||{};if(function(t,e,i){switch(e){case 0:const e=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),i=(new TextDecoder).decode(e);t.gltfUrl=i.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case 1:break;default:throw new Error("b3dm: Illegal glTF format field")}}(t,e),r.loadGLTF){const{parse:e,fetch:r}=n;t.gltfUrl&&(t.gltfArrayBuffer=await r(t.gltfUrl,i),t.gltfByteOffset=0),t.gltfArrayBuffer&&(t.gltf=await e(t.gltfArrayBuffer,Ns,i,n),t.gpuMemoryUsageInBytes=vr(t.gltf),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength)}}async function sc(t,e,i,n,r){var o;i=function(t,e,i,n,r){i=rc(t,e,i=Yl(t,e,i=Ql(t,e,i=Wl(t,e,i))),n);const o=new Ll(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=o.getGlobalProperty("RTC_CENTER",Pl.FLOAT,3),i}(t,e,i,n),await oc(t,1,n,r);const s=null==t||null===(o=t.gltf)||void 0===o?void 0:o.extensions;return s&&s.CESIUM_RTC&&(t.rtcCenter=s.CESIUM_RTC.center),i}async function ac(t,e,i,n,r){return i=function(t,e,i,n,r){if(i=Wl(t,e,i),1!==t.version)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));i=Ql(t,e,i);const o=new DataView(e);if(t.gltfFormat=o.getUint32(i,!0),i=rc(t,e,i=Yl(t,e,i+=4),n),0===t.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");const s=new Ll(t.featureTableJson,t.featureTableBinary),a=s.getGlobalProperty("INSTANCES_LENGTH");if(s.featuresLength=a,!Number.isFinite(a))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");return t.eastNorthUp=s.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=s.getGlobalProperty("RTC_CENTER",Pl.FLOAT,3),new Vl(t.batchTableJson,t.batchTableBinary,a),function(t,e,i,n){const r=[new Array(n),t._batchTable][0],o=new gt.Z,s=new gt.Z,a=new gt.Z,l=new gt.Z,c=new Dt,u=new re,h=new gt.Z,d={},A=new ut.Z,f=[],p=[],g=new gt.Z,m=new gt.Z;for(let i=0;i<n;i++){let n;if(e.hasProperty("POSITION"))n=e.getProperty("POSITION",Pl.FLOAT,3,i,o);else if(e.hasProperty("POSITION_QUANTIZED")){n=e.getProperty("POSITION_QUANTIZED",Pl.UNSIGNED_SHORT,3,i,o);const t=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Pl.FLOAT,3,g);if(!t)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const r=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Pl.FLOAT,3,m);if(!r)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const s=65535;for(let e=0;e<3;e++)n[e]=n[e]/s*r[e]+t[e]}if(!n)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");o.copy(n),d.translation=o,t.normalUp=e.getProperty("NORMAL_UP",Pl.FLOAT,3,i,f),t.normalRight=e.getProperty("NORMAL_RIGHT",Pl.FLOAT,3,i,p);const v=!1;if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",Pl.UNSIGNED_SHORT,2,f),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",Pl.UNSIGNED_SHORT,2,p),t.octNormalUp){if(!t.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}t.eastNorthUp?(wa.WGS84.eastNorthUpToFixedFrame(o,A),A.getRotationMatrix3(c)):c.identity()}v&&(l.copy(s).cross(a).normalize(),c.setColumn(0,s),c.setColumn(1,a),c.setColumn(2,l)),u.fromMatrix3(c),d.rotation=u,h.set(1,1,1);const y=e.getProperty("SCALE",Pl.FLOAT,1,i);Number.isFinite(y)&&h.multiplyByScalar(y);const b=e.getProperty("SCALE_NON_UNIFORM",Pl.FLOAT,3,i,f);b&&h.scale(b),d.scale=h;let _=e.getProperty("BATCH_ID",Pl.UNSIGNED_SHORT,1,i);void 0===_&&(_=i);const w=(new ut.Z).fromQuaternion(d.rotation);A.identity(),A.translate(d.translation),A.multiplyRight(w),A.scale(d.scale);const x=A.clone();r[i]={modelMatrix:x,batchId:_}}t.instances=r}(t,s,0,a),i}(t,e,i,n),await oc(t,t.gltfFormat,n,r),i}async function lc(t,e,i,n,r,o){i=Wl(t,e,i);const s=new DataView(e);for(t.tilesLength=s.getUint32(i,!0),i+=4,t.tiles=[];t.tiles.length<t.tilesLength&&t.byteLength-i>12;){const s={};t.tiles.push(s),i=await o(e,i,n,r,s)}return i}async function cc(t,e,i,n){t.rotateYtoZ=!0,t.gltfUpAxis=i["3d-tiles"]&&i["3d-tiles"].assetGltfUpAxis?i["3d-tiles"].assetGltfUpAxis:"Y";const{parse:r}=n;t.gltf=await r(e,Ns,i,n),t.gpuMemoryUsageInBytes=vr(t.gltf)}async function uc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};switch(r.byteOffset=e,r.type=Bl(t,e),r.type){case kl.COMPOSITE:return await lc(r,t,e,i,n,uc);case kl.BATCHED_3D_MODEL:return await sc(r,t,e,i,n);case kl.GLTF:return await cc(r,t,i,n);case kl.INSTANCED_3D_MODEL:return await ac(r,t,e,i,n);case kl.POINT_CLOUD:return await nc(r,t,e,i,n);default:throw new Error("3DTileLoader: unknown type ".concat(r.type))}}async function hc(t,e,i,n){const r=t[e].bufferView,o=t.bufferViews[r],s=t.buffers[o.buffer];if(null==n||!n.url||!n.fetch)throw new Error("Url is not provided");if(!n.fetch)throw new Error("fetch is not provided");if(s.uri){const t=function(t,e){if(e.startsWith("http")){const i=new URL(t,e);return decodeURI(i.toString())}const i="http://".concat(e),n=new URL(t,i);return"/".concat(n.host).concat(n.pathname)}(s.uri,null==n?void 0:n.url),e=await n.fetch(t),i=await e.arrayBuffer();return new Uint8Array(i,o.byteOffset,o.byteLength)}return new Uint8Array(i,o.byteOffset,o.byteLength)}function dc(t){const e=new DataView(t);return e.getUint32(0,!0)+2**32*e.getUint32(4,!0)}const Ac={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:El,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:async function(t,e,i){if(1952609651!==new Uint32Array(t.slice(0,4))[0])throw new Error("Wrong subtree file magic number");if(1!==new Uint32Array(t.slice(4,8))[0])throw new Error("Wrong subtree file verson, must be 1");const n=dc(t.slice(8,16)),r=new Uint8Array(t,24,n),o=new TextDecoder("utf8").decode(r),s=JSON.parse(o),a=dc(t.slice(16,24));let l=new ArrayBuffer(0);return a&&(l=t.slice(24+n)),"bufferView"in s.tileAvailability&&(s.tileAvailability.explicitBitstream=await hc(s,"tileAvailability",l,i)),"bufferView"in s.contentAvailability&&(s.contentAvailability.explicitBitstream=await hc(s,"contentAvailability",l,i)),"bufferView"in s.childSubtreeAvailability&&(s.childSubtreeAvailability.explicitBitstream=await hc(s,"childSubtreeAvailability",l,i)),s},options:{}},fc={QUADTREE:4,OCTREE:8};async function pc(t){const{options:e,parentData:i={mortonIndex:0,x:0,y:0,z:0},childIndex:n=0,globalData:r={level:0,mortonIndex:0,x:0,y:0,z:0}}=t;let{subtree:o,level:s=0}=t;const{subdivisionScheme:a,subtreeLevels:l,maximumLevel:c,contentUrlTemplate:u,subtreesUriTemplate:h,basePath:d}=e,A={children:[],lodMetricValue:0,contentUrl:""},f=fc[a],p=1&n,g=n>>1&1,m=n>>2&1,v=(f**s-1)/(f-1);let y=vc(i.mortonIndex,n),b=v+y,_=vc(i.x,p),w=vc(i.y,g),x=vc(i.z,m),C=!1;s+1>l&&(C=gc(o.childSubtreeAvailability,y));const E=vc(r.x,_),k=vc(r.y,w),T=vc(r.z,x),B=s+r.level;if(C){const t=yc("".concat(d,"/").concat(h),B,E,k,T);o=await(0,ta.z)(t,Ac),r.mortonIndex=y,r.x=_,r.y=w,r.z=x,r.level=s,y=0,b=0,_=0,w=0,x=0,s=0}if(!gc(o.tileAvailability,b)||s>c)return A;gc(o.contentAvailability,b)&&(A.contentUrl=yc(u,B,E,k,T));const S=s+1,P={mortonIndex:y,x:_,y:w,z:x};for(let t=0;t<f;t++){const i=await pc({subtree:o,options:e,parentData:P,childIndex:t,level:S,globalData:r});if(i.contentUrl||i.children.length){const t=mc(i,B+1,{childTileX:_,childTileY:w,childTileZ:x},e);A.children.push(t)}}return A}function gc(t,e){return"constant"in t?Boolean(t.constant):!!t.explicitBitstream&&function(t,e){const i=t%8;return 1==(e[Math.floor(t/8)]>>i&1)}(e,t.explicitBitstream)}function mc(t,e,i,n){const{basePath:r,refine:o,getRefine:s,lodMetricType:a,getTileType:l,rootLodMetricValue:c,rootBoundingVolume:u}=n,h=t.contentUrl&&t.contentUrl.replace("".concat(r,"/"),""),d=c/2**e,A=function(t,e,i){if(e.region){const{childTileX:n,childTileY:r,childTileZ:o}=i,[s,a,l,c,u,h]=e.region,d=2**t,A=(l-s)/d,f=(c-a)/d,p=(h-u)/d,[g,m]=[s+A*n,s+A*(n+1)],[v,y]=[a+f*r,a+f*(r+1)],[b,_]=[u+p*o,u+p*(o+1)];return{region:[g,v,m,y,b,_]}}return console.warn("Unsupported bounding volume type: ",e),null}(e,u,i);return{children:t.children,contentUrl:t.contentUrl,content:{uri:h},id:t.contentUrl,refine:s(o),type:l(t),lodMetricType:a,lodMetricValue:d,geometricError:d,transform:t.transform,boundingVolume:A}}function vc(t,e){return parseInt(t.toString(2)+e.toString(2),2)}function yc(t,e,i,n,r){const o=function(t){const e={};for(const i in t)e["{".concat(i,"}")]=t[i];return e}({level:e,x:i,y:n,z:r});return t.replace(/{level}|{x}|{y}|{z}/gi,(t=>o[t]))}function bc(t){if(!t.contentUrl)return"empty";const e=t.contentUrl.split("?")[0].split(".").pop();switch(e){case"pnts":return Na;case"i3dm":case"b3dm":case"glb":case"gltf":return Ra;default:return e}}function _c(t){switch(t){case"REPLACE":case"replace":return 2;case"ADD":case"add":return 1;default:return t}}function wc(t,e){if(/^[a-z][0-9a-z+.-]*:/i.test(e)){const i=new URL(t,"".concat(e,"/"));return decodeURI(i.toString())}return t.startsWith("/")?t:"".concat(e,"/").concat(t)}function xc(t,e){if(!t)return null;if(t.content){const i=t.content.uri||t.content.url;t.contentUrl=wc(i,e.basePath)}return t.id=t.contentUrl,t.lodMetricType=Ua,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=bc(t),t.refine=_c(t.refine),t}async function Cc(t,e,i,n){var r;const o=e.basePath,{subdivisionScheme:s,maximumLevel:a,subtreeLevels:l,subtrees:{uri:c}}=i,u=wc(yc(c,0,0,0,0),o),h=await(0,ta.z)(u,Ac,n),d=wc(t.content.uri,o),A=null==e||null===(r=e.root)||void 0===r?void 0:r.refine,f=t.geometricError,p=t.boundingVolume,g={contentUrlTemplate:d,subtreesUriTemplate:c,subdivisionScheme:s,subtreeLevels:l,maximumLevel:a,refine:A,basePath:o,lodMetricType:Ua,rootLodMetricValue:f,rootBoundingVolume:p,getTileType:bc,getRefine:_c};return await async function(t,e,i){if(!t)return null;t.lodMetricType=Ua,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform;const{children:n,contentUrl:r}=await pc({subtree:e,options:i});return r&&(t.contentUrl=r,t.content={uri:r.replace("".concat(i.basePath,"/"),"")}),t.refine=_c(t.refine),t.type=bc(t),t.children=n,t.id=t.contentUrl,t}(t,h,g)}function Ec(t){var e;return(null==t||null===(e=t.extensions)||void 0===e?void 0:e["3DTILES_implicit_tiling"])||(null==t?void 0:t.implicitTiling)}const kc={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:El,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:async function(t,e,i){const n=e["3d-tiles"]||{};let r;return r="auto"===n.isTileset?i.url&&-1!==i.url.indexOf(".json"):n.isTileset,t=r?await async function(t,e,i){var n;const r=JSON.parse((new TextDecoder).decode(t));return r.loader=e.loader||kc,r.url=i.url,r.basePath=(o=r,xa.XX(o.url)),r.root=await async function(t,e){const i=t.basePath;let n;const r=Ec(null==t?void 0:t.root);n=r&&t.root?await Cc(t.root,t,r,e):xc(t.root,t);const o=[];for(o.push(n);o.length>0;){const n=(o.pop()||{}).children||[];for(let r of n){const n=Ec(r);n?r=await Cc(r,t,n,e):xc(r,{basePath:i}),o.push(r)}}return n}(r,e),r.type=ja,r.lodMetricType=Ua,r.lodMetricValue=(null===(n=r.root)||void 0===n?void 0:n.lodMetricValue)||0,r;var o}(t,e,i):await async function(t,e,i){const n={content:{featureIds:null}};return await uc(t,0,e,i,n.content),n.content}(t,e,i),t},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}},Tc=[0],Bc={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:"",loader:kc,onTilesetLoad:{type:"function",value:t=>{}},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:(t,e,i)=>{}},_getMeshColor:{type:"function",value:t=>[255,255,255]}};class Sc extends A.Z{constructor(...t){super(...t),(0,d.Z)(this,"state",void 0)}initializeState(){"onTileLoadFail"in this.props&&Hi.Z.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}get isLoaded(){const{tileset3d:t}=this.state;return null!==t&&t.isLoaded()}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({props:t,oldProps:e,changeFlags:i}){if(t.data&&t.data!==e.data&&this._loadTileset(t.data),i.viewportChanged){const{activeViewports:t}=this.state;Object.keys(t).length&&(this._updateTileset(t),this.state.lastUpdatedViewports=t,this.state.activeViewports={})}if(i.propsChanged){const{layerMap:t}=this.state;for(const e in t)t[e].needsUpdate=!0}}activateViewport(t){const{activeViewports:e,lastUpdatedViewports:i}=this.state;this.internalState.viewport=t,e[t.id]=t;const n=null==i?void 0:i[t.id];n&&t.equals(n)||(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}getPickingInfo({info:t,sourceLayer:e}){const i=e&&e.props.tile;return t.picked&&(t.object=i),t.sourceTile=i,t}filterSubLayer({layer:t,viewport:e}){const{tile:i}=t.props,{id:n}=e;return i.selected&&i.viewportIds.includes(n)}_updateAutoHighlight(t){const e=t.sourceTile,i=this.state.layerMap[null==e?void 0:e.id];i&&i.layer&&i.layer.updateAutoHighlight(t)}async _loadTileset(t){const{loadOptions:e={}}=this.props;let i=this.props.loader||this.props.loaders;Array.isArray(i)&&(i=i[0]);const n={loadOptions:{...e}};if(i.preload){const r=await i.preload(t,e);r.headers&&(n.loadOptions.fetch={...n.loadOptions.fetch,headers:r.headers}),Object.assign(n,r)}const r=await(0,ta.z)(t,i,n.loadOptions),o=new Cl(r,{onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError,...n});this.setState({tileset3d:o,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(o)}_onTileLoad(t){const{lastUpdatedViewports:e}=this.state;this.props.onTileLoad(t),this._updateTileset(e),this.setNeedsUpdate()}_onTileUnload(t){delete this.state.layerMap[t.id],this.props.onTileUnload(t)}_updateTileset(t){if(!t)return;const{tileset3d:e}=this.state,{timeline:i}=this.context,n=Object.keys(t).length;i&&n&&e&&e.selectTiles(Object.values(t)).then((t=>{this.state.frameNumber!==t&&this.setState({frameNumber:t})}))}_getSubLayer(t,e){if(!t.content)return null;switch(t.type){case Na:return this._makePointCloudLayer(t,e);case Ra:return this._make3DModelLayer(t);case"mesh":return this._makeSimpleMeshLayer(t,e);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(t.content.type))}}_makePointCloudLayer(t,e){const{attributes:i,pointCount:n,constantRGBA:r,cartographicOrigin:o,modelMatrix:s}=t.content,{positions:a,normals:l,colors:c}=i;if(!a)return null;const u=e&&e.props.data||{header:{vertexCount:n},attributes:{POSITION:a,NORMAL:l,COLOR_0:c}},{pointSize:h,getPointColor:d}=this.props;return new(this.getSubLayerClass("pointcloud",Gi.Z))({pointSize:h},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(t.id),tile:t,data:u,coordinateSystem:p.Df.METER_OFFSETS,coordinateOrigin:o,modelMatrix:s,getColor:r||d,_offset:0})}_make3DModelLayer(t){const{gltf:e,instances:i,cartographicOrigin:n,modelMatrix:r}=t.content;return new(this.getSubLayerClass("scenegraph",Qs))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(t.id),tile:t,data:i||Tc,scenegraph:e,coordinateSystem:p.Df.METER_OFFSETS,coordinateOrigin:n,modelMatrix:r,getTransformMatrix:t=>t.modelMatrix,getPosition:[0,0,0],_offset:0})}_makeSimpleMeshLayer(t,e){const i=t.content,{attributes:n,indices:r,modelMatrix:o,cartographicOrigin:s,coordinateSystem:a=p.Df.METER_OFFSETS,material:l,featureIds:c}=i,{_getMeshColor:u}=this.props,h=e&&e.props.mesh||new Zi.Z({drawMode:4,attributes:Pc(n),indices:r});return new(this.getSubLayerClass("mesh",$s))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(t.id),tile:t,mesh:h,data:Tc,getColor:u(t),pbrMaterial:l,modelMatrix:o,coordinateOrigin:s,coordinateSystem:a,featureIds:c,_offset:0})}renderLayers(){const{tileset3d:t,layerMap:e}=this.state;return t?t.tiles.map((t=>{const i=e[t.id]=e[t.id]||{tile:t};let{layer:n}=i;return t.selected&&(n?i.needsUpdate&&(n=this._getSubLayer(t,n),i.needsUpdate=!1):n=this._getSubLayer(t)),i.layer=n,n})).filter(Boolean):null}}function Pc(t){const e={};return e.positions={...t.positions,value:new Float32Array(t.positions.value)},t.normals&&(e.normals=t.normals),t.texCoords&&(e.texCoords=t.texCoords),t.colors&&(e.colors=t.colors),t.uvRegions&&(e.uvRegions=t.uvRegions),e}(0,d.Z)(Sc,"defaultProps",Bc),(0,d.Z)(Sc,"layerName","Tile3DLayer");const Mc=[1],Ic={...li.defaultProps,elevationData:Ge,texture:{...Ge,optional:!0},meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:"",wireframe:!1,material:!0,loaders:[{name:"Terrain",id:"terrain",module:"terrain",version:"3.3.5",worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}}]};function Oc(t){return Array.isArray(t)?t.join(";"):t||""}class Dc extends A.Z{constructor(...t){super(...t),(0,d.Z)(this,"state",void 0)}updateState({props:t,oldProps:e}){const i=t.elevationData!==e.elevationData;if(i){const{elevationData:e}=t,i=e&&(Array.isArray(e)||e.includes("{x}")&&e.includes("{y}"));this.setState({isTiled:i})}const n=i||t.meshMaxError!==e.meshMaxError||t.elevationDecoder!==e.elevationDecoder||t.bounds!==e.bounds;if(!this.state.isTiled&&n){const e=this.loadTerrain(t);this.setState({terrain:e})}t.workerUrl&&Hi.Z.removed("workerUrl","loadOptions.terrain.workerUrl")()}loadTerrain({elevationData:t,bounds:e,elevationDecoder:i,meshMaxError:n,signal:r}){var o;if(!t)return null;let s=this.getLoadOptions();s={...s,terrain:{skirtHeight:this.state.isTiled?2*n:0,...null===(o=s)||void 0===o?void 0:o.terrain,bounds:e,meshMaxError:n,elevationDecoder:i}};const{fetch:a}=this.props;return a(t,{propName:"elevationData",layer:this,loadOptions:s,signal:r})}getTiledTerrainData(t){const{elevationData:e,fetch:i,texture:n,elevationDecoder:r,meshMaxError:o}=this.props,{viewport:s}=this.context,a=We(e,t),l=n&&We(n,t),{signal:c}=t;let u=[0,0],h=[0,0];if(s.isGeospatial){const e=t.bbox;u=s.projectFlat([e.west,e.south]),h=s.projectFlat([e.east,e.north])}else{const e=t.bbox;u=[e.left,e.bottom],h=[e.right,e.top]}const d=[u[0],u[1],h[0],h[1]],A=this.loadTerrain({elevationData:a,bounds:d,elevationDecoder:r,meshMaxError:o,signal:c}),f=l?i(l,{propName:"texture",layer:this,loaders:[],signal:c}).catch((t=>null)):Promise.resolve(null);return Promise.all([A,f])}renderSubLayers(t){const e=this.getSubLayerClass("mesh",Ks),{color:i,wireframe:n,material:r}=this.props,{data:o}=t;if(!o)return null;const[s,a]=o;return new e(t,{data:Mc,mesh:s,texture:a,_instanced:!1,coordinateSystem:p.Df.CARTESIAN,getPosition:t=>[0,0,0],getColor:i,wireframe:n,material:r})}onViewportLoad(t){if(!t)return;const{zRange:e}=this.state,i=t.map((t=>t.content)).filter(Boolean).map((t=>t[0].header.boundingBox.map((t=>t[2]))));if(0===i.length)return;const n=Math.min(...i.map((t=>t[0]))),r=Math.max(...i.map((t=>t[1])));(!e||n<e[0]||r>e[1])&&this.setState({zRange:[n,r]})}renderLayers(){const{color:t,material:e,elevationData:i,texture:n,wireframe:r,meshMaxError:o,elevationDecoder:s,tileSize:a,maxZoom:l,minZoom:c,extent:u,maxRequests:h,onTileLoad:d,onTileUnload:A,onTileError:f,maxCacheSize:p,maxCacheByteSize:g,refinementStrategy:m}=this.props;return this.state.isTiled?new li(this.getSubLayerProps({id:"tiles"}),{getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:Oc(i),texture:Oc(n),meshMaxError:o,elevationDecoder:s}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:a,maxZoom:l,minZoom:c,extent:u,maxRequests:h,onTileLoad:d,onTileUnload:A,onTileError:f,maxCacheSize:p,maxCacheByteSize:g,refinementStrategy:m}):new(this.getSubLayerClass("mesh",Ks))(this.getSubLayerProps({id:"mesh"}),{data:Mc,mesh:this.state.terrain,texture:n,_instanced:!1,getPosition:t=>[0,0,0],getColor:t,material:e,wireframe:r})}}(0,d.Z)(Dc,"defaultProps",Ic),(0,d.Z)(Dc,"layerName","TerrainLayer");var Lc=i(2424);i(5215);i(3614);function Fc(t,e){const i=null==e?void 0:e.globalFeatureId;return void 0!==i?function(t,e){const i=Nc(t);for(const t of i){let i=0,n=t.featureIds.value[0];for(let r=0;r<t.featureIds.value.length;r++){const o=t.featureIds.value[r];if(o!==n){if(e===t.globalFeatureIds.value[i])return zc(t,i,r);i=r,n=o}}if(e===t.globalFeatureIds.value[i])return zc(t,i,t.featureIds.value.length)}throw new Error("featureId:".concat(e," not found"))}(t,i):function(t,e){return function(t){const e=[];for(const i of t){if(0===i.featureIds.value.length)continue;let t=0,n=i.featureIds.value[0];for(let r=0;r<i.featureIds.value.length;r++){const o=i.featureIds.value[r];o!==n&&(e.push(zc(i,t,r)),t=r,n=o)}e.push(zc(i,t,i.featureIds.value.length))}return e}(Nc(t,e))}(t,null==e?void 0:e.type)}function Rc(t,e,i){switch(t.type){case"Point":return function(t,e,i){const{positions:n}=t,r=Uc(n,e,i);return r.length>1?{type:"MultiPoint",coordinates:r}:{type:"Point",coordinates:r[0]}}(t,e,i);case"LineString":return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const{positions:n}=t,r=t.pathIndices.value.filter((t=>t>=e&&t<=i));if(!(r.length>2))return{type:"LineString",coordinates:Uc(n,r[0],r[1])};const o=[];for(let t=0;t<r.length-1;t++){const e=Uc(n,r[t],r[t+1]);o.push(e)}return{type:"MultiLineString",coordinates:o}}(t,e,i);case"Polygon":return jc(t,e,i);default:const n=t;throw new Error("Unsupported geometry type: ".concat(null==n?void 0:n.type))}}function Nc(t,e){if(!Boolean(t.points||t.lines||t.polygons))return t.type=e||function(t){return t.pathIndices?"LineString":t.polygonIndices?"Polygon":"Point"}(t),[t];const i=[];return t.points&&(t.points.type="Point",i.push(t.points)),t.lines&&(t.lines.type="LineString",i.push(t.lines)),t.polygons&&(t.polygons.type="Polygon",i.push(t.polygons)),i}function zc(t,e,i){const n=Rc(t,e,i),r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=Object.assign({},t.properties[t.featureIds.value[e]]);for(const n in t.numericProps)i[n]=t.numericProps[n].value[e];return i}(t,e,i),o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.fields&&t.fields[t.featureIds.value[e]]}(t,e,i);return{type:"Feature",geometry:n,properties:r,...o}}function jc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const{positions:n}=t,r=t.polygonIndices.value.filter((t=>t>=e&&t<=i)),o=t.primitivePolygonIndices.value.filter((t=>t>=e&&t<=i)),s=r.length>2;if(!s){const t=[];for(let e=0;e<o.length-1;e++){const i=Uc(n,o[e],o[e+1]);t.push(i)}return{type:"Polygon",coordinates:t}}const a=[];for(let e=0;e<r.length-1;e++){const i=jc(t,r[e],r[e+1]).coordinates;a.push(i)}return{type:"MultiPolygon",coordinates:a}}function Uc(t,e,i){e=e||0,i=i||t.value.length/t.size;const n=[];for(let r=e;r<i;r++){const e=Array();for(let i=r*t.size;i<(r+1)*t.size;i++)e.push(Number(t.value[i]));n.push(e)}return n}const Zc={Point:Hc,MultiPoint:function(t,e,i){return Gc(t,e,i)},LineString:Vc,MultiLineString:function(t,e,i){return t.map((t=>Vc(t,e,i)))},Polygon:Wc,MultiPolygon:function(t,e,i){return t.map((t=>Wc(t,e,i)))}};function Hc([t,e],[i,n],r){const o=(0,ht.t7)(i[0],n[0],t),s=(0,ht.t7)(i[1],n[1],e);return r.unprojectFlat([o,s])}function Gc(t,e,i){return t.map((t=>Hc(t,e,i)))}function Vc(t,e,i){return Gc(t,e,i)}function Wc(t,e,i){return t.map((t=>Gc(t,e,i)))}const qc=["points","lines","polygons"];function Qc(t,e,i,n){const r=t.featureIds.value;if(!r.length)return-1;let o=0,s=r[r.length-1]+1;if(n){const e=function(t,e){if(!t.__layers){const e={},{properties:i}=t;for(let t=0;t<i.length;t++){const{layerName:n}=i[t];n&&(e[n]?e[n][1]=t:e[n]=[t,t])}t.__layers=e}return t.__layers[e]}(t,n);if(!e)return-1;o=e[0],s=e[1]+1}let a=-1;if(e in t.numericProps){const n=t.numericProps[e].value.findIndex(((t,e)=>t===i&&r[e]>=o&&r[e]<s));return n>=0?t.globalFeatureIds.value[n]:-1}return e?a=Yc(t.properties,(t=>t[e]===i),o,s):t.fields&&(a=Yc(t.fields,(t=>t.id===i),o,s)),a>=0?function(t,e){if(!t.__ids){const e=[],i=t.featureIds.value,n=t.globalFeatureIds.value;for(let t=0;t<i.length;t++)e[i[t]]=n[t];t.__ids=e}return t.__ids[e]}(t,a):-1}function Yc(t,e,i,n){for(let r=i;r<n;r++)if(e(t[r],r))return r;return-1}const Xc={...st.Z.defaultProps,data:Ge,onDataLoad:{type:"function",value:null,optional:!0,compare:!1},uniqueIdProperty:"",highlightedFeatureId:null,loaders:[{name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:"3.3.5",extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:{mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}}}],binary:!0};class Jc extends li{initializeState(){super.initializeState();const t=void 0===this.context.viewport.resolution&&this.props.binary;this.setState({binary:t,data:null,tileJSON:null})}get isLoaded(){return this.state&&this.state.data&&this.state.tileset&&super.isLoaded}updateState({props:t,oldProps:e,context:i,changeFlags:n}){var r;n.dataChanged&&this._updateTileData(),null!==(r=this.state)&&void 0!==r&&r.data&&(super.updateState({props:t,oldProps:e,context:i,changeFlags:n}),this._setWGS84PropertyForTiles());const{highlightColor:o}=t;o!==e.highlightColor&&Array.isArray(o)&&this.setState({highlightColor:o})}async _updateTileData(){let t=this.props.data,e=null;if("string"!=typeof t||function(t){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(t)}(t))t.tilejson&&(e=t);else{const{onDataLoad:i,fetch:n}=this.props;this.setState({data:null,tileJSON:null});try{e=await n(t,{propName:"data",layer:this,loaders:[]})}catch(e){this.raiseError(e,"loading TileJSON"),t=null}i&&i(e,{propName:"data",layer:this})}e&&(t=e.tiles),this.setState({data:t,tileJSON:e})}_getTilesetOptions(){const t=super._getTilesetOptions(),e=this.state.tileJSON,{minZoom:i,maxZoom:n}=this.props;return e&&(Number.isFinite(e.minzoom)&&e.minzoom>i&&(t.minZoom=e.minzoom),Number.isFinite(e.maxzoom)&&(!Number.isFinite(n)||e.maxzoom<n)&&(t.maxZoom=e.maxzoom)),t}renderLayers(){var t;return null!==(t=this.state)&&void 0!==t&&t.data?super.renderLayers():null}getTileData(t){var e;const{data:i,binary:n}=this.state,{index:r,signal:o}=t,s=We(i,t);if(!s)return Promise.reject("Invalid URL");let a=this.getLoadOptions();const{fetch:l}=this.props;return a={...a,mimeType:"application/x-protobuf",mvt:{...null===(e=a)||void 0===e?void 0:e.mvt,coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:r},gis:n?{format:"binary"}:{}},l(s,{propName:"data",layer:this,loadOptions:a,signal:o})}renderSubLayers(t){const{x:e,y:i,z:n}=t.tile.index,r=Math.pow(2,n),o=512/r,s=-o,a=512*e/r,l=512*(1-i/r),c=(new ut.Z).scale([o,s,1]);t.autoHighlight=!1,this.context.viewport.resolution||(t.modelMatrix=c,t.coordinateOrigin=[a,l,0],t.coordinateSystem=p.Df.CARTESIAN,t.extensions=[...t.extensions||[],new Lc.Z]);const u=super.renderSubLayers(t);return!this.state.binary||u instanceof st.Z||Hi.Z.warn("renderSubLayers() must return GeoJsonLayer when using binary:true")(),u}_updateAutoHighlight(t){const{uniqueIdProperty:e}=this.props,{hoveredFeatureId:i,hoveredFeatureLayerName:n}=this.state,r=t.object;let o,s;r&&(o=Kc(r,e),s=$c(r));let{highlightColor:a}=this.props;"function"==typeof a&&(a=a(t)),i===o&&n===s||this.setState({highlightColor:a,hoveredFeatureId:o,hoveredFeatureLayerName:s})}getPickingInfo(t){const e=super.getPickingInfo(t),i=Boolean(this.context.viewport.resolution);if(this.state.binary&&-1!==e.index){const{data:i}=t.sourceLayer.props;e.object=Fc(i,{globalFeatureId:e.index})}return e.object&&!i&&(e.object=eu(e.object,e.tile.bbox,this.context.viewport)),e}getSubLayerPropsByTile(t){return{highlightedObjectIndex:this.getHighlightedObjectIndex(t),highlightColor:this.state.highlightColor}}getHighlightedObjectIndex(t){const{hoveredFeatureId:e,hoveredFeatureLayerName:i,binary:n}=this.state,{uniqueIdProperty:r,highlightedFeatureId:o}=this.props,s=t.content,a=tu(o);if(!tu(e)&&!a)return-1;const l=a?o:e;return Array.isArray(s)?s.findIndex((t=>{const e=Kc(t,r)===l,n=a||$c(t)===i;return e&&n})):s&&n?function(t,e,i,n){for(const r of qc){const o=t[r]&&Qc(t[r],e,i,n);if(o>=0)return o}return-1}(s,r,l,a?"":i):-1}_pickObjects(t){const{deck:e,viewport:i}=this.context,n=i.width,r=i.height,o=i.x,s=i.y,a=[this.id];return e.pickObjects({x:o,y:s,width:n,height:r,layerIds:a,maxObjects:t})}getRenderedFeatures(t=null){const e=this._pickObjects(t),i=new Set,n=[];for(const t of e){const e=Kc(t.object,this.props.uniqueIdProperty);void 0===e?n.push(t.object):i.has(e)||(i.add(e),n.push(t.object))}return n}_setWGS84PropertyForTiles(){const t="dataInWGS84";this.state.tileset.selectedTiles.forEach((e=>{e.hasOwnProperty(t)||Object.defineProperty(e,t,{get:()=>{if(!e.content)return null;if(this.state.binary&&Array.isArray(e.content)&&!e.content.length)return[];const{bbox:t}=e;if(void 0===e._contentWGS84&&(i=t,Number.isFinite(i.west)&&Number.isFinite(i.north)&&Number.isFinite(i.east)&&Number.isFinite(i.south))){const i=this.state.binary?Fc(e.content):e.content;e._contentWGS84=i.map((e=>eu(e,t,this.context.viewport)))}var i;return e._contentWGS84}})}))}}function Kc(t,e){return t.properties&&e?t.properties[e]:"id"in t?t.id:void 0}function $c(t){var e;return(null===(e=t.properties)||void 0===e?void 0:e.layerName)||null}function tu(t){return null!=t&&""!==t}function eu(t,e,i){const n={...t,geometry:{type:t.geometry.type}};return Object.defineProperty(n.geometry,"coordinates",{get:()=>{const n=function(t,e,i){const n=[i.projectFlat([e.west,e.north]),i.projectFlat([e.east,e.south])];return{...t,coordinates:Zc[t.type](t.coordinates,n,i)}}(t.geometry,e,i);return n.coordinates}}),n}(0,d.Z)(Jc,"layerName","MVTLayer"),(0,d.Z)(Jc,"defaultProps",Xc);const iu="0123456789bcdefghjkmnpqrstuvwxyz",nu={};for(let t=0;t<iu.length;t++)nu[iu.charAt(t)]=t;class ru extends q{indexToBounds(){const{data:t,getGeohash:e}=this.props;return{data:t,_normalize:!1,positionFormat:"XY",getPolygon:(t,i)=>function(t){const[e,i,n,r]=function(t){let e,i=!0,n=90,r=-90,o=180,s=-180,a=0;for(let l=0,c=t.length;l<c;l++){const c=t[l].toLowerCase();a=nu[c];for(let t=4;t>=0;t--){const l=a>>t&1;i?(e=(o+s)/2,1===l?s=e:o=e):(e=(n+r)/2,1===l?r=e:n=e),i=!i}}return[r,s,n,o]}(t);return[r,n,r,e,i,e,i,n,r,n]}(e(t,i))}}}(0,d.Z)(ru,"layerName","GeohashLayer"),(0,d.Z)(ru,"defaultProps",{getGeohash:{type:"accessor",value:t=>t.geohash}})},4717:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(4942),r=i(4185),o=i(3844),s=i(1331),a=i(4088),l=i(9769),c=i(3982);const u=[0,0,0,255],h={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:u},getTargetColor:{type:"accessor",value:u},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class d extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  if (dh == 0.0) {\n    return sourceZ + deltaZ * ratio;\n  }\n  float unitZ = deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(curr, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.Z,s.Z]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:u},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:u},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:e,widthScale:i,widthMinPixels:n,widthMaxPixels:r,greatCircle:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({greatCircle:o,widthUnits:a.iI[e],widthScale:i,widthMinPixels:n,widthMaxPixels:r,useShortestPath:s}).draw()}_getModel(t){let e=[];for(let t=0;t<50;t++)e=e.concat([t,1,0,t,-1,0]);const i=new l.Z(t,{...this.getShaders(),id:this.props.id,geometry:new c.Z({drawMode:5,attributes:{positions:new Float32Array(e)}}),isInstanced:!0});return i.setUniforms({numSegments:50}),i}}(0,n.Z)(d,"layerName","ArcLayer"),(0,n.Z)(d,"defaultProps",h)},5395:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var n=i(4942),r=i(4088),o=i(4185),s=i(3844),a=i(1331),l=i(9769),c=i(3982),u=i(7013),h=i(4034);const d=new Uint16Array([0,2,1,0,3,2]),A=new Float32Array([0,1,0,0,1,0,1,1]);function f(t,e,i){return(0,h.t7)((0,h.t7)(t[0],t[1],i),(0,h.t7)(t[3],t[2],i),e)}const p="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),g={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:r.Df.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class m extends o.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:p,modules:[s.Z,a.Z]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const e=!0;t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:e},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:e},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:e}})}updateState({props:t,oldProps:e,changeFlags:i}){const n=this.getAttributeManager();if(i.extensionsChanged){var r;const{gl:t}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(t),n.invalidateAll()}if(t.bounds!==e.bounds){const t=this.state.mesh,e=this._createMesh();this.state.model.setVertexCount(e.vertexCount);for(const i in e)t&&t[i]!==e[i]&&n.invalidate(i);this.setState({mesh:e,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==e._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:e}=this.props,i=t.info;if(!i.color||!e)return i.bitmap=null,i;const{width:n,height:r}=e;i.index=0;const o=function(t){const[e,i,n]=t;return[(e+(15&n)/16)/256,(i+(240&n)/256)/256]}(i.color),s=[Math.floor(o[0]*n),Math.floor(o[1]*r)];return i.bitmap={size:{width:n,height:r},uv:o,pixel:s},i}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let e=t;return v(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),function(t,e){if(!e)return function(t){const e=new Float64Array(12);for(let i=0;i<t.length;i++)e[3*i+0]=t[i][0],e[3*i+1]=t[i][1],e[3*i+2]=t[i][2]||0;return{vertexCount:6,positions:e,indices:d,texCoords:A}}(t);const i=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),n=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),r=Math.ceil(i/e)+1,o=Math.ceil(n/e)+1,s=(r-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(r*o*2),c=new Float64Array(r*o*3);let u=0,h=0;for(let e=0;e<r;e++){const i=e/(r-1);for(let n=0;n<o;n++){const r=n/(o-1),s=f(t,i,r);c[3*u+0]=s[0],c[3*u+1]=s[1],c[3*u+2]=s[2]||0,l[2*u+0]=i,l[2*u+1]=1-r,e>0&&n>0&&(a[h++]=u-o,a[h++]=u-o-1,a[h++]=u-1,a[h++]=u-o,a[h++]=u-1,a[h++]=u),u++}}return{vertexCount:s,positions:c,indices:a,texCoords:l}}(e,this.context.viewport.resolution)}_getModel(t){return t?new l.Z(t,{...this.getShaders(),id:this.props.id,geometry:new c.Z({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:e,moduleParameters:i}=t,{model:n,coordinateConversion:r,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:l,transparentColor:c,tintColor:u}=this.props;i.pickingActive&&s||a&&n&&n.setUniforms(e).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:c.map((t=>t/255)),tintColor:u.slice(0,3).map((t=>t/255)),coordinateConversion:r,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:e,DEFAULT:i}=r.Df;let{_imageCoordinateSystem:n}=this.props;if(n!==i){const{bounds:i}=this.props;if(!v(i))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const r=this.context.viewport.resolution?t:e;if(n=n===t?t:e,n===t&&r===e)return{coordinateConversion:-1,bounds:i};if(n===e&&r===t){const t=(0,u.w5)([i[0],i[1]]),e=(0,u.w5)([i[2],i[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function v(t){return Number.isFinite(t[0])}(0,n.Z)(m,"layerName","BitmapLayer"),(0,n.Z)(m,"defaultProps",g)},5103:(t,e,i)=>{"use strict";i.d(e,{Z:()=>b});var n=i(4942),r=i(4185),o=i(3844),s=i(7287),a=i(1331),l=i(4088),c=i(9450),u=i(4211),h=i(6948),d=i(9769),A=i(744),f=i(3982),p=i(4538),g=i(5215);class m extends f.Z{constructor(t){const{id:e=(0,p.hQ)("column-geometry")}=t,{indices:i,attributes:n}=function(t){const{radius:e,height:i=1,nradial:n=10}=t;let{vertices:r}=t;r&&(A.Z.assert(r.length>=n),r=r.flatMap((t=>[t[0],t[1]])),(0,g.Ny)(r,g.wG.COUNTER_CLOCKWISE));const o=i>0,s=n+1,a=o?3*s+1:n,l=2*Math.PI/n,c=new Uint16Array(o?3*n*2:0),u=new Float32Array(3*a),h=new Float32Array(3*a);let d=0;if(o){for(let t=0;t<s;t++){const o=t*l,s=t%n,a=Math.sin(o),c=Math.cos(o);for(let t=0;t<2;t++)u[d+0]=r?r[2*s]:c*e,u[d+1]=r?r[2*s+1]:a*e,u[d+2]=(.5-t)*i,h[d+0]=r?r[2*s]:c,h[d+1]=r?r[2*s+1]:a,d+=3}u[d+0]=u[d-3],u[d+1]=u[d-2],u[d+2]=u[d-1],d+=3}for(let t=o?0:1;t<s;t++){const o=Math.floor(t/2)*Math.sign(.5-t%2),s=o*l,a=(o+n)%n,c=Math.sin(s),A=Math.cos(s);u[d+0]=r?r[2*a]:A*e,u[d+1]=r?r[2*a+1]:c*e,u[d+2]=i/2,h[d+2]=1,d+=3}if(o){let t=0;for(let e=0;e<n;e++)c[t++]=2*e+0,c[t++]=2*e+2,c[t++]=2*e+0,c[t++]=2*e+1,c[t++]=2*e+1,c[t++]=2*e+3}return{indices:c,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:h}}}}(t);super({...t,id:e,indices:i,attributes:n})}}const v=[0,0,0,255],y={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:v},getLineColor:{type:"accessor",value:v},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class b extends r.Z{getShaders(){const{gl:t}=this.context,e=!(0,c.D0)(t),i={},n=this.props.flatShading&&(0,u.U6)(t,h.h.GLSL_DERIVATIVES);return n&&(i.FLAT_SHADING=1),super.getShaders({vs:"#version 300 es\n\n#define SHADER_NAME column-layer-vertex-shader\n\nin vec3 positions;\nin vec3 normals;\n\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\n\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool stroked;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int radiusUnits;\nuniform int widthUnits;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (stroked) {\n    float widthPixels = clamp(\n      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n    if (isStroke) {\n      strokeOffsetRatio -= sign(positions.z) * halfOffset;\n    } else {\n      strokeOffsetRatio -= halfOffset;\n    }\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\n  if (radiusUnits == UNIT_METERS) {\n    offset = project_size(offset);\n  }\n  vec3 pos = vec3(offset, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n#ifdef FLAT_SHADING\n    position_commonspace = geometry.position;\n    vColor = vec4(color.rgb, color.a * opacity);\n#else\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n#endif\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nuniform vec3 project_uCameraPosition;\nuniform bool extruded;\nuniform bool isStroke;\n\nout vec4 fragColor;\n\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  fragColor = vColor;\n#ifdef FLAT_SHADING\n  if (extruded && !isStroke && !picking_uActive) {\n    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n  }\n#endif\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:i,transpileToGLSL100:e,modules:[o.Z,n?s.s:s.N,a.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:v},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:v},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(t){super.updateState(t);const{props:e,oldProps:i,changeFlags:n}=t,r=n.extensionsChanged||e.flatShading!==i.flatShading;if(r){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}(r||e.diskResolution!==i.diskResolution||e.vertices!==i.vertices||(e.extruded||e.stroked)!==(i.extruded||i.stroked))&&this._updateGeometry(e)}getGeometry(t,e,i){const n=new m({radius:1,height:i?2:0,vertices:e,nradial:t});let r=0;if(e)for(let i=0;i<t;i++){const n=e[i];r+=Math.sqrt(n[0]*n[0]+n[1]*n[1])/t}else r=1;return this.setState({edgeDistance:Math.cos(Math.PI/t)*r}),n}_getModel(t){return new d.Z(t,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry({diskResolution:t,vertices:e,extruded:i,stroked:n}){const r=this.getGeometry(t,e,i||n);this.setState({fillVertexCount:r.attributes.POSITION.value.length/3,wireframeVertexCount:r.indices.value.length}),this.state.model.setProps({geometry:r})}draw({uniforms:t}){const{lineWidthUnits:e,lineWidthScale:i,lineWidthMinPixels:n,lineWidthMaxPixels:r,radiusUnits:o,elevationScale:s,extruded:a,filled:c,stroked:u,wireframe:h,offset:d,coverage:A,radius:f,angle:p}=this.props,{model:g,fillVertexCount:m,wireframeVertexCount:v,edgeDistance:y}=this.state;g.setUniforms(t).setUniforms({radius:f,angle:p/180*Math.PI,offset:d,extruded:a,stroked:u,coverage:A,elevationScale:s,edgeDistance:y,radiusUnits:l.iI[o],widthUnits:l.iI[e],widthScale:i,widthMinPixels:n,widthMaxPixels:r}),a&&h&&(g.setProps({isIndexed:!0}),g.setVertexCount(v).setDrawMode(1).setUniforms({isStroke:!0}).draw()),c&&(g.setProps({isIndexed:!1}),g.setVertexCount(m).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!a&&u&&(g.setProps({isIndexed:!1}),g.setVertexCount(2*m/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}(0,n.Z)(b,"layerName","ColumnLayer"),(0,n.Z)(b,"defaultProps",y)},9026:(t,e,i)=>{"use strict";i.d(e,{Z:()=>x});var n=i(4942),r=i(8918),o=i(8452),s=i(6867),a=i(8569),l=i(6773),c=i(2112),u=i(1435);const h={circle:{type:a.Z,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:s.Z,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:l.Z,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},d={type:c.Z,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},A={type:u.Z,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function f({type:t,props:e}){const i={};for(const n in e)i[n]=t.defaultProps[e[n]];return i}function p(t,e){const{transitions:i,updateTriggers:n}=t.props,r={updateTriggers:{},transitions:i&&{getPosition:i.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),r.updateTriggers[s]=n[o],i&&(r.transitions[s]=i[o])),r[s]=a}return r}var g=i(744);function m(t,e,i={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:o=t.length}=i;for(let i=r;i<o;i++){const r=t[i],{geometry:o}=r;if(o)if("GeometryCollection"===o.type){g.Z.assert(Array.isArray(o.geometries),"GeoJSON does not have geometries array");const{geometries:t}=o;for(let o=0;o<t.length;o++)v(t[o],n,e,r,i)}else v(o,n,e,r,i)}return n}function v(t,e,i,n,r){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(function(t,e){let i=y[t];for(g.Z.assert(i,"Unknown GeoJSON type ".concat(t));e&&--i>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,s))switch(o){case"Point":a.push(i({geometry:t},n,r));break;case"MultiPoint":s.forEach((t=>{a.push(i({geometry:{type:"Point",coordinates:t}},n,r))}));break;case"LineString":l.push(i({geometry:t},n,r));break;case"MultiLineString":s.forEach((t=>{l.push(i({geometry:{type:"LineString",coordinates:t}},n,r))}));break;case"Polygon":c.push(i({geometry:t},n,r)),s.forEach((t=>{u.push(i({geometry:{type:"LineString",coordinates:t}},n,r))}));break;case"MultiPolygon":s.forEach((t=>{c.push(i({geometry:{type:"Polygon",coordinates:t}},n,r)),t.forEach((t=>{u.push(i({geometry:{type:"LineString",coordinates:t}},n,r))}))}))}else g.Z.warn("".concat(o," coordinates are malformed"))()}const y={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function b(t){return t.geometry.coordinates}const _=["points","linestrings","polygons"],w={...f(h.circle),...f(h.icon),...f(h.text),...f(d),...f(A),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class x extends r.Z{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:e}){if(!e.dataChanged)return;const{data:i}=this.props,n=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:n}),n?this._updateStateBinary({props:t,changeFlags:e}):this._updateStateJSON({props:t,changeFlags:e})}_updateStateBinary({props:t,changeFlags:e}){const i=function(t,e){const i={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:n,lines:r,polygons:o}=t,s=function(t,e){const i={points:null,lines:null,polygons:null};for(const n in i){const r=t[n].globalFeatureIds.value;i[n]=new Uint8ClampedArray(3*r.length);const o=[];for(let t=0;t<r.length;t++)e(r[t],o),i[n][3*t+0]=o[0],i[n][3*t+1]=o[1],i[n][3*t+2]=o[2]}return i}(t,e);return i.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:s.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},i.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:3,value:s.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},i.lines._pathType="open",i.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},i.polygons._normalize=!1,o.triangles&&(i.polygons.data.attributes.indices=o.triangles.value),i.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},i.polygonsOutline._pathType="open",i}(t.data,this.encodePickingColor);this.setState({layerProps:i})}_updateStateJSON({props:t,changeFlags:e}){const i=function(t){if(Array.isArray(t))return t;switch(g.Z.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return g.Z.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(t.data),n=this.getSubLayerRow.bind(this);let r={};const s={};if(Array.isArray(e.dataChanged)){const t=this.state.features;for(const e in t)r[e]=t[e].slice(),s[e]=[];for(const a of e.dataChanged){const e=m(i,n,a);for(const i in t)s[i].push((0,o.b)({data:r[i],getIndex:t=>t.__source.index,dataRange:a,replace:e[i]}))}}else r=m(i,n);const a=function(t,e){const i={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:n,lineFeatures:r,polygonFeatures:o,polygonOutlineFeatures:s}=t;return i.points.data=n,i.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),i.points.getPosition=b,i.lines.data=r,i.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),i.lines.getPath=b,i.polygons.data=o,i.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),i.polygons.getPolygon=b,i.polygonsOutline.data=s,i.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),i.polygonsOutline.getPath=b,i}(r,s);this.setState({features:r,featuresDiff:s,layerProps:a})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:i,sourceLayer:n}=e;return e.featureType=_.find((t=>n.id.startsWith("".concat(this.id,"-").concat(t,"-")))),i>=0&&n.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[i]),e}_updateAutoHighlight(t){const e="".concat(this.id,"-points-"),i="points"===t.featureType;for(const n of this.getSubLayers())n.id.startsWith(e)===i&&n.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:i}=this.state,n="polygons-fill",r=this.shouldRenderSubLayer(n,i.polygons.data)&&this.getSubLayerClass(n,A.type);if(r){const o=p(this,A.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new r(o,this.getSubLayerProps({id:n,updateTriggers:o.updateTriggers}),i.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:i}=this.state,n="polygons-stroke",r="linestrings",o=!t&&e&&this.shouldRenderSubLayer(n,i.polygonsOutline.data)&&this.getSubLayerClass(n,d.type),s=this.shouldRenderSubLayer(r,i.lines.data)&&this.getSubLayerClass(r,d.type);if(o||s){const t=p(this,d.props);return[o&&new o(t,this.getSubLayerProps({id:n,updateTriggers:t.updateTriggers}),i.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),i.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:i}=this.state;let{highlightedObjectIndex:n}=this.props;!i&&Number.isFinite(n)&&(n=e.points.data.findIndex((t=>t.__source.index===n)));const r=new Set(t.split("+")),o=[];for(const t of r){const r="points-".concat(t),s=h[t],a=s&&this.shouldRenderSubLayer(r,e.points.data)&&this.getSubLayerClass(r,s.type);if(a){const l=p(this,s.props);let c=e.points;if("text"===t&&i){const{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new a(l,this.getSubLayerProps({id:r,updateTriggers:l.updateTriggers,highlightedObjectIndex:n}),c))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"==typeof t?(e,i)=>{const{data:n,index:r}=i,o=function(t,e){if(!t)return null;const i="startIndices"in t?t.startIndices[e]:e,n=t.featureIds.value[i];return-1!==i?function(t,e,i){const n={properties:{...t.properties[e]}};for(const e in t.numericProps)n.properties[e]=t.numericProps[e].value[i];return n}(t,n,i):null}(n,r);return t(o,i)}:super.getSubLayerAccessor(t)}}(0,n.Z)(x,"layerName","GeoJsonLayer"),(0,n.Z)(x,"defaultProps",w)},6867:(t,e,i)=>{"use strict";i.d(e,{Z:()=>x});var n=i(4942),r=i(4185),o=i(3844),s=i(1331),a=i(4088),l=i(744),c=i(9769),u=i(3982),h=i(4912),d=i(1953),A=i(3878),f=i(8550);const p=()=>{},g={10241:9987,10240:9729,10242:33071,10243:33071};function m(t,e,i,n){const r=Math.min(i/e.width,n/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function v(t){return t&&(t.id||t.url)}function y(t,e,i){for(let n=0;n<e.length;n++){const{icon:r,xOffset:o}=e[n];t[v(r)]={...r,x:o,y:i}}}class b{constructor(t,{onUpdate:e=p,onError:i=p}){(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"onUpdate",void 0),(0,n.Z)(this,"onError",void 0),(0,n.Z)(this,"_loadOptions",null),(0,n.Z)(this,"_texture",null),(0,n.Z)(this,"_externalTexture",null),(0,n.Z)(this,"_mapping",{}),(0,n.Z)(this,"_textureParameters",null),(0,n.Z)(this,"_pendingCount",0),(0,n.Z)(this,"_autoPacking",!1),(0,n.Z)(this,"_xOffset",0),(0,n.Z)(this,"_yOffset",0),(0,n.Z)(this,"_rowHeight",0),(0,n.Z)(this,"_buffer",4),(0,n.Z)(this,"_canvasWidth",1024),(0,n.Z)(this,"_canvasHeight",0),(0,n.Z)(this,"_canvas",null),this.gl=t,this.onUpdate=e,this.onError=i}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?v(t):t;return this._mapping[e]||{}}setProps({loadOptions:t,autoPacking:e,iconAtlas:i,iconMapping:n,textureParameters:r}){var o;t&&(this._loadOptions=t),void 0!==e&&(this._autoPacking=e),n&&(this._mapping=n),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),r&&(this._textureParameters=r)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"==typeof document)return;const i=Object.values(function(t,e,i){if(!t||!e)return null;i=i||{};const n={},{iterable:r,objectInfo:o}=(0,f.jB)(t);for(const t of r){o.index++;const r=e(t,o),s=v(r);if(!r)throw new Error("Icon is missing.");if(!r.url)throw new Error("Icon url is missing.");n[s]||i[s]&&r.url===i[s].url||(n[s]={...r,source:t,sourceIndex:o.index})}return n}(t,e,this._mapping)||{});if(i.length>0){const{mapping:t,xOffset:e,yOffset:n,rowHeight:r,canvasHeight:o}=function({icons:t,buffer:e,mapping:i={},xOffset:n=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let l=0;l<t.length;l++){const c=t[l];if(!i[v(c)]){const{height:t,width:l}=c;n+l+e>s&&(y(i,a,r),n=0,r=o+r+e,o=0,a=[]),a.push({icon:c,xOffset:n}),n=n+l+e,o=Math.max(o,t)}}return a.length>0&&y(i,a,r),{mapping:i,rowHeight:o,xOffset:n,yOffset:r,canvasWidth:s,canvasHeight:(l=o+r+e,Math.pow(2,Math.ceil(Math.log2(l))))};var l}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=r,this._mapping=t,this._xOffset=e,this._yOffset=n,this._canvasHeight=o,this._texture||(this._texture=new h.Z(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||g})),this._texture.height!==this._canvasHeight&&(this._texture=function(t,e,i,n){const r=t.width,o=t.height,s=new h.Z(t.gl,{width:e,height:i,parameters:n});return(0,d.Lv)(t,s,{targetY:0,width:r,height:o}),t.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||g)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of t)this._pendingCount++,(0,A.z)(i.url,this._loadOptions).then((t=>{const n=v(i),r=this._mapping[n],{x:o,y:s,width:a,height:l}=r,{data:c,width:u,height:h}=m(e,t,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-h)/2,width:u,height:h}),r.width=u,r.height=h,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const _=[0,0,0,255],w={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:_},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class x extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.Z,s.Z]})}initializeState(){this.state={iconManager:new b(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:_},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:i,changeFlags:n}=t,r=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=e,{iconManager:u}=this.state,h=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:e.loadOptions,autoPacking:!h,iconAtlas:o,iconMapping:h?s:null,textureParameters:c}),h?i.iconMapping!==e.iconMapping&&r.invalidate("getIcon"):(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getIcon))&&u.packIcons(a,l),n.extensionsChanged){var d;const{gl:t}=this.context;null===(d=this.state.model)||void 0===d||d.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:e,sizeMinPixels:i,sizeMaxPixels:n,sizeUnits:r,billboard:o,alphaCutoff:s}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(t).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:a.iI[r],sizeScale:e,sizeMinPixels:i,sizeMaxPixels:n,billboard:o,alphaCutoff:s}).draw()}_getModel(t){return new c.Z(t,{...this.getShaders(),id:this.props.id,geometry:new u.Z({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;const i=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;i?i(t):l.Z.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:i,anchorX:n=e/2,anchorY:r=i/2}=this.state.iconManager.getIconMapping(t);return[e/2-n,i/2-r]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:i,width:n,height:r}=this.state.iconManager.getIconMapping(t);return[e,i,n,r]}}(0,n.Z)(x,"defaultProps",w),(0,n.Z)(x,"layerName","IconLayer")},8793:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ArcLayer:()=>n.Z,BitmapLayer:()=>r.Z,ColumnLayer:()=>m.Z,GeoJsonLayer:()=>B.Z,GridCellLayer:()=>E,IconLayer:()=>o.Z,LineLayer:()=>f,PathLayer:()=>k.Z,PointCloudLayer:()=>p.Z,PolygonLayer:()=>T.Z,ScatterplotLayer:()=>g.Z,SolidPolygonLayer:()=>P.Z,TextLayer:()=>S.Z,_MultiIconLayer:()=>M.Z,_TextBackgroundLayer:()=>I.Z});var n=i(4717),r=i(5395),o=i(6867),s=i(4942),a=i(4185),l=i(3844),c=i(1331),u=i(4088),h=i(9769),d=i(3982);const A={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class f extends a.Z{getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(p, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[l.Z,c.Z]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:e,widthScale:i,widthMinPixels:n,widthMaxPixels:r,wrapLongitude:o}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:u.iI[e],widthScale:i,widthMinPixels:n,widthMaxPixels:r,useShortestPath:o?1:0}).draw(),o&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){return new h.Z(t,{...this.getShaders(),id:this.props.id,geometry:new d.Z({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0})}}(0,s.Z)(f,"layerName","LineLayer"),(0,s.Z)(f,"defaultProps",A);var p=i(7693),g=i(8569),m=i(5103),v=i(4538);const y=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),b=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),_=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),w=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),x={POSITION:{size:3,value:new Float32Array(b)},NORMAL:{size:3,value:new Float32Array(_)},TEXCOORD_0:{size:2,value:new Float32Array(w)}};class C extends d.Z{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=(0,v.hQ)("cube-geometry")}=t;super({...t,id:e,indices:{size:1,value:new Uint16Array(y)},attributes:{...x,...t.attributes}})}}class E extends m.Z{getGeometry(t){return new C}draw({uniforms:t}){const{elevationScale:e,extruded:i,offset:n,coverage:r,cellSize:o,angle:s,radiusUnits:a}=this.props;this.state.model.setUniforms(t).setUniforms({radius:o/2,radiusUnits:u.iI[a],angle:s,offset:n,extruded:i,coverage:r,elevationScale:e,edgeDistance:1,isWireframe:!1}).draw()}}(0,s.Z)(E,"layerName","GridCellLayer"),(0,s.Z)(E,"defaultProps",{cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}});var k=i(2112),T=i(3121),B=i(9026),S=i(6773),P=i(1435),M=i(1290),I=i(1130)},2112:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var n=i(4942),r=i(4185),o=i(3844),s=i(1331),a=i(4088),l=i(9769),c=i(3982),u=i(8005),h=i(5215);class d extends u.Z{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?function(t,e,i,n){let r;if(Array.isArray(t[0])){const i=t.length*e;r=new Array(i);for(let i=0;i<t.length;i++)for(let n=0;n<e;n++)r[i*e+n]=t[i][n]||0}else r=t;return i?(0,h.dj)(r,{size:e,gridResolution:i}):n?(0,h.ct)(r,{size:e}):r}(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(A(t)){let e=0;for(const i of t)e+=this.getGeometrySize(i);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&A(t))for(const i of t){const t=this.getGeometrySize(i);e.geometrySize=t,this.updateGeometryAttributes(i,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const i=this.attributes.segmentTypes,n=!!t&&this.isClosed(t),{vertexStart:r,geometrySize:o}=e;i.fill(0,r,r+o),n?(i[r]=4,i[r+o-2]=4):(i[r]+=1,i[r+o-2]+=2),i[r+o-1]=4}_updatePositions(t,e){const{positions:i}=this.attributes;if(!i||!t)return;const{vertexStart:n,geometrySize:r}=e,o=new Array(3);for(let e=n,s=0;s<r;e++,s++)this.getPointOnPath(t,s,o),i[3*e]=o[0],i[3*e+1]=o[1],i[3*e+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,i=[]){const{positionSize:n}=this;e*n>=t.length&&(e+=1-t.length/n);const r=e*n;return i[0]=t[r],i[1]=t[r+1],i[2]=3===n&&t[r+2]||0,i}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,i=t.length-e;return t[0]===t[i]&&t[1]===t[i+1]&&(2===e||t[2]===t[i+2])}}function A(t){return Array.isArray(t[0])}const f=[0,0,0,255],p={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:f},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},g={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class m extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.Z,s.Z]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:g,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:g,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:g,defaultValue:f},instancePickingColors:{size:3,type:5121,accessor:(t,{index:e,target:i})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,i)}}),this.setState({pathTesselator:new d({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:i}=t,n=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,r=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:r.getPath,buffers:r,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),i.dataChanged||n.invalidateAll()}if(i.extensionsChanged){var r;const{gl:t}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(t),n.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:i}=e,{data:n}=this.props;return n[0]&&n[0].__source&&(e.object=n.find((t=>t.__source.index===i))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let i=0;i<e.length;i++)e[i].__source.index===t&&this._disablePickingIndex(i);else super.disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:e,capRounded:i,billboard:n,miterLimit:r,widthUnits:o,widthScale:s,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(e),capType:Number(i),billboard:n,widthUnits:a.iI[o],widthScale:s,miterLimit:r,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(t){return new l.Z(t,{...this.getShaders(),id:this.props.id,geometry:new c.Z({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}(0,n.Z)(m,"defaultProps",p),(0,n.Z)(m,"layerName","PathLayer")},7693:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(4942),r=i(4185),o=i(3844),s=i(7287),a=i(1331),l=i(4088),c=i(9769),u=i(3982);const h=[0,0,0,255],d=[0,0,1],A={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:d},getColor:{type:"accessor",value:h},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};class f extends r.Z{getShaders(){return super.getShaders({vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\nuniform int sizeUnits;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.Z,s.N,a.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:d},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:h}})}updateState(t){const{changeFlags:e,props:i}=t;if(super.updateState(t),e.extensionsChanged){var n;const{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}e.dataChanged&&function(t){const{header:e,attributes:i}=t;e&&i&&(t.length=e.vertexCount,i.POSITION&&(i.instancePositions=i.POSITION),i.NORMAL&&(i.instanceNormals=i.NORMAL),i.COLOR_0&&(i.instanceColors=i.COLOR_0))}(i.data)}draw({uniforms:t}){const{pointSize:e,sizeUnits:i}=this.props;this.state.model.setUniforms(t).setUniforms({sizeUnits:l.iI[i],radiusPixels:e}).draw()}_getModel(t){const e=[];for(let t=0;t<3;t++){const i=t/3*Math.PI*2;e.push(2*Math.cos(i),2*Math.sin(i),0)}return new c.Z(t,{...this.getShaders(),id:this.props.id,geometry:new u.Z({drawMode:4,attributes:{positions:new Float32Array(e)}}),isInstanced:!0})}}(0,n.Z)(f,"layerName","PointCloudLayer"),(0,n.Z)(f,"defaultProps",A)},3121:(t,e,i)=>{"use strict";i.d(e,{Z:()=>A});var n=i(4942),r=i(8918),o=i(744),s=i(8550),a=i(1435),l=i(2112),c=i(9890),u=i(8452);const h=[0,0,0,255],d={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:h},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class A extends r.Z{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&o.Z.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:t}){const e=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getPolygon);if(e&&Array.isArray(t.dataChanged)){const e=this.state.paths.slice(),i=t.dataChanged.map((t=>(0,u.b)({data:e,getIndex:t=>t.__source.index,dataRange:t,replace:this._getPaths(t)})));this.setState({paths:e,pathsDiff:i})}else e&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(t={}){const{data:e,getPolygon:i,positionFormat:n,_normalize:r}=this.props,o=[],a="XY"===n?2:3,{startRow:l,endRow:u}=t,{iterable:h,objectInfo:d}=(0,s.jB)(e,l,u);for(const t of h){d.index++;let e=i(t,d);r&&(e=c.Fv(e,a));const{holeIndices:n}=e,s=e.positions||e;if(n)for(let e=0;e<=n.length;e++){const i=s.slice(n[e-1]||0,n[e]||s.length);o.push(this.getSubLayerRow({path:i},t,d.index))}else o.push(this.getSubLayerRow({path:s},t,d.index))}return o}renderLayers(){const{data:t,_dataDiff:e,stroked:i,filled:n,extruded:r,wireframe:o,_normalize:s,_windingOrder:c,elevationScale:u,transitions:d,positionFormat:A}=this.props,{lineWidthUnits:f,lineWidthScale:p,lineWidthMinPixels:g,lineWidthMaxPixels:m,lineJointRounded:v,lineMiterLimit:y,lineDashJustified:b}=this.props,{getFillColor:_,getLineColor:w,getLineWidth:x,getLineDashArray:C,getElevation:E,getPolygon:k,updateTriggers:T,material:B}=this.props,{paths:S,pathsDiff:P}=this.state,M=this.getSubLayerClass("fill",a.Z),I=this.getSubLayerClass("stroke",l.Z),O=this.shouldRenderSubLayer("fill",S)&&new M({_dataDiff:e,extruded:r,elevationScale:u,filled:n,wireframe:o,_normalize:s,_windingOrder:c,getElevation:E,getFillColor:_,getLineColor:r&&o?w:h,material:B,transitions:d},this.getSubLayerProps({id:"fill",updateTriggers:T&&{getPolygon:T.getPolygon,getElevation:T.getElevation,getFillColor:T.getFillColor,lineColors:r&&o,getLineColor:T.getLineColor}}),{data:t,positionFormat:A,getPolygon:k});return[!r&&O,!r&&i&&this.shouldRenderSubLayer("stroke",S)&&new I({_dataDiff:P&&(()=>P),widthUnits:f,widthScale:p,widthMinPixels:g,widthMaxPixels:m,jointRounded:v,miterLimit:y,dashJustified:b,_pathType:"loop",transitions:d&&{getWidth:d.getLineWidth,getColor:d.getLineColor,getPath:d.getPolygon},getColor:this.getSubLayerAccessor(w),getWidth:this.getSubLayerAccessor(x),getDashArray:this.getSubLayerAccessor(C)},this.getSubLayerProps({id:"stroke",updateTriggers:T&&{getWidth:T.getLineWidth,getColor:T.getLineColor,getDashArray:T.getLineDashArray}}),{data:S,positionFormat:A,getPath:t=>t.path}),r&&O]}}(0,n.Z)(A,"layerName","PolygonLayer"),(0,n.Z)(A,"defaultProps",d)},8569:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(4942),r=i(4185),o=i(3844),s=i(1331),a=i(4088),l=i(9769),c=i(3982);const u=[0,0,0,255],h={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:u},getLineColor:{type:"accessor",value:u},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class d extends r.Z{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.Z,s.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:e,radiusScale:i,radiusMinPixels:n,radiusMaxPixels:r,stroked:o,filled:s,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:A}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:o?1:0,filled:s,billboard:l,antialiasing:c,radiusUnits:a.iI[e],radiusScale:i,radiusMinPixels:n,radiusMaxPixels:r,lineWidthUnits:a.iI[u],lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:A}).draw()}_getModel(t){return new l.Z(t,{...this.getShaders(),id:this.props.id,geometry:new c.Z({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}(0,n.Z)(d,"defaultProps",h),(0,n.Z)(d,"layerName","ScatterplotLayer")},9890:(t,e,i)=>{"use strict";i.d(e,{Fv:()=>A,Gd:()=>u,k8:()=>c,mD:()=>g});var n=i(9187),r=i.n(n),o=i(5215);const s=o.wG.CLOCKWISE,a=o.wG.COUNTER_CLOCKWISE,l={isClosed:!0};function c(t){return"positions"in t?t.positions:t}function u(t){return"holeIndices"in t?t.holeIndices:null}function h(t,e,i,n,r){let s=e;const a=i.length;for(let e=0;e<a;e++)for(let r=0;r<n;r++)t[s++]=i[e][r]||0;if(!function(t){const e=t[0],i=t[t.length-1];return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]}(i))for(let e=0;e<n;e++)t[s++]=i[0][e]||0;return l.start=e,l.end=s,l.size=n,(0,o.Ny)(t,r,l),s}function d(t,e,i,n,r=0,s,a){const c=(s=s||i.length)-r;if(c<=0)return e;let u=e;for(let e=0;e<c;e++)t[u++]=i[r+e];if(!function(t,e,i,n){for(let r=0;r<e;r++)if(t[i+r]!==t[n-e+r])return!1;return!0}(i,n,r,s))for(let e=0;e<n;e++)t[u++]=i[r+e];return l.start=e,l.end=u,l.size=n,(0,o.Ny)(t,a,l),u}function A(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const i=[],n=[];if("positions"in t){const{positions:r,holeIndices:o}=t;if(o){let t=0;for(let l=0;l<=o.length;l++)t=d(i,t,r,e,o[l-1],o[l],0===l?s:a),n.push(t);return n.pop(),{positions:i,holeIndices:n}}t=r}if(!function(t){return Array.isArray(t[0])}(t))return d(i,0,t,e,0,i.length,s),i;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let r=0;for(const[o,l]of t.entries())r=h(i,r,l,e,0===o?s:a),n.push(r);return n.pop(),{positions:i,holeIndices:n}}return h(i,0,t,e,s),i}function f(t,e,i){const n=t.length/3;let r=0;for(let o=0;o<n;o++){const s=(o+1)%n;r+=t[3*o+e]*t[3*s+i],r-=t[3*s+e]*t[3*o+i]}return Math.abs(r/2)}function p(t,e,i,n){const r=t.length/3;for(let o=0;o<r;o++){const r=3*o,s=t[r+0],a=t[r+1],l=t[r+2];t[r+e]=s,t[r+i]=a,t[r+n]=l}}function g(t,e,i,n){let o=u(t);o&&(o=o.map((t=>t/e)));let s=c(t);const a=n&&3===e;if(i){const t=s.length;s=s.slice();const n=[];for(let r=0;r<t;r+=e){n[0]=s[r],n[1]=s[r+1],a&&(n[2]=s[r+2]);const t=i(n);s[r]=t[0],s[r+1]=t[1],a&&(s[r+2]=t[2])}}if(a){const t=f(s,0,1),e=f(s,0,2),n=f(s,1,2);if(!t&&!e&&!n)return[];t>e&&t>n||(e>n?(i||(s=s.slice()),p(s,0,2,1)):(i||(s=s.slice()),p(s,1,2,0)))}return r()(s,o,e)}},1435:(t,e,i)=>{"use strict";i.d(e,{Z:()=>C});var n=i(4942),r=i(4185),o=i(3844),s=i(7287),a=i(1331),l=i(4088),c=i(4211),u=i(6948),h=i(9769),d=i(3982),A=i(9890),f=i(8005),p=i(5215);class g extends f.Z{constructor(t){const{fp64:e,IndexType:i=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:i,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=A.Fv(t,this.positionSize);return this.opts.resolution?(0,p.WZ)(A.k8(e),A.Gd(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?(0,p.GU)(A.k8(e),A.Gd(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(m(t)){let e=0;for(const i of t)e+=this.getGeometrySize(i);return e}return A.k8(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&m(t))for(const i of t){const t=this.getGeometrySize(i);e.geometrySize=t,this.updateGeometryAttributes(i,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,{geometryIndex:e,vertexStart:i,indexStart:n}){const{attributes:r,indexStarts:o,typedArrayManager:s}=this;let a=r.indices;if(!a||!t)return;let l=n;const c=A.mD(t,this.positionSize,this.opts.preproject,this.opts.full3d);a=s.allocate(a,n+c.length,{copy:!0});for(let t=0;t<c.length;t++)a[l++]=c[t]+i;o[e+1]=n+c.length,r.indices=a}_updatePositions(t,{vertexStart:e,geometrySize:i}){const{attributes:{positions:n},positionSize:r}=this;if(!n||!t)return;const o=A.k8(t);for(let t=e,s=0;s<i;t++,s++){const e=o[s*r],i=o[s*r+1],a=r>2?o[s*r+2]:0;n[3*t]=e,n[3*t+1]=i,n[3*t+2]=a}}_updateVertexValid(t,{vertexStart:e,geometrySize:i}){const{positionSize:n}=this,r=this.attributes.vertexValid,o=t&&A.Gd(t);if(t&&t.edgeTypes?r.set(t.edgeTypes,e):r.fill(1,e,e+i),o)for(let t=0;t<o.length;t++)r[e+o[t]/n-1]=0;r[e+i-1]=0}}function m(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const v="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",y="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(v,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),b="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(v,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),_=[0,0,0,255],w={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:_},getLineColor:{type:"accessor",value:_},material:!0},x={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class C extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?y:b,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[o.Z,s.N,a.Z]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:i}=this.props;const{_full3d:n}=this.props;let r;e.isGeospatial&&i===l.Df.DEFAULT&&(i=l.Df.LNGLAT),i===l.Df.LNGLAT&&(r=n?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new g({preproject:r,fp64:this.use64bitPositions(),IndexType:!t||(0,c.ag)(t,u.h.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),s=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:x,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:x,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:x,accessor:"getFillColor",defaultValue:_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:x,accessor:"getLineColor",defaultValue:_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,{index:e,target:i})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,i),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:i}=e,{data:n}=this.props;return n[0]&&n[0].__source&&(e.object=n.find((t=>t.__source.index===i))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let i=0;i<e.length;i++)e[i].__source.index===t&&this._disablePickingIndex(i);else super.disablePickingIndex(t)}draw({uniforms:t}){const{extruded:e,filled:i,wireframe:n,elevationScale:r}=this.props,{topModel:o,sideModel:s,polygonTesselator:a}=this.state,l={...t,extruded:Boolean(e),elevationScale:r};s&&(s.setInstanceCount(a.instanceCount-1),s.setUniforms(l),n&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),i&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(a.vertexCount),o.setUniforms(l).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:i,changeFlags:n}=t,r=this.getAttributeManager();var o;(n.extensionsChanged||e.filled!==i.filled||e.extruded!==i.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((t=>t.delete())),this.setState(this._getModels(this.context.gl)),r.invalidateAll())}updateGeometry({props:t,oldProps:e,changeFlags:i}){if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,n=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:i,extruded:n}=this.props;let r,o;if(i){const i=this.getShaders("top");i.defines.NON_INSTANCED_MODEL=1,r=new h.Z(t,{...i,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return n&&(o=new h.Z(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new d.Z({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,r].filter(Boolean),topModel:r,sideModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}(0,n.Z)(C,"defaultProps",w),(0,n.Z)(C,"layerName","SolidPolygonLayer")},1290:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(4942),r=i(744),o=i(6867);const s=.75,a=[];class l extends o.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:e,target:i})=>this.encodePickingColor(e,i)}})}updateState(t){super.updateState(t);const{props:e,oldProps:i}=t;let{outlineColor:n}=e;n!==i.outlineColor&&(n=n.map((t=>t/255)),n[3]=Number.isFinite(n[3])?n[3]:1,this.setState({outlineColor:n})),!e.sdf&&e.outlineWidth&&r.Z.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:e,smoothing:i,outlineWidth:n}=this.props,{outlineColor:r}=this.state,o=n?Math.max(i,s*(1-n)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:s,outlineBuffer:o,gamma:i,sdf:Boolean(e),outlineColor:r},super.draw(t),e&&n){const{iconManager:t}=this.state;t.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:s}})}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):a}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):a}}(0,n.Z)(l,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),(0,n.Z)(l,"layerName","MultiIconLayer")},1130:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(4942),r=i(4185),o=i(3844),s=i(1331),a=i(4088),l=i(9769),c=i(3982);const u={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class h extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[o.Z,s.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:e,sizeScale:i,sizeUnits:n,sizeMinPixels:r,sizeMaxPixels:o,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:e,stroked:Boolean(s),padding:l,sizeUnits:a.iI[n],sizeScale:i,sizeMinPixels:r,sizeMaxPixels:o}).draw()}_getModel(t){return new l.Z(t,{...this.getShaders(),id:this.props.id,geometry:new c.Z({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}(0,n.Z)(h,"defaultProps",u),(0,n.Z)(h,"layerName","TextBackgroundLayer")},6773:(t,e,i)=>{"use strict";i.d(e,{Z:()=>B});var n=i(4942),r=i(8918),o=i(744),s=i(8550),a=i(1290);const l=1e20;class c{constructor({fontSize:t=24,buffer:e=3,radius:i=8,cutoff:n=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=n,this.radius=i;const a=this.size=t+4*e,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${s} ${o} ${t}px ${r}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:n,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(i),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),c=Math.min(this.size-this.buffer,s+Math.ceil(n)),h=a+2*this.buffer,d=c+2*this.buffer,A=Math.max(h*d,0),f=new Uint8ClampedArray(A),p={data:f,width:h,height:d,glyphWidth:a,glyphHeight:c,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===c)return p;const{ctx:g,buffer:m,gridInner:v,gridOuter:y}=this;g.clearRect(m,m,a,c),g.fillText(t,m,m+s);const b=g.getImageData(m,m,a,c);y.fill(l,0,A),v.fill(0,0,A);for(let t=0;t<c;t++)for(let e=0;e<a;e++){const i=b.data[4*(t*a+e)+3]/255;if(0===i)continue;const n=(t+m)*h+e+m;if(1===i)y[n]=0,v[n]=l;else{const t=.5-i;y[n]=t>0?t*t:0,v[n]=t<0?t*t:0}}u(y,0,0,h,d,h,this.f,this.v,this.z),u(v,m,m,a,c,h,this.f,this.v,this.z);for(let t=0;t<A;t++){const e=Math.sqrt(y[t])-Math.sqrt(v[t]);f[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}}function u(t,e,i,n,r,o,s,a,l){for(let c=e;c<e+n;c++)h(t,i*o+c,o,r,s,a,l);for(let c=i;c<i+r;c++)h(t,c*o+e,1,n,s,a,l)}function h(t,e,i,n,r,o,s){o[0]=0,s[0]=-l,s[1]=l,r[0]=t[e];for(let a=1,c=0,u=0;a<n;a++){r[a]=t[e+a*i];const n=a*a;do{const t=o[c];u=(r[a]-r[t]+n-t*t)/(a-t)/2}while(u<=s[c]&&--c>-1);c++,o[c]=a,s[c]=u,s[c+1]=l}for(let a=0,l=0;a<n;a++){for(;s[l+1]<a;)l++;const n=o[l],c=a-n;t[e+a*i]=r[n]+c*c}}const d=[];function A(t,e,i,n){let r=0;for(let s=e;s<i;s++){var o;r+=(null===(o=n[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function f(t,e,i,n,r,o){let s=e,a=0;for(let l=e;l<i;l++){const e=A(t,l,l+1,r);a+e>n&&(s<l&&o.push(l),s=l,a=0),a+=e}return a}function p(t,e,i,n,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?f(t,r,o,i,n,s):function(t,e,i,n,r,o){let s=e,a=e,l=e,c=0;for(let u=e;u<i;u++)if(" "===t[u]?l=u+1:" "!==t[u+1]&&u+1!==i||(l=u+1),l>a){let e=A(t,a,l,r);c+e>n&&(s<a&&(o.push(a),s=a,c=0),e>n&&(e=f(t,a,l,n,r,o),s=o[o.length-1])),a=l,c+=e}}(t,r,o,i,n,s),s}function g(t,e,i,n,r,s){let a=0,l=0;for(let s=e;s<i;s++){const e=t[s],i=n[e];i?(l||(l=i.layoutHeight),r[s]=a+i.layoutWidth/2,a+=i.layoutWidth):(o.Z.warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),r[s]=a,a+=32)}s[0]=a,s[1]=l}class m{constructor(t=5){(0,n.Z)(this,"limit",void 0),(0,n.Z)(this,"_cache",{}),(0,n.Z)(this,"_order",[]),this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const v={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let y=new m(3);function b(t,e){for(let i=0;i<t.length;i++)e.data[4*i+3]=t[i]}function _(t,e,i,n){t.font="".concat(n," ").concat(i,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class w{constructor(){(0,n.Z)(this,"props",{...v}),(0,n.Z)(this,"_key",void 0),(0,n.Z)(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let i;i="string"==typeof e?new Set(Array.from(e)):new Set(e);const n=y.get(t);if(!n)return i;for(const t in n.mapping)i.has(t)&&i.delete(t);return i}(this._key,this.props.characterSet),i=y.get(this._key);if(i&&0===e.size)return void(this._atlas!==i&&(this._atlas=i));const n=this._generateFontAtlas(e,i);this._atlas=n,y.set(this._key,n)}_generateFontAtlas(t,e){const{fontFamily:i,fontWeight:n,fontSize:r,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let u=e&&e.data;u||(u=document.createElement("canvas"),u.width=1024);const h=u.getContext("2d",{willReadFrequently:!0});_(h,i,r,n);const{mapping:d,canvasHeight:A,xOffset:f,yOffset:p}=function({characterSet:t,getFontWidth:e,fontHeight:i,buffer:n,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let l=0,c=s;const u=i+2*n;for(const s of t)if(!o[s]){const t=e(s);c+t+2*n>r&&(c=0,l++),o[s]={x:c+n,y:a+l*u+n,width:t,height:u,layoutWidth:t,layoutHeight:i},c+=t+2*n}return{mapping:o,xOffset:c,yOffset:a+l*u,canvasHeight:(h=a+(l+1)*u,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:t=>h.measureText(t).width,fontHeight:1.2*r,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(u.height!==A){const t=h.getImageData(0,0,u.width,u.height);u.height=A,h.putImageData(t,0,0)}if(_(h,i,r,n),s){const e=new c({fontSize:r,buffer:o,radius:a,cutoff:l,fontFamily:i,fontWeight:"".concat(n)});for(const i of t){const{data:t,width:n,height:o,glyphTop:s}=e.draw(i);d[i].width=n,d[i].layoutOffsetY=.9*r-s;const a=h.createImageData(n,o);b(t,a),h.putImageData(a,d[i].x,d[i].y)}}else for(const e of t)h.fillText(e,d[e].x,d[e].y+o+.9*r);return{xOffset:f,yOffset:p,mapping:d,data:u,width:u.width,height:u.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:i,buffer:n,sdf:r,radius:o,cutoff:s}=this.props;return r?"".concat(t," ").concat(e," ").concat(i," ").concat(n," ").concat(o," ").concat(s):"".concat(t," ").concat(e," ").concat(i," ").concat(n)}}var x=i(1130);const C={start:1,middle:0,end:-1},E={top:1,center:0,bottom:-1},k=[0,0,0,255],T={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:k},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:v.characterSet},fontFamily:v.fontFamily,fontWeight:v.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:k},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:k},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class B extends r.Z{constructor(...t){super(...t),(0,n.Z)(this,"state",void 0),(0,n.Z)(this,"getBoundingRect",((t,e)=>{let{size:[i,n]}=this.transformParagraph(t,e);const{fontSize:r}=this.state.fontAtlasManager.props;i/=r,n/=r;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(C["function"==typeof o?o(t,e):o]-1)*i/2,(E["function"==typeof s?s(t,e):s]-1)*n/2,i,n]})),(0,n.Z)(this,"getIconOffsets",((t,e)=>{const{getTextAnchor:i,getAlignmentBaseline:n}=this.props,{x:r,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(t,e),c=C["function"==typeof i?i(t,e):i],u=E["function"==typeof n?n(t,e):n],h=r.length,d=new Array(2*h);let A=0;for(let t=0;t<h;t++){const e=(1-c)*(a-s[t])/2;d[A++]=(c-1)*a/2+e+r[t],d[A++]=(u-1)*l/2+o[t]}return d}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new w},this.props.maxWidth>0&&o.Z.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:i,changeFlags:n}=t;(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||e.lineHeight!==i.lineHeight||e.wordBreak!==i.wordBreak||e.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:i}=this.props,{fontAtlasManager:n,characterSet:r}=this.state,o={...t,characterSet:r,fontFamily:e,fontWeight:i};if(!n.mapping)return n.setProps(o),!0;for(const t in o)if(o[t]!==n.props[t])return n.setProps(o),!0;return!1}_updateText(){var t;const{data:e,characterSet:i}=this.props,n=null===(t=e.attributes)||void 0===t?void 0:t.getText;let r,{getText:o}=this.props,a=e.startIndices;const l="auto"===i&&new Set;if(n&&a){const{texts:t,characterCount:i}=function({value:t,length:e,stride:i,offset:n,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=i?i/s:1,l=n?n/s:0,c=r[e]||Math.ceil((t.length-l)/a),u=o&&new Set,h=new Array(e);let d=t;if(a>1||l>0){d=new(0,t.constructor)(c);for(let e=0;e<c;e++)d[e]=t[e*a+l]}for(let t=0;t<e;t++){const e=r[t],i=r[t+1]||c,n=d.subarray(e,i);h[t]=String.fromCodePoint.apply(null,n),u&&n.forEach(u.add,u)}if(u)for(const t of u)o.add(String.fromCodePoint(t));return{texts:h,characterCount:c}}({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:a,characterSet:l});r=i,o=(e,{index:i})=>t[i]}else{const{iterable:t,objectInfo:i}=(0,s.jB)(e);a=[0],r=0;for(const e of t){i.index++;const t=Array.from(o(e,i)||"");l&&t.forEach(l.add,l),r+=t.length,a.push(r)}}this.setState({getText:o,startIndices:a,numInstances:r,characterSet:l||i})}transformParagraph(t,e){const{fontAtlasManager:i}=this.state,n=i.mapping,r=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(t,e,i,n,r){const o=Array.from(t),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===i||"break-all"===i)&&isFinite(n)&&n>0,h=[0,0],A=[0,0];let f=0,m=0,v=0;for(let t=0;t<=s;t++){const b=o[t];if("\n"!==b&&t!==s||(v=t),v>m){const t=u?p(o,i,n,r,m,v):d;for(let i=0;i<=t.length;i++){const n=0===i?m:t[i-1],s=i<t.length?t[i]:v;g(o,n,s,r,a,A);for(let t=n;t<s;t++){var y;const e=(null===(y=r[o[t]])||void 0===y?void 0:y.layoutOffsetY)||0;l[t]=f+A[1]/2+e,c[t]=A[0]}f+=A[1]*e,h[0]=Math.max(h[0],A[0])}m=v}"\n"===b&&(a[m]=0,l[m]=0,c[m]=0,m++)}return h[1]=f,{x:a,y:l,rowWidth:c,size:h}}(r(t,e)||"",s,o,a*i.props.fontSize,n)}renderLayers(){const{startIndices:t,numInstances:e,getText:i,fontAtlasManager:{scale:n,texture:r,mapping:o},styleVersion:s}=this.state,{data:l,_dataDiff:c,getPosition:u,getColor:h,getSize:d,getAngle:A,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:b,billboard:_,fontSettings:w,outlineWidth:C,outlineColor:E,sizeScale:k,sizeUnits:T,sizeMinPixels:B,sizeMaxPixels:S,transitions:P,updateTriggers:M}=this.props,I=this.getSubLayerClass("characters",a.Z),O=this.getSubLayerClass("background",x.Z);return[b&&new O({getFillColor:p,getLineColor:g,getLineWidth:m,padding:y,getPosition:u,getSize:d,getAngle:A,getPixelOffset:f,billboard:_,sizeScale:k,sizeUnits:T,sizeMinPixels:B,sizeMaxPixels:S,transitions:P&&{getPosition:P.getPosition,getAngle:P.getAngle,getSize:P.getSize,getFillColor:P.getBackgroundColor,getLineColor:P.getBorderColor,getLineWidth:P.getBorderWidth,getPixelOffset:P.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:M.getPosition,getAngle:M.getAngle,getSize:M.getSize,getFillColor:M.getBackgroundColor,getLineColor:M.getBorderColor,getLineWidth:M.getBorderWidth,getPixelOffset:M.getPixelOffset,getBoundingRect:{getText:M.getText,getTextAnchor:M.getTextAnchor,getAlignmentBaseline:M.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new I({sdf:w.sdf,smoothing:Number.isFinite(w.smoothing)?w.smoothing:v.smoothing,outlineWidth:C/(w.radius||v.radius),outlineColor:E,iconAtlas:r,iconMapping:o,getPosition:u,getColor:h,getSize:d,getAngle:A,getPixelOffset:f,billboard:_,sizeScale:k*n,sizeUnits:T,sizeMinPixels:B*n,sizeMaxPixels:S*n,transitions:P&&{getPosition:P.getPosition,getAngle:P.getAngle,getColor:P.getColor,getSize:P.getSize,getPixelOffset:P.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:M.getText,getPosition:M.getPosition,getAngle:M.getAngle,getColor:M.getColor,getSize:M.getSize,getPixelOffset:M.getPixelOffset,getIconOffsets:{getTextAnchor:M.getTextAnchor,getAlignmentBaseline:M.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:c,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(t){!function(t){o.Z.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),y=new m(t)}(t)}}(0,n.Z)(B,"defaultProps",T),(0,n.Z)(B,"layerName","TextLayer")},8452:(t,e,i)=>{"use strict";function n({data:t,getIndex:e,dataRange:i,replace:n}){const{startRow:r=0,endRow:o=1/0}=i,s=t.length;let a=s,l=s;for(let i=0;i<s;i++){const n=e(t[i]);if(a>i&&n>=r&&(a=i),n>=o){l=i;break}}let c=a;const u=l-a!==n.length?t.slice(l):void 0;for(let e=0;e<n.length;e++)t[c++]=n[e];if(u){for(let e=0;e<u.length;e++)t[c++]=u[e];t.length=c}return{startRow:a,endRow:a+n.length}}i.d(e,{b:()=>n})},5771:(t,e)=>{var i=function(){"use strict";function t(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}var e=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fullIcon=e.iconDefaults=e.minifyProps=e.matchName=void 0,e.matchName=/^[a-z0-9]+(-[a-z0-9]+)*$/,e.minifyProps=["width","height","top","left"],e.iconDefaults=Object.freeze({left:0,top:0,width:16,height:16,rotate:0,vFlip:!1,hFlip:!1}),e.fullIcon=function(t){return Object.assign({},e.iconDefaults,t)}})),i=t((function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.mergeIconData=void 0,i.mergeIconData=function(t,i){var n=Object.assign({},t);for(var r in e.iconDefaults){var o=r;if(void 0!==i[o]){var s=i[o];if(void 0===n[o]){n[o]=s;continue}switch(o){case"rotate":n[o]=(n[o]+s)%4;break;case"hFlip":case"vFlip":n[o]=s!==n[o];break;default:n[o]=s}}}return n}})),n=t((function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseIconSet=void 0;var r=Object.keys(e.iconDefaults);function o(t,e,n,r){void 0===r&&(r=0);var s=t.parent;if(void 0!==e[s])return i.mergeIconData(e[s],t);if(void 0!==n[s]){if(r>2)return null;var a=o(n[s],e,n,r+1);if(a)return i.mergeIconData(a,t)}return null}n.parseIconSet=function(t,i,n){void 0===n&&(n="none");var s=[];if("object"!=typeof t)return"none"!==n&&s;if(t.not_found instanceof Array&&t.not_found.forEach((function(t){i(t,null),"all"===n&&s.push(t)})),"object"!=typeof t.icons)return"none"!==n&&s;var a=Object.create(null);r.forEach((function(e){void 0!==t[e]&&"object"!=typeof t[e]&&(a[e]=t[e])}));var l=t.icons;if(Object.keys(l).forEach((function(t){var n=l[t];"string"==typeof n.body&&(i(t,Object.freeze(Object.assign({},e.iconDefaults,a,n))),s.push(t))})),"object"==typeof t.aliases){var c=t.aliases;Object.keys(c).forEach((function(t){var n=o(c[t],l,c,1);n&&(i(t,Object.freeze(Object.assign({},e.iconDefaults,a,n))),s.push(t))}))}return"none"===n?s.length>0:s}})),r=t((function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateIcon=i.stringToIcon=void 0,i.stringToIcon=function(t,e,n,r){void 0===r&&(r="");var o=t.split(":");if("@"===t.slice(0,1)){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){var s=o.pop(),a=o.pop(),l={provider:o.length>0?o[0]:r,prefix:a,name:s};return e&&!i.validateIcon(l)?null:l}var c=o[0],u=c.split("-");if(u.length>1){var h={provider:r,prefix:u.shift(),name:u.join("-")};return e&&!i.validateIcon(h)?null:h}if(n&&""===r){var d={provider:r,prefix:"",name:c};return e&&!i.validateIcon(d,n)?null:d}return null},i.validateIcon=function(t,i){return!!t&&!(""!==t.provider&&!t.provider.match(e.matchName)||!(i&&""===t.prefix||t.prefix.match(e.matchName))||!t.name.match(e.matchName))}})),o=t((function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.listIcons=i.getIcon=i.iconExists=i.addIcon=i.addIconSet=i.getStorage=i.newStorage=void 0;var r=Object.create(null);function o(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:Object.create(null)}}function s(t,e){void 0===r[t]&&(r[t]=Object.create(null));var i=r[t];return void 0===i[e]&&(i[e]=o(t,e)),i[e]}i.newStorage=o,i.getStorage=s,i.addIconSet=function(t,e,i){void 0===i&&(i="none");var r=Date.now();return n.parseIconSet(e,(function(e,i){null===i?t.missing[e]=r:t.icons[e]=i}),i)},i.addIcon=function(t,i,n){try{if("string"==typeof n.body)return t.icons[i]=Object.freeze(e.fullIcon(n)),!0}catch(t){}return!1},i.iconExists=function(t,e){return void 0!==t.icons[e]},i.getIcon=function(t,e){var i=t.icons[e];return void 0===i?null:i},i.listIcons=function(t,e){var i=[];return("string"==typeof t?[t]:Object.keys(r)).forEach((function(t){("string"==typeof t&&"string"==typeof e?[e]:void 0===r[t]?[]:Object.keys(r[t])).forEach((function(e){var n=s(t,e),r=Object.keys(n.icons).map((function(i){return(""!==t?"@"+t+":":"")+e+":"+i}));i=i.concat(r)}))})),i}})),s=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.storageFunctions=e.addCollection=e.addIcon=e.getIconData=e.allowSimpleNames=void 0;var i=!1;function s(t){var e="string"==typeof t?r.stringToIcon(t,!0,i):t;return e?o.getIcon(o.getStorage(e.provider,e.prefix),e.name):null}function a(t,e){var n=r.stringToIcon(t,!0,i);if(!n)return!1;var s=o.getStorage(n.provider,n.prefix);return o.addIcon(s,n.name,e)}function l(t,e){if("object"!=typeof t)return!1;if("string"!=typeof e&&(e="string"==typeof t.provider?t.provider:""),i&&""===e&&("string"!=typeof t.prefix||""===t.prefix)){var s=!1;return n.parseIconSet(t,(function(t,e){null!==e&&a(t,e)&&(s=!0)})),s}if("string"!=typeof t.prefix||!r.validateIcon({provider:e,prefix:t.prefix,name:"a"}))return!1;var l=o.getStorage(e,t.prefix);return!!o.addIconSet(l,t)}e.allowSimpleNames=function(t){return"boolean"==typeof t&&(i=t),i},e.getIconData=s,e.addIcon=a,e.addCollection=l,e.storageFunctions={iconExists:function(t){return null!==s(t)},getIcon:function(t){var e=s(t);return e?Object.assign({},e):null},listIcons:o.listIcons,addIcon:a,addCollection:l}})),a=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.replaceIDs=void 0;var i=/\sid="(\S+)"/g,n="([^A-Za-z0-9_-])",r="IconifyId-"+Date.now().toString(16)+"-"+(16777216*Math.random()|0).toString(16)+"-",o=0;e.replaceIDs=function(t,e){void 0===e&&(e=r);for(var s,a=[];s=i.exec(t);)a.push(s[1]);return a.length?(a.forEach((function(i){var r="function"==typeof e?e():e+o++;t=t.replace(new RegExp(n+"("+i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+")"+n,"g"),"$1"+r+"$3")})),t):t}})),l=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSize=void 0;var i=/(-?[0-9.]*[0-9]+[0-9.]*)/g,n=/^-?[0-9.]*[0-9]+[0-9.]*$/g;e.calculateSize=function(t,e,r){if(1===e)return t;if(r=void 0===r?100:r,"number"==typeof t)return Math.ceil(t*e*r)/r;if("string"!=typeof t)return t;var o=t.split(i);if(null===o||!o.length)return t;for(var s=[],a=o.shift(),l=n.test(a);;){if(l){var c=parseFloat(a);isNaN(c)?s.push(a):s.push(Math.ceil(c*e*r)/r)}else s.push(a);if(void 0===(a=o.shift()))return s.join("");l=!l}}})),c=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeCustomisations=e.defaults=void 0,e.defaults=Object.freeze({inline:!1,width:null,height:null,hAlign:"center",vAlign:"middle",slice:!1,hFlip:!1,vFlip:!1,rotate:0}),e.mergeCustomisations=function(t,e){var i={};for(var n in t){var r=n;if(i[r]=t[r],void 0!==e[r]){var o=e[r];switch(r){case"inline":case"slice":"boolean"==typeof o&&(i[r]=o);break;case"hFlip":case"vFlip":!0===o&&(i[r]=!i[r]);break;case"hAlign":case"vAlign":"string"==typeof o&&""!==o&&(i[r]=o);break;case"width":case"height":("string"==typeof o&&""!==o||"number"==typeof o&&o||null===o)&&(i[r]=o);break;case"rotate":"number"==typeof o&&(i[r]+=o)}}}return i}})),u=t((function(t,e){function i(t){var e="";switch(t.hAlign){case"left":e+="xMin";break;case"right":e+="xMax";break;default:e+="xMid"}switch(t.vAlign){case"top":e+="YMin";break;case"bottom":e+="YMax";break;default:e+="YMid"}return e+(t.slice?" slice":" meet")}Object.defineProperty(e,"__esModule",{value:!0}),e.iconToSVG=void 0,e.iconToSVG=function(t,e){var n,r,o={left:t.left,top:t.top,width:t.width,height:t.height},s=t.body;[t,e].forEach((function(t){var e,i=[],n=t.hFlip,r=t.vFlip,a=t.rotate;switch(n?r?a+=2:(i.push("translate("+(o.width+o.left)+" "+(0-o.top)+")"),i.push("scale(-1 1)"),o.top=o.left=0):r&&(i.push("translate("+(0-o.left)+" "+(o.height+o.top)+")"),i.push("scale(1 -1)"),o.top=o.left=0),a<0&&(a-=4*Math.floor(a/4)),a%=4){case 1:e=o.height/2+o.top,i.unshift("rotate(90 "+e+" "+e+")");break;case 2:i.unshift("rotate(180 "+(o.width/2+o.left)+" "+(o.height/2+o.top)+")");break;case 3:e=o.width/2+o.left,i.unshift("rotate(-90 "+e+" "+e+")")}a%2==1&&(0===o.left&&0===o.top||(e=o.left,o.left=o.top,o.top=e),o.width!==o.height&&(e=o.width,o.width=o.height,o.height=e)),i.length&&(s='<g transform="'+i.join(" ")+'">'+s+"</g>")})),null===e.width&&null===e.height?(r="1em",n=l.calculateSize(r,o.width/o.height)):null!==e.width&&null!==e.height?(n=e.width,r=e.height):null!==e.height?(r=e.height,n=l.calculateSize(r,o.width/o.height)):(n=e.width,r=l.calculateSize(n,o.height/o.width)),"auto"===n&&(n=o.width),"auto"===r&&(r=o.height);var a={attributes:{width:n="string"==typeof n?n:n+"",height:r="string"==typeof r?r:r+"",preserveAspectRatio:i(e),viewBox:o.left+" "+o.top+" "+o.width+" "+o.height},body:s};return e.inline&&(a.inline=!0),a}})),h=t((function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.builderFunctions=void 0,i.builderFunctions={replaceIDs:a.replaceIDs,calculateSize:l.calculateSize,buildIcon:function(t,i){return u.iconToSVG(e.fullIcon(t),c.mergeCustomisations(c.defaults,i))}}})),d=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.coreModules=void 0,e.coreModules={}})),A=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.storeCache=e.loadCache=e.mock=e.emptyList=e.count=e.config=void 0;var i="iconify2",n="iconify",r="iconify-count",s="iconify-version",a=36e5;e.config={local:!0,session:!0};var l=!1;e.count={local:0,session:0},e.emptyList={local:[],session:[]};var c="undefined"==typeof window?{}:window;function u(t){var i=t+"Storage";try{if(c&&c[i]&&"number"==typeof c[i].length)return c[i]}catch(t){}return e.config[t]=!1,null}function h(t,i,n){try{return t.setItem(r,n+""),e.count[i]=n,!0}catch(t){return!1}}function d(t){var e=t.getItem(r);return e&&parseInt(e)||0}e.mock=function(t){l=!1,c=t},e.loadCache=function(){if(!l){l=!0;var t=Math.floor(Date.now()/a)-168;for(var r in e.config)c(r)}function c(r){var a=u(r);if(a){var l=function(e){var i=n+e,r=a.getItem(i);if("string"!=typeof r)return!1;var s=!0;try{var l=JSON.parse(r);if("object"!=typeof l||"number"!=typeof l.cached||l.cached<t||"string"!=typeof l.provider||"object"!=typeof l.data||"string"!=typeof l.data.prefix)s=!1;else{var c=l.provider,u=l.data.prefix,h=o.getStorage(c,u);s=o.addIconSet(h,l.data)}}catch(t){s=!1}return s||a.removeItem(i),s};try{var c=a.getItem(s);if(c!==i)return c&&function(t){try{for(var e=d(t),i=0;i<e;i++)t.removeItem(n+i)}catch(t){}}(a),void function(t,e){try{t.setItem(s,i)}catch(t){}h(t,e,0)}(a,r);for(var A=d(a),f=A-1;f>=0;f--)l(f)||(f===A-1?A--:e.emptyList[r].push(f));h(a,r,A)}catch(t){}}}},e.storeCache=function(t,i){function r(r){if(!e.config[r])return!1;var o=u(r);if(!o)return!1;var s=e.emptyList[r].shift();if(void 0===s&&!h(o,r,(s=e.count[r])+1))return!1;try{var l={cached:Math.floor(Date.now()/a),provider:t,data:i};o.setItem(n+s,JSON.stringify(l))}catch(t){return!1}return!0}l||e.loadCache(),r("local")||r("session")}})),f=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.toggleBrowserCache=void 0,e.toggleBrowserCache=function(t,e){switch(t){case"local":case"session":A.config[t]=e;break;case"all":for(var i in A.config)A.config[i]=e}}})),p=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultConfig=void 0,e.defaultConfig={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1}})),g=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sendQuery=void 0,e.sendQuery=function(t,e,i,n,r){var o,s=t.resources.length,a=t.random?Math.floor(Math.random()*s):t.index;if(t.random){var l=t.resources.slice(0);for(o=[];l.length>1;){var c=Math.floor(Math.random()*l.length);o.push(l[c]),l=l.slice(0,c).concat(l.slice(c+1))}o=o.concat(l)}else o=t.resources.slice(a).concat(t.resources.slice(0,a));var u=Date.now(),h="pending",d=0,A=void 0,f=null,p=[],g=[];function m(){f&&(clearTimeout(f),f=null)}function v(){"pending"===h&&(h="aborted"),m(),p.forEach((function(t){t.abort&&t.abort(),"pending"===t.status&&(t.status="aborted")})),p=[]}function y(t,e){e&&(g=[]),"function"==typeof t&&g.push(t)}function b(){return{startTime:u,payload:e,status:h,queriesSent:d,queriesPending:p.length,subscribe:y,abort:v}}function _(){h="failed",g.forEach((function(t){t(void 0,A)}))}function w(){p=p.filter((function(t){return"pending"===t.status&&(t.status="aborted"),t.abort&&t.abort(),!1}))}return"function"==typeof n&&g.push(n),setTimeout((function n(){if("pending"===h){m();var s=o.shift();if(void 0!==s){var a={getQueryStatus:b,status:"pending",resource:s,done:function(e,i){!function(e,i,s){var a=void 0===i;switch(p=p.filter((function(t){return t!==e})),h){case"pending":break;case"failed":if(a||!t.dataAfterTimeout)return;break;default:return}if(a)return void 0!==s&&(A=s),void(p.length||(o.length?n():_()));if(m(),w(),r&&!t.random){var l=t.resources.indexOf(e.resource);-1!==l&&l!==t.index&&r(l)}h="completed",g.forEach((function(t){t(i)}))}(a,e,i)}};p.push(a),d++;var l="function"==typeof t.rotate?t.rotate(d,u):t.rotate;f=setTimeout(n,l),i(s,e,a)}else{if(p.length){var c="function"==typeof t.timeout?t.timeout(u):t.timeout;if(c)return void(f=setTimeout((function(){m(),"pending"===h&&(w(),_())}),c))}_()}}})),b}})),m=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.initRedundancy=void 0,e.initRedundancy=function(t){var e=function(t){if(!("object"==typeof t&&"object"==typeof t.resources&&t.resources instanceof Array&&t.resources.length))throw new Error("Invalid Reduncancy configuration");var e,i=Object.create(null);for(e in p.defaultConfig)void 0!==t[e]?i[e]=t[e]:i[e]=p.defaultConfig[e];return i}(t),i=[];function n(){i=i.filter((function(t){return"pending"===t().status}))}return{query:function(t,r,o){var s=g.sendQuery(e,t,r,(function(t,e){n(),o&&o(t,e)}),(function(t){e.index=t}));return i.push(s),s},find:function(t){var e=i.find((function(e){return t(e)}));return void 0!==e?e:null},setIndex:function(t){e.index=t},getIndex:function(){return e.index},cleanup:n}}})),v=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sortIcons=void 0,e.sortIcons=function(t){var e={loaded:[],missing:[],pending:[]},i=Object.create(null);t.sort((function(t,e){return t.provider!==e.provider?t.provider.localeCompare(e.provider):t.prefix!==e.prefix?t.prefix.localeCompare(e.prefix):t.name.localeCompare(e.name)}));var n={provider:"",prefix:"",name:""};return t.forEach((function(t){if(n.name!==t.name||n.prefix!==t.prefix||n.provider!==t.provider){n=t;var r=t.provider,s=t.prefix,a=t.name;void 0===i[r]&&(i[r]=Object.create(null));var l=i[r];void 0===l[s]&&(l[s]=o.getStorage(r,s));var c=l[s],u={provider:r,prefix:s,name:a};(void 0!==c.icons[a]?e.loaded:""===s||void 0!==c.missing[a]?e.missing:e.pending).push(u)}})),e}})),y=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.storeCallback=e.updateCallbacks=e.callbacks=void 0,e.callbacks=Object.create(null);var i=Object.create(null);function n(t,i){t.forEach((function(t){var n=t.provider;if(void 0!==e.callbacks[n]){var r=e.callbacks[n],o=t.prefix,s=r[o];s&&(r[o]=s.filter((function(t){return t.id!==i})))}}))}e.updateCallbacks=function(t,r){void 0===i[t]&&(i[t]=Object.create(null));var s=i[t];s[r]||(s[r]=!0,setTimeout((function(){if(s[r]=!1,void 0!==e.callbacks[t]&&void 0!==e.callbacks[t][r]){var i=e.callbacks[t][r].slice(0);if(i.length){var a=o.getStorage(t,r),l=!1;i.forEach((function(e){var i=e.icons,o=i.pending.length;i.pending=i.pending.filter((function(e){if(e.prefix!==r)return!0;var n=e.name;if(void 0!==a.icons[n])i.loaded.push({provider:t,prefix:r,name:n});else{if(void 0===a.missing[n])return l=!0,!0;i.missing.push({provider:t,prefix:r,name:n})}return!1})),i.pending.length!==o&&(l||n([{provider:t,prefix:r}],e.id),e.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),e.abort))}))}}})))};var r=0;e.storeCallback=function(t,i,o){var s=r++,a=n.bind(null,o,s);if(!i.pending.length)return a;var l={id:s,icons:i,callback:t,abort:a};return o.forEach((function(t){var i=t.provider,n=t.prefix;void 0===e.callbacks[i]&&(e.callbacks[i]=Object.create(null));var r=e.callbacks[i];void 0===r[n]&&(r[n]=[]),r[n].push(l)})),a}})),b=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getAPIModule=e.setAPIModule=void 0;var i=Object.create(null);e.setAPIModule=function(t,e){i[t]=e},e.getAPIModule=function(t){return void 0===i[t]?i[""]:i[t]}})),_=t((function(t,e){function i(t){var e;if("string"==typeof t.resources)e=[t.resources];else if(!((e=t.resources)instanceof Array&&e.length))return null;return{resources:e,path:void 0===t.path?"/":t.path,maxURL:t.maxURL?t.maxURL:500,rotate:t.rotate?t.rotate:750,timeout:t.timeout?t.timeout:5e3,random:!0===t.random,index:t.index?t.index:0,dataAfterTimeout:!1!==t.dataAfterTimeout}}Object.defineProperty(e,"__esModule",{value:!0}),e.getAPIConfig=e.setAPIConfig=void 0;for(var n=Object.create(null),r=["https://api.simplesvg.com","https://api.unisvg.com"],o=[];r.length>0;)1===r.length||Math.random()>.5?o.push(r.shift()):o.push(r.pop());n[""]=i({resources:["https://api.iconify.design"].concat(o)}),e.setAPIConfig=function(t,e){var r=i(e);return null!==r&&(n[t]=r,!0)},e.getAPIConfig=function(t){return n[t]}})),w=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getProviders=e.listToIcons=void 0,e.listToIcons=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n=[];return t.forEach((function(t){var o="string"==typeof t?r.stringToIcon(t,!1,i):t;e&&!r.validateIcon(o,i)||n.push({provider:o.provider,prefix:o.prefix,name:o.name})})),n},e.getProviders=function(t){var e=Object.create(null);return t.forEach((function(t){e[t.provider]=!0})),Object.keys(e)}})),x=t((function(t,e){function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.API=e.getRedundancyCache=void 0;var n=Object.create(null),r=Object.create(null),a=Object.create(null),l=Object.create(null),c=Object.create(null);function u(t){if(void 0===c[t]){var e=_.getAPIConfig(t);if(!e)return;var i={config:e,redundancy:m.initRedundancy(e)};c[t]=i}return c[t]}e.getRedundancyCache=u;var h=Object.create(null);function A(t,e,i){function s(){var i=(""===t?"":"@"+t+":")+e,n=Math.floor(Date.now()/6e4);h[i]<n&&(h[i]=n,console.error('Unable to retrieve icons for "'+i+'" because API is not configured properly.'))}void 0===r[t]&&(r[t]=Object.create(null));var c=r[t];void 0===l[t]&&(l[t]=Object.create(null));var A=l[t];void 0===n[t]&&(n[t]=Object.create(null));var f,p=n[t];void 0===c[e]?c[e]=i:c[e]=c[e].concat(i).sort(),A[e]||(A[e]=!0,setTimeout((function(){A[e]=!1;var i=c[e];delete c[e];var n=b.getAPIModule(t);if(n){if(void 0===f){var r=u(t);if(void 0===r)return void s();f=r}n.prepare(t,e,i).forEach((function(i){f.redundancy.query(i,n.send,(function(n,r){var s=o.getStorage(t,e);if("object"!=typeof n){if(404!==r)return;var l=Date.now();i.icons.forEach((function(t){s.missing[t]=l}))}else try{var c=o.addIconSet(s,n,"all");if("boolean"==typeof c)return;var u=p[e];c.forEach((function(t){delete u[t]})),d.coreModules.cache&&d.coreModules.cache(t,n)}catch(t){console.error(t)}!function(t,e){void 0===a[t]&&(a[t]=Object.create(null));var i=a[t];i[e]||(i[e]=!0,setTimeout((function(){i[e]=!1,y.updateCallbacks(t,e)})))}(t,e)}))}))}else s()})))}e.API={isPending:function(t){return void 0!==n[t.provider]&&void 0!==n[t.provider][t.prefix]&&void 0!==n[t.provider][t.prefix][t.name]},loadIcons:function(t,e){var r=w.listToIcons(t,!0,s.allowSimpleNames()),o=v.sortIcons(r);if(!o.pending.length){var a=!0;return e&&setTimeout((function(){a&&e(o.loaded,o.missing,o.pending,i)})),function(){a=!1}}var l,c,u=Object.create(null),h=[];o.pending.forEach((function(t){var e=t.provider,i=t.prefix;if(i!==c||e!==l){l=e,c=i,h.push({provider:e,prefix:i}),void 0===n[e]&&(n[e]=Object.create(null));var r=n[e];void 0===r[i]&&(r[i]=Object.create(null)),void 0===u[e]&&(u[e]=Object.create(null));var o=u[e];void 0===o[i]&&(o[i]=[])}}));var d=Date.now();return o.pending.forEach((function(t){var e=t.provider,i=t.prefix,r=t.name,o=n[e][i];void 0===o[r]&&(o[r]=d,u[e][i].push(r))})),h.forEach((function(t){var e=t.provider,i=t.prefix;u[e][i].length&&A(e,i,u[e][i])})),e?y.storeCallback(e,o,h):i}}})),C=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.APIInternalFunctions=e.APIFunctions=void 0,e.APIFunctions={loadIcons:x.API.loadIcons,addAPIProvider:_.setAPIConfig},e.APIInternalFunctions={getAPI:x.getRedundancyCache,getAPIConfig:_.getAPIConfig,setAPIModule:b.setAPIModule}})),E=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getAPIModule=void 0;var i=null,n="{prefix}.js?icons={icons}&callback={callback}",r=Object.create(null),o=Object.create(null);function s(){if(null===i){var t=self,e="Iconify",r=".cb";if(void 0===t[e])r="",void 0===t[e="IconifyJSONP"]&&(t[e]=Object.create(null)),i=t[e];else{var o=t[e];void 0===o.cb&&(o.cb=Object.create(null)),i=o.cb}n=n.replace("{callback}",e+r+".{cb}")}return i}e.getAPIModule=function(t){return{prepare:function(e,i,a){var l=[],c=r[e+":"+i];void 0===c&&(c=function(e,i){var a,l=t(e);if(!l)return 0;if(l.maxURL){var c=0;l.resources.forEach((function(t){var e=t;c=Math.max(c,e.length)})),s(),a=l.maxURL-c-l.path.length-n.replace("{provider}",e).replace("{prefix}",i).replace("{icons}","").length-3}else a=0;var u=e+":"+i;return o[u]=l.path,r[u]=a,a}(e,i));var u={provider:e,prefix:i,icons:[]},h=0;return a.forEach((function(t,n){(h+=t.length+1)>=c&&n>0&&(l.push(u),u={provider:e,prefix:i,icons:[]},h=t.length),u.icons.push(t)})),l.push(u),l},send:function(t,e,i){for(var r=e.provider,a=e.prefix,l=e.icons.join(","),c=r+":"+a,u=a.split("-").shift().slice(0,3),h=s(),d=function(t){var e,i=0;for(e=t.length-1;e>=0;e--)i+=t.charCodeAt(e);return i%999}(r+":"+t+":"+a+":"+l);void 0!==h[u+d];)d++;var A=u+d,f=o[c]+n.replace("{provider}",r).replace("{prefix}",a).replace("{icons}",l).replace("{cb}",A);h[A]=function(t){delete h[A],i.done(t)};var p=t+f,g=document.createElement("script");g.type="text/javascript",g.async=!0,g.src=p,document.head.appendChild(g)}}}})),k=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getAPIModule=e.setFetch=void 0;var i="{prefix}.json?icons={icons}",n=Object.create(null),r=Object.create(null),o=null;try{o=fetch}catch(t){}e.setFetch=function(t){o=t},e.getAPIModule=function(t){return{prepare:function(e,o,s){var a=[],l=n[o];void 0===l&&(l=function(e,o){var s,a=t(e);if(!a)return 0;if(a.maxURL){var l=0;a.resources.forEach((function(t){var e=t;l=Math.max(l,e.length)})),s=a.maxURL-l-a.path.length-i.replace("{provider}",e).replace("{prefix}",o).replace("{icons}","").length}else s=0;var c=e+":"+o;return r[c]=a.path,n[c]=s,s}(e,o));var c={provider:e,prefix:o,icons:[]},u=0;return s.forEach((function(t,i){(u+=t.length+1)>=l&&i>0&&(a.push(c),c={provider:e,prefix:o,icons:[]},u=t.length),c.icons.push(t)})),a.push(c),a},send:function(t,e,n){var s=e.provider,a=e.prefix,l=e.icons.join(","),c=r[s+":"+a]+i.replace("{provider}",s).replace("{prefix}",a).replace("{icons}",l);o?o(t+c).then((function(t){if(200===t.status)return t.json();n.done(void 0,t.status)})).then((function(t){"object"==typeof t&&null!==t&&n.done(t)})).catch((function(t){n.done(void 0,t.errno)})):n.done(void 0,424)}}}})),T="iconifyFinder"+Date.now(),B="iconifyData"+Date.now();function S(t,e,i,n){var r;try{r=document.createElement("span")}catch(t){return n?"":null}var o=u.iconToSVG(i,c.mergeCustomisations(c.defaults,e)),s=t.element,l=t.finder,h=t.name,d=s?s.getAttribute("class"):"",A=l?l.classFilter(d?d.split(/\s+/):[]):[],f='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--'+h.prefix+(""===h.provider?"":" iconify--"+h.provider)+(A.length?" "+A.join(" "):"")+'">'+a.replaceIDs(o.body)+"</svg>";r.innerHTML=f;var p=r.childNodes[0],g=p.style,m=o.attributes;if(Object.keys(m).forEach((function(t){p.setAttribute(t,m[t])})),o.inline&&(g.verticalAlign="-0.125em"),s){for(var v=s.attributes,y=0;y<v.length;y++){var b=v.item(y);if(b){var _=b.name;if("class"!==_&&"style"!==_&&void 0===m[_])try{p.setAttribute(_,b.value)}catch(t){}}}for(var w=s.style,x=0;x<w.length;x++){var C=w[x];g[C]=w[C]}}if(l){var E={name:h,status:"loaded",customisations:e};p[B]=E,p[T]=l}var k=n?r.innerHTML:p;return s&&s.parentNode?s.parentNode.replaceChild(p,s):r.removeChild(p),k}var P=[];function M(t){for(var e=0;e<P.length;e++){var i=P[e];if(("function"==typeof i.node?i.node():i.node)===t)return i}}function I(t,e){void 0===e&&(e=!1);var i=M(t);return i?(i.temporary&&(i.temporary=e),i):(i={node:t,temporary:e},P.push(i),i)}function O(){return P}var D=null,L={childList:!0,subtree:!0,attributes:!0};function F(t){if(t.observer){var e=t.observer;e.pendingScan||(e.pendingScan=setTimeout((function(){delete e.pendingScan,D&&D(t)})))}}function R(t,e){if(t.observer){var i=t.observer;if(!i.pendingScan)for(var n=0;n<e.length;n++){var r=e[n];if(r.addedNodes&&r.addedNodes.length>0||"attributes"===r.type&&void 0!==r.target[T])return void(i.paused||F(t))}}}function N(t,e){t.observer.instance.observe(e,L)}function z(t){var e=t.observer;if(!e||!e.instance){var i="function"==typeof t.node?t.node():t.node;i&&(e||(e={paused:0},t.observer=e),e.instance=new MutationObserver(R.bind(null,t)),N(t,i),e.paused||F(t))}}function j(){O().forEach(z)}function U(t){if(t.observer){var e=t.observer;e.pendingScan&&(clearTimeout(e.pendingScan),delete e.pendingScan),e.instance&&(e.instance.disconnect(),delete e.instance)}}function Z(t){(t?[t]:O()).forEach((function(t){if(t.observer){var e=t.observer;e.paused++,e.paused>1||!e.instance||e.instance.disconnect()}else t.observer={paused:1}}))}function H(t){(t?[t]:O()).forEach((function(t){if(t.observer){var e=t.observer;if(e.paused&&(e.paused--,!e.paused)){var i="function"==typeof t.node?t.node():t.node;if(!i)return;e.instance?N(t,i):z(t)}}else z(t)}))}function G(t,e){void 0===e&&(e=!1);var i=I(t,e);return z(i),i}function V(t){var e=M(t);e&&(U(e),function(t){P=P.filter((function(e){var i="function"==typeof e.node?e.node():e.node;return t!==i}))}(t))}var W=[];function q(t){return"string"==typeof t&&(t=r.stringToIcon(t)),null!==t&&r.validateIcon(t)?t:null}var Q=!1;function Y(){Q||(Q=!0,setTimeout((function(){Q&&(Q=!1,X())})))}function X(t,e){void 0===e&&(e=!1),Q=!1;var i=Object.create(null);if((t?[t]:O()).forEach((function(t){var n="function"==typeof t.node?t.node():t.node;if(n&&n.querySelectorAll){var r=!1,s=!1;(function(t){var e=[];W.forEach((function(i){var n=i.find(t);Array.prototype.forEach.call(n,(function(t){var n=t;if(void 0===n[T]||n[T]===i){var r=q(i.name(n));if(null!==r){n[T]=i;var o={element:n,finder:i,name:r};e.push(o)}}}))}));var i=t.querySelectorAll("svg.iconify");return Array.prototype.forEach.call(i,(function(t){var i=t,n=i[T],r=i[B];if(n&&r){var o=q(n.name(i));if(null!==o){var s,a=!1;if(o.prefix!==r.name.prefix||o.name!==r.name.name?a=!0:(s=n.customisations(i),function(t,e){var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var o=i[r];if(e[o]!==t[o])return!1}return!0}(r.customisations,s)||(a=!0)),a){var l={element:i,finder:n,name:o,customisations:s};e.push(l)}}}})),e})(n).forEach((function(e){var n,a,l=e.element,c=e.name,u=c.provider,h=c.prefix,A=c.name,f=l[B];if(void 0!==f&&(a=c,null!==(n=f.name)&&null!==a&&n.name===a.name&&n.prefix===a.prefix))switch(f.status){case"missing":return;case"loading":if(d.coreModules.api&&d.coreModules.api.isPending({provider:u,prefix:h,name:A}))return void(r=!0)}var p=o.getStorage(u,h);if(void 0===p.icons[A]){if(p.missing[A])return f={name:c,status:"missing",customisations:{}},void(l[B]=f);if(d.coreModules.api&&!d.coreModules.api.isPending({provider:u,prefix:h,name:A})){void 0===i[u]&&(i[u]=Object.create(null));var g=i[u];void 0===g[h]&&(g[h]=Object.create(null)),g[h][A]=!0}f={name:c,status:"loading",customisations:{}},l[B]=f,r=!0}else{!s&&t.observer&&(Z(t),s=!0);var m=void 0!==e.customisations?e.customisations:e.finder.customisations(l);S(e,m,o.getIcon(p,A))}})),t.temporary&&!r?V(n):e&&r?G(n,!0):s&&t.observer&&H(t)}})),d.coreModules.api){var n=d.coreModules.api;Object.keys(i).forEach((function(t){var e=i[t];Object.keys(e).forEach((function(i){n.loadIcons(Object.keys(e[i]).map((function(e){return{provider:t,prefix:i,name:e}})),Y)}))}))}}var J=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.rotateFromString=void 0,e.rotateFromString=function(t){var e=t.replace(/^-?[0-9.]*/,"");function i(t){for(;t<0;)t+=4;return t%4}if(""===e){var n=parseInt(t);return isNaN(n)?0:i(n)}if(e!==t){var r=0;switch(e){case"%":r=25;break;case"deg":r=90}if(r){var o=parseFloat(t.slice(0,t.length-e.length));return isNaN(o)?0:(o/=r)%1==0?i(o):0}}return 0}})),K=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.alignmentFromString=e.flipFromString=void 0;var i=/[\s,]+/;e.flipFromString=function(t,e){e.split(i).forEach((function(e){switch(e.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0}}))},e.alignmentFromString=function(t,e){e.split(i).forEach((function(e){var i=e.trim();switch(i){case"left":case"center":case"right":t.hAlign=i;break;case"top":case"middle":case"bottom":t.vAlign=i;break;case"slice":case"crop":t.slice=!0;break;case"meet":t.slice=!1}}))}}));function $(t,e){return t.hasAttribute(e)}function tt(t,e){return t.getAttribute(e)}var et=["inline","hFlip","vFlip"],it=["width","height"],nt={find:function(t){return t.querySelectorAll("i.iconify, span.iconify, i.iconify-inline, span.iconify-inline")},name:function(t){return $(t,"data-icon")?tt(t,"data-icon"):null},customisations:function(t,e){void 0===e&&(e={inline:!1});var i=e,n=t.getAttribute("class");if(-1!==(n?n.split(/\s+/):[]).indexOf("iconify-inline")&&(i.inline=!0),$(t,"data-rotate")){var r=J.rotateFromString(tt(t,"data-rotate"));r&&(i.rotate=r)}return $(t,"data-flip")&&K.flipFromString(i,tt(t,"data-flip")),$(t,"data-align")&&K.alignmentFromString(i,tt(t,"data-align")),et.forEach((function(e){if($(t,"data-"+e)){var n=function(t,e){var i=t.getAttribute(e);return i===e||"true"===i||""!==i&&"false"!==i&&null}(t,"data-"+e);"boolean"==typeof n&&(i[e]=n)}})),it.forEach((function(e){if($(t,"data-"+e)){var n=tt(t,"data-"+e);""!==n&&(i[e]=n)}})),i},classFilter:function(t){var e=[];return t.forEach((function(t){"iconify"!==t&&""!==t&&"iconify--"!==t.slice(0,9)&&e.push(t)})),e}};function rt(t,e,i){var n=s.getIconData(t);return n?S({name:r.stringToIcon(t)},c.mergeCustomisations(c.defaults,"object"==typeof e?e:{}),n,i):null}var ot={getVersion:function(){return"2.0.4"},renderSVG:function(t,e){return rt(t,e,!1)},renderHTML:function(t,e){return rt(t,e,!0)},renderIcon:function(t,e){var i=s.getIconData(t);if(!i)return null;var n=c.mergeCustomisations(c.defaults,"object"==typeof e?e:{});return u.iconToSVG(i,n)},scan:function(t){t?function(t){var e=M(t);e?X(e):X({node:t,temporary:!0},!0)}(t):X()},observe:function(t){G(t)},stopObserving:function(t){V(t)},pauseObserver:function(t){if(t){var e=M(t);e&&Z(e)}else Z()},resumeObserver:function(t){if(t){var e=M(t);e&&H(e)}else H()}};if("undefined"!=typeof document&&"undefined"!=typeof window){!function(){if(document.documentElement)return I(document.documentElement);P.push({node:function(){return document.documentElement}})}(),function(t){-1===W.indexOf(t)&&W.push(t)}(nt);var st=window;if(void 0!==st.IconifyPreload){var at=st.IconifyPreload,lt="Invalid IconifyPreload syntax.";"object"==typeof at&&null!==at&&(at instanceof Array?at:[at]).forEach((function(t){try{("object"!=typeof t||null===t||t instanceof Array||"object"!=typeof t.icons||"string"!=typeof t.prefix||!s.storageFunctions.addCollection(t))&&console.error(lt)}catch(t){console.error(lt)}}))}setTimeout((function(){(function(t){var e=null!==D;D!==t&&(D=t,e&&O().forEach(U)),e?j():function(t){var e=document;"complete"===e.readyState||"loading"!==e.readyState&&!e.documentElement.doScroll?t():(e.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t))}(j)})(X),X()}))}var ct={enableCache:function(t,e){return f.toggleBrowserCache(t,!1!==e)},disableCache:function(t){return f.toggleBrowserCache(t,!0)}},ut={_api:C.APIInternalFunctions};[s.storageFunctions,h.builderFunctions,ot,ct,C.APIFunctions].forEach((function(t){for(var e in t)ut[e]=t[e]})),d.coreModules.api=x.API;var ht=k.getAPIModule;try{"undefined"!=typeof document&&"undefined"!=typeof window&&(ht="function"==typeof fetch&&"function"==typeof Promise?k.getAPIModule:E.getAPIModule)}catch(lt){}if(b.setAPIModule("",ht(_.getAPIConfig)),ut._api.setFetch=function(t){k.setFetch(t),ht!==k.getAPIModule&&(ht=k.getAPIModule,b.setAPIModule("",ht(_.getAPIConfig)))},"undefined"!=typeof document&&"undefined"!=typeof window){d.coreModules.cache=A.storeCache,A.loadCache();var dt=window;if(void 0!==dt.IconifyProviders){var At=dt.IconifyProviders;if("object"==typeof At&&null!==At)for(var ft in At){var pt="IconifyProviders["+ft+"] is invalid.";try{var gt=At[ft];if("object"!=typeof gt||!gt||void 0===gt.resources)continue;_.setAPIConfig(ft,gt)||console.error(pt)}catch(t){console.error(pt)}}}}return ut}();try{void 0===self.Iconify&&(self.Iconify=i)}catch(t){}try{e.__esModule=!0,e.default=i}catch(t){}},6255:(t,e,i)=>{"use strict";i.d(e,{D0:()=>a,Ew:()=>l,Kn:()=>r,Lj:()=>c,Os:()=>h,Ss:()=>o,TW:()=>s,zH:()=>u});const n=t=>"function"==typeof t,r=t=>null!==t&&"object"==typeof t,o=t=>r(t)&&t.constructor==={}.constructor,s=t=>t&&"function"==typeof t[Symbol.iterator],a=t=>t&&"function"==typeof t[Symbol.asyncIterator],l=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,c=t=>"undefined"!=typeof Blob&&t instanceof Blob,u=t=>t&&"object"==typeof t&&t.isBuffer,h=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||r(t)&&n(t.tee)&&n(t.cancel)&&n(t.getReader))(t)||(t=>r(t)&&n(t.read)&&n(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t)},3878:(t,e,i)=>{"use strict";i.d(e,{z:()=>Q});var n=i(6255),r=i(2033),o=i(7504),s=i(6040);var a=i(6013),l=i(4942);class c{terminate(){}}const u=new Map;function h(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function d(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;const n=i||new Set;if(t)if(A(t))n.add(t);else if(A(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(const i in t)d(t[i],e,n);return void 0===i?Array.from(n):[]}function A(t){return!!t&&(t instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&t instanceof MessagePort||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)}const f=()=>{};class p{static isSupported(){return"undefined"!=typeof Worker&&a.jU||void 0!==c&&!a.jU}constructor(t){(0,l.Z)(this,"name",void 0),(0,l.Z)(this,"source",void 0),(0,l.Z)(this,"url",void 0),(0,l.Z)(this,"terminated",!1),(0,l.Z)(this,"worker",void 0),(0,l.Z)(this,"onMessage",void 0),(0,l.Z)(this,"onError",void 0),(0,l.Z)(this,"_loadableURL","");const{name:e,source:i,url:n}=t;(0,s.h)(i||n),this.name=e,this.source=i,this.url=n,this.onMessage=f,this.onError=t=>console.log(t),this.worker=a.jU?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=f,this.onError=f,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||d(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=function(t){(0,s.h)(t.source&&!t.url||!t.source&&t.url);let e=u.get(t.source||t.url);return e||(t.url&&(e=(i=t.url).startsWith("http")?h("try {\n  importScripts('".concat(i,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):i,u.set(t.url,e)),t.source&&(e=h(t.source),u.set(t.source,e))),(0,s.h)(e),e;var i}({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new c(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new c(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class g{constructor(t,e){(0,l.Z)(this,"name",void 0),(0,l.Z)(this,"workerThread",void 0),(0,l.Z)(this,"isRunning",!0),(0,l.Z)(this,"result",void 0),(0,l.Z)(this,"_resolve",(()=>{})),(0,l.Z)(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){(0,s.h)(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){(0,s.h)(this.isRunning),this.isRunning=!1,this._reject(t)}}class m{static isSupported(){return p.isSupported()}constructor(t){(0,l.Z)(this,"name","unnamed"),(0,l.Z)(this,"source",void 0),(0,l.Z)(this,"url",void 0),(0,l.Z)(this,"maxConcurrency",1),(0,l.Z)(this,"maxMobileConcurrency",1),(0,l.Z)(this,"onDebug",(()=>{})),(0,l.Z)(this,"reuseWorkers",!0),(0,l.Z)(this,"props",{}),(0,l.Z)(this,"jobQueue",[]),(0,l.Z)(this,"idleQueue",[]),(0,l.Z)(this,"count",0),(0,l.Z)(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,i)=>t.done(i),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const n=new Promise((n=>(this.jobQueue.push({name:t,onMessage:e,onError:i,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const i=new g(e.name,t);t.onMessage=t=>e.onMessage(i,t.type,t.payload),t.onError=t=>e.onError(i,t),e.onStart(i);try{await i.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new p({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return a.tq?this.maxMobileConcurrency:this.maxConcurrency}}const v={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class y{static isSupported(){return p.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y._workerFarm=y._workerFarm||new y({}),y._workerFarm.setProps(t),y._workerFarm}constructor(t){(0,l.Z)(this,"props",void 0),(0,l.Z)(this,"workerPools",new Map),this.props={...v},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:i,url:n}=t;let r=this.workerPools.get(e);return r||(r=new m({name:e,source:i,url:n}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,l.Z)(y,"_workerFarm",void 0);const b="latest";async function _(t,e,i,n,r){const o=t.id,a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e[t.id]||{},n="".concat(t.id,"-worker.js");let r=i.workerUrl;if(r||"compression"!==t.id||(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(n)),!r){let e=t.version;"latest"===e&&(e=b);const i=e?"@".concat(e):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(i,"/dist/").concat(n)}return(0,s.h)(r),r}(t,i),l=y.getWorkerFarm(i).getWorkerPool({name:o,url:a});i=JSON.parse(JSON.stringify(i)),n=JSON.parse(JSON.stringify(n||{}));const c=await l.startJob("process-on-worker",w.bind(null,r));c.postMessage("process",{input:e,options:i,context:n});const u=await c.result;return await u.result}async function w(t,e,i,n){switch(i){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":const{id:r,input:o,options:s}=n;try{const i=await t(o,s);e.postMessage("done",{id:r,result:i})}catch(t){const i=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:r,error:i})}break;default:console.warn("parse-with-worker unknown message ".concat(i))}}var x=i(4609);const C=262144;var E=i(4959),k=i(479);function T(t){if((e=t)&&"object"==typeof e&&e.isBuffer)return k.toArrayBuffer(t);var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function B(t,e){return E.jU?async function*(t,e){const i=t.getReader();let n;try{for(;;){const t=n||i.read();null!=e&&e._streamReadAhead&&(n=i.read());const{done:r,value:o}=await t;if(r)return;yield T(o)}}catch(t){i.releaseLock()}}(t,e):async function*(t,e){for await(const e of t)yield T(e)}(t)}var S=i(7927);const P="Cannot convert supplied data type";async function M(t,e,i){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||r)return function(t,e,i){if(e.text&&"string"==typeof t)return t;if((0,n.zH)(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const n=t.byteLength||t.length;return 0===t.byteOffset&&n===i.byteLength||(i=i.slice(t.byteOffset,t.byteOffset+n)),i}throw new Error(P)}(t,e);if((0,n.Lj)(t)&&(t=await(0,S.L1)(t)),(0,n.Ew)(t)){const i=t;return await(0,S.mm)(i),e.binary?await i.arrayBuffer():await i.text()}if((0,n.Os)(t)&&(t=function(t,e){if("string"==typeof t)return function*(t,e){const i=(null==e?void 0:e.chunkSize)||262144;let n=0;const r=new TextEncoder;for(;n<t.length;){const e=Math.min(t.length-n,i),o=t.slice(n,n+e);n+=e,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:i=C}=e;let n=0;for(;n<t.byteLength;){const e=Math.min(t.byteLength-n,i),r=new ArrayBuffer(e),o=new Uint8Array(t,n,e);new Uint8Array(r).set(o),n+=e,yield r}}(t,e);if((0,n.Lj)(t))return async function*(t,e){const i=(null==e?void 0:e.chunkSize)||1048576;let n=0;for(;n<t.size;){const e=n+i,r=await t.slice(n,e).arrayBuffer();n=e,yield r}}(t,e);if((0,n.Os)(t))return B(t,e);if((0,n.Ew)(t))return B(t.body,e);throw new Error("makeIterator")}(t,i)),(0,n.TW)(t)||(0,n.D0)(t))return async function(t){const e=[];for await(const i of t)e.push(i);return(0,x.JY)(...e)}(t);throw new Error(P)}var I=i(9752),O=i(962);const D=new(i(9109).Z)({id:"loaders.gl"});var L=i(6228);const F=/\.([^.]+)$/;function R(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!z(t))return null;if(e&&!Array.isArray(e))return(0,r.T)(e);let o=[];e&&(o=o.concat(e)),null!=i&&i.ignoreRegisteredLoaders||o.push(...(0,L.kO)()),U(o);const s=N(t,o,i,n);if(!(s||null!=i&&i.nothrow))throw new Error(j(t));return s}function N(t,e,i,n){const{url:r,type:o}=(0,I.l)(t),s=r||(null==n?void 0:n.url);let a=null,l="";var c;return null!=i&&i.mimeType&&(a=Z(e,null==i?void 0:i.mimeType),l="match forced by supplied MIME type ".concat(null==i?void 0:i.mimeType)),a=a||function(t,e){const i=e&&F.exec(e),n=i&&i[1];return n?function(t,e){e=e.toLowerCase();for(const i of t)for(const t of i.extensions)if(t.toLowerCase()===e)return i;return null}(t,n):null}(e,s),l=l||(a?"matched url ".concat(s):""),a=a||Z(e,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(t,e){if(!e)return null;for(const i of t)if("string"==typeof e){if(H(e,i))return i}else if(ArrayBuffer.isView(e)){if(G(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer&&G(e,0,i))return i;return null}(e,t),l=l||(a?"matched initial data ".concat(V(t)):""),a=a||Z(e,null==i?void 0:i.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l&&D.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,".")),a}function z(t){return!(t instanceof Response&&204===t.status)}function j(t){const{url:e,type:i}=(0,I.l)(t);let n="No valid loader found (";n+=e?"".concat(O.vB(e),", "):"no url provided, ",n+="MIME type: ".concat(i?'"'.concat(i,'"'):"not provided",", ");const r=t?V(t):"";return n+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",n+=")",n}function U(t){for(const e of t)(0,r.T)(e)}function Z(t,e){for(const i of t){if(i.mimeTypes&&i.mimeTypes.includes(e))return i;if(e==="application/x.".concat(i.id))return i}return null}function H(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function G(t,e,i){return(Array.isArray(i.tests)?i.tests:[i.tests]).some((n=>function(t,e,i,n){if(n instanceof ArrayBuffer)return(0,x.Xq)(n,t,n.byteLength);switch(typeof n){case"function":return n(t,i);case"string":return n===W(t,e,n.length);default:return!1}}(t,e,i,n)))}function V(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?W(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?W(t,0,e):""}function W(t,e,i){if(t.byteLength<e+i)return"";const n=new DataView(t);let r="";for(let t=0;t<i;t++)r+=String.fromCharCode(n.getUint8(e+t));return r}async function q(t,e,i,l){(0,s.h)(!l||"object"==typeof l),!e||Array.isArray(e)||(0,r.C)(e)||(l=void 0,i=e,e=void 0),t=await t,i=i||{};const{url:c}=(0,I.l)(t),u=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let i;if(t&&(i=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];i=i?[...i,...t]:t}return i&&i.length?i:null}(e,l),h=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!z(t))return null;let o=R(t,e,{...i,nothrow:!0},r);if(o)return o;if((0,n.Lj)(t)&&(o=R(t=await t.slice(0,10).arrayBuffer(),e,i,r)),!(o||null!=i&&i.nothrow))throw new Error(j(t));return o}(t,u,i);return h?(l=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i)return i;const n={fetch:(0,o.bV)(e,t),...t};return Array.isArray(n.loaders)||(n.loaders=null),n}({url:c,parse:q,loaders:u},i=(0,o.GR)(i,h,u,c),l),await async function(t,e,i,r){if(function(t){(0,s.h)(t,"no worker provided");t.version}(t),(0,n.Ew)(e)){const t=e,{ok:i,redirected:n,status:o,statusText:s,type:a,url:l}=t,c=Object.fromEntries(t.headers.entries());r.response={headers:c,ok:i,redirected:n,status:o,statusText:s,type:a,url:l}}if(e=await M(e,t,i),t.parseTextSync&&"string"==typeof e)return i.dataType="text",t.parseTextSync(e,i,r,t);if(function(t,e){return!!y.isSupported()&&!!(a.jU||null!=e&&e._nodeWorkers)&&t.worker&&(null==e?void 0:e.worker)}(t,i))return await _(t,e,i,r,q);if(t.parseText&&"string"==typeof e)return await t.parseText(e,i,r,t);if(t.parse)return await t.parse(e,i,r,t);throw(0,s.h)(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(h,t,i,l)):null}async function Q(t,e,i,s){Array.isArray(e)||(0,r.C)(e)||(i=e,e=void 0);const a=(0,o.bV)(i);let l=t;return"string"==typeof t&&(l=await a(t)),(0,n.Lj)(t)&&(l=await a(t)),await q(l,e,i)}},6228:(t,e,i)=>{"use strict";i.d(e,{fh:()=>s,kO:()=>a});var n=i(2033),r=i(7504);const o=()=>{const t=(0,r.rx)();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function s(t){const e=o();t=Array.isArray(t)?t:[t];for(const i of t){const t=(0,n.T)(i);e.find((e=>t===e))||e.unshift(t)}}function a(){return o()}},2033:(t,e,i)=>{"use strict";i.d(e,{C:()=>r,T:()=>o});var n=i(6269);function r(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function o(t){var e,i;let o;return(0,n.h)(t,"null loader"),(0,n.h)(r(t),"invalid loader"),Array.isArray(t)&&(o=t[1],t=t[0],t={...t,options:{...t.options,...o}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(i=t)&&void 0!==i&&i.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}},7504:(t,e,i)=>{"use strict";i.d(e,{bV:()=>g,rx:()=>A,GR:()=>p});var n=i(6255);const r={};var o=i(7927);async function s(t,e){if("string"==typeof t){t=function(t){for(const e in r)if(t.startsWith(e)){const i=r[e];t=t.replace(e,i)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat("").concat(t)),t}(t);let i=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(i=e.fetch),await fetch(t,i)}return await(0,o.L1)(t)}var a=i(4942);const l=new(i(9109).Z)({id:"loaders.gl"});class c{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var u=i(4959);const h={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){(0,a.Z)(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:u.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},d={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function A(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const f=()=>{const t=A();return t.globalOptions=t.globalOptions||{...h},t.globalOptions};function p(t,e,i,n){return i=i||[],function(t,e){m(t,null,h,d,e);for(const i of e){const n=t&&t[i.id]||{},r=i.options&&i.options[i.id]||{},o=i.deprecatedOptions&&i.deprecatedOptions[i.id]||{};m(n,i.id,r,o,e)}}(t,i=Array.isArray(i)?i:[i]),function(t,e,i){const n={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(n,i),null===n.log&&(n.log=new c),y(n,f()),y(n,e),n}(e,t,n)}function g(t,e){const i=f(),r=t||i;return"function"==typeof r.fetch?r.fetch:(0,n.Kn)(r.fetch)?t=>s(t,r):null!=e&&e.fetch?null==e?void 0:e.fetch:s}function m(t,e,i,r,o){const s=e||"Top level",a=e?"".concat(e,"."):"";for(const c in t){const u=!e&&(0,n.Kn)(t[c]),h="baseUri"===c&&!e,d="workerUrl"===c&&e;if(!(c in i)&&!h&&!d)if(c in r)l.warn("".concat(s," loader option '").concat(a).concat(c,"' no longer supported, use '").concat(r[c],"'"))();else if(!u){const t=v(c,o);l.warn("".concat(s," loader option '").concat(a).concat(c,"' not recognized. ").concat(t))()}}}function v(t,e){const i=t.toLowerCase();let n="";for(const r of e)for(const e in r.options){if(t===e)return"Did you mean '".concat(r.id,".").concat(e,"'?");const o=e.toLowerCase();(i.startsWith(o)||o.startsWith(i))&&(n=n||"Did you mean '".concat(r.id,".").concat(e,"'?"))}return n}function y(t,e){for(const i in e)if(i in e){const r=e[i];(0,n.Ss)(r)&&(0,n.Ss)(t[i])?t[i]={...t[i],...e[i]}:t[i]=e[i]}}},9752:(t,e,i)=>{"use strict";i.d(e,{C:()=>u,l:()=>c});var n=i(6255);const r=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,o=/^([-\w.]+\/[-\w.+]+)/;function s(t){const e=o.exec(t);return e?e[1]:t}function a(t){const e=r.exec(t);return e?e[1]:""}const l=/\?.*/;function c(t){if((0,n.Ew)(t)){const e=h(t.url||"");return{url:e,type:s(t.headers.get("content-type")||"")||a(e)}}return(0,n.Lj)(t)?{url:h(t.name||""),type:t.type||""}:"string"==typeof t?{url:h(t),type:a(t)}:{url:"",type:""}}function u(t){return(0,n.Ew)(t)?t.headers["content-length"]||-1:(0,n.Lj)(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function h(t){return t.replace(l,"")}},7927:(t,e,i)=>{"use strict";i.d(e,{L1:()=>o,mm:()=>s});var n=i(6255),r=i(9752);async function o(t){if((0,n.Ew)(t))return t;const e={},i=(0,r.C)(t);i>=0&&(e["content-length"]=String(i));const{url:o,type:s}=(0,r.l)(t);s&&(e["content-type"]=s);const a=await async function(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const i=new FileReader;i.onload=e=>{var i;return t(null==e||null===(i=e.target)||void 0===i?void 0:i.result)},i.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const e=function(t){let e="";const i=new Uint8Array(t);for(let t=0;t<i.byteLength;t++)e+=String.fromCharCode(i[t]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(e)}return null}(t);a&&(e["x-first-bytes"]=a),"string"==typeof t&&(t=(new TextEncoder).encode(t));const l=new Response(t,{headers:e});return Object.defineProperty(l,"url",{value:o}),l}async function s(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const i=t.headers.get("Content-Type");let n=t.statusText;i.includes("application/json")&&(n+=" ".concat(await t.text())),e+=n,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(t){}return e}(t);throw new Error(e)}}},6487:(t,e,i)=>{"use strict";i.d(e,{S:()=>b});var n=i(6269),r=i(4959);const{_parseImageNode:o}=globalThis,s="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,l=Boolean(o),c=!!r.jU||l;function u(t){const e=function(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const h=/^data:image\/svg\+xml/,d=/\.svg((\?|#).*)?$/;function A(t){return t&&(h.test(t)||d.test(t))}function f(t,e){if(A(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function p(t,e,i){const n=function(t,e){if(A(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw new Error(t.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return f(t,e)}(t,i),r=self.URL||self.webkitURL,o="string"!=typeof n&&r.createObjectURL(n);try{return await async function(t,e){const i=new Image;return i.src=t,e.image&&e.image.decode&&i.decode?(await i.decode(),i):await new Promise(((e,n)=>{try{i.onload=()=>e(i),i.onerror=e=>n(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(t){n(t)}}))}(o||n,e)}finally{o&&r.revokeObjectURL(o)}}const g={};let m=!0;function v(t){for(const e in t||g)return!1;return!0}var y=i(9105);const b={id:"image",module:"images",name:"Images",version:"3.3.5",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:async function(t,e,i){const r=((e=e||{}).image||{}).type||"auto",{url:o}=i||{};let l;switch(function(t){switch(t){case"auto":case"data":return function(){if(a)return"imagebitmap";if(s)return"image";if(c)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return a||s||c;case"imagebitmap":return a;case"image":return s;case"data":return c;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r)){case"imagebitmap":l=await async function(t,e,i){let n;n=A(i)?await p(t,e,i):f(t,i);const r=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!v(e)&&m||(e=null),e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),m=!1}return await createImageBitmap(t)}(n,r)}(t,e,o);break;case"image":l=await p(t,e,o);break;case"data":l=await async function(t,e){const{mimeType:i}=(0,y.I)(t)||{},r=globalThis._parseImageNode;return(0,n.h)(r),await r(t,i)}(t);break;default:(0,n.h)(!1)}return"data"===r&&(l=function(t){switch(u(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new Error("getImageData");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0),i.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(l)),l},tests:[t=>Boolean((0,y.I)(new DataView(t)))],options:{image:{type:"auto",decode:!0}}}},9105:(t,e,i)=>{"use strict";i.d(e,{I:()=>o});const n=!1,r=!0;function o(t){const e=s(t);return function(t){const e=s(t);return e.byteLength>=24&&2303741511===e.getUint32(0,n)?{mimeType:"image/png",width:e.getUint32(16,n),height:e.getUint32(20,n)}:null}(e)||function(t){const e=s(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,n)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,n);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,n),width:e.getUint16(o+7,n)};if(!i.has(t))return null;o+=2,o+=e.getUint16(o,n)}return null}(e)||function(t){const e=s(t);return e.byteLength>=10&&1195984440===e.getUint32(0,n)?{mimeType:"image/gif",width:e.getUint16(6,r),height:e.getUint16(8,r)}:null}(e)||function(t){const e=s(t);return e.byteLength>=14&&16973===e.getUint16(0,n)&&e.getUint32(2,r)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,r),height:e.getUint32(22,r)}:null}(e)}function s(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}},4609:(t,e,i)=>{"use strict";function n(t,e,i){if(i=i||t.byteLength,t.byteLength<i||e.byteLength<i)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let t=0;t<n.length;++t)if(n[t]!==r[t])return!1;return!0}function r(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),r=n.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(r);let s=0;for(const t of n)o.set(t,s),s+=t.byteLength;return o.buffer}function o(t,e,i){const n=void 0!==i?new Uint8Array(t).subarray(e,e+i):new Uint8Array(t).subarray(e);return new Uint8Array(n).buffer}i.d(e,{JY:()=>r,Xq:()=>n,qv:()=>o})},6269:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"loader assertion failed.")}i.d(e,{h:()=>n})},4959:(t,e,i)=>{"use strict";i.d(e,{jU:()=>n}),"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==i.g&&i.g,"undefined"!=typeof document&&document;const n=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),r="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);r&&parseFloat(r[1])},962:(t,e,i)=>{"use strict";function n(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function r(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}i.d(e,{XX:()=>r,vB:()=>n})},6040:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}i.d(e,{h:()=>n})},6013:(t,e,i)=>{"use strict";i.d(e,{CO:()=>r,hJ:()=>s,jU:()=>o,tq:()=>a});const n={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==i.g&&i.g,document:"undefined"!=typeof document&&document},r=n.global||n.self||n.window||{},o="object"!=typeof process||"[object process]"!==String(process)||process.browser,s="function"==typeof importScripts,a="undefined"!=typeof window&&void 0!==window.orientation,l="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);l&&parseFloat(l[1])},3982:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(4538),r=i(2525);const o={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class s{static get DRAW_MODE(){return o}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=(0,n.hQ)("geometry"),drawMode:i=o.TRIANGLES,attributes:r={},indices:s=null,vertexCount:a=null}=t;this.id=e,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const e in t){let i=t[e];i=ArrayBuffer.isView(i)?{value:i}:i,(0,r.h)(ArrayBuffer.isView(i.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),"POSITION"!==e&&"positions"!==e||i.size||(i.size=3),"indices"===e?((0,r.h)(!this.indices),this.indices=i):this.attributes[e]=i}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let i=1/0;for(const e in t){const n=t[e],{value:r,size:o,constant:s}=n;!s&&r&&o>=1&&(i=Math.min(i,r.length/o))}return(0,r.h)(Number.isFinite(i)),i}}},9769:(t,e,i)=>{"use strict";i.d(e,{Z:()=>D});var n=i(9450),r=i(1731),o=i(4072),s=i(3478),a=i(7577);let l=null;var c=i(2525),u=i(3485);class h extends a.Z{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(0,n.D0)(t)||"Chrome"===(0,u.Z)()}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new h(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return h.MAX_ATTRIBUTES=h.MAX_ATTRIBUTES||t.getParameter(34921),h.MAX_ATTRIBUTES}static setConstant(t,e,i){switch(i.constructor){case Float32Array:h._setConstantFloatArray(t,e,i);break;case Int32Array:h._setConstantIntArray(t,e,i);break;case Uint32Array:h._setConstantUintArray(t,e,i);break;default:(0,c.h)(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:i})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return h.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,c.h)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,i){if(34963===e.target)return this.setElementBuffer(e,i);const{size:r,type:o,stride:s,offset:a,normalized:l,integer:u,divisor:h}=i,{gl:d,gl2:A}=this;return t=Number(t),this.bind((()=>{d.bindBuffer(34962,e.handle),u?((0,c.h)((0,n.D0)(d)),A.vertexAttribIPointer(t,r,o,s,a)):d.vertexAttribPointer(t,r,o,l,s,a),d.enableVertexAttribArray(t),A.vertexAttribDivisor(t,h||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!h.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const i=this._normalizeConstantArrayValue(e),n=i.byteLength*t,r=i.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new s.Z(this.gl,n),o=o||this.buffer.reallocate(n),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const t=function(t,e){var i;return new t((i=t.BYTES_PER_ELEMENT*e,(!l||l.byteLength<i)&&(l=new ArrayBuffer(i)),l),0,e)}(e.constructor,r);!function(t){let{target:e,source:i,start:n=0,count:r=1}=t;const o=i.length,s=r*o;let a=0;for(let t=n;a<o;a++)e[t++]=i[a];for(;a<s;)a<s-a?(e.copyWithin(n+a,n,n+a),a*=2):(e.copyWithin(n+a,n,n+s-a),a=s)}({target:t,source:i,start:0,count:r}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}static _setConstantFloatArray(t,e,i){switch(i.length){case 1:t.vertexAttrib1fv(e,i);break;case 2:t.vertexAttrib2fv(e,i);break;case 3:t.vertexAttrib3fv(e,i);break;case 4:t.vertexAttrib4fv(e,i);break;default:(0,c.h)(!1)}}static _setConstantIntArray(t,e,i){switch((0,c.h)((0,n.D0)(t)),i.length){case 1:t.vertexAttribI1iv(e,i);break;case 2:t.vertexAttribI2iv(e,i);break;case 3:t.vertexAttribI3iv(e,i);break;case 4:t.vertexAttribI4iv(e,i);break;default:(0,c.h)(!1)}}static _setConstantUintArray(t,e,i){switch((0,c.h)((0,n.D0)(t)),i.length){case 1:t.vertexAttribI1uiv(e,i);break;case 2:t.vertexAttribI2uiv(e,i);break;case 3:t.vertexAttribI3uiv(e,i);break;case 4:t.vertexAttribI4uiv(e,i);break;default:(0,c.h)(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:i}=e;return(0,c.h)(Number.isFinite(i)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(i,t):this.gl.getVertexAttrib(i,t)))}}var d=i(7469);const A=/^(.+)__LOCATION_([0-9]+)$/,f=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class p{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.id||e.program&&e.program.id;this.id=i,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new h(t),(0,d.F)(this,"VertexArray","v6.0",f),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const i=t[e];this._setAttribute(e,i)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,i);const{location:n,accessor:r}=this._resolveLocationAndAccessor(t,e,e.accessor,i);return n>=0&&(this.values[n]=e,this.accessors[n]=r,this.clearDrawParams(),this.vertexArrayObject.setBuffer(n,e,r)),this}setConstant(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:n,accessor:r}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},i));return n>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[n]=e,this.accessors[n]=r,this.clearDrawParams(),this.vertexArrayObject.enable(n,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new s.Z(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof s.Z&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof s.Z&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,i){let n;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),n=i()})),n}_resolveLocationAndAccessor(t,e,i,r){const s={location:-1,accessor:null},{location:a,name:l}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=e,n.cM.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),s;const u=this._getAttributeInfo(l||a);if(!u)return s;const h=this.accessors[a]||{},d=o.Z.resolve(u.accessor,h,i,r),{size:A,type:f}=d;return(0,c.h)(Number.isFinite(A)&&Number.isFinite(f)),{location:a,accessor:d}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const i=A.exec(t),n=i?i[1]:t,r=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(n)+r,name:n}:{location:-1}}_setAttribute(t,e){if(e instanceof s.Z)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof s.Z){const i=e[0],n=e[1];this.setBuffer(t,i,n)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof s.Z))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const i=e;this.setBuffer(t,i.buffer,i)}}}_setConstantAttributes(t,e){const i=Math.max(0|t,0|e);let n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,i);for(let t=1;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)n=this.values[t],ArrayBuffer.isView(n)&&this._setConstantAttribute(t,n)}_setConstantAttributeZero(t,e){if(h.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const i=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(t,e){h.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const i=this.values[e],n=this.accessors[e];if(!i)return;const{divisor:r}=n,o=r>0;if(t.isInstanced=t.isInstanced||o,i instanceof s.Z){const e=i;if(o){const i=e.getVertexCount(n);t.instanceCount=Math.min(t.instanceCount,i)}else{const i=e.getVertexCount(n);t.vertexCount=Math.min(t.vertexCount,i)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.cM.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}var g=i(4538),m=i(6047),v=i(7944),y=i(1053),b=i(9579),_=i(8522);function w(t,e){const{maxElts:i=16,size:n=1}=e;let r="[";for(let o=0;o<t.length&&o<i;++o)o>0&&(r+=",".concat(o%n==0?" ":"")),r+=x(t[o],e);const o=t.length>i?"...":"]";return"".concat(r).concat(o)}function x(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=1e-16,{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return w(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<i)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2),o=r.indexOf(".0");return o===r.length-2?r.slice(0,-1):r}function C(t,e,i,n){const{gl:r}=t;if(!e)return{[n]:"null","Format ":"N/A"};let o,a,l,c="NOT PROVIDED",u=1,h=0,d=0;if(i&&(c=i.type,u=i.size,c=String(c).replace("Array",""),o=-1!==c.indexOf("nt")),e instanceof s.Z){const t=e,{data:s,changed:A}=t.getDebugData();let f;if(a=A?"*":"",l=s,d=t.byteLength,h=d/s.BYTES_PER_ELEMENT/u,i){const t=i.divisor>0;f="".concat(t?"I ":"P "," ").concat(h," (x").concat(u,"=").concat(d," bytes ").concat((0,b.km)(r,c),")")}else o=!0,f="".concat(d," bytes");return{[n]:"".concat(a).concat(x(l,{size:u,isInteger:o})),"Format ":f}}return l=e,u=e.length,c=String(e.constructor.name).replace("Array",""),o=-1!==c.indexOf("nt"),{[n]:"".concat(x(l,{size:u,isInteger:o})," (constant)"),"Format ":"".concat(u,"x").concat(c," (constant)")}}function E(t,e){const{type:i,size:n}=e,r=(0,_.jG)(i,n);return r?"".concat(t," (").concat(r.name,")"):t}function k(t){let{header:e="Uniforms",program:i,uniforms:n,undefinedOnly:r=!1}=t;(0,c.h)(i);const o=".*Matrix",s=i._uniformSetters,a={},l=Object.keys(s).sort();let u=0;for(const t of l)t.match(".*_.*")||t.match(o)||T({table:a,header:e,uniforms:n,uniformName:t,undefinedOnly:r})&&u++;for(const t of l)t.match(o)&&T({table:a,header:e,uniforms:n,uniformName:t,undefinedOnly:r})&&u++;for(const t of l)a[t]||T({table:a,header:e,uniforms:n,uniformName:t,undefinedOnly:r})&&u++;let h=0;const d={};if(!r)for(const t in n){const i=n[t];a[t]||(h++,d[t]={Type:"NOT USED: ".concat(i),[e]:x(i)})}return{table:a,count:u,unusedTable:d,unusedCount:h}}function T(t){let{table:e,header:i,uniforms:n,uniformName:r,undefinedOnly:o}=t;const s=n[r],a=function(t){return null!=t}(s);return!(o&&a||(e[r]={[i]:a?x(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function B(t){const{type:e,size:i}=t.accessor,n=(0,_.jG)(e,i);return n?"".concat(n.name," ").concat(t.name):t.name}const S={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function P(t,e){const{attributeMap:i=S}=e||{};return i&&i[t]||t}function M(t,e){let i;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":i="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":i="vectors"}switch(i){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}(0,c.h)(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const I=()=>{},O={};class D{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=(0,g.hQ)("model")}=e;(0,c.h)((0,n.UF)(t)),this.id=i,this.gl=t,this.id=e.id||(0,g.hQ)("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||r.Z.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:i,fs:n,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:h}=t;this.programProps={program:e,vs:i,fs:n,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},(0,c.h)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:i,fs:n,modules:r,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:i,fs:n,modules:r,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return(0,c.h)(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return(0,c.h)(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,i){const n={};let r=e.indices;for(const i in e.attributes){const o=e.attributes[i],a=P(i,undefined);if("indices"===i)r=o;else if(o.constant)n[a]=o.value;else{const e=o.value,r={...o};delete r.value,n[a]=[new s.Z(t,e),r],M(i,r)}}if(r){const e=r.value||r;(0,c.h)(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const i={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};n.indices=[new s.Z(t,{data:e,target:34963}),i]}return n}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,g.nK)(t))return this;const e={};for(const i in t){const n=t[i];e[i]=n.getValue?n.getValue():n}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return(0,m.Z)(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=t;let c;this.setAttributes(o),this.updateModuleSettings(e),this.setUniforms(r),n.cM.priority>=2&&(c=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:d=u.indexType,indexOffset:A=u.indexOffset,vertexArrayInstanced:f=u.isInstanced}=this.props;f&&!this.isInstanced&&n.cM.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=I,onAfterRender:v=I}=this.props;m(),this.program.setUniforms(this.uniforms);const y=this.program.draw(Object.assign(O,t,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:s,isIndexed:h,indexType:d,isInstanced:p,instanceCount:g,offset:h?A:0}));return v(),n.cM.priority>=2&&this._logDrawCallEnd(c,l,i),y}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:i,unbindModels:n=[]}=t;let{parameters:r}=t;i&&this._setFeedbackBuffers(i),e&&(r=Object.assign({},r,{35977:e})),n.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:r}))}finally{n.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.cM.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:i,modules:n,inject:r,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:i,modules:n,inject:r,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}(0,c.h)(t instanceof v.Z,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new p(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof s.Z&&e.delete()}}_setAnimationProps(t){this.animated&&(0,c.h)(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,g.nK)(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new y.Z(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),n.cM.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:n.cM.level<=2})(),t}_logDrawCallEnd(t,e,i,r){if(void 0===t)return;const o=function(t){let{vertexArray:e,header:i="Attributes"}=t;if(!e.configuration)return{};const n={};e.elements&&(n.ELEMENT_ARRAY_BUFFER=C(e,e.elements,null,i));const r=e.values;for(const t in r){const o=e._getAttributeInfo(t);if(o){let s="".concat(t,": ").concat(o.name);const a=e.accessors[o.location];a&&(s="".concat(t,": ").concat(E(o.name,a))),n[s]=C(e,r[t],a,i)}}return n}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:l}=k({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:u}=k({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&n.cM.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&n.cM.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(t){const e={},i="Accessors for ".concat(t.id);for(const n of t.attributeInfos)if(n){const t=B(n);e["in ".concat(t)]={[i]:JSON.stringify(n.accessor)}}for(const n of t.varyingInfos)if(n){const t=B(n);e["out ".concat(t)]={[i]:JSON.stringify(n.accessor)}}return e}(this.vertexArray.configuration);n.cM.table(t,o)(),n.cM.table(t,s)(),n.cM.table(t+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),n.cM.groupEnd(2)()}}},1731:(t,e,i)=>{"use strict";i.d(e,{Z:()=>I});var n=i(5682),r=i(6119),o=i(9047);function s(t){return function(t){const e={},i={};return a({modules:t,level:0,moduleMap:e,moduleDepth:i}),Object.keys(i).sort(((t,e)=>i[e]-i[t])).map((t=>e[t]))}(l(t))}function a(t){let{modules:e,level:i,moduleMap:n,moduleDepth:r}=t;if(i>=5)throw new Error("Possible loop in shader dependency graph");for(const t of e)n[t.name]=t,(void 0===r[t.name]||r[t.name]<i)&&(r[t.name]=i);for(const t of e)t.dependencies&&a({modules:t.dependencies,level:i+1,moduleMap:n,moduleDepth:r})}function l(t,e){return t.map((t=>(t instanceof r.Z||((0,o.Z)("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),(0,o.Z)(t.name,"shader module has no name"),(t=new r.Z(t)).dependencies=l(t.dependencies)),t)))}function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!=typeof window&&window.navigator||{},i=t.userAgent||e.userAgent||"",n=-1!==i.indexOf("MSIE "),r=-1!==i.indexOf("Trident/");return n||r}const u={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},h={};Object.keys(u).forEach((t=>{h[t]=t}));const d={};function A(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=u[e];if((0,o.Z)(n,e),!c(i))return!0;if(e in d)return d[e];const r=n[0],s=i.behavior||"enable",a="#extension GL_".concat(r," : ").concat(s,"\nvoid main(void) {}"),l=t.createShader(35633);t.shaderSource(l,a),t.compileShader(l);const h=t.getShaderParameter(l,35713);return t.deleteShader(l),d[e]=h,h}function f(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>function(t,e){const i=u[e];(0,o.Z)(i,e);const n=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&i[1]||i[0],r="string"==typeof n?Boolean(t.getExtension(n)):n;return(0,o.Z)(!1===r||!0===r),r}(t,e)))}var p=i(6713);function g(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const m=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],v=[...m,[g("attribute"),"in $1"],[g("varying"),"out $1"]],y=[...m,[g("varying"),"in $1"]],b=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],_=[...b,[g("in"),"attribute $1"],[g("out"),"varying $1"]],w=[...b,[g("in"),"varying $1"]],x="gl_FragColor",C=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,E=/void\s+main\s*\([^)]*\)\s*\{\n?/;function k(t,e){for(const[i,n]of e)t=t.replace(i,n);return t}const T="\n\n".concat(p.O_,"\n\n"),B={[n.H]:"vertex",[n.Y]:"fragment"};function S(t,e){let{id:i,source:r,type:s,modules:a,defines:l={},hookFunctions:c=[],inject:u={},transpileToGLSL100:d=!1,prologue:g=!0,log:m}=e;(0,o.Z)("string"==typeof r,"shader source must be a string");const b=s===n.H,S=r.split("\n");let P=100,M="",I=r;0===S[0].indexOf("#version ")?(P=300,M=S[0],I=S.slice(1).join("\n")):M="#version ".concat(P);const O={};a.forEach((t=>{Object.assign(O,t.getDefines())})),Object.assign(O,l);let D=g?"".concat(M,"\n").concat(function(t){let{id:e,source:i,type:n}=t;return e&&"string"==typeof e&&-1===i.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(B[n],"\n\n"):""}({id:i,source:r,type:s}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(B[e].toUpperCase(),"\n")}({type:s}),"\n").concat(function(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),i=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),n=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937),r=function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(i,n);return{gpuVendor:r,vendor:i,renderer:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,i){let n="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return f(t,h.GLSL_FRAG_DEPTH)&&(n+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),f(t,h.GLSL_DERIVATIVES)&&A(t,h.GLSL_DERIVATIVES)&&(n+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),f(t,h.GLSL_FRAG_DATA)&&A(t,h.GLSL_FRAG_DATA,{behavior:"require"})&&(n+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),f(t,h.GLSL_TEXTURE_LOD)&&(n+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),n}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,i="";for(const n in t){0===e&&(i+="\n// APPLICATION DEFINES\n"),e++;const r=t[n];(r||Number.isFinite(r))&&(i+="#define ".concat(n.toUpperCase()," ").concat(t[n],"\n"))}return 0===e&&(i+="\n"),i}(O),"\n").concat(b?"":"precision highp float;\n\n","\n"):"".concat(M,"\n");const L=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[n,r]=t.split(":"),o=t.replace(/\(.+/,"");e[n][o]=Object.assign(i,{signature:r})})),e}(c),F={},R={},N={};for(const t in u){const e="string"==typeof u[t]?{injection:u[t],order:0}:u[t],i=t.match(/^(v|f)s:(#)?([\w-]+)$/);if(i){const n=i[2],r=i[3];n?"decl"===r?R[t]=[e]:N[t]=[e]:F[t]=[e]}else N[t]=[e]}for(const t of a){m&&t.checkDeprecations(I,m),D+=t.getModuleSource(s,P);const e=t.injections[s];for(const t in e){const i=t.match(/^(v|f)s:#([\w-]+)$/);if(i){const n="decl"===i[2]?R:N;n[t]=n[t]||[],n[t].push(e[t])}else F[t]=F[t]||[],F[t].push(e[t])}}return D+=T,D=(0,p.ZP)(D,s,R),D+=function(t,e){let i="";for(const n in t){const r=t[n];if(i+="void ".concat(r.signature," {\n"),r.header&&(i+="  ".concat(r.header)),e[n]){const t=e[n];t.sort(((t,e)=>t.order-e.order));for(const e of t)i+="  ".concat(e.injection,"\n")}r.footer&&(i+="  ".concat(r.footer)),i+="}\n"}return i}(L[s],F),D+=I,D=(0,p.ZP)(D,s,N),D=function(t,e,i){switch(e){case 300:return i?k(t,v):function(t){const e=(t=k(t,y)).match(C);if(e){const i=e[1];t=t.replace(new RegExp("\\b".concat(x,"\\b"),"g"),i)}else{const e="fragmentColor";t=t.replace(E,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(x,"\\b"),"g"),e)}return t}(t);case 100:return i?k(t,_):function(t){const e=(t=k(t,w)).match(C);if(e){const i=e[1];t=t.replace(C,"").replace(new RegExp("\\b".concat(i,"\\b"),"g"),x)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(D,d?100:P,b),D}function P(t){return function(e){const i={};for(const n of t){const t=n.getUniforms(e,i);Object.assign(i,t)}return i}}var M=i(7944);class I{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new I(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:i="",defines:r={},inject:o={},varyings:a=[],bufferMode:l=35981,transpileToGLSL100:c=!1}=t,u=this._getModuleList(t.modules),h=this._getHash(e),d=this._getHash(i),A=u.map((t=>this._getHash(t.name))).sort(),f=a.map((t=>this._getHash(t))),p=Object.keys(r).sort(),g=Object.keys(o).sort(),m=[],v=[];for(const t of p)m.push(this._getHash(t)),m.push(this._getHash(r[t]));for(const t of g)v.push(this._getHash(t)),v.push(this._getHash(o[t]));const y="".concat(h,"/").concat(d,"D").concat(m.join("/"),"M").concat(A.join("/"),"I").concat(v.join("/"),"V").concat(f.join("/"),"H").concat(this.stateHash,"B").concat(l).concat(c?"T":"");if(!this._programCache[y]){const t=function(t,e){const{vs:i,fs:r}=e,o=s(e.modules||[]);return{gl:t,vs:S(t,Object.assign({},e,{source:i,type:n.H,modules:o})),fs:S(t,Object.assign({},e,{source:r,type:n.Y,modules:o})),getUniforms:P(o)}}(this.gl,{vs:e,fs:i,modules:u,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[y]=new M.Z(this.gl,{hash:y,vs:t.vs,fs:t.fs,varyings:a,bufferMode:l}),this._getUniforms[y]=t.getUniforms||(t=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),i={};let n=0;for(let t=0,r=this._defaultModules.length;t<r;++t){const r=this._defaultModules[t],o=r.name;e[n++]=r,i[o]=!0}for(let r=0,o=t.length;r<o;++r){const o=t[r],s=o.name;i[s]||(e[n++]=o,i[s]=!0)}return e.length=n,e}}},9450:(t,e,i)=>{"use strict";i.d(e,{KQ:()=>c,JD:()=>l,s9:()=>$,JY:()=>V,w:()=>G,vd:()=>a,yW:()=>tt,UF:()=>o,D0:()=>s,cM:()=>n,kL:()=>Z,aQ:()=>et,dR:()=>U,s8:()=>H});const n=new(i(9109).Z)({id:"luma.gl"});function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function o(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version))}function s(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function a(t){return s(t)?t:null}function l(t){return r(o(t),"Invalid WebGLRenderingContext"),t}function c(t){return r(s(t),"Requires WebGL2"),t}const u={};const h=function t(e){const i=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let e=0;e<this.attribs.length;e++){const n=new t.VertexAttrib(i);this.attribs[e]=n}this.maxAttrib=0};(h.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const d=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(u[i]=!0)}while(0!==i);for(i in u)if(u[i])return delete u[i],parseInt(i,10);return 0}}(t);const i=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:i.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const n=e.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,t);const r=n.attribs[t];return r.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const n=e.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,t);const r=n.attribs[t];return r.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,n){switch(t){case 34962:e.currentArrayBuffer=n;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=n}return i.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,n){const r=e.currentVertexArrayObject,o=r.attribs[t];switch(n){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,n,r,o,s,a){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const c=l.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=n,c.type=r,c.normalized=o,c.stride=s,c.offset=a,c.recache(),i.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{globalThis.console&&globalThis.console.log&&globalThis.console.log("OESVertexArrayObject emulation library context restored"),e.reset_()}),!0),this.reset_()};d.prototype.VERTEX_ARRAY_BINDING_OES=34229,d.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new h(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},d.prototype.createVertexArrayOES=function(){const t=new h(this);return this.vertexArrayObjects.push(t),t},d.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},d.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof h&&t.hasBeenBound&&t.ext===this)},d.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return i="bindVertexArrayOES: attempt to bind deleted arrayObject",u[1282]=!0,void(void 0!==i&&(n=i,globalThis.console&&globalThis.console.error&&globalThis.console.error(n)));var i,n;const r=this.original,o=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(o===s)return;o&&s.elementArrayBuffer===o.elementArrayBuffer||r.bindBuffer.call(e,34963,s.elementArrayBuffer);let a=this.currentArrayBuffer;const l=Math.max(o?o.maxAttrib:0,s.maxAttrib);for(let t=0;t<=l;t++){const i=s.attribs[t],n=o?o.attribs[t]:null;if(o&&i.enabled===n.enabled||(i.enabled?r.enableVertexAttribArray.call(e,t):r.disableVertexAttribArray.call(e,t)),i.enabled){let s=!1;o&&i.buffer===n.buffer||(a!==i.buffer&&(r.bindBuffer.call(e,34962,i.buffer),a=i.buffer),s=!0),(s||i.cached!==n.cached)&&r.vertexAttribPointer.call(e,t,i.size,i.type,i.normalized,i.stride,i.offset)}}this.currentArrayBuffer!==a&&r.bindBuffer.call(e,34962,this.currentArrayBuffer)};const A="OES_element_index",f="WEBGL_draw_buffers",p="WEBGL_debug_renderer_info",g=t=>s(t)?void 0:0,m={3074:t=>s(t)?void 0:36064,35723:t=>s(t)?void 0:4352,35977:g,32937:g,36795:(t,e)=>{const i=s(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return i&&i.GPU_DISJOINT_EXT?e(i.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const i=t.getExtension(p);return e(i&&i.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const i=t.getExtension(p);return e(i&&i.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const i=t.luma.extensions.EXT_texture_filter_anisotropic;return i?e(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:g,35071:g,37447:g,36063:(t,e)=>{if(!s(t)){const i=t.getExtension(f);return i?e(i.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:g,35374:g,35377:g,34852:t=>{if(!s(t)){const e=t.getExtension(f);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(A)?2147483647:65535,33001:t=>t.getExtension(A)?16777216:65535,33e3:t=>16777216,37157:g,35373:g,35657:g,36183:g,37137:g,34045:g,35978:g,35979:g,35968:g,35376:g,35375:g,35659:g,37154:g,35371:g,35658:g,35076:g,35077:g,35380:g},v="ANGLE_instanced_arrays",y={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{r(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[v]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){r(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{r(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{r(!1)},deleteQuery:()=>{r(!1)},beginQuery:()=>{r(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},b={readBuffer:(t,e,i)=>{s(t)&&e(i)},getVertexAttrib:(t,e,i,n)=>{const{webgl2:r,ext:o}=function(t,e){return{webgl2:s(t),ext:t.getExtension("ANGLE_instanced_arrays")}}(t);let a;switch(n){case 35069:a=!!r&&void 0;break;case 35070:a=r||o?void 0:0}return void 0!==a?a:e(i,n)},getProgramParameter:(t,e,i,n)=>{if(!s(t))switch(n){case 35967:return 35981;case 35971:case 35382:return 0}return e(i,n)},getInternalformatParameter:(t,e,i,n,r)=>s(t)||32937!==r?t.getInternalformatParameter(i,n,r):new Int32Array([0]),getTexParameter(t,e,i,n){if(34046===n){const{extensions:e}=t.luma,i=e.EXT_texture_filter_anisotropic;n=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(i,n)},getParameter:function(t,e,i){const n=m[i],r="function"==typeof n?n(t,e,i):n;return void 0!==r?r:e(i)},hint:(t,e,i,n)=>e(i,n)};function _(t,e){let{extension:i,target:n,target2:o}=e;const s=y[i];r(s);const{meta:a={}}=s,{suffix:l=""}=a,c=t.getExtension(i);for(const e of Object.keys(s)){const i="".concat(e).concat(l);let r=null;"meta"===e||"function"==typeof t[e]||(c&&"function"==typeof c[i]?r=function(){return c[i](...arguments)}:"function"==typeof s[e]&&(r=s[e].bind(n))),r&&(n[e]=r,o[e]=r)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const i=t.getExtension;t.getExtension=function(e){return i.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new d(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const i of e)t.luma[i]=t.getExtension(i)}(t),function(t,e){for(const i of Object.getOwnPropertyNames(e))"overrides"!==i&&_(t,{extension:i,target:t.luma,target2:t})}(t,y),function(t,e){let{target:i,target2:n}=e;Object.keys(b).forEach((e=>{if("function"==typeof b[e]){const r=t[e]?t[e].bind(t):()=>{},o=b[e].bind(null,t,r);i[e]=o,n[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const w={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},x=(t,e,i)=>e?t.enable(i):t.disable(i),C=(t,e,i)=>t.hint(i,e),E=(t,e,i)=>t.pixelStorei(i,e);function k(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const T={3042:x,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:x,2885:(t,e)=>t.cullFace(e),2929:x,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:x,35723:C,36006:(t,e)=>{const i=s(t)?36009:36160;return t.bindFramebuffer(i,e)},2886:(t,e)=>t.frontFace(e),33170:C,2849:(t,e)=>t.lineWidth(e),32823:x,32824:"polygonOffset",10752:"polygonOffset",35977:x,32938:"sampleCoverage",32939:"sampleCoverage",3089:x,3088:(t,e)=>t.scissor(...e),2960:x,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:E,3317:E,37440:E,37441:E,37443:E,3330:E,3332:E,3331:E,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:E,32878:E,3316:E,3315:E,32877:E,framebuffer:(t,e)=>{const i=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,i)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=k(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=k(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=k(e)?e:[e,e];const[i,n]=e;t.stencilMaskSeparate(1028,i),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=k(e)&&3===e.length?[...e,...e]:e;const[i,n,r,o,s,a]=e;t.stencilFuncSeparate(1028,i,n,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=k(e)&&3===e.length?[...e,...e]:e;const[i,n,r,o,s,a]=e;t.stencilOpSeparate(1028,i,n,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function B(t,e,i){return void 0!==e[t]?e[t]:i[t]}const S={blendEquation:(t,e,i)=>t.blendEquationSeparate(B(32777,e,i),B(34877,e,i)),blendFunc:(t,e,i)=>t.blendFuncSeparate(B(32969,e,i),B(32968,e,i),B(32971,e,i),B(32970,e,i)),polygonOffset:(t,e,i)=>t.polygonOffset(B(32824,e,i),B(10752,e,i)),sampleCoverage:(t,e,i)=>t.sampleCoverage(B(32938,e,i),B(32939,e,i)),stencilFuncFront:(t,e,i)=>t.stencilFuncSeparate(1028,B(2962,e,i),B(2967,e,i),B(2963,e,i)),stencilFuncBack:(t,e,i)=>t.stencilFuncSeparate(1029,B(34816,e,i),B(36003,e,i),B(36004,e,i)),stencilOpFront:(t,e,i)=>t.stencilOpSeparate(1028,B(2964,e,i),B(2965,e,i),B(2966,e,i)),stencilOpBack:(t,e,i)=>t.stencilOpSeparate(1029,B(34817,e,i),B(34818,e,i),B(34819,e,i))},P={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,i)=>t({[e]:i}),hint:(t,e,i)=>t({[e]:i}),bindFramebuffer:(t,e,i)=>{switch(e){case 36160:return t({36006:i,36010:i});case 36009:return t({36006:i});case 36008:return t({36010:i});default:return null}},blendColor:(t,e,i,n,r)=>t({32773:new Float32Array([e,i,n,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,i)=>t({32777:e,34877:i}),blendFunc:(t,e,i)=>t({32969:e,32968:i,32971:e,32970:i}),blendFuncSeparate:(t,e,i,n,r)=>t({32969:e,32968:i,32971:n,32970:r}),clearColor:(t,e,i,n,r)=>t({3106:new Float32Array([e,i,n,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,i,n,r)=>t({3107:[e,i,n,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,i)=>t({2928:new Float32Array([e,i])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,i)=>t({32824:e,10752:i}),sampleCoverage:(t,e,i)=>t({32938:e,32939:i}),scissor:(t,e,i,n,r)=>t({3088:new Int32Array([e,i,n,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,i)=>t({[1028===e?2968:36005]:i}),stencilFunc:(t,e,i,n)=>t({2962:e,2967:i,2963:n,34816:e,36003:i,36004:n}),stencilFuncSeparate:(t,e,i,n,r)=>t({[1028===e?2962:34816]:i,[1028===e?2967:36003]:n,[1028===e?2963:36004]:r}),stencilOp:(t,e,i,n)=>t({2964:e,2965:i,2966:n,34817:e,34818:i,34819:n}),stencilOpSeparate:(t,e,i,n,r)=>t({[1028===e?2964:34817]:i,[1028===e?2965:34818]:n,[1028===e?2966:34819]:r}),viewport:(t,e,i,n,r)=>t({2978:[e,i,n,r]})},M=(t,e)=>t.isEnabled(e),I={3042:M,2884:M,2929:M,3024:M,32823:M,32926:M,32928:M,3089:M,2960:M,35977:M};function O(t){for(const e in t)return!1;return!0}function D(t,e){if(t===e)return!0;const i=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(i&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function L(t,e){const i=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:i(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function F(t,e,i){const n=t[e].bind(t);t[e]=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];const{valueChanged:s,oldValue:a}=i(t.state._updateCache,...r);return s&&n(...r),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function R(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}class N{constructor(t){let{copyState:e=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?function(t,e){if("number"==typeof(e=e||w)){const i=e,n=I[i];return n?n(t,i):t.getParameter(i)}const i=Array.isArray(e)?e:Object.keys(e),n={};for(const e of i){const i=I[e];n[e]=i?i(t,Number(e)):t.getParameter(Number(e))}return n}(t):Object.assign({},w),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){r(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];U(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,i=!1;const n=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){r(void 0!==o);const s=t[o],a=this.cache[o];D(s,a)||(i=!0,e=a,n&&!(o in n)&&(n[o]=a),this.cache[o]=s)}return{valueChanged:i,oldValue:e}}}function z(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:i=!0,copyState:n}=e;if(r(void 0!==n),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new N(t,{copyState:n}),R(t);for(const e in P)F(t,e,P[e]);L(t,"getParameter"),L(t,"isEnabled")}return t.state.enable=i,t}function j(t){r(t.state),t.state.pop()}function U(t,e){if(r(o(t),"setParameters requires a WebGL context"),O(e))return;const i={};for(const n in e){const r=Number(n),o=T[n];o&&("string"==typeof o?i[o]=!0:o(t,e[n],r))}const n=t.state&&t.state.cache;if(n)for(const r in i)(0,S[r])(t,e,n)}function Z(t){U(t,w)}function H(t,e,i){if(O(e))return i(t);const{nocatch:n=!0}=e;let r;if(function(t){t.state||z(t,{copyState:!1}),t.state.push()}(t),U(t,e),n)r=i(t),j(t);else try{r=i(t)}finally{j(t)}return r}function G(t){const{luma:e}=t;if(t.canvas&&e){const i=e.canvasSizeInfo,n="clientWidth"in i?i.clientWidth:t.canvas.clientWidth;return n?t.drawingBufferWidth/n:1}return 1}function V(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=G(t),r=t.drawingBufferWidth,o=t.drawingBufferHeight;return q(e,n,r,o,i)}function W(t){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function q(t,e,i,n,r){const o=Q(t[0],e,i);let s=Y(t[1],e,n,r),a=Q(t[0]+1,e,i);const l=a===i-1?a:a-1;let c;return a=Y(t[1]+1,e,n,r),r?(a=0===a?a:a+1,c=s,s=a):c=a===n-1?a:a-1,{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(c-s+1,1)}}function Q(t,e,i){return Math.min(Math.round(t*e),i-1)}function Y(t,e,i,n){return n?Math.max(0,i-1-Math.round(t*e)):Math.min(Math.round(t*e),i-1)}const X=(0,i(3370).Z)(),J=X&&"undefined"!=typeof document,K={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function $(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(X,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},K,t);const{width:e,height:i}=t;function n(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let o;t.onError=n;const{canvas:s}=t,a=nt({canvas:s,width:e,height:i,onError:n});return o=it(a,t),o?(o=tt(o,t),rt(o),o):null}function tt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||ot(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},K,e);const{manageState:i,debug:r}=e;return i&&z(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.log(1,...e)()}}),X&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),n.level=Math.max(n.level,1)):n.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function et(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas)return void st(t,W(e.useDevicePixels),e);const i=t.getExtension("STACKGL_resize_drawingbuffer");i&&"width"in e&&"height"in e&&i.resize(e.width,e.height)}function it(t,e){const{onError:i}=e;let n=null;const r=t=>n=t.statusMessage||n;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):i("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function nt(t){let e,{canvas:i,width:n=800,height:r=600,onError:o}=t;return"string"==typeof i?(J&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(i,"' before page was loaded")),e=document.getElementById(i)):i?e=i:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",e.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(e,document.body.firstChild)),e}function rt(t){const e=s(t)?"WebGL2":"WebGL1",i=function(t){const e=t.getParameter(7936),i=t.getParameter(7937),n=t.getExtension("WEBGL_debug_renderer_info");return{vendor:n&&t.getParameter(n.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:n&&t.getParameter(n.UNMASKED_RENDERER_WEBGL||7937)||i,vendorMasked:e,rendererMasked:i,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=i?"(".concat(i.vendor,",").concat(i.renderer,")"):"",o=t.debug?" debug":"";n.info(1,"".concat(e).concat(o," context ").concat(r))()}function ot(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function st(t,e,i){let r="width"in i?i.width:t.canvas.clientWidth,o="height"in i?i.height:t.canvas.clientHeight;r&&o||(n.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,o=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==o||s.devicePixelRatio!==e){let i=e;const s=Math.floor(r*i),a=Math.floor(o*i);t.canvas.width=s,t.canvas.height=a,t.drawingBufferWidth===s&&t.drawingBufferHeight===a||(n.warn("Device pixel ratio clamped")(),i=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/o),t.canvas.width=Math.floor(r*i),t.canvas.height=Math.floor(o*i)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:o,devicePixelRatio:e})}}},5682:(t,e,i)=>{"use strict";i.d(e,{H:()=>n,Y:()=>r});const n="vs",r="fs"},6713:(t,e,i)=>{"use strict";i.d(e,{O_:()=>s,Lm:()=>h,ZP:()=>u});var n=i(5682),r=i(9047);const o={[n.H]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[n.Y]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},s="__LUMA_INJECT_DECLARATIONS__",a=/void\s+main\s*\([^)]*\)\s*\{\n?/,l=/}\n?[^{}]*$/,c=[];function u(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const u=e===n.H;for(const e in i){const n=i[e];n.sort(((t,e)=>t.order-e.order)),c.length=n.length;for(let t=0,e=n.length;t<e;++t)c[t]=n[t].injection;const r="".concat(c.join("\n"),"\n");switch(e){case"vs:#decl":u&&(t=t.replace(s,r));break;case"vs:#main-start":u&&(t=t.replace(a,(t=>t+r)));break;case"vs:#main-end":u&&(t=t.replace(l,(t=>r+t)));break;case"fs:#decl":u||(t=t.replace(s,r));break;case"fs:#main-start":u||(t=t.replace(a,(t=>t+r)));break;case"fs:#main-end":u||(t=t.replace(l,(t=>r+t)));break;default:t=t.replace(e,(t=>t+r))}}return t=t.replace(s,""),r&&(t=t.replace(/\}\s*$/,(t=>t+o[e]))),t}function h(t){const e={};return(0,r.Z)(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]})),e}},6119:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a,v:()=>l});var n=i(9047);const r={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function o(t){let e=s(t);return"object"===e?t?"type"in t?Object.assign({},t,r[t.type]):"value"in t?(e=s(t.value),Object.assign({type:e},t,r[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},r[e])}function s(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class a{constructor(t){let{name:e,vs:i,fs:r,dependencies:s=[],uniforms:a,getUniforms:l,deprecations:c=[],defines:u={},inject:h={},vertexShader:d,fragmentShader:A}=t;(0,n.Z)("string"==typeof e),this.name=e,this.vs=i||d,this.fs=r||A,this.getModuleUniforms=l,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=u,this.injections=function(t){const e={vs:{},fs:{}};for(const i in t){let n=t[i];const r=i.slice(0,2);"string"==typeof n&&(n={order:0,injection:n}),e[r][i]=n}return e}(h),a&&(this.uniforms=function(t){const e={};for(const i in t){const n=o(t[i]);e[i]=n}return e}(a))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:(0,n.Z)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((i=>{i.regex.test(t)&&(i.deprecated?e.deprecated(i.old,i.new)():e.removed(i.old,i.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{"function"===t.type?t.regex=new RegExp("\\b".concat(t.old,"\\(")):t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},i=this.uniforms;for(const r in i){const o=i[r];r in t&&!o.private?(o.validate&&(0,n.Z)(o.validate(t[r],o),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=o.value}return e}}function l(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){const e=new a(t);t.getUniforms=e.getUniforms.bind(e)}return t}},7024:(t,e,i)=>{"use strict";i.d(e,{H:()=>a});const n="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",r={lightSources:{}};function o(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}function s(t){let{ambientLight:e,pointLights:i=[],directionalLights:n=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?o(e):[0,0,0],i.forEach(((t,e)=>{r["lighting_uPointLight[".concat(e,"].color")]=o(t),r["lighting_uPointLight[".concat(e,"].position")]=t.position,r["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),r.lighting_uPointLightCount=i.length,n.forEach(((t,e)=>{r["lighting_uDirectionalLight[".concat(e,"].color")]=o(t),r["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),r.lighting_uDirectionalLightCount=n.length,r}const a={name:"lights",vs:n,fs:n,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;if("lightSources"in e){const{ambientLight:t,pointLights:i,directionalLights:n}=e.lightSources||{};return t||i&&i.length>0||n&&n.length>0?Object.assign({},s({ambientLight:t,pointLights:i,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const i={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":i.ambientLight=t;break;case"directional":i.directionalLights.push(t);break;case"point":i.pointLights.push(t)}return t({lightSources:i})}return{}},defines:{MAX_LIGHTS:3}}},7287:(t,e,i)=>{"use strict";i.d(e,{N:()=>l,s:()=>c});var n=i(7024);const r="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",o={};function s(t){const{ambient:e=.35,diffuse:i=.6,shininess:n=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:i,lighting_uShininess:n,lighting_uSpecularColor:r.map((t=>t/255))}}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(!("material"in t))return{};const{material:e}=t;return e?s(e):{lighting_uEnabled:!1}}const l={name:"gouraud-lighting",dependencies:[n.H],vs:r,defines:{LIGHTING_VERTEX:1},getUniforms:a},c={name:"phong-lighting",dependencies:[n.H],fs:r,defines:{LIGHTING_FRAGMENT:1},getUniforms:a}},9047:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}i.d(e,{Z:()=>n})},4072:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(9335),r=i(2525),o=i(2610);const s={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},a={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class l{static getBytesPerElement(t){return(0,n.vN)(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return(0,r.h)(t.size),(0,n.vN)(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new l(...[s,...e])}constructor(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return l.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return l.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=(0,o.k)("Accessor",t,a),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}},3478:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(7577),r=i(4072),o=i(9335),s=i(9450),a=i(2525),l=i(2610);const c={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},u={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:c},h={removedProps:c};class d extends n.Z{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/r.Z.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/r.Z.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=(0,l.k)("Buffer",t,u),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=(0,l.k)("Buffer",t,h))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new r.Z(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:i=0,srcOffset:n=0}=t,r=t.byteLength||t.length;(0,a.h)(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==n||void 0!==r?((0,s.KQ)(this.gl),this.gl.bufferSubData(this.target,i,e,n,r)):this.gl.bufferSubData(o,i,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:i=0,writeOffset:n=0,size:r}=t;const{gl:o}=this;return(0,s.KQ)(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,n,r),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:i=0,length:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.KQ)(this.gl);const r=(0,o.vN)(this.accessor.type||5126,{clamped:!1}),l=this._getAvailableElementCount(e),c=i;let u,h;t?(h=t.length,u=h-c):(u=Math.min(l,n||l),h=c+u);const d=Math.min(l,u);return n=n||d,(0,a.h)(n<=d),t=t||new r(h),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,i,n),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:i=0,size:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==n?this.gl.bindBufferRange(t,e,this.handle,i,n):((0,a.h)(0===i),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;(0,a.h)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,i,this.usage),this.gl.bufferSubData(n,e,t),this.gl.bindBuffer(n,null),this.debugData=t.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=(0,o.O)(t);return(0,a.h)(s),this.setAccessor(new r.Z(this.accessor,{type:s})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,a.h)(t>=0),this._trackDeallocatedMemory();let i=t;0===t&&(i=new Float32Array(0));const n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,i,e),this.gl.bindBuffer(n,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/(0,o.vN)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new r.Z(this.accessor,{type:(0,o.O)(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return s.cM.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return s.cM.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return s.cM.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return s.cM.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new r.Z(this.accessor,t),this}}},6047:(t,e,i)=>{"use strict";i.d(e,{$:()=>h,Z:()=>u});var n=i(9450),r=i(2525);const o=6144,s=6145,a=6146,l=34041,c="clear: bad arguments";function u(t){let{framebuffer:e=null,color:i=null,depth:o=null,stencil:s=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a={};e&&(a.framebuffer=e);let l=0;i&&(l|=16384,!0!==i&&(a.clearColor=i)),o&&(l|=256,!0!==o&&(a.clearDepth=o)),s&&(l|=1024,!0!==o&&(a.clearStencil=o)),(0,r.h)(0!==l,c),(0,n.s8)(t,a,(()=>{t.clear(l)}))}function h(t){let{framebuffer:e=null,buffer:i=o,drawBuffer:u=0,value:h=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.KQ)(t),(0,n.s8)(t,{framebuffer:e},(()=>{switch(i){case o:switch(h.constructor){case Int32Array:t.clearBufferiv(i,u,h);break;case Uint32Array:t.clearBufferuiv(i,u,h);break;case Float32Array:default:t.clearBufferfv(i,u,h)}break;case s:t.clearBufferfv(s,0,[h]);break;case a:t.clearBufferiv(a,0,[h]);break;case l:const[e,n]=h;t.clearBufferfi(l,0,e,n);break;default:(0,r.h)(!1,c)}}))}},1953:(t,e,i)=>{"use strict";i.d(e,{Km:()=>u,Lv:()=>h,z6:()=>c});var n=i(3849),r=i(5008),o=i(9450),s=i(9335),a=i(2525),l=i(5432);function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:i=0,sourceY:n=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:l=null,sourceWidth:c,sourceHeight:u,sourceType:h}=e;const{framebuffer:f,deleteFramebuffer:p}=d(t);(0,a.h)(f);const{gl:g,handle:m,attachments:v}=f;c=c||f.width,u=u||f.height,36064===o&&null===m&&(o=1028),(0,a.h)(v[o]),h=h||v[o].type,l=A(l,h,r,c,u),h=h||(0,s.O)(l);const y=g.bindFramebuffer(36160,m);return g.readPixels(i,n,c,u,r,h,l),g.bindFramebuffer(36160,y||null),p&&f.delete(),l}function u(t){let{sourceAttachment:e=36064,targetMaxHeight:i=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c(t,{sourceAttachment:e}),{width:r,height:o}=t;for(;o>i;)({data:n,width:r,height:o}=(0,s.KS)({data:n,width:r,height:o}));(0,s.c$)({data:n,width:r,height:o});const a=document.createElement("canvas");a.width=r,a.height=o;const l=a.getContext("2d"),u=l.createImageData(r,o);return u.data.set(n),l.putImageData(u,0,0),a.toDataURL()}function h(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:n=0,sourceY:s=0,targetMipmaplevel:l=0,targetInternalFormat:c=6408}=i;let{targetX:u,targetY:h,targetZ:A,width:f,height:p}=i;const{framebuffer:g,deleteFramebuffer:m}=d(t);(0,a.h)(g);const{gl:v,handle:y}=g,b=void 0!==u||void 0!==h||void 0!==A;u=u||0,h=h||0,A=A||0;const _=v.bindFramebuffer(36160,y);(0,a.h)(e);let w=null;if(e instanceof r.Z&&(w=e,f=Number.isFinite(f)?f:w.width,p=Number.isFinite(p)?p:w.height,w.bind(0),e=w.target),b)switch(e){case 3553:case 34067:v.copyTexSubImage2D(e,l,u,h,n,s,f,p);break;case 35866:case 32879:(0,o.KQ)(v).copyTexSubImage3D(e,l,u,h,A,n,s,f,p)}else v.copyTexImage2D(e,l,c,n,s,f,p,0);return w&&w.unbind(),v.bindFramebuffer(36160,_||null),m&&g.delete(),w}function d(t){return t instanceof n.Z?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:(0,l.Y)(t),deleteFramebuffer:!0}}function A(t,e,i,n,r){if(t)return t;e=e||5121;const o=(0,s.vN)(e,{clamped:!1}),l=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,a.h)(!1),0}}(i);return new o(n*r*l)}},3849:(t,e,i)=>{"use strict";i.d(e,{Z:()=>A});var n=i(9450),r=i(7577),o=i(4912),s=i(9830),a=i(6047),l=i(1953),c=i(4211),u=i(9579),h=i(2525);const d="Multiple render targets not supported";class A extends r.Z{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:n}=e;let r=!0;return i&&(r=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),n&&(r=r&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),r}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new A(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=(0,n.KQ)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=(0,n.KQ)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:i=1,attachments:n=null,color:r=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:c}=t;if((0,h.h)(e>=0&&i>=0,"Width and height need to be integers"),this.width=e,this.height=i,n)for(const t in n){const r=n[t];(Array.isArray(r)?r[0]:r).resize({width:e,height:i})}else n=this._createDefaultAttachments(r,o,s,e,i);this.update({clearAttachments:!0,attachments:n,readBuffer:l,drawBuffers:c}),n&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:i,drawBuffers:n,clearAttachments:r=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:r,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),n&&this._setDrawBuffers(n),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:i}=t;if(null===this.handle)return(0,h.h)(void 0===e&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),e!==this.width&&i!==this.height&&n.cM.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(i))();for(const t in this.attachments)this.attachments[t].resize({width:e,height:i});return this.width=e,this.height=i,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};e&&Object.keys(this.attachments).forEach((t=>{n[t]=null})),Object.assign(n,t);const r=this.gl.bindFramebuffer(36160,this.handle);for(const t in n){(0,h.h)(void 0!==t,"Misspelled framebuffer binding point?");const e=Number(t),r=n[e];let o=r;if(o)if(o instanceof s.Z)this._attachRenderbuffer({attachment:e,renderbuffer:o});else if(Array.isArray(r)){const[t,i=0,n=0]=r;o=t,this._attachTexture({attachment:e,texture:t,layer:i,level:n})}else this._attachTexture({attachment:e,texture:o,layer:0,level:0});else this._unattach(e);i&&o&&o.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,r||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(A.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),i=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),i}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:i,stencil:n,drawBuffers:r=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||i||n)&&(0,a.Z)(this.gl,{color:e,depth:i,stencil:n}),r.forEach(((t,e)=>{(0,a.$)(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return n.cM.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return n.cM.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return n.cM.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return n.cM.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return n.cM.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return n.cM.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:i=0,y:r=0,width:o,height:s}=t;const a=(0,n.KQ)(this.gl),l=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,e):a.invalidateFramebuffer(36008,e,i,r,o,s),a.bindFramebuffer(36008,l),this}getAttachmentParameter(t,e,i){let n=this._getAttachmentParameterFallback(e);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),i&&n>1e3&&(n=(0,u.km)(this.gl,n)),n}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const n={};for(const r of i)n[e?(0,u.km)(this.gl,r):r]=this.getAttachmentParameter(t,r,e);return n}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),i={};for(const n of e){const e=Number(n);i[t?(0,u.km)(this.gl,e):e]=this.getAttachmentParameters(e,t)}return i}show(){return"undefined"!=typeof window&&window.open((0,l.Km)(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>n.cM.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);const i=(0,l.Km)(this,{targetMaxHeight:100});return n.cM.image({logLevel:t,message:e,image:i},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,i,n,r){let a=null;return t&&(a=a||{},a[36064]=new o.Z(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:n,height:r,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(a[36064])),e&&i?(a=a||{},a[33306]=new s.Z(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:n,height:111}),this.ownResources.push(a[33306])):e?(a=a||{},a[36096]=new s.Z(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:n,height:r}),this.ownResources.push(a[36096])):i&&(0,h.h)(!1),a}_unattach(t){const e=this.attachments[t];e&&(e instanceof s.Z?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:i}=t;const{gl:n}=this;n.framebufferRenderbuffer(36160,e,36161,i.handle),this.attachments[e]=i}_attachTexture(t){let{attachment:e=36064,texture:i,layer:r,level:o}=t;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:(0,n.KQ)(s).framebufferTextureLayer(36160,e,i.target,o,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);s.framebufferTexture2D(36160,e,t,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,e,3553,i.handle,o);break;default:(0,h.h)(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[e]=i}_setReadBuffer(t){const e=(0,n.vd)(this.gl);e?e.readBuffer(t):(0,h.h)(36064===t||1029===t,d),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,i=(0,n.KQ)(e);if(i)i.drawBuffers(t);else{const i=e.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):(0,h.h)(1===t.length&&(36064===t[0]||1029===t[0]),d)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=(0,c.N$)(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}A.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},7944:(t,e,i)=>{"use strict";i.d(e,{Z:()=>z});var n=i(7577),r=i(5008),o=i(3849),s=i(9450),a=i(9830),l=i(2525);const c={5126:x.bind(null,"uniform1fv",p,1,C),35664:x.bind(null,"uniform2fv",p,2,C),35665:x.bind(null,"uniform3fv",p,3,C),35666:x.bind(null,"uniform4fv",p,4,C),5124:x.bind(null,"uniform1iv",g,1,C),35667:x.bind(null,"uniform2iv",g,2,C),35668:x.bind(null,"uniform3iv",g,3,C),35669:x.bind(null,"uniform4iv",g,4,C),35670:x.bind(null,"uniform1iv",g,1,C),35671:x.bind(null,"uniform2iv",g,2,C),35672:x.bind(null,"uniform3iv",g,3,C),35673:x.bind(null,"uniform4iv",g,4,C),35674:x.bind(null,"uniformMatrix2fv",p,4,E),35675:x.bind(null,"uniformMatrix3fv",p,9,E),35676:x.bind(null,"uniformMatrix4fv",p,16,E),35678:w,35680:w,5125:x.bind(null,"uniform1uiv",m,1,C),36294:x.bind(null,"uniform2uiv",m,2,C),36295:x.bind(null,"uniform3uiv",m,3,C),36296:x.bind(null,"uniform4uiv",m,4,C),35685:x.bind(null,"uniformMatrix2x3fv",p,6,E),35686:x.bind(null,"uniformMatrix2x4fv",p,8,E),35687:x.bind(null,"uniformMatrix3x2fv",p,6,E),35688:x.bind(null,"uniformMatrix3x4fv",p,12,E),35689:x.bind(null,"uniformMatrix4x2fv",p,8,E),35690:x.bind(null,"uniformMatrix4x3fv",p,12,E),35678:w,35680:w,35679:w,35682:w,36289:w,36292:w,36293:w,36298:w,36299:w,36300:w,36303:w,36306:w,36307:w,36308:w,36311:w},u={},h={},d={},A=[0];function f(t,e,i,n){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(A[0]=t,t=A);const r=t.length;if(r%e&&s.cM.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof i)return t;let o=n[r];o||(o=new i(r),n[r]=o);for(let e=0;e<r;e++)o[e]=t[e];return o}function p(t,e){return f(t,e,Float32Array,u)}function g(t,e){return f(t,e,Int32Array,h)}function m(t,e){return f(t,e,Uint32Array,d)}function v(t,e,i){const n=c[i.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(i.type));return n().bind(null,t,e)}function y(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function b(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let i=0;i<e;++i)if(!Number.isFinite(t[i]))return!1;return!0}(t):!!isFinite(t)||!0===t||!1===t||t instanceof r.Z||t instanceof a.Z||t instanceof o.Z&&Boolean(t.texture)}function _(t,e,i){if(Array.isArray(i)||ArrayBuffer.isView(i))if(t[e]){const n=t[e];for(let t=0,e=i.length;t<e;++t)n[t]=i[t]}else t[e]=i.slice();else t[e]=i}function w(){let t=null;return(e,i,n)=>{const r=t!==n;return r&&(e.uniform1i(i,n),t=n),r}}function x(t,e,i,n){let r=null,o=null;return(s,a,c)=>{const u=e(c,i),h=u.length;let d=!1;if(null===r)r=new Float32Array(h),o=h,d=!0;else{(0,l.h)(o===h,"Uniform length cannot change.");for(let t=0;t<h;++t)if(u[t]!==r[t]){d=!0;break}}return d&&(n(s,t,a,u),r.set(u)),d}}function C(t,e,i,n){t[e](i,n)}function E(t,e,i,n){t[e](i,!1,n)}function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(i);return n?n[1]:e}function T(t,e){let i="";for(let n=0;n<e.length;n++){const r=e[n];if((t[n+3]||t[n+2]||t[n+1])&&(i+="".concat(r,"\n"),t[n+1])){const e=t[n+1],r=e.split(":",3),o=r[0],s=parseInt(r[1],10)||0,a=e.substring(r.join(":").length+1).trim();i+=B("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return i}function B(t,e){let i="";for(let t=0;t<e;++t)i+=" ";return"".concat(i).concat(t)}var S=i(4538);class P extends n.Z{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,l.h)(!1),"unknown"}}constructor(t,e){(0,s.JD)(t),(0,l.h)("string"==typeof e.source,"Shader: GLSL source code must be a JavaScript string"),super(t,{id:k(e.source,null)||e.id||(0,S.hQ)("unnamed ".concat(P.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const i=k(e,null);i&&(this.id=(0,S.hQ)(i)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(P.getTypeName(this.shaderType),":").concat(this.id)}getName(){return k(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:i,warnings:n}=function(t,e,i,n){const r=t.split(/\r?\n/),o={},s={},a=n||k(e)||"(unnamed)",l="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(i)," shader ").concat(a);for(let e=0;e<r.length;e++){const i=r[e];if(i.length<=1)continue;const n=i.split(":"),a=n[0],c=parseInt(n[2],10);if(isNaN(c))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==a?o[c]=i:s[c]=i}const c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const n=t.split(/\r?\n/),r=String(n.length+e-1).length;return n.map(((t,n)=>{const o=String(n+e),s=o.length;return B(o,r-s)+i+t}))}(e);return{shaderName:l,errors:T(o,c),warnings:T(s,c)}}(t,this.source,this.shaderType,this.id);throw s.cM.error("GLSL compilation errors in ".concat(e,"\n").concat(i))(),s.cM.warn("GLSL compilation warnings in ".concat(e,"\n").concat(n))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class M extends P{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class I extends P{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}var O=i(4072),D=i(8522);class L{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,i=e.getProgramParameter(t.handle,35721);for(let n=0;n<i;n++){const{name:i,type:r,size:o}=e.getActiveAttrib(t.handle,n),s=e.getAttribLocation(t.handle,i);s>=0&&this._addAttribute(s,i,r,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!(0,s.D0)(e))return;const i=e.getProgramParameter(t.handle,35971);for(let n=0;n<i;n++){const{name:i,type:r,size:o}=e.getTransformFeedbackVarying(t.handle,n);this._addVarying(n,i,r,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,i,n){const{type:r,components:o}=(0,D.hJ)(i),s={type:r,size:n*o};this._inferProperties(t,e,s);const a={location:t,name:e,accessor:new O.Z(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,i){/instance/i.test(e)&&(i.divisor=1)}_addVarying(t,e,i,n){const{type:r,components:o}=(0,D.hJ)(i),s={location:t,name:e,accessor:new O.Z({type:r,size:n*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}var F=i(9579);const R=35981,N=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class z extends n.Z{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",N),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:i,fs:n,varyings:r,bufferMode:o=R}=t;return this.hash=e||"",this.vs="string"==typeof i?new M(this.gl,{id:"".concat(t.id,"-vs"),source:i}):i,this.fs="string"==typeof n?new I(this.gl,{id:"".concat(t.id,"-fs"),source:n}):n,(0,l.h)(this.vs instanceof M),(0,l.h)(this.fs instanceof I),this.uniforms={},this._textureUniforms={},r&&r.length>0&&((0,s.KQ)(this.gl),this.varyings=r,this.gl2.transformFeedbackVaryings(this.handle,r,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new L(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:i=4,vertexCount:n,offset:r=0,start:o,end:a,isIndexed:c=!1,indexType:u=5123,instanceCount:h=0,isInstanced:d=h>0,vertexArray:A=null,transformFeedback:f,framebuffer:p,parameters:g={},uniforms:m,samplers:v}=t;if((m||v)&&(s.cM.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),s.cM.priority>=e){const t=p?p.id:"default",r="mode=".concat((0,F.km)(this.gl,i)," verts=").concat(n," ")+"instances=".concat(h," indexType=").concat((0,F.km)(this.gl,u)," ")+"isInstanced=".concat(d," isIndexed=").concat(c," ")+"Framebuffer=".concat(t);s.cM.log(e,r)()}return(0,l.h)(A),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===n||d&&0===h||(A.bindForDraw(n,h,(()=>{if(void 0!==p&&(g=Object.assign({},g,{framebuffer:p})),f){const t=(0,D.$Z)(i);f.begin(t)}this._bindTextures(),(0,s.s8)(this.gl,g,(()=>{c&&d?this.gl2.drawElementsInstanced(i,n,u,r,h):c&&(0,s.D0)(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,n,u,r):c?this.gl.drawElements(i,n,u,r):d?this.gl2.drawArraysInstanced(i,r,n,h):this.gl.drawArrays(i,r,n)})),f&&f.end()})),0))}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.cM.priority>=2&&function(t,e,i){for(const n in t){const r=t[n];if((!i||Boolean(i[n]))&&!b(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(n),r),new Error("".concat(e," Bad uniform ").concat(n))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const i=t[e],n=this._uniformSetters[e];if(n){let t=i,s=!1;if(t instanceof o.Z&&(t=t.texture),t instanceof r.Z)if(s=this.uniforms[e]!==i,s){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);const i=t,{textureIndex:r}=n;i.bind(r),t=r,this._textureUniforms[e]=i}else t=n.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(n(t)||s)&&_(this.uniforms,e,i)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const i=this._textureUniforms[e];i.update(),t=t&&i.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),i={};for(const t of e)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new M({handle:t});break;case 35632:i.fs=new I({handle:t})}return i}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=(0,S.hQ)(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),s.cM.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),s.cM.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||s.cM.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const i=this.gl.getActiveUniform(this.handle,e),{name:n}=y(i.name);let r=t.getUniformLocation(this.handle,n);if(this._uniformSetters[n]=v(t,r,i),i.size>1)for(let e=0;e<i.size;e++)r=t.getUniformLocation(this.handle,"".concat(n,"[").concat(e,"]")),this._uniformSetters["".concat(n,"[").concat(e,"]")]=v(t,r,i)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}},9830:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(7577);const r="EXT_color_buffer_float",o={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:r,bpp:2},33327:{gl2:r,bpp:4},34842:{gl2:r,bpp:8},33326:{gl2:r,bpp:4},33328:{gl2:r,bpp:8},34836:{gl2:r,bpp:16},35898:{gl2:r,bpp:4}};var s=i(9450),a=i(2525);class l extends n.Z{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,i){const n=i[e];if(!n)return!1;const r=(0,s.D0)(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}(t,e,o)}static getSamplesForFormat(t,e){let{format:i}=e;return t.getInternalformatParameter(36161,i,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:i=1,height:n=1,samples:r=0}=t;return(0,a.h)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&(0,s.D0)(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,i,n):this.gl.renderbufferStorage(36161,e,i,n),this.format=e,this.width=i,this.height=n,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*o[this.format].bpp),this}resize(t){let{width:e,height:i}=t;return e!==this.width||i!==this.height?this.initialize({width:e,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}},7577:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(9450),r=i(9835),o=i(9579),s=i(2525),a=i(4538),l=i(7469);const c="Resource subclass must define virtual methods";class u{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.JD)(t);const{id:i,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=i||(0,a.hQ)(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=(0,o.sF)(this.gl,t),(0,s.h)(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const t=(0,n.D0)(this.gl);if("webgl2"in i&&!t||"extension"in i&&!this.gl.getExtension(i.extension)){const e=i.webgl1,n="webgl2"in i?i.webgl2:i.webgl1;return t?n:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:i}=t,r=this.constructor.PARAMETERS||{},s=(0,n.D0)(this.gl),a={},l=e||Object.keys(r);for(const e of l){const n=r[e];if(n&&(!("webgl2"in n)||s)&&(!("extension"in n)||this.gl.getExtension(n.extension))){const r=i?(0,o.km)(this.gl,e):e;a[r]=this.getParameter(e,t),i&&"GLenum"===n.type&&(a[r]=(0,o.km)(this.gl,a[r]))}}return a}setParameter(t,e){t=(0,o.sF)(this.gl,t),(0,s.h)(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const t=(0,n.D0)(this.gl);if("webgl2"in i&&!t||"extension"in i&&!this.gl.getExtension(i.extension))throw new Error("Parameter not available on this platform");"GLenum"===i.type&&(e=(0,o.sF)(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,i){return(0,l.F)(this,t,e,i)}initialize(t){}_createHandle(){throw new Error(c)}_deleteHandle(){throw new Error(c)}_bindHandle(t){throw new Error(c)}_getOptsFromHandle(){throw new Error(c)}_getParameter(t,e){throw new Error(c)}_setParameter(t,e){throw new Error(c)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=r.lR.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];r.lR.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=r.lR.get("Memory Usage".concat(i));n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=r.lR.get("Memory Usage".concat(e));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(t," Memory")).subtractCount(this.byteLength)}}},4912:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(9450),r=i(5008),o=i(2525);class s extends r.Z{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return r.Z.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;(0,n.JD)(t),(e instanceof Promise||"string"==typeof e)&&(e={data:e}),"string"==typeof e.data&&(e=Object.assign({},e,{data:(i=e.data,(0,o.h)("string"==typeof i),i=""+i,new Promise(((t,e)=>{try{const n=new Image;n.onload=()=>t(n),n.onerror=()=>e(new Error("Could not load image ".concat(i,"."))),n.crossOrigin="anonymous",n.src=i}catch(t){e(t)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}},3889:(t,e,i)=>{"use strict";i.d(e,{C:()=>o,KR:()=>l,ae:()=>r,br:()=>a,pH:()=>s});var n=i(9450);const r={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},o={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},s={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function a(t,e){const i=r[e];if(!i)return!1;if(void 0===i.gl1&&void 0===i.gl2)return!0;const o=(0,n.D0)(t)&&i.gl2||i.gl1;return"string"==typeof o?t.getExtension(o):o}function l(t,e){const i=r[e];switch(i&&i.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},5008:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(9450),r=i(7577),o=i(3478),s=i(3889),a=i(2525),l=i(4538);const c=[9729,9728],u=globalThis.WebGLBuffer||function(){};class h extends r.Z{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:n}=e;let r=!0;return i&&(r=r&&(0,s.br)(t,i),r=r&&(!n||(0,s.KR)(t,i))),r}constructor(t,e){const{id:i=(0,l.hQ)("texture"),handle:n,target:r}=e;super(t,{id:i,handle:n}),this.target=r,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const i="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(i&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u}=t;e||(e=r);let{width:h,height:d,dataFormat:A,type:f,compressed:p=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:h,height:d,compressed:p,dataFormat:A,type:f}=this._deduceParameters({format:o,type:f,dataFormat:A,compressed:p,data:e,width:h,height:d})),this.width=h,this.height=d,this.depth=m,this.format=o,this.type=f,this.dataFormat=A,this.border=s,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(n.cM.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:e,width:h,height:d,depth:m,format:o,type:f,dataFormat:A,border:s,mipmaps:g,parameters:c,compressed:p}),g&&this.generateMipmap(),this.setParameters(l),a&&(this.data=e),i&&(this._video={video:e,parameters:l,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:i}=this._video;if(i===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:i,mipmaps:n=!1}=t;return i!==this.width||e!==this.height?this.initialize({width:i,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:n}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(n.cM.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,n.s8)(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:i=null,level:r=0,format:o=this.format,border:l=this.border,offset:c=0,parameters:u={}}=t;let{data:h=null,type:d=this.type,width:A=this.width,height:f=this.height,dataFormat:p=this.dataFormat,compressed:g=!1}=t;h||(h=i),({type:d,dataFormat:p,compressed:g,width:A,height:f}=this._deduceParameters({format:o,type:d,dataFormat:p,compressed:g,data:h,width:A,height:f}));const{gl:m}=this;m.bindTexture(this.target,this.handle);let v,y=null;({data:h,dataType:y}=this._getDataType({data:h,compressed:g}));let b=0;if((0,n.s8)(this.gl,u,(()=>{switch(y){case"null":m.texImage2D(e,r,o,A,f,l,p,d,h);break;case"typed-array":m.texImage2D(e,r,o,A,f,l,p,d,h,c);break;case"buffer":v=(0,n.KQ)(m),v.bindBuffer(35052,h.handle||h),v.texImage2D(e,r,o,A,f,l,p,d,c),v.bindBuffer(35052,null);break;case"browser-object":(0,n.D0)(m)?m.texImage2D(e,r,o,A,f,l,p,d,h):m.texImage2D(e,r,o,p,d,h);break;case"compressed":for(const[t,i]of h.entries())m.compressedTexImage2D(e,t,i.format,i.width,i.height,l,i.data),b+=i.levelSize;break;default:(0,a.h)(!1,"Unknown image data type")}})),"compressed"===y)this._trackAllocatedMemory(b,"Texture");else if(h&&h.byteLength)this._trackAllocatedMemory(h.byteLength,"Texture");else{const t=s.C[this.dataFormat]||4,e=s.pH[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:i=null,data:r=null,x:s=0,y:l=0,width:c=this.width,height:h=this.height,level:d=0,format:A=this.format,type:f=this.type,dataFormat:p=this.dataFormat,compressed:g=!1,offset:m=0,border:v=this.border,parameters:y={}}=t;if(({type:f,dataFormat:p,compressed:g,width:c,height:h}=this._deduceParameters({format:A,type:f,dataFormat:p,compressed:g,data:r,width:c,height:h})),(0,a.h)(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const t=r;r=t.data,c=t.shape[0],h=t.shape[1]}r instanceof o.Z&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),(0,n.s8)(this.gl,y,(()=>{if(g)this.gl.compressedTexSubImage2D(e,d,s,l,c,h,A,r);else if(null===r)this.gl.texSubImage2D(e,d,s,l,c,h,p,f,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,d,s,l,c,h,p,f,r,m);else if(r instanceof u){const t=(0,n.KQ)(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,d,s,l,c,h,p,f,m),t.bindBuffer(35052,null)}else(0,n.D0)(this.gl)?(0,n.KQ)(this.gl).texSubImage2D(e,d,s,l,c,h,p,f,r):this.gl.texSubImage2D(e,d,s,l,p,f,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return n.cM.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:i=!1}=t;return i?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof o.Z?{data:e.handle,dataType:"buffer"}:e instanceof u?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:i}=t;let{width:n,height:r,dataFormat:o,type:a,compressed:l}=t;const c=s.ae[e];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:n,height:r}=this._deduceImageSize(i,n,r)),{dataFormat:o,type:a,compressed:l,width:n,height:r,format:e,data:i}}_deduceImageSize(t,e,i){let n;return n="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:i}:{width:e>=0?e:1,height:i>=0?i:1},(0,a.h)(n,"Could not deduced texture size"),(0,a.h)(void 0===e||n.width===e,"Deduced texture width does not match supplied width"),(0,a.h)(void 0===i||n.height===i,"Deduced texture height does not match supplied height"),n}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:(0,a.h)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!((0,n.D0)(this.gl)||!this.width||!this.height||(0,l.wt)(this.width)&&(0,l.wt)(this.height))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===c.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}},1053:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(9450),r=i(7577),o=i(3478),s=i(4538);class a extends r.Z{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return(0,n.D0)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.KQ)(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,s.nK)(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const i=this._getVaryingIndex(t),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(e);return i<0?(this.unused[t]=r,n.cM.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[i]=e,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,i,n;return t instanceof o.Z==0?(n=t.buffer,i=t.byteSize,e=t.byteOffset):n=t,void 0===e&&void 0===i||(e=e||0,i=i||n.byteLength-e),{buffer:n,byteOffset:e,byteSize:i}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:i,byteOffset:n}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,n,i)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const r=e&&e.handle;return r&&void 0!==n?this.gl.bindBufferRange(35982,t,r,i,n):this.gl.bindBufferBase(35982,t,r),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}},4211:(t,e,i)=>{"use strict";i.d(e,{N$:()=>l,U6:()=>s,ag:()=>a});var n=i(6948),r=i(9450),o=i(2525);function s(t,e){return a(t,e)}function a(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>c(t,e)))}function l(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in n.Z)void 0===t.luma.caps[e]&&(t.luma.caps[e]=c(t,e));return t.luma.caps}function c(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const i=n.Z[e];let s;(0,o.h)(i,e);const a=(0,r.D0)(t)&&i[1]||i[0];if("function"==typeof a)s=a(t);else if(Array.isArray(a)){s=!0;for(const e of a)s=s&&Boolean(t.getExtension(e))}else"string"==typeof a?s=Boolean(t.getExtension(a)):"boolean"==typeof a?s=a:(0,o.h)(!1);return s}(t,e)),t.luma.caps[e]||r.cM.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}},6948:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s,h:()=>o});var n=i(3849),r=i(4912);const o={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"},s={[o.WEBGL2]:[!1,!0],[o.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[o.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[o.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[o.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[o.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[o.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[o.FLOAT_BLEND]:["EXT_float_blend"],[o.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[o.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[o.TEXTURE_FLOAT]:["OES_texture_float",!0],[o.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[o.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[o.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[o.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[o.COLOR_ATTACHMENT_RGBA32F]:[function(t){const e=new r.Z(t,{format:6408,type:5126,dataFormat:6408}),i=new n.Z(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),o=i.getStatus();return e.delete(),i.delete(),36053===o},"EXT_color_buffer_float"],[o.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[o.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[o.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[o.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[o.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[o.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]}},9835:(t,e,i)=>{"use strict";i.d(e,{lR:()=>a});var n=i(9450),r=i(8295),o=i(3370);const s="8.5.20",a=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new r.Z({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==s)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(s));globalThis.luma||((0,o.Z)()&&n.cM.log(1,"luma.gl ".concat(s," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:s,version:s,log:n.cM,stats:a,globals:{modules:{},nodeIO:{}}}),globalThis.luma},2525:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}i.d(e,{h:()=>n})},2610:(t,e,i)=>{"use strict";i.d(e,{k:()=>r});var n=i(9450);function r(t,e,i){const{removedProps:r={},deprecatedProps:o={},replacedProps:s={}}=i;for(const i in r)if(i in e){const e=r[i]?"".concat(t,".").concat(r[i]):"N/A";n.cM.removed("".concat(t,".").concat(i),e)()}for(const i in o)if(i in e){const e=o[i];n.cM.deprecated("".concat(t,".").concat(i),"".concat(t,".").concat(e))()}let a=null;for(const i in s)if(i in e){const r=s[i];n.cM.deprecated("".concat(t,".").concat(i),"".concat(t,".").concat(r))(),a=a||Object.assign({},e),a[r]=e[i],delete a[i]}return a||e}},7469:(t,e,i)=>{"use strict";i.d(e,{F:()=>r});var n=i(9450);function r(t,e,i,r){const o="See luma.gl ".concat(i," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach((t=>{s.methodName||(s[t]=()=>{throw n.cM.removed("Calling removed method ".concat(e,".").concat(t,": "),o)(),new Error(t)})}))}},4538:(t,e,i)=>{"use strict";i.d(e,{hQ:()=>o,nK:()=>a,wt:()=>s});var n=i(2525);const r={};function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";r[t]=r[t]||1;const e=r[t]++;return"".concat(t,"-").concat(e)}function s(t){return(0,n.h)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function a(t){let e=!0;for(const i in t){e=!1;break}return e}},8522:(t,e,i)=>{"use strict";i.d(e,{$Z:()=>l,hJ:()=>c,jG:()=>u});var n=i(2525);const r=5126,o=5124,s=5125,a={[r]:[r,1,"float"],35664:[r,2,"vec2"],35665:[r,3,"vec3"],35666:[r,4,"vec4"],[o]:[o,1,"int"],35667:[o,2,"ivec2"],35668:[o,3,"ivec3"],35669:[o,4,"ivec4"],[s]:[s,1,"uint"],36294:[s,2,"uvec2"],36295:[s,3,"uvec3"],36296:[s,4,"uvec4"],35670:[r,1,"bool"],35671:[r,2,"bvec2"],35672:[r,3,"bvec3"],35673:[r,4,"bvec4"],35674:[r,8,"mat2"],35685:[r,8,"mat2x3"],35686:[r,8,"mat2x4"],35675:[r,12,"mat3"],35687:[r,12,"mat3x2"],35688:[r,12,"mat3x4"],35676:[r,16,"mat4"],35689:[r,16,"mat4x2"],35690:[r,16,"mat4x3"]};function l(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return(0,n.h)(!1),0}}function c(t){const e=a[t];if(!e)return null;const[i,n]=e;return{type:i,components:n}}function u(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=r}for(const i in a){const[n,r,o]=a[i];if(n===t&&r===e)return{glType:i,name:o}}return null}},9579:(t,e,i)=>{"use strict";i.d(e,{km:()=>o,sF:()=>r});var n=i(2525);function r(t,e){if("string"!=typeof e)return e;const i=Number(e);if(!isNaN(i))return i;const r=t[e=e.replace(/^.*\./,"")];return(0,n.h)(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function o(t,e){e=Number(e);for(const i in t)if(t[i]===e)return"GL.".concat(i);return String(e)}},5432:(t,e,i)=>{"use strict";i.d(e,{h:()=>A,Y:()=>f});var n=i(4912),r=i(9450),o=i(5008);const s=[34069,34070,34071,34072,34073,34074];class a extends o.Z{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.JD)(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:i={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(i)})),this}subImage(t){let{face:e,data:i,x:n=0,y:r=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:i,x:n,y:r,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:i,pixels:n,data:o,border:a=0,format:l=6408,type:c=5121}=t;const{gl:u}=this,h=n||o,d=await Promise.all(s.map((t=>{const e=h[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),s.forEach(((t,n)=>{d[n].length>1&&!1!==this.opts.mipmaps&&r.cM.warn("".concat(this.id," has mipmap and multiple LODs."))(),d[n].forEach(((n,r)=>{e&&i?u.texImage2D(t,r,l,e,i,a,l,c,n):u.texImage2D(t,r,l,l,c,n)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:i,height:n,pixels:r,data:o,border:s=0,format:a=6408,type:l=5121}=t,{gl:c}=this,u=r||o;return this.bind(),u instanceof Promise?u.then((i=>this.setImageDataForFace(Object.assign({},t,{face:e,data:i,pixels:i})))):this.width||this.height?c.texImage2D(e,0,a,i,n,s,a,l,u):c.texImage2D(e,0,a,a,l,u),this}}a.FACES=s;var l=i(3889),c=i(3478);class u extends o.Z{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return(0,r.D0)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.KQ)(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:i=6408,width:n,height:o,depth:s=1,border:a=0,format:u,type:h=5121,offset:d=0,data:A,parameters:f={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,r.s8)(this.gl,f,(()=>{ArrayBuffer.isView(A)&&this.gl.texImage3D(this.target,e,i,n,o,s,a,u,h,A),A instanceof c.Z&&(this.gl.bindBuffer(35052,A.handle),this.gl.texImage3D(this.target,e,i,n,o,s,a,u,h,d))})),A&&A.byteLength)this._trackAllocatedMemory(A.byteLength,"Texture");else{const t=l.C[this.dataFormat]||4,e=l.pH[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}var h=i(3849),d=i(2525);function A(t,e){(0,d.h)(t instanceof n.Z||t instanceof a||t instanceof u);const i=t.constructor,{gl:r,width:o,height:s,format:l,type:c,dataFormat:h,border:A,mipmaps:f}=t;return new i(r,Object.assign({width:o,height:s,format:l,type:c,dataFormat:h,border:A,mipmaps:f},e))}function f(t,e){const{gl:i,width:n,height:r,id:o}=t;return new h.Z(i,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:n,height:r,attachments:{36064:t}}))}},9335:(t,e,i)=>{"use strict";function n(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function r(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function o(t){let{data:e,width:i,height:n,bytesPerPixel:r=4,temp:o}=t;const s=i*r;o=o||new Uint8Array(s);for(let t=0;t<n/2;++t){const i=t*s,r=(n-t-1)*s;o.set(e.subarray(i,i+s)),e.copyWithin(i,r,r+s),e.set(o,r)}}function s(t){let{data:e,width:i,height:n}=t;const r=Math.round(i/2),o=Math.round(n/2),s=new Uint8Array(r*o*4);for(let t=0;t<o;t++)for(let n=0;n<r;n++)for(let o=0;o<4;o++)s[4*(t*r+n)+o]=e[4*(2*t*i+2*n)+o];return{data:s,width:r,height:o}}i.d(e,{KS:()=>s,O:()=>n,c$:()=>o,vN:()=>r})},6357:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(4034);class r extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=t[i+e];return this.check()}toArray(t=[],e=0){for(let i=0;i<this.ELEMENTS;++i)t[e+i]=this[i];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,n.kJ)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(n.vc)}formatString(t){let e="";for(let i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+(0,n.Bw)(this[i],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,n.fS)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,i){if(void 0===i)return this.lerp(this,t,e);for(let n=0;n<this.ELEMENTS;++n){const r=t[n];this[n]=r+i*(e[n]-r)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t[i]),e[i]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(n.vc.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t),e);return this.check()}get elements(){return this}}},1e3:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(6357),r=i(6281),o=i(4034);class s extends n.Z{toString(){let t="[";if(o.vc.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let i=0;i<this.RANK;++i)t+=" ".concat(this[i*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,i){return this[e*this.RANK+t]=(0,r.u5)(i),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const i=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[i+t];return e}setColumn(t,e){const i=t*this.RANK;for(let t=0;t<this.RANK;++t)this[i+t]=e[t];return this}}},9521:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(6357),r=i(6281),o=i(394);class s extends n.Z{get x(){return this[0]}set x(t){this[0]=(0,r.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,r.u5)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let i=0;i<this.ELEMENTS;++i){const n=this[i]-t[i];e+=n*n}return(0,r.u5)(e)}dot(t){let e=0;for(let i=0;i<this.ELEMENTS;++i)e+=this[i]*t[i];return(0,r.u5)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return(0,o.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,r.u5)(this[t])}setComponent(t,e){return(0,o.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}},5451:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n,r=i(1e3),o=i(6281),s=i(1031),a=i(5975),l=i(1437),c=i(7160),u=i(8333);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(n||(n={}));const h=45*Math.PI/180,d=1,A=.1,f=500,p=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class g extends r.Z{static get IDENTITY(){return v||(v=new g,Object.freeze(v)),v}static get ZERO(){return m||(m=new g([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(m)),m}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return n}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,i,n,r,o,s,a,l,c,u,h,d,A,f,p){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=h,this[12]=d,this[13]=A,this[14]=f,this[15]=p,this.check()}setRowMajor(t,e,i,n,r,o,s,a,l,c,u,h,d,A,f,p){return this[0]=t,this[1]=r,this[2]=l,this[3]=d,this[4]=e,this[5]=o,this[6]=c,this[7]=A,this[8]=i,this[9]=s,this[10]=u,this[11]=f,this[12]=n,this[13]=a,this[14]=h,this[15]=p,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(p)}fromObject(t){return this.check()}fromQuaternion(t){return a.en(this,t),this.check()}frustum(t){const{left:e,right:i,bottom:n,top:r,near:o=A,far:s=f}=t;return s===1/0?function(t,e,i,n,r,o){const s=2*o/(i-e),a=2*o/(r-n),l=(i+e)/(i-e),c=(r+n)/(r-n),u=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0}(this,e,i,n,r,o):a.oy(this,e,i,n,r,o,s),this.check()}lookAt(t){const{eye:e,center:i=[0,0,0],up:n=[0,1,0]}=t;return a.zB(this,e,i,n),this.check()}ortho(t){const{left:e,right:i,bottom:n,top:r,near:o=A,far:s=f}=t;return a.M5(this,e,i,n,r,o,s),this.check()}orthographic(t){const{fovy:e=h,aspect:i=d,focalDistance:n=1,near:r=A,far:o=f}=t;y(e);const s=e/2,a=n*Math.tan(s),l=a*i;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:i=1,near:n=.1,far:r=500}=t;return y(e),a.G3(this,e,i,n,r),this.check()}determinant(){return a.GH(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),n=1/i[0],r=1/i[1],o=1/i[2];return t[0]=this[0]*n,t[1]=this[1]*r,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*n,t[5]=this[5]*r,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*n,t[9]=this[9]*r,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),n=1/i[0],r=1/i[1],o=1/i[2];return t[0]=this[0]*n,t[1]=this[1]*r,t[2]=this[2]*o,t[3]=this[4]*n,t[4]=this[5]*r,t[5]=this[6]*o,t[6]=this[8]*n,t[7]=this[9]*r,t[8]=this[10]*o,t}transpose(){return a.p4(this,this),this.check()}invert(){return a.U_(this,this),this.check()}multiplyLeft(t){return a.Jp(this,t,this),this.check()}multiplyRight(t){return a.Jp(this,this,t),this.check()}rotateX(t){return a.lM(this,this,t),this.check()}rotateY(t){return a.uD(this,this,t),this.check()}rotateZ(t){return a.jI(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return a.U1(this,this,t,e),this.check()}scale(t){return a.bA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return a.Iu(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=u.fF(e||[-0,-0,-0,-0],t,this),(0,o.IL)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:i}=t;let n;switch(i){case 2:n=l.fF(e||[-0,-0],t,this);break;case 3:n=c.fF(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,o.IL)(n,t.length),n}transformAsVector(t,e){let i;switch(t.length){case 2:i=(0,s.pb)(e||[-0,-0],t,this);break;case 3:i=(0,s.pL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,o.IL)(i,t.length),i}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,i){return this.identity().translate([t,e,i])}}let m,v;function y(t){if(t>2*Math.PI)throw Error("expected radians")}},3855:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(9521),r=i(4034),o=i(6281),s=i(7160),a=i(1031);const l=[0,0,0];let c;class u extends n.Z{static get ZERO(){return c||(c=new u(0,0,0),Object.freeze(c)),c}constructor(t=0,e=0,i=0){super(-0,-0,-0),1===arguments.length&&(0,r.kJ)(t)?this.copy(t):(r.vc.debug&&((0,o.u5)(t),(0,o.u5)(e),(0,o.u5)(i)),this[0]=t,this[1]=e,this[2]=i)}set(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return r.vc.debug&&((0,o.u5)(t.x),(0,o.u5)(t.y),(0,o.u5)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,o.u5)(t)}angle(t){return s.EU(this,t)}cross(t){return s.kC(this,this,t),this.check()}rotateX({radians:t,origin:e=l}){return s.lM(this,this,e,t),this.check()}rotateY({radians:t,origin:e=l}){return s.uD(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=l}){return s.jI(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return s.fF(this,this,t),this.check()}transformAsVector(t){return(0,a.pL)(this,this,t),this.check()}transformByMatrix3(t){return s.kK(this,this,t),this.check()}transformByMatrix2(t){return(0,a.eQ)(this,this,t),this.check()}transformByQuaternion(t){return s.VC(this,this,t),this.check()}}},394:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}i.d(e,{Z:()=>n})},4034:(t,e,i)=>{"use strict";i.d(e,{Bw:()=>s,RW:()=>h,Ux:()=>c,Yr:()=>l,fS:()=>f,kJ:()=>a,t7:()=>A,uR:()=>u,uZ:()=>d,vc:()=>o});const n=1/Math.PI*180,r=1/180*Math.PI,o={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function s(t,{precision:e=o.precision}={}){return t=function(t){return Math.round(t/o.EPSILON)*o.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function l(t){return u(t)}function c(t){return h(t)}function u(t,e){return p(t,(t=>t*r),e)}function h(t,e){return p(t,(t=>t*n),e)}function d(t,e,i){return p(t,(t=>Math.max(e,Math.min(i,t))))}function A(t,e,i){return a(t)?t.map(((t,n)=>A(t,e[n],i))):i*e+(1-i)*t}function f(t,e,i){const n=o.EPSILON;i&&(o.EPSILON=i);try{if(t===e)return!0;if(a(t)&&a(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!f(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=o.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{o.EPSILON=n}}function p(t,e,i){if(a(t)){const n=t;i=i||function(t){return t.clone?t.clone():new Array(t.length)}(n);for(let r=0;r<i.length&&r<n.length;++r)i[r]=e(t[r],r,i);return i}return e(t)}},1031:(t,e,i)=>{"use strict";function n(t,e,i){const n=e[0],r=e[1],o=i[3]*n+i[7]*r||1;return t[0]=(i[0]*n+i[4]*r)/o,t[1]=(i[1]*n+i[5]*r)/o,t}function r(t,e,i){const n=e[0],r=e[1],o=e[2],s=i[3]*n+i[7]*r+i[11]*o||1;return t[0]=(i[0]*n+i[4]*r+i[8]*o)/s,t[1]=(i[1]*n+i[5]*r+i[9]*o)/s,t[2]=(i[2]*n+i[6]*r+i[10]*o)/s,t}function o(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t[2]=e[2],t}function s(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t[2]=e[2],t[3]=e[3],t}function a(t,e,i){const n=e[0],r=e[1],o=e[2];return t[0]=i[0]*n+i[3]*r+i[6]*o,t[1]=i[1]*n+i[4]*r+i[7]*o,t[2]=i[2]*n+i[5]*r+i[8]*o,t[3]=e[3],t}i.d(e,{G7:()=>s,_x:()=>a,eQ:()=>o,pL:()=>r,pb:()=>n})},6281:(t,e,i)=>{"use strict";i.d(e,{IL:()=>o,u5:()=>r});var n=i(4034);function r(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function o(t,e,i=""){if(n.vc.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(i," some fields set to invalid numbers'"));return t}},5215:(t,e,i)=>{"use strict";i.d(e,{wG:()=>n,WZ:()=>N,GU:()=>G,dj:()=>F,ct:()=>H,OT:()=>s,ap:()=>o,Ny:()=>r});const n={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function r(t,e,i={}){const n=function(t,e={}){return Math.sign(o(t,e))}(t,i);return n!==e&&(function(t,e){const{start:i=0,end:n=t.length,size:r=2}=e,o=(n-i)/r,s=Math.floor(o/2);for(let e=0;e<s;++e){const n=i+e*r,s=i+(o-1-e)*r;for(let e=0;e<r;++e){const i=t[n+e];t[n+e]=t[s+e],t[s+e]=i}}}(t,i),!0)}function o(t,e={}){const{start:i=0,end:n=t.length}=e,r=e.size||2;let o=0;for(let e=i,s=n-r;e<n;e+=r)o+=(t[e]-t[s])*(t[e+1]+t[s+1]),s=e;return o/2}function s(t,e,i=2,n){const r=e&&e.length,o=r?e[0]*i:t.length;let s=a(t,0,o,i,!0,n&&n[0]);const u=[];if(!s||s.next===s.prev)return u;let h,d,A,g,m,y,b;if(r&&(s=function(t,e,i,n,r){const o=[];let s,c,u,h,d;for(s=0,c=e.length;s<c;s++)u=e[s]*n,h=s<c-1?e[s+1]*n:t.length,d=a(t,u,h,n,!1,r&&r[s+1]),d===d.next&&(d.steiner=!0),o.push(v(d));for(o.sort(f),s=0;s<o.length;s++)p(o[s],i),i=l(i,i.next);return i}(t,e,s,i,n)),t.length>80*i){g=d=t[0],m=A=t[1];for(let e=i;e<o;e+=i)y=t[e],b=t[e+1],y<g&&(g=y),b<m&&(m=b),y>d&&(d=y),b>A&&(A=b);h=Math.max(d-g,A-m),h=0!==h?1/h:0}return c(s,u,i,g,m,h),u}function a(t,e,i,n,r,s){let a,l;if(void 0===s&&(s=o(t,{start:e,end:i,size:n})),r===s<0)for(a=e;a<i;a+=n)l=B(a,t[a],t[a+1],l);else for(a=i-n;a>=e;a-=n)l=B(a,t[a],t[a+1],l);return l&&w(l,l.next)&&(S(l),l=l.next),l}function l(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!w(n,n.next)&&0!==_(n.prev,n,n.next))n=n.next;else{if(S(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function c(t,e,i,n,r,o,s){if(!t)return;!s&&o&&function(t,e,i,n){let r=t;do{null===r.z&&(r.z=m(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,i,n,r,o,s,a,l,c=1;do{for(r=t,t=null,l=null,n=0;r;){for(n++,s=r,o=0,i=0;i<c&&(o++,s=s.nextZ,s);i++);for(a=c;o>0||a>0&&s;)0!==o&&(0===a||!s||r.z<=s.z)?(e=r,r=r.nextZ,o--):(e=s,s=s.nextZ,a--),l?l.nextZ=e:t=e,e.prevZ=l,l=e;r=s}l.nextZ=null,c*=2}while(n>1)}(r)}(t,n,r,o);let a,f,p=t;for(;t.prev!==t.next;)if(a=t.prev,f=t.next,o?h(t,n,r,o):u(t))e.push(a.i/i),e.push(t.i/i),e.push(f.i/i),S(t),t=f.next,p=f.next;else if((t=f)===p){s?1===s?c(t=d(l(t),e,i),e,i,n,r,o,2):2===s&&A(t,e,i,n,r,o):c(l(t),e,i,n,r,o,1);break}}function u(t){const e=t.prev,i=t,n=t.next;if(_(e,i,n)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(y(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&_(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){const r=t.prev,o=t,s=t.next;if(_(r,o,s)>=0)return!1;const a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=m(a,l,e,i,n),d=m(c,u,e,i,n);let A=t.prevZ,f=t.nextZ;for(;A&&A.z>=h&&f&&f.z<=d;){if(A!==t.prev&&A!==t.next&&y(r.x,r.y,o.x,o.y,s.x,s.y,A.x,A.y)&&_(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,f!==t.prev&&f!==t.next&&y(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;A&&A.z>=h;){if(A!==t.prev&&A!==t.next&&y(r.x,r.y,o.x,o.y,s.x,s.y,A.x,A.y)&&_(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&y(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function d(t,e,i){let n=t;do{const r=n.prev,o=n.next.next;!w(r,o)&&x(r,n,n.next,o)&&k(r,o)&&k(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),S(n),S(n.next),n=t=o),n=n.next}while(n!==t);return l(n)}function A(t,e,i,n,r,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&b(s,t)){let a=T(s,t);return s=l(s,s.next),a=l(a,a.next),c(s,e,i,n,r,o),void c(a,e,i,n,r,o)}t=t.next}s=s.next}while(s!==t)}function f(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){let i=e;const n=t.x,r=t.y;let o,s=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const t=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=n&&t>s){if(s=t,t===n){if(r===i.y)return i;if(r===i.next.y)return i.next}o=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!o)return null;if(n===s)return o;const a=o,l=o.x,c=o.y;let u,h=1/0;i=o;do{n>=i.x&&i.x>=l&&n!==i.x&&y(r<c?n:s,r,l,c,r<c?s:n,r,i.x,i.y)&&(u=Math.abs(r-i.y)/(n-i.x),k(i,t)&&(u<h||u===h&&(i.x>o.x||i.x===o.x&&g(o,i)))&&(o=i,h=u)),i=i.next}while(i!==a);return o}(t,e),e){const i=T(e,t);l(e,e.next),l(i,i.next)}}function g(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function m(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(k(t,e)&&k(e,t)&&function(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||w(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,n){const r=E(_(t,e,i)),o=E(_(t,e,n)),s=E(_(i,n,t)),a=E(_(i,n,e));return r!==o&&s!==a||!(0!==r||!C(t,i,e))||!(0!==o||!C(t,n,e))||!(0!==s||!C(i,t,n))||!(0!==a||!C(i,e,n))}function C(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function E(t){return t>0?1:t<0?-1:0}function k(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function T(t,e){const i=new P(t.i,t.x,t.y),n=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function B(t,e,i,n){const r=new P(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,i,n,r=[]){let o,s;if(8&i)o=(n[3]-t[1])/(e[1]-t[1]),s=3;else if(4&i)o=(n[1]-t[1])/(e[1]-t[1]),s=1;else if(2&i)o=(n[2]-t[0])/(e[0]-t[0]),s=2;else{if(!(1&i))return null;o=(n[0]-t[0])/(e[0]-t[0]),s=0}for(let i=0;i<t.length;i++)r[i]=(1&s)===i?n[s]:o*(e[i]-t[i])+t[i];return r}function I(t,e){let i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function O(t,e){const i=e.length,n=t.length;if(n>0){let r=!0;for(let o=0;o<i;o++)if(t[n-i+o]!==e[o]){r=!1;break}if(r)return!1}for(let r=0;r<i;r++)t[n+r]=e[r];return!0}function D(t,e){const i=e.length;for(let n=0;n<i;n++)t[n]=e[n]}function L(t,e,i,n,r=[]){const o=n+e*i;for(let e=0;e<i;e++)r[e]=t[o+e];return r}function F(t,e){const{size:i=2,broken:n=!1,gridResolution:r=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},l=(a-s)/i;let c=[];const u=[c],h=L(t,0,i,s);let d,A;const f=j(h,r,o,[]),p=[];O(c,h);for(let e=1;e<l;e++){for(d=L(t,e,i,s,d),A=I(d,f);A;){M(h,d,A,f,p);const t=I(p,f);t&&(M(h,p,t,f,p),A=t),O(c,p),D(h,p),U(f,r,A),n&&c.length>i&&(c=[],u.push(c),O(c,h)),A=I(d,f)}O(c,d),D(h,d)}return n?u:u[0]}function R(t,e){for(let i=0;i<e.length;i++)t.push(e[i]);return t}function N(t,e=null,i){if(!t.length)return[];const{size:n=2,gridResolution:r=10,gridOffset:o=[0,0],edgeTypes:s=!1}=i||{},a=[],l=[{pos:t,types:s?new Array(t.length/n).fill(1):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:t,types:e,holes:i}=l.shift();Z(t,n,i[0]||t.length,c),u=j(c[0],r,o,u);const h=I(c[1],u);if(h){let r=z(t,e,n,0,i[0]||t.length,u,h);const o={pos:r[0].pos,types:r[0].types,holes:[]},a={pos:r[1].pos,types:r[1].types,holes:[]};l.push(o,a);for(let l=0;l<i.length;l++)r=z(t,e,n,i[l],i[l+1]||t.length,u,h),r[0]&&(o.holes.push(o.pos.length),o.pos=R(o.pos,r[0].pos),s&&(o.types=R(o.types,r[0].types))),r[1]&&(a.holes.push(a.pos.length),a.pos=R(a.pos,r[1].pos),s&&(a.types=R(a.types,r[1].types)))}else{const n={positions:t};s&&(n.edgeTypes=e),i.length&&(n.holeIndices=i),a.push(n)}}return a}function z(t,e,i,n,r,o,s){const a=(r-n)/i,l=[],c=[],u=[],h=[],d=[];let A,f,p;const g=L(t,a-1,i,n);let m=Math.sign(8&s?g[1]-o[3]:g[0]-o[2]),v=e&&e[a-1],y=0,b=0;for(let r=0;r<a;r++)A=L(t,r,i,n,A),f=Math.sign(8&s?A[1]-o[3]:A[0]-o[2]),p=e&&e[n/i+r],f&&m&&m!==f&&(M(g,A,s,o,d),O(l,d)&&u.push(v),O(c,d)&&h.push(v)),f<=0?(O(l,A)&&u.push(p),y-=f):u.length&&(u[u.length-1]=0),f>=0?(O(c,A)&&h.push(p),b+=f):h.length&&(h[h.length-1]=0),D(g,A),m=f,v=p;return[y?{pos:l,types:e&&u}:null,b?{pos:c,types:e&&h}:null]}function j(t,e,i,n){const r=Math.floor((t[0]-i[0])/e)*e+i[0],o=Math.floor((t[1]-i[1])/e)*e+i[1];return n[0]=r,n[1]=o,n[2]=r+e,n[3]=o+e,n}function U(t,e,i){8&i?(t[1]+=e,t[3]+=e):4&i?(t[1]-=e,t[3]-=e):2&i?(t[0]+=e,t[2]+=e):1&i&&(t[0]-=e,t[2]-=e)}function Z(t,e,i,n){let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let n=0;n<i;n+=e){const e=t[n],i=t[n+1];r=e<r?e:r,o=e>o?e:o,s=i<s?i:s,a=i>a?i:a}return n[0][0]=r,n[0][1]=s,n[1][0]=o,n[1][1]=a,n}function H(t,e){const{size:i=2,startIndex:n=0,endIndex:r=t.length,normalize:o=!0}=e||{},s=t.slice(n,r);q(s,i,0,r-n);const a=F(s,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const t of a)Q(t,i);return a}function G(t,e=null,i){const{size:n=2,normalize:r=!0,edgeTypes:o=!1}=i||{};e=e||[];const s=[],a=[];let l=0,c=0;for(let r=0;r<=e.length;r++){const o=e[r]||t.length,u=c,h=V(t,n,l,o);for(let e=h;e<o;e++)s[c++]=t[e];for(let e=l;e<h;e++)s[c++]=t[e];q(s,n,u,c),W(s,n,u,c,null==i?void 0:i.maxLatitude),l=o,a[r]=c}a.pop();const u=N(s,a,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(r)for(const t of u)Q(t.positions,n);return u}function V(t,e,i,n){let r=-1,o=-1;for(let s=i+1;s<n;s+=e){const e=Math.abs(t[s]);e>r&&(r=e,o=s-1)}return o}function W(t,e,i,n,r=85.051129){const o=t[i],s=t[n-e];if(Math.abs(o-s)>180){const n=L(t,0,e,i);n[0]+=360*Math.round((s-o)/360),O(t,n),n[1]=Math.sign(n[1])*r,O(t,n),n[0]=o,O(t,n)}}function q(t,e,i,n){let r,o=t[0];for(let s=i;s<n;s+=e){r=t[s];const e=r-o;(e>180||e<-180)&&(r-=360*Math.round(e/360)),t[s]=o=r}}function Q(t,e){let i;const n=t.length/e;for(let r=0;r<n&&(i=t[r*e],(i+180)%360==0);r++);const r=360*-Math.round(i/360);if(0!==r)for(let i=0;i<n;i++)t[i*e]+=r}},7013:(t,e,i)=>{"use strict";i.d(e,{eG:()=>k,Lu:()=>S,Xg:()=>O,if:()=>j,sj:()=>P,zX:()=>L,ro:()=>E,up:()=>U,Bf:()=>x,wl:()=>B,lf:()=>T,w5:()=>_,QA:()=>R,CT:()=>I,NC:()=>C,es:()=>w,aW:()=>M});var n=i(8333);function r(t,e){const i=(0,n.fF)([],e,t);return(0,n.bA)(i,i,1/i[3]),i}function o(t,e){const i=t%e;return i<0?e+i:i}function s(t,e,i){return t<e?e:t>i?i:t}const a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var l=i(5975),c=i(1437),u=i(7160);function h(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const d=Math.PI,A=d/4,f=d/180,p=180/d,g=512,m=85.051129,v=1.5;function y(t){return Math.pow(2,t)}function b(t){return a(t)}function _(t){const[e,i]=t;h(Number.isFinite(e)),h(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");const n=i*f;return[g*(e*f+d)/(2*d),g*(d+Math.log(Math.tan(A+.5*n)))/(2*d)]}function w(t){const[e,i]=t,n=e/g*(2*d)-d,r=2*(Math.atan(Math.exp(i/g*(2*d)-d))-A);return[n*p,r*p]}function x(t){const{latitude:e}=t;h(Number.isFinite(e));return b(4003e4*Math.cos(e*f))-9}function C(t){return 12790407194604047e-21/Math.cos(t*f)}function E(t){const{latitude:e,longitude:i,highPrecision:n=!1}=t;h(Number.isFinite(e)&&Number.isFinite(i));const r=Math.cos(e*f),o=512/360,s=o/r,a=12790407194604047e-21/r,l={unitsPerMeter:[a,a,a],metersPerUnit:[1/a,1/a,1/a],unitsPerDegree:[o,s,a],degreesPerUnit:[.703125,1/s,1/a]};if(n){const t=f*Math.tan(e*f)/r,i=o*t/2,n=12790407194604047e-21*t,c=n/s*a;l.unitsPerDegree2=[0,i,n],l.unitsPerMeter2=[c,0,c]}return l}function k(t,e){const[i,n,r]=t,[o,s,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=E({longitude:i,latitude:n,highPrecision:!0}),u=_(t);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const h=w(u),d=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],d]:h}function T(t){const{height:e,pitch:i,bearing:n,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];l.Iu(a,a,[0,0,-r]),l.lM(a,a,-i*f),l.jI(a,a,n*f);const c=o/e;return l.bA(a,a,[c,c,c]),s&&l.Iu(a,a,u.tk([],s)),a}function B(t){const{width:e,height:i,altitude:n,pitch:r=0,offset:o,center:a,scale:l,nearZMultiplier:c=1,farZMultiplier:u=1}=t;let{fovy:h=S(v)}=t;void 0!==n&&(h=S(n));const d=h*f,A=r*f,p=P(h);let g=p;a&&(g+=a[2]*l/Math.cos(A)/i);const m=d*(.5+(o?o[1]:0)/i),y=Math.sin(m)*g/Math.sin(s(Math.PI/2-A-m,.01,Math.PI-.01)),b=Math.sin(A)*y+g,_=10*g;return{fov:d,aspect:e/i,focalDistance:p,near:c,far:Math.min(b*u,_)}}function S(t){return 2*Math.atan(.5/t)*p}function P(t){return.5/Math.tan(.5*t*f)}function M(t,e){const[i,n,o=0]=t;return h(Number.isFinite(i)&&Number.isFinite(n)&&Number.isFinite(o)),r(e,[i,n,o,1])}function I(t,e,i=0){const[n,o,s]=t;if(h(Number.isFinite(n)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(s))return r(e,[n,o,s,1]);const a=r(e,[n,o,0,1]),l=r(e,[n,o,1,1]),u=a[2],d=l[2],A=u===d?0:((i||0)-u)/(d-u);return c.t7([],a,l,A)}function O(t){const{width:e,height:i,bounds:n,minExtent:r=0,maxZoom:o=24,offset:l=[0,0]}=t,[[c,u],[d,A]]=n,f=function(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(h(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),p=_([c,s(A,-85.051129,m)]),g=_([d,s(u,-85.051129,m)]),v=[Math.max(Math.abs(g[0]-p[0]),r),Math.max(Math.abs(g[1]-p[1]),r)],y=[e-f.left-f.right-2*Math.abs(l[0]),i-f.top-f.bottom-2*Math.abs(l[1])];h(y[0]>0&&y[1]>0);const b=y[0]/v[0],x=y[1]/v[1],C=(f.right-f.left)/2/b,E=(f.top-f.bottom)/2/x,k=w([(g[0]+p[0])/2+C,(g[1]+p[1])/2+E]),T=Math.min(o,a(Math.abs(Math.min(b,x))));return h(Number.isFinite(T)),{longitude:k[0],latitude:k[1],zoom:T}}const D=Math.PI/180;function L(t,e=0){const{width:i,height:n,unproject:r}=t,o={targetZ:e},s=r([0,n],o),a=r([i,n],o);let l,c;return(t.fovy?.5*t.fovy*D:Math.atan(.5/t.altitude))>(90-t.pitch)*D-.01?(l=F(t,0,e),c=F(t,i,e)):(l=r([0,0],o),c=r([i,0],o)),[s,a,c,l]}function F(t,e,i){const{pixelUnprojectionMatrix:n}=t,o=r(n,[e,0,1,1]),s=r(n,[e,t.height,1,1]),a=(i*t.distanceScales.unitsPerMeter[2]-o[2])/(s[2]-o[2]),l=w(c.t7([],o,s,a));return l.push(i),l}function R(t){const{width:e,height:i,pitch:n=0}=t;let{longitude:r,latitude:s,zoom:l,bearing:c=0}=t;(r<-180||r>180)&&(r=o(r+180,360)-180),(c<-180||c>180)&&(c=o(c+180,360)-180);const u=a(i/512);if(l<=u)l=u,s=0;else{const t=i/2/Math.pow(2,l),e=w([0,t])[1];if(s<e)s=e;else{const e=w([0,512-t])[1];s>e&&(s=e)}}return{width:e,height:i,longitude:r,latitude:s,zoom:l,pitch:n,bearing:c}}const N=["longitude","latitude","zoom"],z={curve:1.414,speed:1.2};function j(t,e,i,n){const{startZoom:r,startCenterXY:o,uDelta:s,w0:a,u1:l,S:u,rho:h,rho2:d,r0:A}=Z(t,e,n);if(l<.01){const n={};for(const r of N){const o=t[r],s=e[r];n[r]=(f=i)*s+(1-f)*o}return n}var f;const p=i*u,g=Math.cosh(A)/Math.cosh(A+h*p),m=a*((Math.cosh(A)*Math.tanh(A+h*p)-Math.sinh(A))/d)/l,v=r+b(1/g),y=c.bA([],s,m);c.IH(y,y,o);const _=w(y);return{longitude:_[0],latitude:_[1],zoom:v}}function U(t,e,i){const n={...z,...i},{screenSpeed:r,speed:o,maxDuration:s}=n,{S:a,rho:l}=Z(t,e,n),c=1e3*a;let u;return u=Number.isFinite(r)?c/(r/l):c/o,Number.isFinite(s)&&u>s?0:u}function Z(t,e,i){const n=(i=Object.assign({},z,i)).curve,r=t.zoom,o=[t.longitude,t.latitude],s=y(r),a=e.zoom,l=[e.longitude,e.latitude],u=y(a-r),h=_(o),d=_(l),A=c.lu([],d,h),f=Math.max(t.width,t.height),p=f/u,g=c.kE(A)*s,m=Math.max(g,.01),v=n*n,b=(p*p-f*f+v*v*m*m)/(2*f*v*m),w=(p*p-f*f-v*v*m*m)/(2*p*v*m),x=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(w*w+1)-w);return{startZoom:r,startCenterXY:h,uDelta:A,w0:f,u1:g,S:(C-x)/n,rho:n,rho2:v,r0:x,r1:C}}},3485:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(3370),r=i(2363);const o=globalThis;function s(t){if(!t&&!(0,n.Z)())return"Node";if((0,r.Z)(t))return"Electron";const e="undefined"!=typeof navigator?navigator:{},i=t||e.userAgent||"";if(i.indexOf("Edge")>-1)return"Edge";const s=-1!==i.indexOf("MSIE "),a=-1!==i.indexOf("Trident/");return s||a?"IE":o.chrome?"Chrome":o.safari?"Safari":o.mozInnerScreenX?"Firefox":"Unknown"}},3370:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(2363);function r(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||(0,n.Z)()}},2363:(t,e,i)=>{"use strict";function n(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||e;return!!(i&&i.indexOf("Electron")>=0)}i.d(e,{Z:()=>n})},9109:(t,e,i)=>{"use strict";i.d(e,{Z:()=>_});var n=i(4942),r=i(3370);const o="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";(0,r.Z)();class s{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,n.Z)(this,"storage",void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"config",{}),this.storage=function(t){try{const e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch(t){return null}}(i),this.id=t,this.config={},Object.assign(this.config,e),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function a(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(i=Math.min(i,n/t.width));const o=t.width*i,s=t.height*i,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let l;function c(t){return"string"==typeof t?l[t.toUpperCase()]||l.WHITE:t}function u(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(l||(l={}));const h={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==i.g&&i.g,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},d=(globalThis,h.window||h.self||h.global),A=h.process||{};function f(){let t;var e,i;if(r.Z&&"performance"in d)t=null==d||null===(e=d.performance)||void 0===e||null===(i=e.now)||void 0===i?void 0:i.call(e);else if("hrtime"in A){var n;const e=null==A||null===(n=A.hrtime)||void 0===n?void 0:n.call(A);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}console;var p=i(2249);const g={debug:r.Z&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},m={enabled:!0,level:0};function v(){}const y={},b={once:!0};class _{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"VERSION",o),(0,n.Z)(this,"_startTs",f()),(0,n.Z)(this,"_deltaTs",f()),(0,n.Z)(this,"_storage",void 0),(0,n.Z)(this,"userData",{}),(0,n.Z)(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new s("__probe-".concat(this.id,"__"),m),this.userData={},this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const i=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(i);for(const i of n)"function"==typeof t[i]&&(e.find((t=>i===t))||(t[i]=t[i].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((f()-this._startTs).toPrecision(10))}getDelta(){return Number((f()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.updateConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){u(t,e)}warn(t){return this._getLogFunction(0,t,g.warn,arguments,b)}error(t){return this._getLogFunction(0,t,g.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,g.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,g.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return this._getLogFunction(t,e,g.debug||g.info,arguments,b)}table(t,e,i){return e?this._getLogFunction(t,e,console.table||v,i&&[i],{tag:C(e)}):v}image(t){let{logLevel:e,priority:i,image:n,message:o="",scale:s=1}=t;return this._shouldLog(e||i)?r.Z?function(t){let{image:e,message:i="",scale:n=1}=t;if("string"==typeof e){const t=new Image;return t.onload=()=>{const e=a(t,i,n);console.log(...e)},t.src=e,v}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...a(e,i,n)),v;if("canvas"===r.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...a(t,i,n)),t.src=e.toDataURL(),v}return v}({image:n,message:o,scale:s}):function(t){let{image:e,message:i="",scale:n=1}=t;return p.nodeAsciifyImage({image:e,message:i,scale:n}),v}({image:n,message:o,scale:s}):v}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||v)}group(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const n=x({logLevel:t,message:e,opts:i}),{collapsed:r}=i;return n.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}groupCollapsed(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},i,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||v)}withGroup(t,e,i){this.group(t,e)();try{i()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=w(t)}_getLogFunction(t,e,i,n,o){if(this._shouldLog(t)){o=x({logLevel:t,message:e,args:n,opts:o}),u(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=f();const s=o.tag||o.message;if(o.once){if(y[s])return v;y[s]=f()}return e=function(t,e,i){if("string"==typeof e){const a=i.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const i=Math.max(e-t.length,0);return"".concat(" ".repeat(i)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(i.total)):"";n=e=i.time?"".concat(t,": ").concat(a,"  ").concat(e):"".concat(t,": ").concat(e),o=i.color,s=i.background,r.Z||"string"!=typeof n||(o&&(o=c(o),n="[".concat(o,"m").concat(n,"[39m")),s&&(o=c(s),n="[".concat(s+10,"m").concat(n,"[49m"))),e=n}var n,o,s;return e}(this.id,o.message,o),i.bind(console,e,...o.args)}return v}}function w(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return u(Number.isFinite(e)&&e>=0),e}function x(t){const{logLevel:e,message:i}=t;t.logLevel=w(e);const n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==i;);switch(typeof e){case"string":case"function":void 0!==i&&n.unshift(i),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return u("string"===r||"object"===r),Object.assign(t,{args:n},t.opts)}function C(t){for(const e in t)for(const i in t[e])return i||"untitled";return"empty"}(0,n.Z)(_,"VERSION",o)},8295:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(4942);function r(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class o{constructor(t,e){(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"sampleSize",1),(0,n.Z)(this,"time",void 0),(0,n.Z)(this,"count",void 0),(0,n.Z)(this,"samples",void 0),(0,n.Z)(this,"lastTiming",void 0),(0,n.Z)(this,"lastSampleTime",void 0),(0,n.Z)(this,"lastSampleCount",void 0),(0,n.Z)(this,"_count",0),(0,n.Z)(this,"_time",0),(0,n.Z)(this,"_samples",0),(0,n.Z)(this,"_startTime",0),(0,n.Z)(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=r(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(r()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class s{constructor(t){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:i}=t;return this.stats[e]||(this.stats[e]=t instanceof o?t:new o(e,i)),this.stats[e]}}},2751:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(7537),r=i.n(n),o=i(3645),s=i.n(o)()(r());s.push([t.id,'.contextMenu {\r\n  --menu-border: rgba(255, 255, 255, 0.08);\r\n  --menu-bg: linear-gradient(\r\n    45deg,\r\n    rgba(10, 20, 28, 0.6) 0%,\r\n    rgba(10, 20, 28, 0.9) 100%\r\n  );\r\n  --item-border: rgba(255, 255, 255, 0.1);\r\n  --item-color: #fff;\r\n  --item-bg-hover: rgba(255, 255, 255, 0.1);\r\n  height: 0;\r\n  overflow: hidden;\r\n  background: var(--menu-bg);\r\n  -webkit-backdrop-filter: blur(5px);\r\n          backdrop-filter: blur(5px);\r\n  position: fixed;\r\n  top: var(--top);\r\n  left: var(--left);\r\n  -webkit-animation: menuAnimation 0.2s 0s both;\r\n          animation: menuAnimation 0.2s 0s both;\r\n  transform-origin: left;\r\n  list-style: none;\r\n  margin: 4px;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 999999999;\r\n  box-shadow: 0 0 0 1px var(--menu-border), 0 2px 2px rgba(0, 0, 0, 0.03), 0 4px 4px rgba(0, 0, 0, 0.04), 0 10px 8px rgba(0, 0, 0, 0.05), 0 15px 15px rgba(0, 0, 0, 0.06), 0 30px 30px rgba(0, 0, 0, 0.07), 0 70px 65px rgba(0, 0, 0, 0.09);\r\n}\r\n.contextMenu-item {\r\n  padding: 4px;\r\n}\r\n.contextMenu-item[data-divider=top] {\r\n  border-top: 1px solid;\r\n}\r\n.contextMenu-item[data-divider=bottom] {\r\n  border-bottom: 1px solid;\r\n}\r\n.contextMenu-item[data-divider=top-bottom] {\r\n  border-top: 1px solid;\r\n  border-bottom: 1px solid;\r\n}\r\n.contextMenu-item[data-divider] {\r\n  border-color: var(--item-border);\r\n}\r\n.contextMenu-button {\r\n  color: var(--item-color);\r\n  background: 0;\r\n  border: 0;\r\n  white-space: nowrap;\r\n  width: 100%;\r\n  border-radius: 4px;\r\n  padding: 6px 24px 6px 7px;\r\n  text-align: left;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  width: 100%;\r\n  -webkit-animation: menuItemAnimation 0.2s 0s both;\r\n          animation: menuItemAnimation 0.2s 0s both;\r\n  font-family: "Inter", sans-serif;\r\n  cursor: pointer;\r\n}\r\n.contextMenu-button:hover {\r\n  background-color: var(--item-bg-hover);\r\n}\r\n.contextMenu[data-theme=light] {\r\n  --menu-bg: linear-gradient(\r\n    45deg,\r\n    rgba(255, 255, 255, 0.45) 0%,\r\n    rgba(255, 255, 255, 0.85) 100%\r\n  );\r\n  --menu-border: rgba(0, 0, 0, 0.08);\r\n  --item-border: rgba(0, 0, 0, 0.1);\r\n  --item-color: rgb(10, 20, 28);\r\n  --item-bg-hover: rgba(10, 20, 28, 0.09);\r\n}\r\n\r\n@-webkit-keyframes menuAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.5);\r\n  }\r\n  100% {\r\n    height: var(--height);\r\n    opacity: 1;\r\n    border-radius: 8px;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n@keyframes menuAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.5);\r\n  }\r\n  100% {\r\n    height: var(--height);\r\n    opacity: 1;\r\n    border-radius: 8px;\r\n    transform: scale(1);\r\n  }\r\n}\r\n@-webkit-keyframes menuItemAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateX(-10px);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n  }\r\n}\r\n@keyframes menuItemAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateX(-10px);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n  }\r\n}\r\n',"",{version:3,sources:["webpack://./css/ContextMenu.css"],names:[],mappings:"AAAA;EACE,wCAAwC;EACxC;;;;GAIC;EACD,uCAAuC;EACvC,kBAAkB;EAClB,yCAAyC;EACzC,SAAS;EACT,gBAAgB;EAChB,0BAA0B;EAC1B,kCAAkC;UAC1B,0BAA0B;EAClC,eAAe;EACf,eAAe;EACf,iBAAiB;EACjB,6CAA6C;UACrC,qCAAqC;EAC7C,sBAAsB;EACtB,gBAAgB;EAChB,WAAW;EACX,UAAU;EACV,aAAa;EACb,sBAAsB;EACtB,kBAAkB;EAClB,yOAAyO;AAC3O;AACA;EACE,YAAY;AACd;AACA;EACE,qBAAqB;AACvB;AACA;EACE,wBAAwB;AAC1B;AACA;EACE,qBAAqB;EACrB,wBAAwB;AAC1B;AACA;EACE,gCAAgC;AAClC;AACA;EACE,wBAAwB;EACxB,aAAa;EACb,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,kBAAkB;EAClB,yBAAyB;EACzB,gBAAgB;EAChB,aAAa;EACb,mBAAmB;EACnB,eAAe;EACf,WAAW;EACX,iDAAiD;UACzC,yCAAyC;EACjD,gCAAgC;EAChC,eAAe;AACjB;AACA;EACE,sCAAsC;AACxC;AACA;EACE;;;;GAIC;EACD,kCAAkC;EAClC,iCAAiC;EACjC,6BAA6B;EAC7B,uCAAuC;AACzC;;AAEA;EACE;IACE,UAAU;IACV,qBAAqB;EACvB;EACA;IACE,qBAAqB;IACrB,UAAU;IACV,kBAAkB;IAClB,mBAAmB;EACrB;AACF;;AAEA;EACE;IACE,UAAU;IACV,qBAAqB;EACvB;EACA;IACE,qBAAqB;IACrB,UAAU;IACV,kBAAkB;IAClB,mBAAmB;EACrB;AACF;AACA;EACE;IACE,UAAU;IACV,4BAA4B;EAC9B;EACA;IACE,UAAU;IACV,wBAAwB;EAC1B;AACF;AACA;EACE;IACE,UAAU;IACV,4BAA4B;EAC9B;EACA;IACE,UAAU;IACV,wBAAwB;EAC1B;AACF",sourcesContent:['.contextMenu {\r\n  --menu-border: rgba(255, 255, 255, 0.08);\r\n  --menu-bg: linear-gradient(\r\n    45deg,\r\n    rgba(10, 20, 28, 0.6) 0%,\r\n    rgba(10, 20, 28, 0.9) 100%\r\n  );\r\n  --item-border: rgba(255, 255, 255, 0.1);\r\n  --item-color: #fff;\r\n  --item-bg-hover: rgba(255, 255, 255, 0.1);\r\n  height: 0;\r\n  overflow: hidden;\r\n  background: var(--menu-bg);\r\n  -webkit-backdrop-filter: blur(5px);\r\n          backdrop-filter: blur(5px);\r\n  position: fixed;\r\n  top: var(--top);\r\n  left: var(--left);\r\n  -webkit-animation: menuAnimation 0.2s 0s both;\r\n          animation: menuAnimation 0.2s 0s both;\r\n  transform-origin: left;\r\n  list-style: none;\r\n  margin: 4px;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 999999999;\r\n  box-shadow: 0 0 0 1px var(--menu-border), 0 2px 2px rgba(0, 0, 0, 0.03), 0 4px 4px rgba(0, 0, 0, 0.04), 0 10px 8px rgba(0, 0, 0, 0.05), 0 15px 15px rgba(0, 0, 0, 0.06), 0 30px 30px rgba(0, 0, 0, 0.07), 0 70px 65px rgba(0, 0, 0, 0.09);\r\n}\r\n.contextMenu-item {\r\n  padding: 4px;\r\n}\r\n.contextMenu-item[data-divider=top] {\r\n  border-top: 1px solid;\r\n}\r\n.contextMenu-item[data-divider=bottom] {\r\n  border-bottom: 1px solid;\r\n}\r\n.contextMenu-item[data-divider=top-bottom] {\r\n  border-top: 1px solid;\r\n  border-bottom: 1px solid;\r\n}\r\n.contextMenu-item[data-divider] {\r\n  border-color: var(--item-border);\r\n}\r\n.contextMenu-button {\r\n  color: var(--item-color);\r\n  background: 0;\r\n  border: 0;\r\n  white-space: nowrap;\r\n  width: 100%;\r\n  border-radius: 4px;\r\n  padding: 6px 24px 6px 7px;\r\n  text-align: left;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  width: 100%;\r\n  -webkit-animation: menuItemAnimation 0.2s 0s both;\r\n          animation: menuItemAnimation 0.2s 0s both;\r\n  font-family: "Inter", sans-serif;\r\n  cursor: pointer;\r\n}\r\n.contextMenu-button:hover {\r\n  background-color: var(--item-bg-hover);\r\n}\r\n.contextMenu[data-theme=light] {\r\n  --menu-bg: linear-gradient(\r\n    45deg,\r\n    rgba(255, 255, 255, 0.45) 0%,\r\n    rgba(255, 255, 255, 0.85) 100%\r\n  );\r\n  --menu-border: rgba(0, 0, 0, 0.08);\r\n  --item-border: rgba(0, 0, 0, 0.1);\r\n  --item-color: rgb(10, 20, 28);\r\n  --item-bg-hover: rgba(10, 20, 28, 0.09);\r\n}\r\n\r\n@-webkit-keyframes menuAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.5);\r\n  }\r\n  100% {\r\n    height: var(--height);\r\n    opacity: 1;\r\n    border-radius: 8px;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n@keyframes menuAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.5);\r\n  }\r\n  100% {\r\n    height: var(--height);\r\n    opacity: 1;\r\n    border-radius: 8px;\r\n    transform: scale(1);\r\n  }\r\n}\r\n@-webkit-keyframes menuItemAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateX(-10px);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n  }\r\n}\r\n@keyframes menuItemAnimation {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateX(-10px);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n  }\r\n}\r\n'],sourceRoot:""}]);const a=s},2117:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(7537),r=i.n(n),o=i(3645),s=i.n(o)()(r());s.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200);"]),s.push([t.id,'.blitzboard-loader,\n.blitzboard-loader:after {\n    border-radius: 50%;\n    width: 10em;\n    height: 10em;\n}\n.blitzboard-loader {\n    margin: 60px auto;\n    font-size: 10px;\n    position: relative;\n    text-indent: -9999em;\n    border-top: 1.1em solid rgba(255, 255, 255, 0.2);\n    border-right: 1.1em solid rgba(255, 255, 255, 0.2);\n    border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);\n    border-left: 1.1em solid #ffffff;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n    -webkit-animation: load8 1.1s infinite linear;\n    animation: load8 1.1s infinite linear;\n}\n\n@-webkit-keyframes load8 {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n@keyframes load8 {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n#blitzboard-search-bar-div{\n    right: 12px;\n}\n\n\n\n#blitzboard-search-button {\n    background:rgba(255, 255, 255, 0) url("https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/search/default/48px.svg") no-repeat 12px center;\n    background-size: 20px 20px;\n    width: 40px;\n    height: 40px;\n    left: 0px;\n    outline: none;\n    cursor: pointer;\n    position: absolute;\n    transition: all 0.5s;\n}\n\n#blitzboard-search-input {\n    background-color: rgba(255, 255, 255, 0);\n    -webkit-appearance:none;\n    margin-left: 40px;\n    width: 240px;\n    height: 40px;\n    padding: 0px;\n    border: none;\n    outline: none;\n    box-shadow: 0 1px #151515;\n    position: absolute;\n}\n\n#blitzboard-search-input::-webkit-search-cancel-button {\n    position: absolute;\n    right: 10px;\n}\n\n#blitzboard-config-choice-dropdown{\n    border: none;\n    padding: 5px 10px;\n    border-radius: 5px;\n}\n\n\n#blitzboard-search-bar-div{\n    right: 12px;\n}\n\n\n#blitzboard-toggle-sidebar-button {\n    z-index: 990;\n    background-color: transparent;\n    position: absolute;\n    color: #272822;\n    border: 0px;\n    top: 1rem;\n    right: 1rem;\n}\n\n\n#blitzboard-zoom-fit-btn {\n    z-index: 99;\n    background-color: transparent;\n    position: absolute;\n    color: #272822;\n    border: 0px;\n    top: 2em;\n    right: 1rem;\n}\n',"",{version:3,sources:["webpack://./css/blitzboard.css"],names:[],mappings:"AAEA;;IAEI,kBAAkB;IAClB,WAAW;IACX,YAAY;AAChB;AACA;IACI,iBAAiB;IACjB,eAAe;IACf,kBAAkB;IAClB,oBAAoB;IACpB,gDAAgD;IAChD,kDAAkD;IAClD,mDAAmD;IACnD,gCAAgC;IAChC,gCAAgC;IAChC,4BAA4B;IAC5B,wBAAwB;IACxB,6CAA6C;IAC7C,qCAAqC;AACzC;;AAEA;IACI;QACI,+BAA+B;QAC/B,uBAAuB;IAC3B;IACA;QACI,iCAAiC;QACjC,yBAAyB;IAC7B;AACJ;AACA;IACI;QACI,+BAA+B;QAC/B,uBAAuB;IAC3B;IACA;QACI,iCAAiC;QACjC,yBAAyB;IAC7B;AACJ;;AAEA;IACI,WAAW;AACf;;;;AAIA;IACI,+JAA+J;IAC/J,0BAA0B;IAC1B,WAAW;IACX,YAAY;IACZ,SAAS;IACT,aAAa;IACb,eAAe;IACf,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,wCAAwC;IACxC,uBAAuB;IACvB,iBAAiB;IACjB,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,aAAa;IACb,yBAAyB;IACzB,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;AACtB;;;AAGA;IACI,WAAW;AACf;;;AAGA;IACI,YAAY;IACZ,6BAA6B;IAC7B,kBAAkB;IAClB,cAAc;IACd,WAAW;IACX,SAAS;IACT,WAAW;AACf;;;AAGA;IACI,WAAW;IACX,6BAA6B;IAC7B,kBAAkB;IAClB,cAAc;IACd,WAAW;IACX,QAAQ;IACR,WAAW;AACf",sourcesContent:['@import url(https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200);\n\n.blitzboard-loader,\n.blitzboard-loader:after {\n    border-radius: 50%;\n    width: 10em;\n    height: 10em;\n}\n.blitzboard-loader {\n    margin: 60px auto;\n    font-size: 10px;\n    position: relative;\n    text-indent: -9999em;\n    border-top: 1.1em solid rgba(255, 255, 255, 0.2);\n    border-right: 1.1em solid rgba(255, 255, 255, 0.2);\n    border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);\n    border-left: 1.1em solid #ffffff;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n    -webkit-animation: load8 1.1s infinite linear;\n    animation: load8 1.1s infinite linear;\n}\n\n@-webkit-keyframes load8 {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n@keyframes load8 {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n#blitzboard-search-bar-div{\n    right: 12px;\n}\n\n\n\n#blitzboard-search-button {\n    background:rgba(255, 255, 255, 0) url("https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/search/default/48px.svg") no-repeat 12px center;\n    background-size: 20px 20px;\n    width: 40px;\n    height: 40px;\n    left: 0px;\n    outline: none;\n    cursor: pointer;\n    position: absolute;\n    transition: all 0.5s;\n}\n\n#blitzboard-search-input {\n    background-color: rgba(255, 255, 255, 0);\n    -webkit-appearance:none;\n    margin-left: 40px;\n    width: 240px;\n    height: 40px;\n    padding: 0px;\n    border: none;\n    outline: none;\n    box-shadow: 0 1px #151515;\n    position: absolute;\n}\n\n#blitzboard-search-input::-webkit-search-cancel-button {\n    position: absolute;\n    right: 10px;\n}\n\n#blitzboard-config-choice-dropdown{\n    border: none;\n    padding: 5px 10px;\n    border-radius: 5px;\n}\n\n\n#blitzboard-search-bar-div{\n    right: 12px;\n}\n\n\n#blitzboard-toggle-sidebar-button {\n    z-index: 990;\n    background-color: transparent;\n    position: absolute;\n    color: #272822;\n    border: 0px;\n    top: 1rem;\n    right: 1rem;\n}\n\n\n#blitzboard-zoom-fit-btn {\n    z-index: 99;\n    background-color: transparent;\n    position: absolute;\n    color: #272822;\n    border: 0px;\n    top: 2em;\n    right: 1rem;\n}\n'],sourceRoot:""}]);const a=s},9684:(t,e,i)=>{"use strict";i.d(e,{Z:()=>k});var n=i(7537),r=i.n(n),o=i(3645),s=i.n(o),a=i(1667),l=i.n(a),c=new URL(i(8811),i.b),u=new URL(i(7373),i.b),h=new URL(i(238),i.b),d=new URL(i(6223),i.b),A=new URL(i(2303),i.b),f=new URL(i(3254),i.b),p=new URL(i(5020),i.b),g=new URL(i(6247),i.b),m=s()(r()),v=l()(c),y=l()(u),b=l()(h),_=l()(d),w=l()(A),x=l()(f),C=l()(p),E=l()(g);m.push([t.id,'/*! jQuery UI - v1.12.1 - 2017-03-19\n* http://jqueryui.com\n* Includes: draggable.css, core.css, resizable.css, selectable.css, sortable.css, accordion.css, autocomplete.css, menu.css, button.css, controlgroup.css, checkboxradio.css, datepicker.css, dialog.css, progressbar.css, selectmenu.css, slider.css, spinner.css, tabs.css, tooltip.css, theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&folderName=base&cornerRadiusShadow=8px&offsetLeftShadow=0px&offsetTopShadow=0px&thicknessShadow=5px&opacityShadow=30&bgImgOpacityShadow=0&bgTextureShadow=flat&bgColorShadow=666666&opacityOverlay=30&bgImgOpacityOverlay=0&bgTextureOverlay=flat&bgColorOverlay=aaaaaa&iconColorError=cc0000&fcError=5f3f3f&borderColorError=f1a899&bgTextureError=flat&bgColorError=fddfdf&iconColorHighlight=777620&fcHighlight=777620&borderColorHighlight=dad55e&bgTextureHighlight=flat&bgColorHighlight=fffa90&iconColorActive=ffffff&fcActive=ffffff&borderColorActive=003eff&bgTextureActive=flat&bgColorActive=007fff&iconColorHover=555555&fcHover=2b2b2b&borderColorHover=cccccc&bgTextureHover=flat&bgColorHover=ededed&iconColorDefault=777777&fcDefault=454545&borderColorDefault=c5c5c5&bgTextureDefault=flat&bgColorDefault=f6f6f6&iconColorContent=444444&fcContent=333333&borderColorContent=dddddd&bgTextureContent=flat&bgColorContent=ffffff&iconColorHeader=444444&fcHeader=333333&borderColorHeader=dddddd&bgTextureHeader=flat&bgColorHeader=e9e9e9&cornerRadius=3px&fwDefault=normal&fsDefault=1em&ffDefault=Arial%2CHelvetica%2Csans-serif\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n.ui-draggable-handle {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.ui-resizable {\n\tposition: relative;\n}\n.ui-resizable-handle {\n\tposition: absolute;\n\tfont-size: 0.1px;\n\tdisplay: block;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n\tdisplay: none;\n}\n.ui-resizable-n {\n\tcursor: n-resize;\n\theight: 7px;\n\twidth: 100%;\n\ttop: -5px;\n\tleft: 0;\n}\n.ui-resizable-s {\n\tcursor: s-resize;\n\theight: 7px;\n\twidth: 100%;\n\tbottom: -5px;\n\tleft: 0;\n}\n.ui-resizable-e {\n\tcursor: e-resize;\n\twidth: 7px;\n\tright: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-w {\n\tcursor: w-resize;\n\twidth: 7px;\n\tleft: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-se {\n\tcursor: se-resize;\n\twidth: 12px;\n\theight: 12px;\n\tright: 1px;\n\tbottom: 1px;\n}\n.ui-resizable-sw {\n\tcursor: sw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\tbottom: -5px;\n}\n.ui-resizable-nw {\n\tcursor: nw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\ttop: -5px;\n}\n.ui-resizable-ne {\n\tcursor: ne-resize;\n\twidth: 9px;\n\theight: 9px;\n\tright: -5px;\n\ttop: -5px;\n}\n.ui-selectable {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n.ui-sortable-handle {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-accordion .ui-accordion-header {\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\tmargin: 2px 0 0 0;\n\tpadding: .5em .5em .5em .7em;\n\tfont-size: 100%;\n}\n.ui-accordion .ui-accordion-content {\n\tpadding: 1em 2.2em;\n\tborder-top: 0;\n\toverflow: auto;\n}\n.ui-autocomplete {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcursor: default;\n}\n.ui-menu {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: block;\n\toutline: 0;\n}\n.ui-menu .ui-menu {\n\tposition: absolute;\n}\n.ui-menu .ui-menu-item {\n\tmargin: 0;\n\tcursor: pointer;\n\t/* support: IE10, see #8844 */\n\tlist-style-image: url('+v+");\n}\n.ui-menu .ui-menu-item-wrapper {\n\tposition: relative;\n\tpadding: 3px 1em 3px .4em;\n}\n.ui-menu .ui-menu-divider {\n\tmargin: 5px 0;\n\theight: 0;\n\tfont-size: 0;\n\tline-height: 0;\n\tborder-width: 1px 0 0 0;\n}\n.ui-menu .ui-state-focus,\n.ui-menu .ui-state-active {\n\tmargin: -1px;\n}\n\n/* icon support */\n.ui-menu-icons {\n\tposition: relative;\n}\n.ui-menu-icons .ui-menu-item-wrapper {\n\tpadding-left: 2em;\n}\n\n/* left-aligned */\n.ui-menu .ui-icon {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: .2em;\n\tmargin: auto 0;\n}\n\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n\tleft: auto;\n\tright: 0;\n}\n.ui-button {\n\tpadding: .4em 1em;\n\tdisplay: inline-block;\n\tposition: relative;\n\tline-height: normal;\n\tmargin-right: .1em;\n\tcursor: pointer;\n\tvertical-align: middle;\n\ttext-align: center;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\n\t/* Support: IE <= 11 */\n\toverflow: visible;\n}\n\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n\ttext-decoration: none;\n}\n\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n\twidth: 2em;\n\tbox-sizing: border-box;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n}\n\n/* no icon support for input elements */\ninput.ui-button.ui-button-icon-only {\n\ttext-indent: 0;\n}\n\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n}\n\n.ui-button.ui-icon-notext .ui-icon {\n\tpadding: 0;\n\twidth: 2.1em;\n\theight: 2.1em;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n\n}\n\ninput.ui-button.ui-icon-notext .ui-icon {\n\twidth: auto;\n\theight: auto;\n\ttext-indent: 0;\n\twhite-space: normal;\n\tpadding: .4em 1em;\n}\n\n/* workarounds */\n/* Support: Firefox 5 - 40 */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n.ui-controlgroup {\n\tvertical-align: middle;\n\tdisplay: inline-block;\n}\n.ui-controlgroup > .ui-controlgroup-item {\n\tfloat: left;\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n.ui-controlgroup > .ui-controlgroup-item:focus,\n.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus {\n\tz-index: 9999;\n}\n.ui-controlgroup-vertical > .ui-controlgroup-item {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttext-align: left;\n}\n.ui-controlgroup-vertical .ui-controlgroup-item {\n\tbox-sizing: border-box;\n}\n.ui-controlgroup .ui-controlgroup-label {\n\tpadding: .4em 1em;\n}\n.ui-controlgroup .ui-controlgroup-label span {\n\tfont-size: 80%;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-left: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-top: none;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content {\n\tborder-right: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content {\n\tborder-bottom: none;\n}\n\n/* Spinner specific style fixes */\n.ui-controlgroup-vertical .ui-spinner-input {\n\n\t/* Support: IE8 only, Android < 4.4 only */\n\twidth: 75%;\n\twidth: calc( 100% - 2.4em );\n}\n.ui-controlgroup-vertical .ui-spinner .ui-spinner-up {\n\tborder-top-style: solid;\n}\n\n.ui-checkboxradio-label .ui-icon-background {\n\tbox-shadow: inset 1px 1px 1px #ccc;\n\tborder-radius: .12em;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label .ui-icon-background {\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 1em;\n\toverflow: visible;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon {\n\tbackground-image: none;\n\twidth: 8px;\n\theight: 8px;\n\tborder-width: 4px;\n\tborder-style: solid;\n}\n.ui-checkboxradio-disabled {\n\tpointer-events: none;\n}\n.ui-datepicker {\n\twidth: 17em;\n\tpadding: .2em .2em 0;\n\tdisplay: none;\n}\n.ui-datepicker .ui-datepicker-header {\n\tposition: relative;\n\tpadding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n\tposition: absolute;\n\ttop: 2px;\n\twidth: 1.8em;\n\theight: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n\ttop: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n\tleft: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n\tright: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n\tleft: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n\tright: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 50%;\n\tmargin-left: -8px;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n\tmargin: 0 2.3em;\n\tline-height: 1.8em;\n\ttext-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n\tfont-size: 1em;\n\tmargin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n\twidth: 45%;\n}\n.ui-datepicker table {\n\twidth: 100%;\n\tfont-size: .9em;\n\tborder-collapse: collapse;\n\tmargin: 0 0 .4em;\n}\n.ui-datepicker th {\n\tpadding: .7em .3em;\n\ttext-align: center;\n\tfont-weight: bold;\n\tborder: 0;\n}\n.ui-datepicker td {\n\tborder: 0;\n\tpadding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n\tdisplay: block;\n\tpadding: .2em;\n\ttext-align: right;\n\ttext-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n\tbackground-image: none;\n\tmargin: .7em 0 0 0;\n\tpadding: 0 .2em;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n\tfloat: right;\n\tmargin: .5em .2em .4em;\n\tcursor: pointer;\n\tpadding: .2em .6em .3em .6em;\n\twidth: auto;\n\toverflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n\tfloat: left;\n}\n\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n\twidth: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n\tfloat: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n\twidth: 95%;\n\tmargin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n\twidth: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n\twidth: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n\twidth: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n\tclear: left;\n}\n.ui-datepicker-row-break {\n\tclear: both;\n\twidth: 100%;\n\tfont-size: 0;\n}\n\n/* RTL support */\n.ui-datepicker-rtl {\n\tdirection: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n\tright: 2px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n\tleft: 2px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n\tright: 1px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n\tleft: 1px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n\tclear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n\tfloat: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n\tfloat: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-right-width: 0;\n\tborder-left-width: 1px;\n}\n\n/* Icons */\n.ui-datepicker .ui-icon {\n\tdisplay: block;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n\tleft: .5em;\n\ttop: .3em;\n}\n.ui-dialog {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tpadding: .2em;\n\toutline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n\tpadding: .4em 1em;\n\tposition: relative;\n}\n.ui-dialog .ui-dialog-title {\n\tfloat: left;\n\tmargin: .1em 0;\n\twhite-space: nowrap;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n\tposition: absolute;\n\tright: .3em;\n\ttop: 50%;\n\twidth: 20px;\n\tmargin: -10px 0 0 0;\n\tpadding: 1px;\n\theight: 20px;\n}\n.ui-dialog .ui-dialog-content {\n\tposition: relative;\n\tborder: 0;\n\tpadding: .5em 1em;\n\tbackground: none;\n\toverflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n\ttext-align: left;\n\tborder-width: 1px 0 0 0;\n\tbackground-image: none;\n\tmargin-top: .5em;\n\tpadding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n\tfloat: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n\tmargin: .5em .4em .5em 0;\n\tcursor: pointer;\n}\n.ui-dialog .ui-resizable-n {\n\theight: 2px;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-e {\n\twidth: 2px;\n\tright: 0;\n}\n.ui-dialog .ui-resizable-s {\n\theight: 2px;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-w {\n\twidth: 2px;\n\tleft: 0;\n}\n.ui-dialog .ui-resizable-se,\n.ui-dialog .ui-resizable-sw,\n.ui-dialog .ui-resizable-ne,\n.ui-dialog .ui-resizable-nw {\n\twidth: 7px;\n\theight: 7px;\n}\n.ui-dialog .ui-resizable-se {\n\tright: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-sw {\n\tleft: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-ne {\n\tright: 0;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-nw {\n\tleft: 0;\n\ttop: 0;\n}\n.ui-draggable .ui-dialog-titlebar {\n\tcursor: move;\n}\n.ui-progressbar {\n\theight: 2em;\n\ttext-align: left;\n\toverflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n\tmargin: -1px;\n\theight: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n\tbackground: url("+y+');\n\theight: 100%;\n\tfilter: alpha(opacity=25); /* support: IE8 */\n\topacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n\tbackground-image: none;\n}\n.ui-selectmenu-menu {\n\tpadding: 0;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n}\n.ui-selectmenu-menu .ui-menu {\n\toverflow: auto;\n\toverflow-x: hidden;\n\tpadding-bottom: 1px;\n}\n.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {\n\tfont-size: 1em;\n\tfont-weight: bold;\n\tline-height: 1.5;\n\tpadding: 2px 0.4em;\n\tmargin: 0.5em 0 0 0;\n\theight: auto;\n\tborder: 0;\n}\n.ui-selectmenu-open {\n\tdisplay: block;\n}\n.ui-selectmenu-text {\n\tdisplay: block;\n\tmargin-right: 20px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-selectmenu-button.ui-button {\n\ttext-align: left;\n\twhite-space: nowrap;\n\twidth: 14em;\n}\n.ui-selectmenu-icon.ui-icon {\n\tfloat: right;\n\tmargin-top: 0;\n}\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n.ui-spinner {\n\tposition: relative;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tpadding: 0;\n\tvertical-align: middle;\n}\n.ui-spinner-input {\n\tborder: none;\n\tbackground: none;\n\tcolor: inherit;\n\tpadding: .222em 0;\n\tmargin: .2em 0;\n\tvertical-align: middle;\n\tmargin-left: .4em;\n\tmargin-right: 2em;\n}\n.ui-spinner-button {\n\twidth: 1.6em;\n\theight: 50%;\n\tfont-size: .5em;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-align: center;\n\tposition: absolute;\n\tcursor: default;\n\tdisplay: block;\n\toverflow: hidden;\n\tright: 0;\n}\n/* more specificity required here to override default borders */\n.ui-spinner a.ui-spinner-button {\n\tborder-top-style: none;\n\tborder-bottom-style: none;\n\tborder-right-style: none;\n}\n.ui-spinner-up {\n\ttop: 0;\n}\n.ui-spinner-down {\n\tbottom: 0;\n}\n.ui-tabs {\n\tposition: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */\n\tpadding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n\tmargin: 0;\n\tpadding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n\tlist-style: none;\n\tfloat: left;\n\tposition: relative;\n\ttop: 0;\n\tmargin: 1px .2em 0 0;\n\tborder-bottom-width: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n\tfloat: left;\n\tpadding: .5em 1em;\n\ttext-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n\tmargin-bottom: -1px;\n\tpadding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n\tcursor: text;\n}\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n\tcursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n\tdisplay: block;\n\tborder-width: 0;\n\tpadding: 1em 1.4em;\n\tbackground: none;\n}\n.ui-tooltip {\n\tpadding: 8px;\n\tposition: absolute;\n\tz-index: 9999;\n\tmax-width: 300px;\n}\nbody .ui-tooltip {\n\tborder-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5;\n}\n.ui-widget-content {\n\tborder: 1px solid #dddddd;\n\tbackground: #ffffff;\n\tcolor: #333333;\n}\n.ui-widget-content a {\n\tcolor: #333333;\n}\n.ui-widget-header {\n\tborder: 1px solid #dddddd;\n\tbackground: #e9e9e9;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n.ui-widget-header a {\n\tcolor: #333333;\n}\n\n/* Interaction states\n----------------------------------*/\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5;\n\tbackground: #f6f6f6;\n\tfont-weight: normal;\n\tcolor: #454545;\n}\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545;\n\ttext-decoration: none;\n}\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc;\n\tbackground: #ededed;\n\tfont-weight: normal;\n\tcolor: #2b2b2b;\n}\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b;\n\ttext-decoration: none;\n}\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff;\n\tbackground: #007fff;\n\tfont-weight: normal;\n\tcolor: #ffffff;\n}\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff;\n\tbackground-color: #ffffff;\n}\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff;\n\ttext-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n\tcolor: #777620;\n}\n.ui-state-checked {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n}\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620;\n}\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899;\n\tbackground: #fddfdf;\n\tcolor: #5f3f3f;\n}\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f;\n}\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f;\n}\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url('+b+");\n}\n.ui-widget-header .ui-icon {\n\tbackground-image: url("+b+");\n}\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url("+_+");\n}\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url("+w+");\n}\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url("+x+");\n}\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url("+C+");\n}\n.ui-button .ui-icon {\n\tbackground-image: url("+E+");\n}\n\n/* positioning */\n.ui-icon-blank { background-position: 16px 16px; }\n.ui-icon-caret-1-n { background-position: 0 0; }\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n.ui-icon-caret-1-e { background-position: -32px 0; }\n.ui-icon-caret-1-se { background-position: -48px 0; }\n.ui-icon-caret-1-s { background-position: -65px 0; }\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n.ui-icon-caret-1-w { background-position: -96px 0; }\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n.ui-icon-extlink { background-position: -32px -80px; }\n.ui-icon-newwin { background-position: -48px -80px; }\n.ui-icon-refresh { background-position: -64px -80px; }\n.ui-icon-shuffle { background-position: -80px -80px; }\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n.ui-icon-folder-open { background-position: -16px -96px; }\n.ui-icon-document { background-position: -32px -96px; }\n.ui-icon-document-b { background-position: -48px -96px; }\n.ui-icon-note { background-position: -64px -96px; }\n.ui-icon-mail-closed { background-position: -80px -96px; }\n.ui-icon-mail-open { background-position: -96px -96px; }\n.ui-icon-suitcase { background-position: -112px -96px; }\n.ui-icon-comment { background-position: -128px -96px; }\n.ui-icon-person { background-position: -144px -96px; }\n.ui-icon-print { background-position: -160px -96px; }\n.ui-icon-trash { background-position: -176px -96px; }\n.ui-icon-locked { background-position: -192px -96px; }\n.ui-icon-unlocked { background-position: -208px -96px; }\n.ui-icon-bookmark { background-position: -224px -96px; }\n.ui-icon-tag { background-position: -240px -96px; }\n.ui-icon-home { background-position: 0 -112px; }\n.ui-icon-flag { background-position: -16px -112px; }\n.ui-icon-calendar { background-position: -32px -112px; }\n.ui-icon-cart { background-position: -48px -112px; }\n.ui-icon-pencil { background-position: -64px -112px; }\n.ui-icon-clock { background-position: -80px -112px; }\n.ui-icon-disk { background-position: -96px -112px; }\n.ui-icon-calculator { background-position: -112px -112px; }\n.ui-icon-zoomin { background-position: -128px -112px; }\n.ui-icon-zoomout { background-position: -144px -112px; }\n.ui-icon-search { background-position: -160px -112px; }\n.ui-icon-wrench { background-position: -176px -112px; }\n.ui-icon-gear { background-position: -192px -112px; }\n.ui-icon-heart { background-position: -208px -112px; }\n.ui-icon-star { background-position: -224px -112px; }\n.ui-icon-link { background-position: -240px -112px; }\n.ui-icon-cancel { background-position: 0 -128px; }\n.ui-icon-plus { background-position: -16px -128px; }\n.ui-icon-plusthick { background-position: -32px -128px; }\n.ui-icon-minus { background-position: -48px -128px; }\n.ui-icon-minusthick { background-position: -64px -128px; }\n.ui-icon-close { background-position: -80px -128px; }\n.ui-icon-closethick { background-position: -96px -128px; }\n.ui-icon-key { background-position: -112px -128px; }\n.ui-icon-lightbulb { background-position: -128px -128px; }\n.ui-icon-scissors { background-position: -144px -128px; }\n.ui-icon-clipboard { background-position: -160px -128px; }\n.ui-icon-copy { background-position: -176px -128px; }\n.ui-icon-contact { background-position: -192px -128px; }\n.ui-icon-image { background-position: -208px -128px; }\n.ui-icon-video { background-position: -224px -128px; }\n.ui-icon-script { background-position: -240px -128px; }\n.ui-icon-alert { background-position: 0 -144px; }\n.ui-icon-info { background-position: -16px -144px; }\n.ui-icon-notice { background-position: -32px -144px; }\n.ui-icon-help { background-position: -48px -144px; }\n.ui-icon-check { background-position: -64px -144px; }\n.ui-icon-bullet { background-position: -80px -144px; }\n.ui-icon-radio-on { background-position: -96px -144px; }\n.ui-icon-radio-off { background-position: -112px -144px; }\n.ui-icon-pin-w { background-position: -128px -144px; }\n.ui-icon-pin-s { background-position: -144px -144px; }\n.ui-icon-play { background-position: 0 -160px; }\n.ui-icon-pause { background-position: -16px -160px; }\n.ui-icon-seek-next { background-position: -32px -160px; }\n.ui-icon-seek-prev { background-position: -48px -160px; }\n.ui-icon-seek-end { background-position: -64px -160px; }\n.ui-icon-seek-start { background-position: -80px -160px; }\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n.ui-icon-seek-first { background-position: -80px -160px; }\n.ui-icon-stop { background-position: -96px -160px; }\n.ui-icon-eject { background-position: -112px -160px; }\n.ui-icon-volume-off { background-position: -128px -160px; }\n.ui-icon-volume-on { background-position: -144px -160px; }\n.ui-icon-power { background-position: 0 -176px; }\n.ui-icon-signal-diag { background-position: -16px -176px; }\n.ui-icon-signal { background-position: -32px -176px; }\n.ui-icon-battery-0 { background-position: -48px -176px; }\n.ui-icon-battery-1 { background-position: -64px -176px; }\n.ui-icon-battery-2 { background-position: -80px -176px; }\n.ui-icon-battery-3 { background-position: -96px -176px; }\n.ui-icon-circle-plus { background-position: 0 -192px; }\n.ui-icon-circle-minus { background-position: -16px -192px; }\n.ui-icon-circle-close { background-position: -32px -192px; }\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n.ui-icon-circle-check { background-position: -208px -192px; }\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px;\n}\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px;\n}\n\n/* Overlays */\n.ui-widget-overlay {\n\tbackground: #aaaaaa;\n\topacity: .3;\n\tfilter: Alpha(Opacity=30); /* support: IE8 */\n}\n.ui-widget-shadow {\n\t-webkit-box-shadow: 0px 0px 5px #666666;\n\tbox-shadow: 0px 0px 5px #666666;\n}\n","",{version:3,sources:["webpack://./node_modules/jquery-ui-bundle/jquery-ui.css"],names:[],mappings:"AAAA;;;;oEAIoE;;AAEpE;CACC,sBAAsB;CACtB,kBAAkB;AACnB;AACA;mCACmC;AACnC;CACC,aAAa;AACd;AACA;CACC,SAAS;CACT,mBAAmB;CACnB,WAAW;CACX,YAAY;CACZ,gBAAgB;CAChB,UAAU;CACV,kBAAkB;CAClB,UAAU;AACX;AACA;CACC,SAAS;CACT,UAAU;CACV,SAAS;CACT,UAAU;CACV,gBAAgB;CAChB,qBAAqB;CACrB,eAAe;CACf,gBAAgB;AACjB;AACA;;CAEC,WAAW;CACX,cAAc;CACd,yBAAyB;AAC1B;AACA;CACC,WAAW;AACZ;AACA;CACC,WAAW;CACX,YAAY;CACZ,MAAM;CACN,OAAO;CACP,kBAAkB;CAClB,UAAU;CACV,uBAAuB,EAAE,iBAAiB;AAC3C;;AAEA;CACC,YAAY;AACb;;;AAGA;mCACmC;AACnC;CACC,0BAA0B;CAC1B,oBAAoB;AACrB;;;AAGA;mCACmC;AACnC;CACC,qBAAqB;CACrB,sBAAsB;CACtB,kBAAkB;CAClB,kBAAkB;CAClB,qBAAqB;CACrB,gBAAgB;CAChB,4BAA4B;AAC7B;;AAEA;CACC,SAAS;CACT,iBAAiB;CACjB,cAAc;AACf;;AAEA;mCACmC;;AAEnC,aAAa;AACb;CACC,eAAe;CACf,MAAM;CACN,OAAO;CACP,WAAW;CACX,YAAY;AACb;AACA;CACC,kBAAkB;AACnB;AACA;CACC,kBAAkB;CAClB,gBAAgB;CAChB,cAAc;CACd,sBAAsB;CACtB,kBAAkB;AACnB;AACA;;CAEC,aAAa;AACd;AACA;CACC,gBAAgB;CAChB,WAAW;CACX,WAAW;CACX,SAAS;CACT,OAAO;AACR;AACA;CACC,gBAAgB;CAChB,WAAW;CACX,WAAW;CACX,YAAY;CACZ,OAAO;AACR;AACA;CACC,gBAAgB;CAChB,UAAU;CACV,WAAW;CACX,MAAM;CACN,YAAY;AACb;AACA;CACC,gBAAgB;CAChB,UAAU;CACV,UAAU;CACV,MAAM;CACN,YAAY;AACb;AACA;CACC,iBAAiB;CACjB,WAAW;CACX,YAAY;CACZ,UAAU;CACV,WAAW;AACZ;AACA;CACC,iBAAiB;CACjB,UAAU;CACV,WAAW;CACX,UAAU;CACV,YAAY;AACb;AACA;CACC,iBAAiB;CACjB,UAAU;CACV,WAAW;CACX,UAAU;CACV,SAAS;AACV;AACA;CACC,iBAAiB;CACjB,UAAU;CACV,WAAW;CACX,WAAW;CACX,SAAS;AACV;AACA;CACC,sBAAsB;CACtB,kBAAkB;AACnB;AACA;CACC,kBAAkB;CAClB,YAAY;CACZ,wBAAwB;AACzB;AACA;CACC,sBAAsB;CACtB,kBAAkB;AACnB;AACA;CACC,cAAc;CACd,eAAe;CACf,kBAAkB;CAClB,iBAAiB;CACjB,4BAA4B;CAC5B,eAAe;AAChB;AACA;CACC,kBAAkB;CAClB,aAAa;CACb,cAAc;AACf;AACA;CACC,kBAAkB;CAClB,MAAM;CACN,OAAO;CACP,eAAe;AAChB;AACA;CACC,gBAAgB;CAChB,UAAU;CACV,SAAS;CACT,cAAc;CACd,UAAU;AACX;AACA;CACC,kBAAkB;AACnB;AACA;CACC,SAAS;CACT,eAAe;CACf,6BAA6B;CAC7B,yDAAuG;AACxG;AACA;CACC,kBAAkB;CAClB,yBAAyB;AAC1B;AACA;CACC,aAAa;CACb,SAAS;CACT,YAAY;CACZ,cAAc;CACd,uBAAuB;AACxB;AACA;;CAEC,YAAY;AACb;;AAEA,iBAAiB;AACjB;CACC,kBAAkB;AACnB;AACA;CACC,iBAAiB;AAClB;;AAEA,iBAAiB;AACjB;CACC,kBAAkB;CAClB,MAAM;CACN,SAAS;CACT,UAAU;CACV,cAAc;AACf;;AAEA,kBAAkB;AAClB;CACC,UAAU;CACV,QAAQ;AACT;AACA;CACC,iBAAiB;CACjB,qBAAqB;CACrB,kBAAkB;CAClB,mBAAmB;CACnB,kBAAkB;CAClB,eAAe;CACf,sBAAsB;CACtB,kBAAkB;CAClB,yBAAyB;CACzB,sBAAsB;CACtB,qBAAqB;CACrB,iBAAiB;;CAEjB,sBAAsB;CACtB,iBAAiB;AAClB;;AAEA;;;;;CAKC,qBAAqB;AACtB;;AAEA,4DAA4D;AAC5D;CACC,UAAU;CACV,sBAAsB;CACtB,oBAAoB;CACpB,mBAAmB;AACpB;;AAEA,uCAAuC;AACvC;CACC,cAAc;AACf;;AAEA,2BAA2B;AAC3B;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,gBAAgB;CAChB,iBAAiB;AAClB;;AAEA;CACC,UAAU;CACV,YAAY;CACZ,aAAa;CACb,oBAAoB;CACpB,mBAAmB;;AAEpB;;AAEA;CACC,WAAW;CACX,YAAY;CACZ,cAAc;CACd,mBAAmB;CACnB,iBAAiB;AAClB;;AAEA,gBAAgB;AAChB,4BAA4B;AAC5B;;CAEC,SAAS;CACT,UAAU;AACX;AACA;CACC,sBAAsB;CACtB,qBAAqB;AACtB;AACA;CACC,WAAW;CACX,cAAc;CACd,eAAe;AAChB;AACA;;CAEC,aAAa;AACd;AACA;CACC,cAAc;CACd,WAAW;CACX,WAAW;CACX,aAAa;CACb,gBAAgB;CAChB,gBAAgB;AACjB;AACA;CACC,sBAAsB;AACvB;AACA;CACC,iBAAiB;AAClB;AACA;CACC,cAAc;AACf;AACA;CACC,iBAAiB;AAClB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,kBAAkB;AACnB;AACA;CACC,mBAAmB;AACpB;;AAEA,iCAAiC;AACjC;;CAEC,0CAA0C;CAC1C,UAAU;CACV,2BAA2B;AAC5B;AACA;CACC,uBAAuB;AACxB;;AAEA;CACC,kCAAkC;CAClC,oBAAoB;CACpB,YAAY;AACb;AACA;CACC,WAAW;CACX,YAAY;CACZ,kBAAkB;CAClB,iBAAiB;CACjB,YAAY;AACb;AACA;;CAEC,sBAAsB;CACtB,UAAU;CACV,WAAW;CACX,iBAAiB;CACjB,mBAAmB;AACpB;AACA;CACC,oBAAoB;AACrB;AACA;CACC,WAAW;CACX,oBAAoB;CACpB,aAAa;AACd;AACA;CACC,kBAAkB;CAClB,eAAe;AAChB;AACA;;CAEC,kBAAkB;CAClB,QAAQ;CACR,YAAY;CACZ,aAAa;AACd;AACA;;CAEC,QAAQ;AACT;AACA;CACC,SAAS;AACV;AACA;CACC,UAAU;AACX;AACA;CACC,SAAS;AACV;AACA;CACC,UAAU;AACX;AACA;;CAEC,cAAc;CACd,kBAAkB;CAClB,SAAS;CACT,iBAAiB;CACjB,QAAQ;CACR,gBAAgB;AACjB;AACA;CACC,eAAe;CACf,kBAAkB;CAClB,kBAAkB;AACnB;AACA;CACC,cAAc;CACd,aAAa;AACd;AACA;;CAEC,UAAU;AACX;AACA;CACC,WAAW;CACX,eAAe;CACf,yBAAyB;CACzB,gBAAgB;AACjB;AACA;CACC,kBAAkB;CAClB,kBAAkB;CAClB,iBAAiB;CACjB,SAAS;AACV;AACA;CACC,SAAS;CACT,YAAY;AACb;AACA;;CAEC,cAAc;CACd,aAAa;CACb,iBAAiB;CACjB,qBAAqB;AACtB;AACA;CACC,sBAAsB;CACtB,kBAAkB;CAClB,eAAe;CACf,cAAc;CACd,eAAe;CACf,gBAAgB;AACjB;AACA;CACC,YAAY;CACZ,sBAAsB;CACtB,eAAe;CACf,4BAA4B;CAC5B,WAAW;CACX,iBAAiB;AAClB;AACA;CACC,WAAW;AACZ;;AAEA,4BAA4B;AAC5B;CACC,WAAW;AACZ;AACA;CACC,WAAW;AACZ;AACA;CACC,UAAU;CACV,mBAAmB;AACpB;AACA;CACC,UAAU;AACX;AACA;CACC,YAAY;AACb;AACA;CACC,UAAU;AACX;AACA;;CAEC,oBAAoB;AACrB;AACA;CACC,WAAW;AACZ;AACA;CACC,WAAW;CACX,WAAW;CACX,YAAY;AACb;;AAEA,gBAAgB;AAChB;CACC,cAAc;AACf;AACA;CACC,UAAU;CACV,UAAU;AACX;AACA;CACC,SAAS;CACT,WAAW;AACZ;AACA;CACC,UAAU;CACV,UAAU;AACX;AACA;CACC,SAAS;CACT,WAAW;AACZ;AACA;CACC,YAAY;AACb;AACA;CACC,WAAW;AACZ;AACA;;CAEC,YAAY;AACb;AACA;;CAEC,qBAAqB;CACrB,sBAAsB;AACvB;;AAEA,UAAU;AACV;CACC,cAAc;CACd,qBAAqB;CACrB,gBAAgB;CAChB,4BAA4B;CAC5B,UAAU;CACV,SAAS;AACV;AACA;CACC,kBAAkB;CAClB,MAAM;CACN,OAAO;CACP,aAAa;CACb,UAAU;AACX;AACA;CACC,iBAAiB;CACjB,kBAAkB;AACnB;AACA;CACC,WAAW;CACX,cAAc;CACd,mBAAmB;CACnB,UAAU;CACV,gBAAgB;CAChB,uBAAuB;AACxB;AACA;CACC,kBAAkB;CAClB,WAAW;CACX,QAAQ;CACR,WAAW;CACX,mBAAmB;CACnB,YAAY;CACZ,YAAY;AACb;AACA;CACC,kBAAkB;CAClB,SAAS;CACT,iBAAiB;CACjB,gBAAgB;CAChB,cAAc;AACf;AACA;CACC,gBAAgB;CAChB,uBAAuB;CACvB,sBAAsB;CACtB,gBAAgB;CAChB,2BAA2B;AAC5B;AACA;CACC,YAAY;AACb;AACA;CACC,wBAAwB;CACxB,eAAe;AAChB;AACA;CACC,WAAW;CACX,MAAM;AACP;AACA;CACC,UAAU;CACV,QAAQ;AACT;AACA;CACC,WAAW;CACX,SAAS;AACV;AACA;CACC,UAAU;CACV,OAAO;AACR;AACA;;;;CAIC,UAAU;CACV,WAAW;AACZ;AACA;CACC,QAAQ;CACR,SAAS;AACV;AACA;CACC,OAAO;CACP,SAAS;AACV;AACA;CACC,QAAQ;CACR,MAAM;AACP;AACA;CACC,OAAO;CACP,MAAM;AACP;AACA;CACC,YAAY;AACb;AACA;CACC,WAAW;CACX,gBAAgB;CAChB,gBAAgB;AACjB;AACA;CACC,YAAY;CACZ,YAAY;AACb;AACA;CACC,mDAAyzE;CACzzE,YAAY;CACZ,yBAAyB,EAAE,iBAAiB;CAC5C,aAAa;AACd;AACA;CACC,sBAAsB;AACvB;AACA;CACC,UAAU;CACV,SAAS;CACT,kBAAkB;CAClB,MAAM;CACN,OAAO;CACP,aAAa;AACd;AACA;CACC,cAAc;CACd,kBAAkB;CAClB,mBAAmB;AACpB;AACA;CACC,cAAc;CACd,iBAAiB;CACjB,gBAAgB;CAChB,kBAAkB;CAClB,mBAAmB;CACnB,YAAY;CACZ,SAAS;AACV;AACA;CACC,cAAc;AACf;AACA;CACC,cAAc;CACd,kBAAkB;CAClB,gBAAgB;CAChB,uBAAuB;AACxB;AACA;CACC,gBAAgB;CAChB,mBAAmB;CACnB,WAAW;AACZ;AACA;CACC,YAAY;CACZ,aAAa;AACd;AACA;CACC,kBAAkB;CAClB,gBAAgB;AACjB;AACA;CACC,kBAAkB;CAClB,UAAU;CACV,YAAY;CACZ,aAAa;CACb,eAAe;CACf,sBAAsB;CACtB,kBAAkB;AACnB;AACA;CACC,kBAAkB;CAClB,UAAU;CACV,eAAe;CACf,cAAc;CACd,SAAS;CACT,wBAAwB;AACzB;;AAEA,6BAA6B;AAC7B;;CAEC,eAAe;AAChB;;AAEA;CACC,YAAY;AACb;AACA;CACC,UAAU;CACV,kBAAkB;AACnB;AACA;CACC,MAAM;CACN,YAAY;AACb;AACA;CACC,OAAO;AACR;AACA;CACC,QAAQ;AACT;;AAEA;CACC,WAAW;CACX,aAAa;AACd;AACA;CACC,WAAW;CACX,cAAc;CACd,oBAAoB;AACrB;AACA;CACC,OAAO;CACP,WAAW;AACZ;AACA;CACC,SAAS;AACV;AACA;CACC,MAAM;AACP;AACA;CACC,kBAAkB;CAClB,qBAAqB;CACrB,gBAAgB;CAChB,UAAU;CACV,sBAAsB;AACvB;AACA;CACC,YAAY;CACZ,gBAAgB;CAChB,cAAc;CACd,iBAAiB;CACjB,cAAc;CACd,sBAAsB;CACtB,iBAAiB;CACjB,iBAAiB;AAClB;AACA;CACC,YAAY;CACZ,WAAW;CACX,eAAe;CACf,UAAU;CACV,SAAS;CACT,kBAAkB;CAClB,kBAAkB;CAClB,eAAe;CACf,cAAc;CACd,gBAAgB;CAChB,QAAQ;AACT;AACA,+DAA+D;AAC/D;CACC,sBAAsB;CACtB,yBAAyB;CACzB,wBAAwB;AACzB;AACA;CACC,MAAM;AACP;AACA;CACC,SAAS;AACV;AACA;CACC,kBAAkB,CAAC,uIAAuI;CAC1J,aAAa;AACd;AACA;CACC,SAAS;CACT,oBAAoB;AACrB;AACA;CACC,gBAAgB;CAChB,WAAW;CACX,kBAAkB;CAClB,MAAM;CACN,oBAAoB;CACpB,sBAAsB;CACtB,UAAU;CACV,mBAAmB;AACpB;AACA;CACC,WAAW;CACX,iBAAiB;CACjB,qBAAqB;AACtB;AACA;CACC,mBAAmB;CACnB,mBAAmB;AACpB;AACA;;;CAGC,YAAY;AACb;AACA;CACC,eAAe;AAChB;AACA;CACC,cAAc;CACd,eAAe;CACf,kBAAkB;CAClB,gBAAgB;AACjB;AACA;CACC,YAAY;CACZ,kBAAkB;CAClB,aAAa;CACb,gBAAgB;AACjB;AACA;CACC,iBAAiB;AAClB;;AAEA;mCACmC;AACnC;CACC,uCAAuC;CACvC,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;;;;CAIC,uCAAuC;CACvC,cAAc;AACf;AACA;CACC,yBAAyB;AAC1B;AACA;CACC,yBAAyB;CACzB,mBAAmB;CACnB,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;CACC,yBAAyB;CACzB,mBAAmB;CACnB,cAAc;CACd,iBAAiB;AAClB;AACA;CACC,cAAc;AACf;;AAEA;mCACmC;AACnC;;;;;;;;;CASC,yBAAyB;CACzB,mBAAmB;CACnB,mBAAmB;CACnB,cAAc;AACf;AACA;;;;;;;CAOC,cAAc;CACd,qBAAqB;AACtB;AACA;;;;;;;;CAQC,yBAAyB;CACzB,mBAAmB;CACnB,mBAAmB;CACnB,cAAc;AACf;AACA;;;;;;;;;;CAUC,cAAc;CACd,qBAAqB;AACtB;;AAEA;CACC,yCAAyC;AAC1C;AACA;;;;;;CAMC,yBAAyB;CACzB,mBAAmB;CACnB,mBAAmB;CACnB,cAAc;AACf;AACA;;CAEC,eAAe;CACf,yBAAyB;AAC1B;AACA;;;CAGC,cAAc;CACd,qBAAqB;AACtB;;AAEA;mCACmC;AACnC;;;CAGC,yBAAyB;CACzB,mBAAmB;CACnB,cAAc;AACf;AACA;CACC,yBAAyB;CACzB,mBAAmB;AACpB;AACA;;;CAGC,cAAc;AACf;AACA;;;CAGC,yBAAyB;CACzB,mBAAmB;CACnB,cAAc;AACf;AACA;;;CAGC,cAAc;AACf;AACA;;;CAGC,cAAc;AACf;AACA;;;CAGC,iBAAiB;AAClB;AACA;;;CAGC,WAAW;CACX,wBAAwB,EAAE,iBAAiB;CAC3C,mBAAmB;AACpB;AACA;;;CAGC,YAAY;CACZ,wBAAwB,EAAE,iBAAiB;CAC3C,sBAAsB;AACvB;AACA;CACC,wBAAwB,EAAE,6BAA6B;AACxD;;AAEA;mCACmC;;AAEnC,sBAAsB;AACtB;CACC,WAAW;CACX,YAAY;AACb;AACA;;CAEC,yDAA2D;AAC5D;AACA;CACC,yDAA2D;AAC5D;AACA;;;;CAIC,yDAA2D;AAC5D;AACA;;CAEC,yDAA2D;AAC5D;AACA;;CAEC,yDAA2D;AAC5D;AACA;;CAEC,yDAA2D;AAC5D;AACA;CACC,yDAA2D;AAC5D;;AAEA,gBAAgB;AAChB,iBAAiB,8BAA8B,EAAE;AACjD,qBAAqB,wBAAwB,EAAE;AAC/C,sBAAsB,4BAA4B,EAAE;AACpD,qBAAqB,4BAA4B,EAAE;AACnD,sBAAsB,4BAA4B,EAAE;AACpD,qBAAqB,4BAA4B,EAAE;AACnD,sBAAsB,4BAA4B,EAAE;AACpD,qBAAqB,4BAA4B,EAAE;AACnD,sBAAsB,6BAA6B,EAAE;AACrD,uBAAuB,6BAA6B,EAAE;AACtD,uBAAuB,6BAA6B,EAAE;AACtD,wBAAwB,4BAA4B,EAAE;AACtD,yBAAyB,gCAAgC,EAAE;AAC3D,wBAAwB,gCAAgC,EAAE;AAC1D,yBAAyB,gCAAgC,EAAE;AAC3D,wBAAwB,gCAAgC,EAAE;AAC1D,yBAAyB,gCAAgC,EAAE;AAC3D,wBAAwB,gCAAgC,EAAE;AAC1D,yBAAyB,iCAAiC,EAAE;AAC5D,0BAA0B,iCAAiC,EAAE;AAC7D,0BAA0B,iCAAiC,EAAE;AAC7D,qBAAqB,4BAA4B,EAAE;AACnD,sBAAsB,gCAAgC,EAAE;AACxD,qBAAqB,gCAAgC,EAAE;AACvD,sBAAsB,gCAAgC,EAAE;AACxD,qBAAqB,gCAAgC,EAAE;AACvD,sBAAsB,gCAAgC,EAAE;AACxD,qBAAqB,gCAAgC,EAAE;AACvD,sBAAsB,iCAAiC,EAAE;AACzD,uBAAuB,iCAAiC,EAAE;AAC1D,yBAAyB,iCAAiC,EAAE;AAC5D,uBAAuB,iCAAiC,EAAE;AAC1D,yBAAyB,iCAAiC,EAAE;AAC5D,yBAAyB,iCAAiC,EAAE;AAC5D,yBAAyB,iCAAiC,EAAE;AAC5D,yBAAyB,iCAAiC,EAAE;AAC5D,yBAAyB,iCAAiC,EAAE;AAC5D,0BAA0B,8BAA8B,EAAE;AAC1D,2BAA2B,gCAAgC,EAAE;AAC7D,0BAA0B,gCAAgC,EAAE;AAC5D,2BAA2B,gCAAgC,EAAE;AAC7D,0BAA0B,gCAAgC,EAAE;AAC5D,2BAA2B,gCAAgC,EAAE;AAC7D,0BAA0B,gCAAgC,EAAE;AAC5D,2BAA2B,iCAAiC,EAAE;AAC9D,4BAA4B,iCAAiC,EAAE;AAC/D,8BAA8B,iCAAiC,EAAE;AACjE,4BAA4B,iCAAiC,EAAE;AAC/D,8BAA8B,iCAAiC,EAAE;AACjE,8BAA8B,iCAAiC,EAAE;AACjE,8BAA8B,iCAAiC,EAAE;AACjE,8BAA8B,iCAAiC,EAAE;AACjE,8BAA8B,iCAAiC,EAAE;AACjE,gCAAgC,4BAA4B,EAAE;AAC9D,gCAAgC,gCAAgC,EAAE;AAClE,gCAAgC,gCAAgC,EAAE;AAClE,gCAAgC,gCAAgC,EAAE;AAClE,2BAA2B,gCAAgC,EAAE;AAC7D,2BAA2B,gCAAgC,EAAE;AAC7D,2BAA2B,gCAAgC,EAAE;AAC7D,2BAA2B,iCAAiC,EAAE;AAC9D,4BAA4B,iCAAiC,EAAE;AAC/D,4BAA4B,iCAAiC,EAAE;AAC/D,4BAA4B,iCAAiC,EAAE;AAC/D,4BAA4B,iCAAiC,EAAE;AAC/D,mBAAmB,4BAA4B,EAAE;AACjD,wBAAwB,gCAAgC,EAAE;AAC1D,mBAAmB,gCAAgC,EAAE;AACrD,kBAAkB,gCAAgC,EAAE;AACpD,mBAAmB,gCAAgC,EAAE;AACrD,mBAAmB,gCAAgC,EAAE;AACrD,wBAAwB,gCAAgC,EAAE;AAC1D,6BAA6B,iCAAiC,EAAE;AAChE,4BAA4B,4BAA4B,EAAE;AAC1D,uBAAuB,gCAAgC,EAAE;AACzD,oBAAoB,gCAAgC,EAAE;AACtD,sBAAsB,gCAAgC,EAAE;AACxD,gBAAgB,gCAAgC,EAAE;AAClD,uBAAuB,gCAAgC,EAAE;AACzD,qBAAqB,gCAAgC,EAAE;AACvD,oBAAoB,iCAAiC,EAAE;AACvD,mBAAmB,iCAAiC,EAAE;AACtD,kBAAkB,iCAAiC,EAAE;AACrD,iBAAiB,iCAAiC,EAAE;AACpD,iBAAiB,iCAAiC,EAAE;AACpD,kBAAkB,iCAAiC,EAAE;AACrD,oBAAoB,iCAAiC,EAAE;AACvD,oBAAoB,iCAAiC,EAAE;AACvD,eAAe,iCAAiC,EAAE;AAClD,gBAAgB,6BAA6B,EAAE;AAC/C,gBAAgB,iCAAiC,EAAE;AACnD,oBAAoB,iCAAiC,EAAE;AACvD,gBAAgB,iCAAiC,EAAE;AACnD,kBAAkB,iCAAiC,EAAE;AACrD,iBAAiB,iCAAiC,EAAE;AACpD,gBAAgB,iCAAiC,EAAE;AACnD,sBAAsB,kCAAkC,EAAE;AAC1D,kBAAkB,kCAAkC,EAAE;AACtD,mBAAmB,kCAAkC,EAAE;AACvD,kBAAkB,kCAAkC,EAAE;AACtD,kBAAkB,kCAAkC,EAAE;AACtD,gBAAgB,kCAAkC,EAAE;AACpD,iBAAiB,kCAAkC,EAAE;AACrD,gBAAgB,kCAAkC,EAAE;AACpD,gBAAgB,kCAAkC,EAAE;AACpD,kBAAkB,6BAA6B,EAAE;AACjD,gBAAgB,iCAAiC,EAAE;AACnD,qBAAqB,iCAAiC,EAAE;AACxD,iBAAiB,iCAAiC,EAAE;AACpD,sBAAsB,iCAAiC,EAAE;AACzD,iBAAiB,iCAAiC,EAAE;AACpD,sBAAsB,iCAAiC,EAAE;AACzD,eAAe,kCAAkC,EAAE;AACnD,qBAAqB,kCAAkC,EAAE;AACzD,oBAAoB,kCAAkC,EAAE;AACxD,qBAAqB,kCAAkC,EAAE;AACzD,gBAAgB,kCAAkC,EAAE;AACpD,mBAAmB,kCAAkC,EAAE;AACvD,iBAAiB,kCAAkC,EAAE;AACrD,iBAAiB,kCAAkC,EAAE;AACrD,kBAAkB,kCAAkC,EAAE;AACtD,iBAAiB,6BAA6B,EAAE;AAChD,gBAAgB,iCAAiC,EAAE;AACnD,kBAAkB,iCAAiC,EAAE;AACrD,gBAAgB,iCAAiC,EAAE;AACnD,iBAAiB,iCAAiC,EAAE;AACpD,kBAAkB,iCAAiC,EAAE;AACrD,oBAAoB,iCAAiC,EAAE;AACvD,qBAAqB,kCAAkC,EAAE;AACzD,iBAAiB,kCAAkC,EAAE;AACrD,iBAAiB,kCAAkC,EAAE;AACrD,gBAAgB,6BAA6B,EAAE;AAC/C,iBAAiB,iCAAiC,EAAE;AACpD,qBAAqB,iCAAiC,EAAE;AACxD,qBAAqB,iCAAiC,EAAE;AACxD,oBAAoB,iCAAiC,EAAE;AACvD,sBAAsB,iCAAiC,EAAE;AACzD,qEAAqE;AACrE,sBAAsB,iCAAiC,EAAE;AACzD,gBAAgB,iCAAiC,EAAE;AACnD,iBAAiB,kCAAkC,EAAE;AACrD,sBAAsB,kCAAkC,EAAE;AAC1D,qBAAqB,kCAAkC,EAAE;AACzD,iBAAiB,6BAA6B,EAAE;AAChD,uBAAuB,iCAAiC,EAAE;AAC1D,kBAAkB,iCAAiC,EAAE;AACrD,qBAAqB,iCAAiC,EAAE;AACxD,qBAAqB,iCAAiC,EAAE;AACxD,qBAAqB,iCAAiC,EAAE;AACxD,qBAAqB,iCAAiC,EAAE;AACxD,uBAAuB,6BAA6B,EAAE;AACtD,wBAAwB,iCAAiC,EAAE;AAC3D,wBAAwB,iCAAiC,EAAE;AAC3D,6BAA6B,iCAAiC,EAAE;AAChE,6BAA6B,iCAAiC,EAAE;AAChE,6BAA6B,iCAAiC,EAAE;AAChE,6BAA6B,iCAAiC,EAAE;AAChE,0BAA0B,kCAAkC,EAAE;AAC9D,0BAA0B,kCAAkC,EAAE;AAC9D,0BAA0B,kCAAkC,EAAE;AAC9D,0BAA0B,kCAAkC,EAAE;AAC9D,yBAAyB,kCAAkC,EAAE;AAC7D,0BAA0B,kCAAkC,EAAE;AAC9D,wBAAwB,kCAAkC,EAAE;AAC5D,4BAA4B,6BAA6B,EAAE;AAC3D,6BAA6B,iCAAiC,EAAE;AAChE,6BAA6B,iCAAiC,EAAE;AAChE,4BAA4B,iCAAiC,EAAE;AAC/D,6BAA6B,iCAAiC,EAAE;AAChE,6BAA6B,iCAAiC,EAAE;AAChE,gCAAgC,6BAA6B,EAAE;AAC/D,kCAAkC,iCAAiC,EAAE;AACrE,+BAA+B,iCAAiC,EAAE;AAClE,iCAAiC,iCAAiC,EAAE;AACpE,iCAAiC,iCAAiC,EAAE;AACpE,4BAA4B,iCAAiC,EAAE;;;AAG/D;mCACmC;;AAEnC,kBAAkB;AAClB;;;;CAIC,2BAA2B;AAC5B;AACA;;;;CAIC,4BAA4B;AAC7B;AACA;;;;CAIC,8BAA8B;AAC/B;AACA;;;;CAIC,+BAA+B;AAChC;;AAEA,aAAa;AACb;CACC,mBAAmB;CACnB,WAAW;CACX,yBAAyB,EAAE,iBAAiB;AAC7C;AACA;CACC,uCAAuC;CACvC,+BAA+B;AAChC",sourcesContent:['/*! jQuery UI - v1.12.1 - 2017-03-19\n* http://jqueryui.com\n* Includes: draggable.css, core.css, resizable.css, selectable.css, sortable.css, accordion.css, autocomplete.css, menu.css, button.css, controlgroup.css, checkboxradio.css, datepicker.css, dialog.css, progressbar.css, selectmenu.css, slider.css, spinner.css, tabs.css, tooltip.css, theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&folderName=base&cornerRadiusShadow=8px&offsetLeftShadow=0px&offsetTopShadow=0px&thicknessShadow=5px&opacityShadow=30&bgImgOpacityShadow=0&bgTextureShadow=flat&bgColorShadow=666666&opacityOverlay=30&bgImgOpacityOverlay=0&bgTextureOverlay=flat&bgColorOverlay=aaaaaa&iconColorError=cc0000&fcError=5f3f3f&borderColorError=f1a899&bgTextureError=flat&bgColorError=fddfdf&iconColorHighlight=777620&fcHighlight=777620&borderColorHighlight=dad55e&bgTextureHighlight=flat&bgColorHighlight=fffa90&iconColorActive=ffffff&fcActive=ffffff&borderColorActive=003eff&bgTextureActive=flat&bgColorActive=007fff&iconColorHover=555555&fcHover=2b2b2b&borderColorHover=cccccc&bgTextureHover=flat&bgColorHover=ededed&iconColorDefault=777777&fcDefault=454545&borderColorDefault=c5c5c5&bgTextureDefault=flat&bgColorDefault=f6f6f6&iconColorContent=444444&fcContent=333333&borderColorContent=dddddd&bgTextureContent=flat&bgColorContent=ffffff&iconColorHeader=444444&fcHeader=333333&borderColorHeader=dddddd&bgTextureHeader=flat&bgColorHeader=e9e9e9&cornerRadius=3px&fwDefault=normal&fsDefault=1em&ffDefault=Arial%2CHelvetica%2Csans-serif\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n.ui-draggable-handle {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.ui-resizable {\n\tposition: relative;\n}\n.ui-resizable-handle {\n\tposition: absolute;\n\tfont-size: 0.1px;\n\tdisplay: block;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n\tdisplay: none;\n}\n.ui-resizable-n {\n\tcursor: n-resize;\n\theight: 7px;\n\twidth: 100%;\n\ttop: -5px;\n\tleft: 0;\n}\n.ui-resizable-s {\n\tcursor: s-resize;\n\theight: 7px;\n\twidth: 100%;\n\tbottom: -5px;\n\tleft: 0;\n}\n.ui-resizable-e {\n\tcursor: e-resize;\n\twidth: 7px;\n\tright: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-w {\n\tcursor: w-resize;\n\twidth: 7px;\n\tleft: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-se {\n\tcursor: se-resize;\n\twidth: 12px;\n\theight: 12px;\n\tright: 1px;\n\tbottom: 1px;\n}\n.ui-resizable-sw {\n\tcursor: sw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\tbottom: -5px;\n}\n.ui-resizable-nw {\n\tcursor: nw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\ttop: -5px;\n}\n.ui-resizable-ne {\n\tcursor: ne-resize;\n\twidth: 9px;\n\theight: 9px;\n\tright: -5px;\n\ttop: -5px;\n}\n.ui-selectable {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n.ui-sortable-handle {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-accordion .ui-accordion-header {\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\tmargin: 2px 0 0 0;\n\tpadding: .5em .5em .5em .7em;\n\tfont-size: 100%;\n}\n.ui-accordion .ui-accordion-content {\n\tpadding: 1em 2.2em;\n\tborder-top: 0;\n\toverflow: auto;\n}\n.ui-autocomplete {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcursor: default;\n}\n.ui-menu {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: block;\n\toutline: 0;\n}\n.ui-menu .ui-menu {\n\tposition: absolute;\n}\n.ui-menu .ui-menu-item {\n\tmargin: 0;\n\tcursor: pointer;\n\t/* support: IE10, see #8844 */\n\tlist-style-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");\n}\n.ui-menu .ui-menu-item-wrapper {\n\tposition: relative;\n\tpadding: 3px 1em 3px .4em;\n}\n.ui-menu .ui-menu-divider {\n\tmargin: 5px 0;\n\theight: 0;\n\tfont-size: 0;\n\tline-height: 0;\n\tborder-width: 1px 0 0 0;\n}\n.ui-menu .ui-state-focus,\n.ui-menu .ui-state-active {\n\tmargin: -1px;\n}\n\n/* icon support */\n.ui-menu-icons {\n\tposition: relative;\n}\n.ui-menu-icons .ui-menu-item-wrapper {\n\tpadding-left: 2em;\n}\n\n/* left-aligned */\n.ui-menu .ui-icon {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: .2em;\n\tmargin: auto 0;\n}\n\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n\tleft: auto;\n\tright: 0;\n}\n.ui-button {\n\tpadding: .4em 1em;\n\tdisplay: inline-block;\n\tposition: relative;\n\tline-height: normal;\n\tmargin-right: .1em;\n\tcursor: pointer;\n\tvertical-align: middle;\n\ttext-align: center;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\n\t/* Support: IE <= 11 */\n\toverflow: visible;\n}\n\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n\ttext-decoration: none;\n}\n\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n\twidth: 2em;\n\tbox-sizing: border-box;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n}\n\n/* no icon support for input elements */\ninput.ui-button.ui-button-icon-only {\n\ttext-indent: 0;\n}\n\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n}\n\n.ui-button.ui-icon-notext .ui-icon {\n\tpadding: 0;\n\twidth: 2.1em;\n\theight: 2.1em;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n\n}\n\ninput.ui-button.ui-icon-notext .ui-icon {\n\twidth: auto;\n\theight: auto;\n\ttext-indent: 0;\n\twhite-space: normal;\n\tpadding: .4em 1em;\n}\n\n/* workarounds */\n/* Support: Firefox 5 - 40 */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n.ui-controlgroup {\n\tvertical-align: middle;\n\tdisplay: inline-block;\n}\n.ui-controlgroup > .ui-controlgroup-item {\n\tfloat: left;\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n.ui-controlgroup > .ui-controlgroup-item:focus,\n.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus {\n\tz-index: 9999;\n}\n.ui-controlgroup-vertical > .ui-controlgroup-item {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttext-align: left;\n}\n.ui-controlgroup-vertical .ui-controlgroup-item {\n\tbox-sizing: border-box;\n}\n.ui-controlgroup .ui-controlgroup-label {\n\tpadding: .4em 1em;\n}\n.ui-controlgroup .ui-controlgroup-label span {\n\tfont-size: 80%;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-left: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-top: none;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content {\n\tborder-right: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content {\n\tborder-bottom: none;\n}\n\n/* Spinner specific style fixes */\n.ui-controlgroup-vertical .ui-spinner-input {\n\n\t/* Support: IE8 only, Android < 4.4 only */\n\twidth: 75%;\n\twidth: calc( 100% - 2.4em );\n}\n.ui-controlgroup-vertical .ui-spinner .ui-spinner-up {\n\tborder-top-style: solid;\n}\n\n.ui-checkboxradio-label .ui-icon-background {\n\tbox-shadow: inset 1px 1px 1px #ccc;\n\tborder-radius: .12em;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label .ui-icon-background {\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 1em;\n\toverflow: visible;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon {\n\tbackground-image: none;\n\twidth: 8px;\n\theight: 8px;\n\tborder-width: 4px;\n\tborder-style: solid;\n}\n.ui-checkboxradio-disabled {\n\tpointer-events: none;\n}\n.ui-datepicker {\n\twidth: 17em;\n\tpadding: .2em .2em 0;\n\tdisplay: none;\n}\n.ui-datepicker .ui-datepicker-header {\n\tposition: relative;\n\tpadding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n\tposition: absolute;\n\ttop: 2px;\n\twidth: 1.8em;\n\theight: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n\ttop: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n\tleft: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n\tright: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n\tleft: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n\tright: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 50%;\n\tmargin-left: -8px;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n\tmargin: 0 2.3em;\n\tline-height: 1.8em;\n\ttext-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n\tfont-size: 1em;\n\tmargin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n\twidth: 45%;\n}\n.ui-datepicker table {\n\twidth: 100%;\n\tfont-size: .9em;\n\tborder-collapse: collapse;\n\tmargin: 0 0 .4em;\n}\n.ui-datepicker th {\n\tpadding: .7em .3em;\n\ttext-align: center;\n\tfont-weight: bold;\n\tborder: 0;\n}\n.ui-datepicker td {\n\tborder: 0;\n\tpadding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n\tdisplay: block;\n\tpadding: .2em;\n\ttext-align: right;\n\ttext-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n\tbackground-image: none;\n\tmargin: .7em 0 0 0;\n\tpadding: 0 .2em;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n\tfloat: right;\n\tmargin: .5em .2em .4em;\n\tcursor: pointer;\n\tpadding: .2em .6em .3em .6em;\n\twidth: auto;\n\toverflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n\tfloat: left;\n}\n\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n\twidth: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n\tfloat: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n\twidth: 95%;\n\tmargin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n\twidth: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n\twidth: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n\twidth: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n\tclear: left;\n}\n.ui-datepicker-row-break {\n\tclear: both;\n\twidth: 100%;\n\tfont-size: 0;\n}\n\n/* RTL support */\n.ui-datepicker-rtl {\n\tdirection: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n\tright: 2px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n\tleft: 2px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n\tright: 1px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n\tleft: 1px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n\tclear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n\tfloat: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n\tfloat: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-right-width: 0;\n\tborder-left-width: 1px;\n}\n\n/* Icons */\n.ui-datepicker .ui-icon {\n\tdisplay: block;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n\tleft: .5em;\n\ttop: .3em;\n}\n.ui-dialog {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tpadding: .2em;\n\toutline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n\tpadding: .4em 1em;\n\tposition: relative;\n}\n.ui-dialog .ui-dialog-title {\n\tfloat: left;\n\tmargin: .1em 0;\n\twhite-space: nowrap;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n\tposition: absolute;\n\tright: .3em;\n\ttop: 50%;\n\twidth: 20px;\n\tmargin: -10px 0 0 0;\n\tpadding: 1px;\n\theight: 20px;\n}\n.ui-dialog .ui-dialog-content {\n\tposition: relative;\n\tborder: 0;\n\tpadding: .5em 1em;\n\tbackground: none;\n\toverflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n\ttext-align: left;\n\tborder-width: 1px 0 0 0;\n\tbackground-image: none;\n\tmargin-top: .5em;\n\tpadding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n\tfloat: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n\tmargin: .5em .4em .5em 0;\n\tcursor: pointer;\n}\n.ui-dialog .ui-resizable-n {\n\theight: 2px;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-e {\n\twidth: 2px;\n\tright: 0;\n}\n.ui-dialog .ui-resizable-s {\n\theight: 2px;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-w {\n\twidth: 2px;\n\tleft: 0;\n}\n.ui-dialog .ui-resizable-se,\n.ui-dialog .ui-resizable-sw,\n.ui-dialog .ui-resizable-ne,\n.ui-dialog .ui-resizable-nw {\n\twidth: 7px;\n\theight: 7px;\n}\n.ui-dialog .ui-resizable-se {\n\tright: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-sw {\n\tleft: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-ne {\n\tright: 0;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-nw {\n\tleft: 0;\n\ttop: 0;\n}\n.ui-draggable .ui-dialog-titlebar {\n\tcursor: move;\n}\n.ui-progressbar {\n\theight: 2em;\n\ttext-align: left;\n\toverflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n\tmargin: -1px;\n\theight: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n\tbackground: url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");\n\theight: 100%;\n\tfilter: alpha(opacity=25); /* support: IE8 */\n\topacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n\tbackground-image: none;\n}\n.ui-selectmenu-menu {\n\tpadding: 0;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n}\n.ui-selectmenu-menu .ui-menu {\n\toverflow: auto;\n\toverflow-x: hidden;\n\tpadding-bottom: 1px;\n}\n.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {\n\tfont-size: 1em;\n\tfont-weight: bold;\n\tline-height: 1.5;\n\tpadding: 2px 0.4em;\n\tmargin: 0.5em 0 0 0;\n\theight: auto;\n\tborder: 0;\n}\n.ui-selectmenu-open {\n\tdisplay: block;\n}\n.ui-selectmenu-text {\n\tdisplay: block;\n\tmargin-right: 20px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-selectmenu-button.ui-button {\n\ttext-align: left;\n\twhite-space: nowrap;\n\twidth: 14em;\n}\n.ui-selectmenu-icon.ui-icon {\n\tfloat: right;\n\tmargin-top: 0;\n}\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n.ui-spinner {\n\tposition: relative;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tpadding: 0;\n\tvertical-align: middle;\n}\n.ui-spinner-input {\n\tborder: none;\n\tbackground: none;\n\tcolor: inherit;\n\tpadding: .222em 0;\n\tmargin: .2em 0;\n\tvertical-align: middle;\n\tmargin-left: .4em;\n\tmargin-right: 2em;\n}\n.ui-spinner-button {\n\twidth: 1.6em;\n\theight: 50%;\n\tfont-size: .5em;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-align: center;\n\tposition: absolute;\n\tcursor: default;\n\tdisplay: block;\n\toverflow: hidden;\n\tright: 0;\n}\n/* more specificity required here to override default borders */\n.ui-spinner a.ui-spinner-button {\n\tborder-top-style: none;\n\tborder-bottom-style: none;\n\tborder-right-style: none;\n}\n.ui-spinner-up {\n\ttop: 0;\n}\n.ui-spinner-down {\n\tbottom: 0;\n}\n.ui-tabs {\n\tposition: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */\n\tpadding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n\tmargin: 0;\n\tpadding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n\tlist-style: none;\n\tfloat: left;\n\tposition: relative;\n\ttop: 0;\n\tmargin: 1px .2em 0 0;\n\tborder-bottom-width: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n\tfloat: left;\n\tpadding: .5em 1em;\n\ttext-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n\tmargin-bottom: -1px;\n\tpadding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n\tcursor: text;\n}\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n\tcursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n\tdisplay: block;\n\tborder-width: 0;\n\tpadding: 1em 1.4em;\n\tbackground: none;\n}\n.ui-tooltip {\n\tpadding: 8px;\n\tposition: absolute;\n\tz-index: 9999;\n\tmax-width: 300px;\n}\nbody .ui-tooltip {\n\tborder-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5;\n}\n.ui-widget-content {\n\tborder: 1px solid #dddddd;\n\tbackground: #ffffff;\n\tcolor: #333333;\n}\n.ui-widget-content a {\n\tcolor: #333333;\n}\n.ui-widget-header {\n\tborder: 1px solid #dddddd;\n\tbackground: #e9e9e9;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n.ui-widget-header a {\n\tcolor: #333333;\n}\n\n/* Interaction states\n----------------------------------*/\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5;\n\tbackground: #f6f6f6;\n\tfont-weight: normal;\n\tcolor: #454545;\n}\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545;\n\ttext-decoration: none;\n}\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc;\n\tbackground: #ededed;\n\tfont-weight: normal;\n\tcolor: #2b2b2b;\n}\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b;\n\ttext-decoration: none;\n}\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff;\n\tbackground: #007fff;\n\tfont-weight: normal;\n\tcolor: #ffffff;\n}\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff;\n\tbackground-color: #ffffff;\n}\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff;\n\ttext-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n\tcolor: #777620;\n}\n.ui-state-checked {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n}\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620;\n}\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899;\n\tbackground: #fddfdf;\n\tcolor: #5f3f3f;\n}\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f;\n}\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f;\n}\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url("images/ui-icons_444444_256x240.png");\n}\n.ui-widget-header .ui-icon {\n\tbackground-image: url("images/ui-icons_444444_256x240.png");\n}\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url("images/ui-icons_555555_256x240.png");\n}\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url("images/ui-icons_ffffff_256x240.png");\n}\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url("images/ui-icons_777620_256x240.png");\n}\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url("images/ui-icons_cc0000_256x240.png");\n}\n.ui-button .ui-icon {\n\tbackground-image: url("images/ui-icons_777777_256x240.png");\n}\n\n/* positioning */\n.ui-icon-blank { background-position: 16px 16px; }\n.ui-icon-caret-1-n { background-position: 0 0; }\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n.ui-icon-caret-1-e { background-position: -32px 0; }\n.ui-icon-caret-1-se { background-position: -48px 0; }\n.ui-icon-caret-1-s { background-position: -65px 0; }\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n.ui-icon-caret-1-w { background-position: -96px 0; }\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n.ui-icon-extlink { background-position: -32px -80px; }\n.ui-icon-newwin { background-position: -48px -80px; }\n.ui-icon-refresh { background-position: -64px -80px; }\n.ui-icon-shuffle { background-position: -80px -80px; }\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n.ui-icon-folder-open { background-position: -16px -96px; }\n.ui-icon-document { background-position: -32px -96px; }\n.ui-icon-document-b { background-position: -48px -96px; }\n.ui-icon-note { background-position: -64px -96px; }\n.ui-icon-mail-closed { background-position: -80px -96px; }\n.ui-icon-mail-open { background-position: -96px -96px; }\n.ui-icon-suitcase { background-position: -112px -96px; }\n.ui-icon-comment { background-position: -128px -96px; }\n.ui-icon-person { background-position: -144px -96px; }\n.ui-icon-print { background-position: -160px -96px; }\n.ui-icon-trash { background-position: -176px -96px; }\n.ui-icon-locked { background-position: -192px -96px; }\n.ui-icon-unlocked { background-position: -208px -96px; }\n.ui-icon-bookmark { background-position: -224px -96px; }\n.ui-icon-tag { background-position: -240px -96px; }\n.ui-icon-home { background-position: 0 -112px; }\n.ui-icon-flag { background-position: -16px -112px; }\n.ui-icon-calendar { background-position: -32px -112px; }\n.ui-icon-cart { background-position: -48px -112px; }\n.ui-icon-pencil { background-position: -64px -112px; }\n.ui-icon-clock { background-position: -80px -112px; }\n.ui-icon-disk { background-position: -96px -112px; }\n.ui-icon-calculator { background-position: -112px -112px; }\n.ui-icon-zoomin { background-position: -128px -112px; }\n.ui-icon-zoomout { background-position: -144px -112px; }\n.ui-icon-search { background-position: -160px -112px; }\n.ui-icon-wrench { background-position: -176px -112px; }\n.ui-icon-gear { background-position: -192px -112px; }\n.ui-icon-heart { background-position: -208px -112px; }\n.ui-icon-star { background-position: -224px -112px; }\n.ui-icon-link { background-position: -240px -112px; }\n.ui-icon-cancel { background-position: 0 -128px; }\n.ui-icon-plus { background-position: -16px -128px; }\n.ui-icon-plusthick { background-position: -32px -128px; }\n.ui-icon-minus { background-position: -48px -128px; }\n.ui-icon-minusthick { background-position: -64px -128px; }\n.ui-icon-close { background-position: -80px -128px; }\n.ui-icon-closethick { background-position: -96px -128px; }\n.ui-icon-key { background-position: -112px -128px; }\n.ui-icon-lightbulb { background-position: -128px -128px; }\n.ui-icon-scissors { background-position: -144px -128px; }\n.ui-icon-clipboard { background-position: -160px -128px; }\n.ui-icon-copy { background-position: -176px -128px; }\n.ui-icon-contact { background-position: -192px -128px; }\n.ui-icon-image { background-position: -208px -128px; }\n.ui-icon-video { background-position: -224px -128px; }\n.ui-icon-script { background-position: -240px -128px; }\n.ui-icon-alert { background-position: 0 -144px; }\n.ui-icon-info { background-position: -16px -144px; }\n.ui-icon-notice { background-position: -32px -144px; }\n.ui-icon-help { background-position: -48px -144px; }\n.ui-icon-check { background-position: -64px -144px; }\n.ui-icon-bullet { background-position: -80px -144px; }\n.ui-icon-radio-on { background-position: -96px -144px; }\n.ui-icon-radio-off { background-position: -112px -144px; }\n.ui-icon-pin-w { background-position: -128px -144px; }\n.ui-icon-pin-s { background-position: -144px -144px; }\n.ui-icon-play { background-position: 0 -160px; }\n.ui-icon-pause { background-position: -16px -160px; }\n.ui-icon-seek-next { background-position: -32px -160px; }\n.ui-icon-seek-prev { background-position: -48px -160px; }\n.ui-icon-seek-end { background-position: -64px -160px; }\n.ui-icon-seek-start { background-position: -80px -160px; }\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n.ui-icon-seek-first { background-position: -80px -160px; }\n.ui-icon-stop { background-position: -96px -160px; }\n.ui-icon-eject { background-position: -112px -160px; }\n.ui-icon-volume-off { background-position: -128px -160px; }\n.ui-icon-volume-on { background-position: -144px -160px; }\n.ui-icon-power { background-position: 0 -176px; }\n.ui-icon-signal-diag { background-position: -16px -176px; }\n.ui-icon-signal { background-position: -32px -176px; }\n.ui-icon-battery-0 { background-position: -48px -176px; }\n.ui-icon-battery-1 { background-position: -64px -176px; }\n.ui-icon-battery-2 { background-position: -80px -176px; }\n.ui-icon-battery-3 { background-position: -96px -176px; }\n.ui-icon-circle-plus { background-position: 0 -192px; }\n.ui-icon-circle-minus { background-position: -16px -192px; }\n.ui-icon-circle-close { background-position: -32px -192px; }\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n.ui-icon-circle-check { background-position: -208px -192px; }\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px;\n}\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px;\n}\n\n/* Overlays */\n.ui-widget-overlay {\n\tbackground: #aaaaaa;\n\topacity: .3;\n\tfilter: Alpha(Opacity=30); /* support: IE8 */\n}\n.ui-widget-shadow {\n\t-webkit-box-shadow: 0px 0px 5px #666666;\n\tbox-shadow: 0px 0px 5px #666666;\n}\n'],sourceRoot:""}]);const k=m},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);n&&s[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},1667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},7537:t=>{"use strict";t.exports=function(t){var e=t[1],i=t[3];if(!i)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(r," */"),s=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[e].concat(s).concat([o]).join("\n")}return[e].join("\n")}},9187:t=>{"use strict";function e(t,e,n){n=n||2;var o,s,a,l,h,d,f,p=e&&e.length,g=p?e[0]*n:t.length,m=i(t,0,g,n,!0),v=[];if(!m||m.next===m.prev)return v;if(p&&(m=function(t,e,n,r){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=i(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(A(a));for(l.sort(c),o=0;o<l.length;o++)n=u(l[o],n);return n}(t,e,m,n)),t.length>80*n){o=a=t[0],s=l=t[1];for(var y=n;y<g;y+=n)(h=t[y])<o&&(o=h),(d=t[y+1])<s&&(s=d),h>a&&(a=h),d>l&&(l=d);f=0!==(f=Math.max(a-o,l-s))?32767/f:0}return r(m,v,n,o,s,f,0),v}function i(t,e,i,n,r){var o,s;if(r===k(t,e,i,n)>0)for(o=e;o<i;o+=n)s=x(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=x(o,t[o],t[o+1],s);return s&&m(s,s.next)&&(C(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!m(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(C(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function r(t,e,i,c,u,h,A){if(t){!A&&h&&function(t,e,i,n){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,l,c=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<c&&(a++,n=n.nextZ);e++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(s>1)}(r)}(t,c,u,h);for(var f,p,g=t;t.prev!==t.next;)if(f=t.prev,p=t.next,h?s(t,c,u,h):o(t))e.push(f.i/i|0),e.push(t.i/i|0),e.push(p.i/i|0),C(t),t=p.next,g=p.next;else if((t=p)===g){A?1===A?r(t=a(n(t),e,i),e,i,c,u,h,2):2===A&&l(t,e,i,c,u,h):r(n(t),e,i,c,u,h,1);break}}}function o(t){var e=t.prev,i=t,n=t.next;if(g(e,i,n)>=0)return!1;for(var r=e.x,o=i.x,s=n.x,a=e.y,l=i.y,c=n.y,u=r<o?r<s?r:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,d=r>o?r>s?r:s:o>s?o:s,A=a>l?a>c?a:c:l>c?l:c,p=n.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=A&&f(r,a,o,l,s,c,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function s(t,e,i,n){var r=t.prev,o=t,s=t.next;if(g(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,c=s.x,u=r.y,h=o.y,A=s.y,p=a<l?a<c?a:c:l<c?l:c,m=u<h?u<A?u:A:h<A?h:A,v=a>l?a>c?a:c:l>c?l:c,y=u>h?u>A?u:A:h>A?h:A,b=d(p,m,e,i,n),_=d(v,y,e,i,n),w=t.prevZ,x=t.nextZ;w&&w.z>=b&&x&&x.z<=_;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=y&&w!==r&&w!==s&&f(a,u,l,h,c,A,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,x.x>=p&&x.x<=v&&x.y>=m&&x.y<=y&&x!==r&&x!==s&&f(a,u,l,h,c,A,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;w&&w.z>=b;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=y&&w!==r&&w!==s&&f(a,u,l,h,c,A,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;x&&x.z<=_;){if(x.x>=p&&x.x<=v&&x.y>=m&&x.y<=y&&x!==r&&x!==s&&f(a,u,l,h,c,A,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function a(t,e,i){var r=t;do{var o=r.prev,s=r.next.next;!m(o,s)&&v(o,r,r.next,s)&&_(o,s)&&_(s,o)&&(e.push(o.i/i|0),e.push(r.i/i|0),e.push(s.i/i|0),C(r),C(r.next),r=t=s),r=r.next}while(r!==t);return n(r)}function l(t,e,i,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&p(l,c)){var u=w(l,c);return l=n(l,l.next),u=n(u,u.next),r(l,e,i,o,s,a,0),void r(u,e,i,o,s,a,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,i=n.x<n.next.x?n:n.next,a===r))return i}n=n.next}while(n!==e);if(!i)return null;var l,c=i,u=i.x,d=i.y,A=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&f(o<d?r:s,o,u,d,o<d?s:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),_(n,t)&&(l<A||l===A&&(n.x>i.x||n.x===i.x&&h(i,n)))&&(i=n,A=l)),n=n.next}while(n!==c);return i}(t,e);if(!i)return e;var r=w(i,t);return n(r,r.next),n(i,i.next)}function h(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function A(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,n,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(i-s)*(e-a)&&(i-s)*(o-a)>=(r-s)*(n-a)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(_(t,e)&&_(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||m(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,i,n){var r=b(g(t,e,i)),o=b(g(t,e,n)),s=b(g(i,n,t)),a=b(g(i,n,e));return r!==o&&s!==a||!(0!==r||!y(t,i,e))||!(0!==o||!y(t,n,e))||!(0!==s||!y(i,t,n))||!(0!==a||!y(i,e,n))}function y(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function _(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var i=new E(t.i,t.x,t.y),n=new E(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function x(t,e,i,n){var r=new E(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(k(t,0,o,i));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*i,u=a<l-1?e[a+1]*i:t.length;s-=Math.abs(k(t,c,u,i))}var h=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,A=n[a+1]*i,f=n[a+2]*i;h+=Math.abs((t[d]-t[f])*(t[A+1]-t[d+1])-(t[d]-t[A])*(t[f+1]-t[d+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},6932:(t,e,i)=>{"use strict";const n=i(8501),r=i(8844),o=i(1192);t.exports={XMLParser:r,XMLValidator:n,XMLBuilder:o}},7849:(t,e)=>{"use strict";const i="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+i+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,i){if(e){const n=Object.keys(e),r=n.length;for(let o=0;o<r;o++)t[n[o]]="strict"===i?[e[n[o]]]:e[n[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(t){return!(null==n.exec(t))},e.getAllMatches=function(t,e){const i=[];let n=e.exec(t);for(;n;){const r=[];r.startIndex=e.lastIndex-n[0].length;const o=n.length;for(let t=0;t<o;t++)r.push(n[t]);i.push(r),n=e.exec(t)}return i},e.nameRegexp=i},8501:(t,e,i)=>{"use strict";const n=i(7849),r={allowBooleanAttributes:!1,unpairedTags:[]};function o(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function s(t,e){const i=e;for(;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{const n=t.substr(i,e-i);if(e>5&&"xml"===n)return d("InvalidXml","XML declaration allowed only at the start of the document.",f(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let i=1;for(e+=8;e<t.length;e++)if("<"===t[e])i++;else if(">"===t[e]&&(i--,0===i))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function l(t,e){let i="",n="",r=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])""===n?n=t[e]:n!==t[e]||(n="");else if(">"===t[e]&&""===n){r=!0;break}i+=t[e]}return""===n&&{value:i,index:e,tagClosed:r}}e.validate=function(t,e){e=Object.assign({},r,e);const i=[];let c=!1,A=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let r=0;r<t.length;r++)if("<"===t[r]&&"?"===t[r+1]){if(r+=2,r=s(t,r),r.err)return r}else{if("<"!==t[r]){if(o(t[r]))continue;return d("InvalidChar","char '"+t[r]+"' is not expected.",f(t,r))}{let g=r;if(r++,"!"===t[r]){r=a(t,r);continue}{let m=!1;"/"===t[r]&&(m=!0,r++);let v="";for(;r<t.length&&">"!==t[r]&&" "!==t[r]&&"\t"!==t[r]&&"\n"!==t[r]&&"\r"!==t[r];r++)v+=t[r];if(v=v.trim(),"/"===v[v.length-1]&&(v=v.substring(0,v.length-1),r--),p=v,!n.isName(p)){let e;return e=0===v.trim().length?"Invalid space after '<'.":"Tag '"+v+"' is an invalid name.",d("InvalidTag",e,f(t,r))}const y=l(t,r);if(!1===y)return d("InvalidAttr","Attributes for '"+v+"' have open quote.",f(t,r));let b=y.value;if(r=y.index,"/"===b[b.length-1]){const i=r-b.length;b=b.substring(0,b.length-1);const n=u(b,e);if(!0!==n)return d(n.err.code,n.err.msg,f(t,i+n.err.line));c=!0}else if(m){if(!y.tagClosed)return d("InvalidTag","Closing tag '"+v+"' doesn't have proper closing.",f(t,r));if(b.trim().length>0)return d("InvalidTag","Closing tag '"+v+"' can't have attributes or invalid starting.",f(t,g));{const e=i.pop();if(v!==e.tagName){let i=f(t,e.tagStartPos);return d("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+i.line+", col "+i.col+") instead of closing tag '"+v+"'.",f(t,g))}0==i.length&&(A=!0)}}else{const n=u(b,e);if(!0!==n)return d(n.err.code,n.err.msg,f(t,r-b.length+n.err.line));if(!0===A)return d("InvalidXml","Multiple possible root nodes found.",f(t,r));-1!==e.unpairedTags.indexOf(v)||i.push({tagName:v,tagStartPos:g}),c=!0}for(r++;r<t.length;r++)if("<"===t[r]){if("!"===t[r+1]){r++,r=a(t,r);continue}if("?"!==t[r+1])break;if(r=s(t,++r),r.err)return r}else if("&"===t[r]){const e=h(t,r);if(-1==e)return d("InvalidChar","char '&' is not expected.",f(t,r));r=e}else if(!0===A&&!o(t[r]))return d("InvalidXml","Extra text at the end",f(t,r));"<"===t[r]&&r--}}}var p;return c?1==i.length?d("InvalidTag","Unclosed tag '"+i[0].tagName+"'.",f(t,i[0].tagStartPos)):!(i.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(i.map((t=>t.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):d("InvalidXml","Start tag expected.",1)};const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function u(t,e){const i=n.getAllMatches(t,c),r={};for(let t=0;t<i.length;t++){if(0===i[t][1].length)return d("InvalidAttr","Attribute '"+i[t][2]+"' has no space in starting.",p(i[t]));if(void 0!==i[t][3]&&void 0===i[t][4])return d("InvalidAttr","Attribute '"+i[t][2]+"' is without value.",p(i[t]));if(void 0===i[t][3]&&!e.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+i[t][2]+"' is not allowed.",p(i[t]));const n=i[t][2];if(!A(n))return d("InvalidAttr","Attribute '"+n+"' is an invalid name.",p(i[t]));if(r.hasOwnProperty(n))return d("InvalidAttr","Attribute '"+n+"' is repeated.",p(i[t]));r[n]=1}return!0}function h(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let i=/\d/;for("x"===t[e]&&(e++,i=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(i))break}return-1}(t,++e);let i=0;for(;e<t.length;e++,i++)if(!(t[e].match(/\w/)&&i<20)){if(";"===t[e])break;return-1}return e}function d(t,e,i){return{err:{code:t,msg:e,line:i.line||i,col:i.col}}}function A(t){return n.isName(t)}function f(t,e){const i=t.substring(0,e).split(/\r?\n/);return{line:i.length,col:i[i.length-1].length+1}}function p(t){return t.startIndex+t[1].length}},1192:(t,e,i)=>{"use strict";const n=i(2592),r={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function o(t){this.options=Object.assign({},r,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=l),this.processTextOrObjNode=s,this.options.format?(this.indentate=a,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function s(t,e,i){const n=this.j2x(t,i+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,i):this.buildObjectNode(n.val,e,n.attrStr,i)}function a(t){return this.options.indentBy.repeat(t)}function l(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}o.prototype.build=function(t){return this.options.preserveOrder?n(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)},o.prototype.j2x=function(t,e){let i="",n="";for(let r in t)if(void 0===t[r]);else if(null===t[r])"?"===r[0]?n+=this.indentate(e)+"<"+r+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+r+"/"+this.tagEndChar;else if(t[r]instanceof Date)n+=this.buildTextValNode(t[r],r,"",e);else if("object"!=typeof t[r]){const o=this.isAttribute(r);if(o)i+=this.buildAttrPairStr(o,""+t[r]);else if(r===this.options.textNodeName){let e=this.options.tagValueProcessor(r,""+t[r]);n+=this.replaceEntitiesValue(e)}else n+=this.buildTextValNode(t[r],r,"",e)}else if(Array.isArray(t[r])){const i=t[r].length;let o="";for(let s=0;s<i;s++){const i=t[r][s];void 0===i||(null===i?"?"===r[0]?n+=this.indentate(e)+"<"+r+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+r+"/"+this.tagEndChar:"object"==typeof i?this.options.oneListGroup?o+=this.j2x(i,e+1).val:o+=this.processTextOrObjNode(i,r,e):o+=this.buildTextValNode(i,r,"",e))}this.options.oneListGroup&&(o=this.buildObjectNode(o,r,"",e)),n+=o}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const e=Object.keys(t[r]),n=e.length;for(let o=0;o<n;o++)i+=this.buildAttrPairStr(e[o],""+t[r][e[o]])}else n+=this.processTextOrObjNode(t[r],r,e);return{attrStr:i,val:n}},o.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'},o.prototype.buildObjectNode=function(t,e,i,n){if(""===t)return"?"===e[0]?this.indentate(n)+"<"+e+i+"?"+this.tagEndChar:this.indentate(n)+"<"+e+i+this.closeTag(e)+this.tagEndChar;{let r="</"+e+this.tagEndChar,o="";return"?"===e[0]&&(o="?",r=""),i&&-1===t.indexOf("<")?this.indentate(n)+"<"+e+i+o+">"+t+r:!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===o.length?this.indentate(n)+`\x3c!--${t}--\x3e`+this.newLine:this.indentate(n)+"<"+e+i+o+this.tagEndChar+t+this.indentate(n)+r}},o.prototype.closeTag=function(t){let e="";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":`></${t}`,e},o.prototype.buildTextValNode=function(t,e,i,n){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(n)+`\x3c!--${t}--\x3e`+this.newLine;if("?"===e[0])return this.indentate(n)+"<"+e+i+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(e,t);return r=this.replaceEntitiesValue(r),""===r?this.indentate(n)+"<"+e+i+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+i+">"+r+"</"+e+this.tagEndChar}},o.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const i=this.options.entities[e];t=t.replace(i.regex,i.val)}return t},t.exports=o},2592:t=>{function e(t,s,a,l){let c="",u=!1;for(let h=0;h<t.length;h++){const d=t[h],A=i(d);let f="";if(f=0===a.length?A:`${a}.${A}`,A===s.textNodeName){let t=d[A];r(f,s)||(t=s.tagValueProcessor(A,t),t=o(t,s)),u&&(c+=l),c+=t,u=!1;continue}if(A===s.cdataPropName){u&&(c+=l),c+=`<![CDATA[${d[A][0][s.textNodeName]}]]>`,u=!1;continue}if(A===s.commentPropName){c+=l+`\x3c!--${d[A][0][s.textNodeName]}--\x3e`,u=!0;continue}if("?"===A[0]){const t=n(d[":@"],s),e="?xml"===A?"":l;let i=d[A][0][s.textNodeName];i=0!==i.length?" "+i:"",c+=e+`<${A}${i}${t}?>`,u=!0;continue}let p=l;""!==p&&(p+=s.indentBy);const g=l+`<${A}${n(d[":@"],s)}`,m=e(d[A],s,f,p);-1!==s.unpairedTags.indexOf(A)?s.suppressUnpairedNode?c+=g+">":c+=g+"/>":m&&0!==m.length||!s.suppressEmptyNode?m&&m.endsWith(">")?c+=g+`>${m}${l}</${A}>`:(c+=g+">",m&&""!==l&&(m.includes("/>")||m.includes("</"))?c+=l+s.indentBy+m+l:c+=m,c+=`</${A}>`):c+=g+"/>",u=!0}return c}function i(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const i=e[t];if(":@"!==i)return i}}function n(t,e){let i="";if(t&&!e.ignoreAttributes)for(let n in t){let r=e.attributeValueProcessor(n,t[n]);r=o(r,e),!0===r&&e.suppressBooleanAttributes?i+=` ${n.substr(e.attributeNamePrefix.length)}`:i+=` ${n.substr(e.attributeNamePrefix.length)}="${r}"`}return i}function r(t,e){let i=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+i)return!0;return!1}function o(t,e){if(t&&t.length>0&&e.processEntities)for(let i=0;i<e.entities.length;i++){const n=e.entities[i];t=t.replace(n.regex,n.val)}return t}t.exports=function(t,i){let n="";return i.format&&i.indentBy.length>0&&(n="\n"),e(t,i,"",n)}},4780:t=>{function e(t,e){let i="";for(;e<t.length&&"'"!==t[e]&&'"'!==t[e];e++)i+=t[e];if(i=i.trim(),-1!==i.indexOf(" "))throw new Error("External entites are not supported");const n=t[e++];let r="";for(;e<t.length&&t[e]!==n;e++)r+=t[e];return[i,r,e]}function i(t,e){return"!"===t[e+1]&&"-"===t[e+2]&&"-"===t[e+3]}function n(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7]}function r(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8]}function o(t,e){return"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8]}function s(t,e){return"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9]}t.exports=function(t,a){const l={};if("O"!==t[a+3]||"C"!==t[a+4]||"T"!==t[a+5]||"Y"!==t[a+6]||"P"!==t[a+7]||"E"!==t[a+8])throw new Error("Invalid Tag instead of DOCTYPE");{a+=9;let c=1,u=!1,h=!1,d="";for(;a<t.length;a++)if("<"!==t[a]||h)if(">"===t[a]){if(h?"-"===t[a-1]&&"-"===t[a-2]&&(h=!1,c--):c--,0===c)break}else"["===t[a]?u=!0:d+=t[a];else{if(u&&n(t,a))a+=7,[entityName,val,a]=e(t,a+1),-1===val.indexOf("&")&&(l[entityName]={regx:RegExp(`&${entityName};`,"g"),val});else if(u&&r(t,a))a+=8;else if(u&&o(t,a))a+=8;else if(u&&s(t,a))a+=9;else{if(!i)throw new Error("Invalid DOCTYPE");h=!0}c++,d=""}if(0!==c)throw new Error("Unclosed DOCTYPE")}return{entities:l,i:a}}},6745:(t,e)=>{const i={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,i){return t}};e.buildOptions=function(t){return Object.assign({},i,t)},e.defaultOptions=i},1078:(t,e,i)=>{"use strict";const n=i(7849),r=i(6311),o=i(4780),s=i(4153);function a(t){const e=Object.keys(t);for(let i=0;i<e.length;i++){const n=e[i];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function l(t,e,i,n,r,o,s){if(void 0!==t&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));const n=this.options.tagValueProcessor(e,t,i,r,o);return null==n?t:typeof n!=typeof t||n!==t?n:this.options.trimValues||t.trim()===t?b(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function c(t){if(this.options.removeNSPrefix){const e=t.split(":"),i="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=i+e[1])}return t}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,n.nameRegexp);const u=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function h(t,e,i){if(!this.options.ignoreAttributes&&"string"==typeof t){const i=n.getAllMatches(t,u),r=i.length,o={};for(let t=0;t<r;t++){const n=this.resolveNameSpace(i[t][1]);let r=i[t][4],s=this.options.attributeNamePrefix+n;if(n.length)if(this.options.transformAttributeName&&(s=this.options.transformAttributeName(s)),"__proto__"===s&&(s="#__proto__"),void 0!==r){this.options.trimValues&&(r=r.trim()),r=this.replaceEntitiesValue(r);const t=this.options.attributeValueProcessor(n,r,e);o[s]=null==t?r:typeof t!=typeof r||t!==r?t:b(r,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[s]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const t={};return t[this.options.attributesGroupName]=o,t}return o}}const d=function(t){t=t.replace(/\r\n?/g,"\n");const e=new r("!xml");let i=e,n="",s="";for(let a=0;a<t.length;a++)if("<"===t[a])if("/"===t[a+1]){const e=m(t,">",a,"Closing Tag is not closed.");let r=t.substring(a+2,e).trim();if(this.options.removeNSPrefix){const t=r.indexOf(":");-1!==t&&(r=r.substr(t+1))}this.options.transformTagName&&(r=this.options.transformTagName(r)),i&&(n=this.saveTextToParentTag(n,i,s));const o=s.substring(s.lastIndexOf(".")+1);if(r&&-1!==this.options.unpairedTags.indexOf(r))throw new Error(`Unpaired tag can not be used as closing tag: </${r}>`);let l=0;o&&-1!==this.options.unpairedTags.indexOf(o)?(l=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=s.lastIndexOf("."),s=s.substring(0,l),i=this.tagsNodeStack.pop(),n="",a=e}else if("?"===t[a+1]){let e=v(t,a,!1,"?>");if(!e)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,i,s),this.options.ignoreDeclaration&&"?xml"===e.tagName||this.options.ignorePiTags);else{const t=new r(e.tagName);t.add(this.options.textNodeName,""),e.tagName!==e.tagExp&&e.attrExpPresent&&(t[":@"]=this.buildAttributesMap(e.tagExp,s,e.tagName)),this.addChild(i,t,s)}a=e.closeIndex+1}else if("!--"===t.substr(a+1,3)){const e=m(t,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){const r=t.substring(a+4,e-2);n=this.saveTextToParentTag(n,i,s),i.add(this.options.commentPropName,[{[this.options.textNodeName]:r}])}a=e}else if("!D"===t.substr(a+1,2)){const e=o(t,a);this.docTypeEntities=e.entities,a=e.i}else if("!["===t.substr(a+1,2)){const e=m(t,"]]>",a,"CDATA is not closed.")-2,r=t.substring(a+9,e);if(n=this.saveTextToParentTag(n,i,s),this.options.cdataPropName)i.add(this.options.cdataPropName,[{[this.options.textNodeName]:r}]);else{let t=this.parseTextData(r,i.tagname,s,!0,!1,!0);null==t&&(t=""),i.add(this.options.textNodeName,t)}a=e+2}else{let o=v(t,a,this.options.removeNSPrefix),l=o.tagName,c=o.tagExp,u=o.attrExpPresent,h=o.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),i&&n&&"!xml"!==i.tagname&&(n=this.saveTextToParentTag(n,i,s,!1));const d=i;if(d&&-1!==this.options.unpairedTags.indexOf(d.tagname)&&(i=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),l!==e.tagname&&(s+=s?"."+l:l),this.isItStopNode(this.options.stopNodes,s,l)){let e="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)a=o.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))a=o.closeIndex;else{const i=this.readStopNodeData(t,l,h+1);if(!i)throw new Error(`Unexpected end of ${l}`);a=i.i,e=i.tagContent}const n=new r(l);l!==c&&u&&(n[":@"]=this.buildAttributesMap(c,s,l)),e&&(e=this.parseTextData(e,l,s,!0,u,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),n.add(this.options.textNodeName,e),this.addChild(i,n,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),c=l):c=c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const t=new r(l);l!==c&&u&&(t[":@"]=this.buildAttributesMap(c,s,l)),this.addChild(i,t,s),s=s.substr(0,s.lastIndexOf("."))}else{const t=new r(l);this.tagsNodeStack.push(i),l!==c&&u&&(t[":@"]=this.buildAttributesMap(c,s,l)),this.addChild(i,t,s),i=t}n="",a=h}}else n+=t[a];return e.child};function A(t,e,i){const n=this.options.updateTag(e.tagname,i,e[":@"]);!1===n||("string"==typeof n?(e.tagname=n,t.addChild(e)):t.addChild(e))}const f=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const i=this.docTypeEntities[e];t=t.replace(i.regx,i.val)}for(let e in this.lastEntities){const i=this.lastEntities[e];t=t.replace(i.regex,i.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const i=this.htmlEntities[e];t=t.replace(i.regex,i.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function p(t,e,i,n){return t&&(void 0===n&&(n=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,i,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,n))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function g(t,e,i){const n="*."+i;for(const i in t){const r=t[i];if(n===r||e===r)return!0}return!1}function m(t,e,i,n){const r=t.indexOf(e,i);if(-1===r)throw new Error(n);return r+e.length-1}function v(t,e,i,n=">"){const r=function(t,e,i=">"){let n,r="";for(let o=e;o<t.length;o++){let e=t[o];if(n)e===n&&(n="");else if('"'===e||"'"===e)n=e;else if(e===i[0]){if(!i[1])return{data:r,index:o};if(t[o+1]===i[1])return{data:r,index:o}}else"\t"===e&&(e=" ");r+=e}}(t,e+1,n);if(!r)return;let o=r.data;const s=r.index,a=o.search(/\s/);let l=o,c=!0;if(-1!==a&&(l=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),i){const t=l.indexOf(":");-1!==t&&(l=l.substr(t+1),c=l!==r.data.substr(t+1))}return{tagName:l,tagExp:o,closeIndex:s,attrExpPresent:c}}function y(t,e,i){const n=i;let r=1;for(;i<t.length;i++)if("<"===t[i])if("/"===t[i+1]){const o=m(t,">",i,`${e} is not closed`);if(t.substring(i+2,o).trim()===e&&(r--,0===r))return{tagContent:t.substring(n,i),i:o};i=o}else if("?"===t[i+1])i=m(t,"?>",i+1,"StopNode is not closed.");else if("!--"===t.substr(i+1,3))i=m(t,"--\x3e",i+3,"StopNode is not closed.");else if("!["===t.substr(i+1,2))i=m(t,"]]>",i,"StopNode is not closed.")-2;else{const n=v(t,i,">");n&&((n&&n.tagName)===e&&"/"!==n.tagExp[n.tagExp.length-1]&&r++,i=n.closeIndex)}}function b(t,e,i){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&s(t,i)}return n.isExist(t)?t:""}t.exports=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=a,this.parseXml=d,this.parseTextData=l,this.resolveNameSpace=c,this.buildAttributesMap=h,this.isItStopNode=g,this.replaceEntitiesValue=f,this.readStopNodeData=y,this.saveTextToParentTag=p,this.addChild=A}}},8844:(t,e,i)=>{const{buildOptions:n}=i(6745),r=i(1078),{prettify:o}=i(6997),s=i(8501);t.exports=class{constructor(t){this.externalEntities={},this.options=n(t)}parse(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});const i=s.validate(t,e);if(!0!==i)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const i=new r(this.options);i.addExternalEntities(this.externalEntities);const n=i.parseXml(t);return this.options.preserveOrder||void 0===n?n:o(n,this.options)}addEntity(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}}},6997:(t,e)=>{"use strict";function i(t,e,s){let a;const l={};for(let c=0;c<t.length;c++){const u=t[c],h=n(u);let d="";if(d=void 0===s?h:s+"."+h,h===e.textNodeName)void 0===a?a=u[h]:a+=""+u[h];else{if(void 0===h)continue;if(u[h]){let t=i(u[h],e,d);const n=o(t,e);u[":@"]?r(t,u[":@"],d,e):1!==Object.keys(t).length||void 0===t[e.textNodeName]||e.alwaysCreateTextNode?0===Object.keys(t).length&&(e.alwaysCreateTextNode?t[e.textNodeName]="":t=""):t=t[e.textNodeName],void 0!==l[h]&&l.hasOwnProperty(h)?(Array.isArray(l[h])||(l[h]=[l[h]]),l[h].push(t)):e.isArray(h,d,n)?l[h]=[t]:l[h]=t}}}return"string"==typeof a?a.length>0&&(l[e.textNodeName]=a):void 0!==a&&(l[e.textNodeName]=a),l}function n(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const i=e[t];if(":@"!==i)return i}}function r(t,e,i,n){if(e){const r=Object.keys(e),o=r.length;for(let s=0;s<o;s++){const o=r[s];n.isArray(o,i+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function o(t,e){const{textNodeName:i}=e,n=Object.keys(t).length;return 0===n||!(1!==n||!t[i]&&"boolean"!=typeof t[i]&&0!==t[i])}e.prettify=function(t,e){return i(t,e)}},6311:t=>{"use strict";t.exports=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}},9685:(t,e,i)=>{"use strict";i.d(e,{Ib:()=>n,WT:()=>r});var n=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array;Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},5975:(t,e,i)=>{"use strict";i.d(e,{G3:()=>m,GH:()=>s,Iu:()=>l,Jp:()=>a,M5:()=>v,Q$:()=>f,U1:()=>u,U_:()=>o,bA:()=>c,en:()=>p,jI:()=>A,lM:()=>h,oy:()=>g,p4:()=>r,uD:()=>d,zB:()=>y});var n=i(9685);function r(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function o(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],A=e[11],f=e[12],p=e[13],g=e[14],m=e[15],v=i*a-n*s,y=i*l-r*s,b=i*c-o*s,_=n*l-r*a,w=n*c-o*a,x=r*c-o*l,C=u*p-h*f,E=u*g-d*f,k=u*m-A*f,T=h*g-d*p,B=h*m-A*p,S=d*m-A*g,P=v*S-y*B+b*T+_*k-w*E+x*C;return P?(P=1/P,t[0]=(a*S-l*B+c*T)*P,t[1]=(r*B-n*S-o*T)*P,t[2]=(p*x-g*w+m*_)*P,t[3]=(d*w-h*x-A*_)*P,t[4]=(l*k-s*S-c*E)*P,t[5]=(i*S-r*k+o*E)*P,t[6]=(g*b-f*x-m*y)*P,t[7]=(u*x-d*b+A*y)*P,t[8]=(s*B-a*k+c*C)*P,t[9]=(n*k-i*B-o*C)*P,t[10]=(f*w-p*b+m*v)*P,t[11]=(h*b-u*w-A*v)*P,t[12]=(a*E-s*T-l*C)*P,t[13]=(i*T-n*E+r*C)*P,t[14]=(p*y-f*_-g*v)*P,t[15]=(u*_-h*y+d*v)*P,t):null}function s(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],A=t[12],f=t[13],p=t[14],g=t[15];return(e*s-i*o)*(h*g-d*p)-(e*a-n*o)*(u*g-d*f)+(e*l-r*o)*(u*p-h*f)+(i*a-n*s)*(c*g-d*A)-(i*l-r*s)*(c*p-h*A)+(n*l-r*a)*(c*f-u*A)}function a(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],A=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=i[0],b=i[1],_=i[2],w=i[3];return t[0]=y*n+b*a+_*h+w*p,t[1]=y*r+b*l+_*d+w*g,t[2]=y*o+b*c+_*A+w*m,t[3]=y*s+b*u+_*f+w*v,y=i[4],b=i[5],_=i[6],w=i[7],t[4]=y*n+b*a+_*h+w*p,t[5]=y*r+b*l+_*d+w*g,t[6]=y*o+b*c+_*A+w*m,t[7]=y*s+b*u+_*f+w*v,y=i[8],b=i[9],_=i[10],w=i[11],t[8]=y*n+b*a+_*h+w*p,t[9]=y*r+b*l+_*d+w*g,t[10]=y*o+b*c+_*A+w*m,t[11]=y*s+b*u+_*f+w*v,y=i[12],b=i[13],_=i[14],w=i[15],t[12]=y*n+b*a+_*h+w*p,t[13]=y*r+b*l+_*d+w*g,t[14]=y*o+b*c+_*A+w*m,t[15]=y*s+b*u+_*f+w*v,t}function l(t,e,i){var n,r,o,s,a,l,c,u,h,d,A,f,p=i[0],g=i[1],m=i[2];return e===t?(t[12]=e[0]*p+e[4]*g+e[8]*m+e[12],t[13]=e[1]*p+e[5]*g+e[9]*m+e[13],t[14]=e[2]*p+e[6]*g+e[10]*m+e[14],t[15]=e[3]*p+e[7]*g+e[11]*m+e[15]):(n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],A=e[10],f=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=A,t[11]=f,t[12]=n*p+a*g+h*m+e[12],t[13]=r*p+l*g+d*m+e[13],t[14]=o*p+c*g+A*m+e[14],t[15]=s*p+u*g+f*m+e[15]),t}function c(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,i,r){var o,s,a,l,c,u,h,d,A,f,p,g,m,v,y,b,_,w,x,C,E,k,T,B,S=r[0],P=r[1],M=r[2],I=Math.hypot(S,P,M);return I<n.Ib?null:(S*=I=1/I,P*=I,M*=I,o=Math.sin(i),a=1-(s=Math.cos(i)),l=e[0],c=e[1],u=e[2],h=e[3],d=e[4],A=e[5],f=e[6],p=e[7],g=e[8],m=e[9],v=e[10],y=e[11],b=S*S*a+s,_=P*S*a+M*o,w=M*S*a-P*o,x=S*P*a-M*o,C=P*P*a+s,E=M*P*a+S*o,k=S*M*a+P*o,T=P*M*a-S*o,B=M*M*a+s,t[0]=l*b+d*_+g*w,t[1]=c*b+A*_+m*w,t[2]=u*b+f*_+v*w,t[3]=h*b+p*_+y*w,t[4]=l*x+d*C+g*E,t[5]=c*x+A*C+m*E,t[6]=u*x+f*C+v*E,t[7]=h*x+p*C+y*E,t[8]=l*k+d*T+g*B,t[9]=c*k+A*T+m*B,t[10]=u*k+f*T+v*B,t[11]=h*k+p*T+y*B,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function h(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*n,t[5]=s*r+u*n,t[6]=a*r+h*n,t[7]=l*r+d*n,t[8]=c*r-o*n,t[9]=u*r-s*n,t[10]=h*r-a*n,t[11]=d*r-l*n,t}function d(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*n,t[1]=s*r-u*n,t[2]=a*r-h*n,t[3]=l*r-d*n,t[8]=o*n+c*r,t[9]=s*n+u*r,t[10]=a*n+h*r,t[11]=l*n+d*r,t}function A(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*n,t[1]=s*r+u*n,t[2]=a*r+h*n,t[3]=l*r+d*n,t[4]=c*r-o*n,t[5]=u*r-s*n,t[6]=h*r-a*n,t[7]=d*r-l*n,t}function f(t,e){var i=e[0],n=e[1],r=e[2],o=e[4],s=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(i,n,r),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(l,c,u),t}function p(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i+i,a=n+n,l=r+r,c=i*s,u=n*s,h=n*a,d=r*s,A=r*a,f=r*l,p=o*s,g=o*a,m=o*l;return t[0]=1-h-f,t[1]=u+m,t[2]=d-g,t[3]=0,t[4]=u-m,t[5]=1-c-f,t[6]=A+p,t[7]=0,t[8]=d+g,t[9]=A-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e,i,n,r,o,s){var a=1/(i-e),l=1/(r-n),c=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+n)*l,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0,t}var m=function(t,e,i,n,r){var o,s=1/Math.tan(e/2);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t},v=function(t,e,i,n,r,o,s){var a=1/(e-i),l=1/(n-r),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(r+n)*l,t[14]=(s+o)*c,t[15]=1,t};function y(t,e,i,r){var o,s,a,l,c,u,h,d,A,f,p=e[0],g=e[1],m=e[2],v=r[0],y=r[1],b=r[2],_=i[0],w=i[1],x=i[2];return Math.abs(p-_)<n.Ib&&Math.abs(g-w)<n.Ib&&Math.abs(m-x)<n.Ib?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(h=p-_,d=g-w,A=m-x,o=y*(A*=f=1/Math.hypot(h,d,A))-b*(d*=f),s=b*(h*=f)-v*A,a=v*d-y*h,(f=Math.hypot(o,s,a))?(o*=f=1/f,s*=f,a*=f):(o=0,s=0,a=0),l=d*a-A*s,c=A*o-h*a,u=h*s-d*o,(f=Math.hypot(l,c,u))?(l*=f=1/f,c*=f,u*=f):(l=0,c=0,u=0),t[0]=o,t[1]=l,t[2]=h,t[3]=0,t[4]=s,t[5]=c,t[6]=d,t[7]=0,t[8]=a,t[9]=u,t[10]=A,t[11]=0,t[12]=-(o*p+s*g+a*m),t[13]=-(l*p+c*g+u*m),t[14]=-(h*p+d*g+A*m),t[15]=1,t)}},1437:(t,e,i)=>{"use strict";i.d(e,{IH:()=>r,bA:()=>o,c:()=>c,fF:()=>d,iu:()=>u,kE:()=>s,kK:()=>h,lu:()=>f,t7:()=>l,tk:()=>a});var n=i(9685);function r(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function o(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function s(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function a(t,e){return t[0]=-e[0],t[1]=-e[1],t}function l(t,e,i,n){var r=e[0],o=e[1];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t}function c(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t}function u(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}function h(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t}function d(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t}var A,f=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t};A=new n.WT(2),n.WT!=Float32Array&&(A[0]=0,A[1]=0)},7160:(t,e,i)=>{"use strict";i.d(e,{AK:()=>c,EU:()=>v,Fv:()=>l,TK:()=>b,Ue:()=>r,VC:()=>f,Zh:()=>_,al:()=>s,fF:()=>d,jI:()=>m,kC:()=>u,kE:()=>o,kK:()=>A,lM:()=>p,lu:()=>y,t7:()=>h,tk:()=>a,uD:()=>g,x9:()=>w});var n=i(9685);function r(){var t=new n.WT(3);return n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],i=t[1],n=t[2];return Math.hypot(e,i,n)}function s(t,e,i){var r=new n.WT(3);return r[0]=t,r[1]=e,r[2]=i,r}function a(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function l(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function c(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function u(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2];return t[0]=r*l-o*a,t[1]=o*s-n*l,t[2]=n*a-r*s,t}function h(t,e,i,n){var r=e[0],o=e[1],s=e[2];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t[2]=s+n*(i[2]-s),t}function d(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[3]*n+i[7]*r+i[11]*o+i[15];return s=s||1,t[0]=(i[0]*n+i[4]*r+i[8]*o+i[12])/s,t[1]=(i[1]*n+i[5]*r+i[9]*o+i[13])/s,t[2]=(i[2]*n+i[6]*r+i[10]*o+i[14])/s,t}function A(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t}function f(t,e,i){var n=i[0],r=i[1],o=i[2],s=i[3],a=e[0],l=e[1],c=e[2],u=r*c-o*l,h=o*a-n*c,d=n*l-r*a,A=r*d-o*h,f=o*u-n*d,p=n*h-r*u,g=2*s;return u*=g,h*=g,d*=g,A*=2,f*=2,p*=2,t[0]=a+u+A,t[1]=l+h+f,t[2]=c+d+p,t}function p(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t}function g(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t}function m(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t}function v(t,e){var i=t[0],n=t[1],r=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(i*i+n*n+r*r)*Math.sqrt(o*o+s*s+a*a),u=l&&c(t,e)/l;return Math.acos(Math.min(Math.max(u,-1),1))}var y=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},b=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.hypot(i,n,r)},_=o,w=function(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n};r()},8333:(t,e,i)=>{"use strict";i.d(e,{AK:()=>f,Fv:()=>A,I6:()=>v,IH:()=>c,JG:()=>a,VC:()=>m,al:()=>s,bA:()=>u,d9:()=>o,fF:()=>g,fS:()=>y,kE:()=>h,t7:()=>p,t8:()=>l,we:()=>d});var n,r=i(9685);function o(t){var e=new r.WT(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e,i,n){var o=new r.WT(4);return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function l(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function c(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function u(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function h(t){var e=t[0],i=t[1],n=t[2],r=t[3];return Math.hypot(e,i,n,r)}function d(t){var e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r}function A(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=i*s,t[1]=n*s,t[2]=r*s,t[3]=o*s,t}function f(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function p(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t[2]=s+n*(i[2]-s),t[3]=a+n*(i[3]-a),t}function g(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*s,t}function m(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2],c=i[3],u=c*n+a*o-l*r,h=c*r+l*n-s*o,d=c*o+s*r-a*n,A=-s*n-a*r-l*o;return t[0]=u*c+A*-s+h*-l-d*-a,t[1]=h*c+A*-a+d*-s-u*-l,t[2]=d*c+A*-l+u*-a-h*-s,t[3]=e[3],t}function v(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function y(t,e){var i=t[0],n=t[1],o=t[2],s=t[3],a=e[0],l=e[1],c=e[2],u=e[3];return Math.abs(i-a)<=r.Ib*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=r.Ib*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.Ib*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-u)<=r.Ib*Math.max(1,Math.abs(s),Math.abs(u))}n=new r.WT(4),r.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)},840:(t,e,i)=>{var n;!function(r,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,d=Math.abs,A=Date.now;function f(t,e,i){return setTimeout(_(t,i),e)}function p(t,e,i){return!!Array.isArray(t)&&(g(t,i[e],i),!0)}function g(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function m(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var v=m((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),y=m((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function b(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&l(n,i)}function _(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function x(t,e){return t===a?e:t}function C(t,e,i){g(B(e),(function(e){t.addEventListener(e,i,!1)}))}function E(t,e,i){g(B(e),(function(e){t.removeEventListener(e,i,!1)}))}function k(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function B(t){return t.trim().split(/\s+/g)}function S(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function M(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];S(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function I(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((n=(i=c[o])?i+r:e)in t)return n;o++}return a}var O=1;function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var L="ontouchstart"in r,F=I(r,"PointerEvent")!==a,R=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N="touch",z="mouse",j=["x","y"],U=["clientX","clientY"];function Z(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&i.handler(e)},this.init()}function H(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r==0,s=12&e&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=G(e)),r>1&&!i.firstMultiple?i.firstMultiple=G(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,l=s?s.center:o.center,c=e.center=V(n);e.timeStamp=A(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Y(l,c),e.distance=Q(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=q(e.deltaX,e.deltaY);var u,h,f=W(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x,e.overallVelocityY=f.y,e.overallVelocity=d(f.x)>d(f.y)?f.x:f.y,e.scale=s?(u=s.pointers,Q((h=n)[0],h[1],U)/Q(u[0],u[1],U)):1,e.rotation=s?function(t,e){return Y(e[1],e[0],U)+Y(t[1],t[0],U)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=W(l,c,u);n=h.x,r=h.y,i=d(h.x)>d(h.y)?h.x:h.y,o=q(c,u),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var p=t.element;k(e.srcEvent.target,p)&&(p=e.srcEvent.target),e.target=p}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function G(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:h(t.pointers[i].clientX),clientY:h(t.pointers[i].clientY)},i++;return{timeStamp:A(),pointers:e,center:V(e),deltaX:t.deltaX,deltaY:t.deltaY}}function V(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:h(i/e),y:h(n/e)}}function W(t,e,i){return{x:e/t||0,y:i/t||0}}function q(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function Q(t,e,i){i||(i=j);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function Y(t,e,i){i||(i=j);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(D(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4},J="mousedown",K="mousemove mouseup";function $(){this.evEl=J,this.evWin=K,this.pressed=!1,Z.apply(this,arguments)}b($,Z,{handler:function(t){var e=X[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:z,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:N,3:"pen",4:z,5:"kinect"},it="pointerdown",nt="pointermove pointerup pointercancel";function rt(){this.evEl=it,this.evWin=nt,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(it="MSPointerDown",nt="MSPointerMove MSPointerUp MSPointerCancel"),b(rt,Z,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=tt[n],o=et[t.pointerType]||t.pointerType,s=o==N,a=S(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",at="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=st,this.evWin=at,this.started=!1,Z.apply(this,arguments)}function ct(t,e){var i=P(t.touches),n=P(t.changedTouches);return 12&e&&(i=M(i.concat(n),"identifier",!0)),[i,n]}b(lt,Z,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var i=ct.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:N,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=ht,this.targetIds={},Z.apply(this,arguments)}function At(t,e){var i=P(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=P(t.changedTouches),a=[],l=this.target;if(o=i.filter((function(t){return k(t.target,l)})),1===e)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),12&e&&delete n[s[r].identifier],r++;return a.length?[M(o.concat(a),"identifier",!0),a]:void 0}function ft(){Z.apply(this,arguments);var t=_(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new $(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function pt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function mt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=25&&s<=25)return!0}return!1}b(dt,Z,{handler:function(t){var e=ut[t.type],i=At.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:N,srcEvent:t})}}),b(ft,Z,{handler:function(t,e,i){var n=i.pointerType==N,r=i.pointerType==z;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)pt.call(this,e,i);else if(r&&mt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=I(u.style,"touchAction"),yt=vt!==a,bt="compute",_t="auto",wt="manipulation",xt="none",Ct="pan-x",Et="pan-y",kt=function(){if(!yt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||r.CSS.supports("touch-action",i)})),t}();function Tt(t,e){this.manager=t,this.set(e)}Tt.prototype={set:function(t){t==bt&&(t=this.compute()),yt&&this.manager.element.style&&kt[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,xt))return xt;var e=T(t,Ct),i=T(t,Et);return e&&i?xt:e||i?e?Ct:Et:T(t,wt)?wt:_t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=T(n,xt)&&!kt.none,o=T(n,Et)&&!kt["pan-y"],s=T(n,Ct)&&!kt["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&6&i||s&&24&i?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Bt=32;function St(t){this.options=l({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Mt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function It(t,e){var i=e.manager;return i?i.get(t):t}function Ot(){St.apply(this,arguments)}function Dt(){Ot.apply(this,arguments),this.pX=null,this.pY=null}function Lt(){Ot.apply(this,arguments)}function Ft(){St.apply(this,arguments),this._timer=null,this._input=null}function Rt(){Ot.apply(this,arguments)}function Nt(){Ot.apply(this,arguments)}function zt(){St.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function jt(t,e){return(e=e||{}).recognizers=x(e.recognizers,jt.defaults.preset),new Ut(t,e)}function Ut(t,e){this.options=l({},jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(F?rt:R?dt:L?ft:$))(this,H),this.touchAction=new Tt(this,this.options.touchAction),Zt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Zt(t,e){var i,n=t.element;n.style&&(g(t.options.cssProps,(function(r,o){i=I(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}St.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(p(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=It(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return p(t,"dropRecognizeWith",this)||(t=It(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(p(t,"requireFailure",this))return this;var e=this.requireFail;return-1===S(e,t=It(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(p(t,"dropRequireFailure",this))return this;t=It(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Pt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Pt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Bt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Bt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(Ot,St,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:Bt}}),b(Dt,Ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Et),24&t&&e.push(Ct),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?1:s<0?8:16,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ot.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Mt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Lt,Ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Ft,St,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_t]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Bt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=A(),this.manager.emit(this.options.event,this._input)))}}),b(Rt,Ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(Nt,Ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Dt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:24&i&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Mt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(zt,St,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||Q(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Bt},failTimeout:function(){return this._timer=f((function(){this.state=Bt}),this.options.interval,this),Bt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),jt.VERSION="2.0.7",jt.defaults={domEvents:!1,touchAction:bt,enable:!0,inputTarget:null,inputClass:null,preset:[[Rt,{enable:!1}],[Lt,{enable:!1},["rotate"]],[Nt,{direction:6}],[Dt,{direction:6},["swipe"]],[zt],[zt,{event:"doubletap",taps:2},["tap"]],[Ft]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ut.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof St)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(p(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(p(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=S(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return g(B(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return g(B(t),(function(t){e?i[t]&&i[t].splice(S(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&Zt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(jt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Bt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ut,Input:Z,TouchAction:Tt,TouchInput:dt,MouseInput:$,PointerEventInput:rt,TouchMouseInput:ft,SingleTouchInput:lt,Recognizer:St,AttrRecognizer:Ot,Tap:zt,Pan:Dt,Swipe:Nt,Pinch:Lt,Rotate:Rt,Press:Ft,on:C,off:E,each:g,merge:y,extend:v,assign:l,inherit:b,bindFn:_,prefixed:I}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=jt,(n=function(){return jt}.call(e,i,e,t))===a||(t.exports=n)}(window,document)},645:(t,e)=>{e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?r-1:0,d=i?-1:1,A=t[e+h];for(h+=d,o=A&(1<<-u)-1,A>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(A?-1:1);s+=Math.pow(2,n),o-=c}return(A?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:o-1,f=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[i+A]=255&a,A+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[i+A]=255&s,A+=f,s/=256,c-=8);t[i+A-f]|=128*p}},2555:(t,e,i)=>{var n,r,o;r=[i(9755)],n=function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,i,n=0,r=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){var n,r,o;for(o=0;null!=(r=i[o]);o++)try{(n=t._data(r,"events"))&&n.remove&&t(r).triggerHandler("remove")}catch(t){}e(i)}),t.widget=function(e,i,n){var r,o,s,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr.pseudos[c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},r=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(s=new i).options=t.widget.extend({},s.options),t.each(n,(function(e,n){t.isFunction(n)?a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function r(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}():a[e]=n})),o.prototype=t.widget.extend(s,{widgetEventPrefix:r&&s.widgetEventPrefix||e},a,{constructor:o,namespace:l,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)})),delete r._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,n,o=r.call(arguments,1),s=0,a=o.length;s<a;s++)for(i in o[s])n=o[s][i],o[s].hasOwnProperty(i)&&void 0!==n&&(t.isPlainObject(n)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):e[i]=n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var s="string"==typeof o,a=r.call(arguments,1),l=this;return s?this.length||"instance"!==o?this.each((function(){var i,r=t.data(this,n);return"instance"===o?(l=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,a))!==r&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each((function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,r,o,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(r=s[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)r[n[o]]=r[n[o]]||{},r=r[n[o]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,r;for(i in e)r=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&r&&r.length&&(n=t(r.get()),this._removeClass(r,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function r(r,o){var s,a;for(a=0;a<r.length;a++)s=n.classesElementLookup[r[a]]||t(),s=e.add?t(t.uniqueSort(s.get().concat(e.element.get()))):t(s.not(e.element).get()),n.classesElementLookup[r[a]]=s,i.push(r[a]),o&&e.classes[r[a]]&&i.push(e.classes[r[a]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,r){-1!==t.inArray(e.target,r)&&(i.classesElementLookup[n]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof t||null===t,o={extra:r?e:i,keys:r?t:e,element:r?this.element:t,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(e,i,n){var r,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,(function(n,s){function a(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.on(c,u,a):i.on(c,a)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var r,o,s=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(t.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,r,o){var s;"string"==typeof r&&(r={effect:r});var a=r?!0===r||"number"==typeof r?i:r.effect||i:e;"number"==typeof(r=r||{})&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),s&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,o):n.queue((function(i){t(this)[e](),o&&o.call(n[0]),i()}))}})),t.widget,function(){var e,i=Math.max,n=Math.abs,r=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function u(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function h(e,i){return parseInt(t.css(e,i),10)||0}function d(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var i,n,r=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return t("body").append(r),i=o.offsetWidth,r.css("overflow","scroll"),i===(n=o.offsetWidth)&&(n=r[0].clientWidth),r.remove(),e=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),r=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:r,offset:n||r?{left:0,top:0}:t(e).offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var l,A,f,p,g,m,v=t(e.of),y=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(y),_=(e.collision||"flip").split(" "),w={};return m=d(v),v[0].preventDefault&&(e.at="left top"),A=m.width,f=m.height,p=m.offset,g=t.extend({},p),t.each(["my","at"],(function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=r.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=r.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=s.exec(n[0]),i=s.exec(n[1]),w[this]=[t?t[0]:0,i?i[0]:0],e[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]})),1===_.length&&(_[1]=_[0]),"right"===e.at[0]?g.left+=A:"center"===e.at[0]&&(g.left+=A/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),l=u(w.at,A,f),g.left+=l[0],g.top+=l[1],this.each((function(){var r,o,s=t(this),a=s.outerWidth(),c=s.outerHeight(),d=h(this,"marginLeft"),m=h(this,"marginTop"),x=a+d+h(this,"marginRight")+b.width,C=c+m+h(this,"marginBottom")+b.height,E=t.extend({},g),k=u(w.my,s.outerWidth(),s.outerHeight());"right"===e.my[0]?E.left-=a:"center"===e.my[0]&&(E.left-=a/2),"bottom"===e.my[1]?E.top-=c:"center"===e.my[1]&&(E.top-=c/2),E.left+=k[0],E.top+=k[1],r={marginLeft:d,marginTop:m},t.each(["left","top"],(function(i,n){t.ui.position[_[i]]&&t.ui.position[_[i]][n](E,{targetWidth:A,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:r,collisionWidth:x,collisionHeight:C,offset:[l[0]+k[0],l[1]+k[1]],my:e.my,at:e.at,within:y,elem:s})})),e.using&&(o=function(t){var r=p.left-E.left,o=r+A-a,l=p.top-E.top,u=l+f-c,h={target:{element:v,left:p.left,top:p.top,width:A,height:f},element:{element:s,left:E.left,top:E.top,width:a,height:c},horizontal:o<0?"left":r>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};A<a&&n(r+o)<A&&(h.horizontal="center"),f<c&&n(l+u)<f&&(h.vertical="middle"),i(n(r),n(o))>i(n(l),n(u))?h.important="horizontal":h.important="vertical",e.using.call(this,t,h)}),s.offset(t.extend(E,{using:o}))}))},t.ui.position={fit:{left:function(t,e){var n,r=e.within,o=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,c=a+e.collisionWidth-s-o;e.collisionWidth>s?l>0&&c<=0?(n=t.left+l+e.collisionWidth-s-o,t.left+=l-n):t.left=c>0&&l<=0?o:l>c?o+s-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=i(t.left-a,t.left)},top:function(t,e){var n,r=e.within,o=r.isWindow?r.scrollTop:r.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,c=a+e.collisionHeight-s-o;e.collisionHeight>s?l>0&&c<=0?(n=t.top+l+e.collisionHeight-s-o,t.top+=l-n):t.top=c>0&&l<=0?o:l>c?o+s-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=i(t.top-a,t.top)}},flip:{left:function(t,e){var i,r,o=e.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,A="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((i=t.left+d+A+f+e.collisionWidth-a-s)<0||i<n(u))&&(t.left+=d+A+f):h>0&&((r=t.left-e.collisionPosition.marginLeft+d+A+f-l)>0||n(r)<h)&&(t.left+=d+A+f)},top:function(t,e){var i,r,o=e.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,A="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((r=t.top+d+A+f+e.collisionHeight-a-s)<0||r<n(u))&&(t.top+=d+A+f):h>0&&((i=t.top-e.collisionPosition.marginTop+d+A+f-l)>0||n(i)<h)&&(t.top+=d+A+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr.pseudos,{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,n){return!!t.data(e,n[3])}}),t.fn.extend({disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(e,i){var n,r,o,s,a,l=e.nodeName.toLowerCase();return"area"===l?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(o=t("img[usemap='#"+r+"']")).length>0&&o.is(":visible")):(/^(input|select|textarea|button|object)$/.test(l)?(s=!e.disabled)&&(a=t(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===l&&e.href||i,s&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(t(e)))},t.extend(t.expr.pseudos,{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var i=e.data("ui-form-reset-instances");t.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],(function(e,i){var n="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function s(e,i,r,o){return t.each(n,(function(){i-=parseFloat(t.css(e,"padding"+this))||0,r&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)})),i}t.fn["inner"+i]=function(e){return void 0===e?o["inner"+i].call(this):this.each((function(){t(this).css(r,s(this,e)+"px")}))},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each((function(){t(this).css(r,s(this,e,!0,n)+"px")}))}})),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=(s=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(s,"\\$1")}),t.fn.labels=function(){var e,i,n,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),(n=this.attr("id"))&&(o=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(n)+"']",r=r.add(o.find(i).addBack(i))),this.pushStack(r))},t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var e=t(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr.pseudos,{tabbable:function(e){var i=t.attr(e,"tabindex"),n=null!=i;return(!n||i>=0)&&t.ui.focusable(e,n)}}),t.fn.extend({uniqueId:(o=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++o)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var o,s,a=!1;t(document).on("mouseup",(function(){a=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!a){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!r&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),a=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,a=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,n){var r,o=t.ui[e].prototype;for(r in n)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([i,n[r]])},call:function(t,e,i,n){var r,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),r=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,r=this.options,o=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(n=(i=t(r.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=r.containment:this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var r=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,r))}))},stop:function(e,i,n){var r=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,(function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))}))},drag:function(e,i,n){t.each(n.sortables,(function(){var r=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(r=!1),r}))),r?(o.isOver||(o.isOver=1,n._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",e),n.dropped=o.element,t.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var r=t("body"),o=n.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,i,n){var r=n.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var r=t(i.helper),o=n.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,i,n){var r=n.options;r._opacity&&t(i.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var r=n.options,o=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+s.offsetHeight-e.pageY<r.scrollSensitivity?s.scrollTop=o=s.scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(s.scrollTop=o=s.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+s.offsetWidth-e.pageX<r.scrollSensitivity?s.scrollLeft=o=s.scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(s.scrollLeft=o=s.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(a).scrollTop()<r.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<r.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(a).scrollLeft()<r.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<r.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+r.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var r=n.options;n.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,n){var r,o,s,a,l,c,u,h,d,A,f=n.options,p=f.snapTolerance,g=i.offset.left,m=g+n.helperProportions.width,v=i.offset.top,y=v+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)c=(l=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,h=(u=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,m<l-p||g>c+p||y<u-p||v>h+p||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(u-y)<=p,o=Math.abs(h-v)<=p,s=Math.abs(l-m)<=p,a=Math.abs(c-g)<=p,r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),A=r||o||s||a,"outer"!==f.snapMode&&(r=Math.abs(u-v)<=p,o=Math.abs(h-y)<=p,s=Math.abs(l-g)<=p,a=Math.abs(c-m)<=p,r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(r||o||s||a||A)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=r||o||s||a||A)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var r,o=n.options,s=t.makeArray(t(o.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));s.length&&(r=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each((function(e){t(this).css("zIndex",r+e)})),this.css("zIndex",r+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var r=t(i.helper),o=n.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,i,n){var r=n.options;r._zIndex&&t(i.helper).css("zIndex",r._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&l(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return r=!0,!1})),!r&&!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var l=t.ui.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,n,r){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,a=o+e.helperProportions.width,l=s+e.helperProportions.height,c=i.offset.left,u=i.offset.top,h=c+i.proportions().width,d=u+i.proportions().height;switch(n){case"fit":return c<=o&&a<=h&&u<=s&&l<=d;case"intersect":return c<o+e.helperProportions.width/2&&a-e.helperProportions.width/2<h&&u<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(r.pageY,u,i.proportions().height)&&t(r.pageX,c,i.proportions().width);case"touch":return(s>=u&&s<=d||l>=u&&l<=d||s<u&&l>d)&&(o>=c&&o<=h||a>=c&&a<=h||o<c&&a>h);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,r,o=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(r=0;r<a.length;r++)if(a[r]===o[n].element[0]){o[n].proportions().height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===s&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&l(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),n},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",(function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}))},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,o,s=l(e,this,this.options.tolerance,i),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter((function(){return t(this).droppable("instance").options.scope===r}))).length&&((n=t(o[0]).droppable("instance")).greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}}))},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return e[n]>0||(e[n]=1,r=e[n]>0,e[n]=0,r)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())})).on("mouseleave",(function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){this._super(t,e),"handles"===t&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var e,i,n,r,o,s=this.options,a=this;if(this.handles=s.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)r="ui-resizable-"+(e=t.trim(n[i])),o=t("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:s.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,n,r,o;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(r,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")})),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,r=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var i,n,r,o=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,r=this.originalMousePosition,o=this.axis,s=e.pageX-r.left||0,a=e.pageY-r.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,s,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,r,o,s,a,l,c=this.options,u=this;return this._helper&&(r=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,o=n?0:u.sizeDiff.width,s={width:u.helper.width()-o,height:u.helper.height()-r},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,r,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),i<o.maxWidth&&(o.maxWidth=i),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),o&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),r&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(r[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&t(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,r,o,s,a,l=t(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,d=h instanceof t?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(l.containerElement=t(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,n){i[t]=l._num(e.css("padding"+n))})),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,r=l.containerSize.height,o=l.containerSize.width,s=l._hasScroll(d,"left")?d.scrollWidth:o,a=l._hasScroll(d)?d.scrollHeight:r,l.parentData={element:d,left:n.left,top:n.top,width:s,height:a}))},resize:function(e){var i,n,r,o,s=t(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||e.shiftKey,h={top:0,left:0},d=s.containerElement,A=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),u&&(s.size.height=s.size.width/s.aspectRatio,A=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,A=!1),s.position.top=s._helper?l.top:0),r=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),r&&o?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-h.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-h.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,u&&(s.size.height=s.size.width/s.aspectRatio,A=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,u&&(s.size.width=s.size.height*s.aspectRatio,A=!1)),A||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,r=e.containerPosition,o=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var n=t(this).resizable("instance"),r=n.options,o=n.originalSize,s=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};t(r.alsoResize).each((function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),r={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,(function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(r[e]=i||null)})),e.css(r)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,r=i.size,o=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,h=Math.round((r.width-o.width)/c)*c,d=Math.round((r.height-o.height)/u)*u,A=o.width+h,f=o.height+d,p=n.maxWidth&&n.maxWidth<A,g=n.maxHeight&&n.maxHeight<f,m=n.minWidth&&n.minWidth>A,v=n.minHeight&&n.minHeight>f;n.grid=l,m&&(A+=c),v&&(f+=u),p&&(A-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(i.size.width=A,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=A,i.size.height=f,i.position.top=s.top-d):/^(sw)$/.test(a)?(i.size.width=A,i.size.height=f,i.position.left=s.left-h):((f-u<=0||A-c<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=s.top-d):(f=u-e.height,i.size.height=f,i.position.top=s.top+o.height-f),A-c>0?(i.size.width=A,i.position.left=s.left-h):(A=c-e.width,i.size.width=A,i.position.left=s.left+o.width-A))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each((function(){var i=t(this),n=i.offset(),r={left:n.left-e.elementPos.left,top:n.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:r.left,top:r.top,right:r.left+i.outerWidth(),bottom:r.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))})),t(e.target).parents().addBack().each((function(){var n,r=t.data(this,"selectable-item");if(r)return n=!e.metaKey&&!e.ctrlKey||!r.$element.hasClass("ui-selected"),i._removeClass(r.$element,n?"ui-unselecting":"ui-selected")._addClass(r.$element,n?"ui-selecting":"ui-unselecting"),r.unselecting=!n,r.selecting=n,r.selected=n,n?i._trigger("selecting",e,{selecting:r.element}):i._trigger("unselecting",e,{unselecting:r.element}),!1})))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,r=this.options,o=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return o>a&&(i=a,a=o,o=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:o,top:s,width:a-o,height:l-s}),this.selectees.each((function(){var i=t.data(this,"selectable-item"),c=!1,u={};i&&i.element!==n.element[0]&&(u.left=i.left+n.elementPos.left,u.right=i.right+n.elementPos.left,u.top=i.top+n.elementPos.top,u.bottom=i.bottom+n.elementPos.top,"touch"===r.tolerance?c=!(u.left>a||u.right<o||u.top>l||u.bottom<s):"fit"===r.tolerance&&(c=u.left>o&&u.right<a&&u.top>s&&u.bottom<l),c?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))})),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each((function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})})),t(".ui-selecting",this.element[0]).each((function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})})),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,(function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,r=!1,o=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),t(e.target).parents().each((function(){if(t.data(this,o.widgetName+"-item")===o)return n=t(this),!1})),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),!n||this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each((function(){this===e.target&&(r=!0)})),!r)||(this.currentItem=n,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,i,n){var r,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(r=(n=this.items[i]).item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===r||t.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,(function(){n._clear(e)}))}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each((function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))})),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each((function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")})),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||n+c>a&&n+c<l,d="y"===this.options.axis||e+u>o&&e+u<s,A=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?A:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!n||!r)&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,r,o,s=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(n=(r=t(l[i],this.document[0])).length-1;n>=0;n--)(o=t.data(r[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function c(){s.push(this)}for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(c);return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,(function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0}))},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,r,o,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=(r=t(d[i],this.document[0])).length-1;n>=0;n--)(o=t.data(r[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(h.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=h.length-1;i>=0;i--)for(s=h[i][1],n=0,c=(a=h[i][0]).length;n<c;n++)(l=t(a[n])).data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var i,n,r,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=r.outerWidth(),n.height=r.outerHeight()),o=r.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+n+">",e.document[0]);return e._addClass(r,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(r,"ui-sortable-helper"),"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(r)):"tr"===n?e._createTrPlaceholder(e.currentItem,r):"img"===n&&r.attr("src",e.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(t,r){i&&!n.forcePlaceholderSize||(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each((function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(e){var i,n,r,o,s,a,l,c,u,h,d=null,A=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],A=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[A].containerCache.over||(this.containers[A]._trigger("over",e,this._uiHash(this)),this.containers[A].containerCache.over=1);else{for(r=1e4,o=null,s=(u=d.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",h=u?"pageX":"pageY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[A].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,e[h]-l>this.items[n][a]/2&&(c=!0),Math.abs(e[h]-l)<r&&(r=Math.abs(e[h]-l),o=this.items[n],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[A])return void(this.currentContainer.containerCache.over||(this.containers[A]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[A].element,!0),this._trigger("change",e,this._uiHash()),this.containers[A]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[A],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[A]._trigger("over",e,this._uiHash(this)),this.containers[A].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],i=t(r.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(e){var i,n,r=this.options,o=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){r===this.counter&&this.refreshPositions(!n)}))},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function r(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}for(this.fromOutside&&!e&&n.push((function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push((function(t){this._trigger("update",t,this._uiHash())})),this!==this.currentContainer&&(e||(n.push((function(t){this._trigger("remove",t,this._uiHash())})),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(r("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(r("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,n=this.options.icons;n&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+n.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())):this._activate(e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,r=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),t(o).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,n=i.heightStyle,r=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var e=t(this),i=e.uniqueId().attr("id"),n=e.next(),r=n.uniqueId().attr("id");e.attr("aria-controls",r),n.attr("aria-labelledby",i)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(e=r.height(),this.element.siblings(":visible").each((function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))})),this.headers.each((function(){e-=t(this).outerHeight(!0)})),this.headers.next().each((function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each((function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()})).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,n,r=this.options,o=this.active,s=t(e.currentTarget),a=s[0]===o[0],l=a&&r.collapsible,c=l?t():s.next(),u=o.next(),h={oldHeader:o,oldPanel:u,newHeader:l?t():s,newPanel:c};e.preventDefault(),a&&!r.collapsible||!1===this._trigger("beforeActivate",e,h)||(r.active=!l&&this.headers.index(s),this.active=a?t():s,this._toggle(h),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),r.icons&&(i=o.children(".ui-accordion-header-icon"),this._removeClass(i,null,r.icons.activeHeader)._addClass(i,null,r.icons.header)),a||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),r.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,r.icons.header)._addClass(n,null,r.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter((function(){return 0===parseInt(t(this).attr("tabIndex"),10)})).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var n,r,o,s=this,a=0,l=t.css("box-sizing"),c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},h=c&&u.down||u,d=function(){s._toggleComplete(i)};return"number"==typeof h&&(o=h),"string"==typeof h&&(r=h),r=r||h.easing||u.easing,o=o||h.duration||u.duration,e.length?t.length?(n=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:r,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(a+=i.now):"content"!==s.options.heightStyle&&(i.now=Math.round(n-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,o,r,d):t.animate(this.showProps,o,r,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),n=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),n=t(e.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay((function(){!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,n,r,o,s=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:s=!1,n=this.previousFilter||"",o=!1,r=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),r===n?o=!0:r=n+r,i=this._filterMenuItems(r),(i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(e.keyCode),i=this._filterMenuItems(r)),i.length?(this.focus(e,i),this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}s&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,n,r,o=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);o._addClass(n,"ui-menu-icon","ui-icon "+s),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);o._isDivider(e)&&o._addClass(e,"ui-menu-divider","ui-widget-content")})),r=(n=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,r;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,r,o,s,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.outerHeight(),r<0?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n}),this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,r;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-n-r<0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,n,r;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-n+r>0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))}))}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,s="input"===r;this.isMultiLine=o||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[o||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case o.UP:e=!0,this._keyEvent("previous",r);break;case o.DOWN:e=!0,this._keyEvent("next",r);break;case o.ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var r=t.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(e,i){var n,r;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));r=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),(n=i.item.attr("aria-label")||r.value)&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(e,i){var n=i.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=r,this._delay((function(){this.previous=r,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,r){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||i||n)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy((function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,(function(t,i){n._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return n.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var c,u,h=/ui-corner-([a-z]){2,6}/g;function d(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=A(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function A(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,f)}function f(){t.datepicker._isDisabledDatepicker(c.inline?c.dpDiv.parent()[0]:c.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function p(e,i){for(var n in t.extend(e,i),i)null==i[n]&&(e[n]=i[n]);return e}function g(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,(function(n,r){var o,s={};if(r)return"controlgroupLabel"===n?((o=e.element.find(r)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(o.get()))):void(t.fn[n]&&(s=e["_"+n+"Options"]?e["_"+n+"Options"]("middle"):{classes:{}},e.element.find(r).each((function(){var r=t(this),o=r[n]("instance"),a=t.widget.extend({},s);if("button"!==n||!r.parent(".ui-spinner").length){o||(o=r[n]()[n]("instance")),o&&(a.classes=e._resolveClassesValues(a.classes,o)),r[n](a);var l=r[n]("widget");t.data(l[0],"ui-controlgroup-data",o||r[n]("instance")),i.push(l[0])}}))))})),this.childWidgets=t(t.uniqueSort(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()}))},_updateCornerClass:function(t,e){var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var n={};return t.each(e,(function(r){var o=i.options.classes[r]||"";o=t.trim(o.replace(h,"")),n[r]=(o+" "+e[r]).replace(/\s+/g," ")})),n},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,n){var r=e[n]().data("ui-controlgroup-data");if(r&&i["_"+r.widgetName+"Options"]){var o=i["_"+r.widgetName+"Options"](1===e.length?"only":n);o.classes=i._resolveClassesValues(o.classes,r),r.element[r.widgetName](o)}else i._updateCornerClass(e[n](),n)})),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,n=this,r=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){n.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(r.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(r.disabled=e),r},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.ui.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter((function(){return 0===t(this).form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var n="iconPosition"!==e,r=n?this.options.iconPosition:i,o="top"===r||"bottom"===r;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(r),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}}),t.extend(d.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return p(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,r,o;r="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(o=this._newInst(t(e),r)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):r&&this._inlineDatepicker(e,o)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?A(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,r,o,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[a?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||e.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(r=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:r,title:r}):r)),e[a?"before":"after"](i.trigger),i.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,r,o=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(i=0,n=0,r=0;r<t.length;r++)t[r].length>i&&(i=t[r].length,n=r);return n},o.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,r,o){var s,a,l,c,u,h=this._dialogInst;return h||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",h)),p(h.settings,r||{}),i=i&&i.constructor===Date?this._formatDate(h,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+c,l/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(e){var i,n=t(e),r=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty(),c===r&&(c=null))},_enableDatepicker:function(e){var i,n,r=t(e),o=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,n,r=t(e),o=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var r,o,s,a,l=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null;r=i||{},"string"==typeof i&&((r={})[i]=n),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(l,"min"),a=this._getMinMaxDate(l,"max"),p(l.settings,r),null!==s&&void 0!==r.dateFormat&&void 0===r.minDate&&(l.settings.minDate=this._formatDate(l,s)),null!==a&&void 0!==r.dateFormat&&void 0===r.maxDate&&(l.settings.maxDate=this._formatDate(l,a)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,r,o=t.datepicker._getInst(e.target),s=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return(r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv))[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,r[0]),(i=t.datepicker._get(o,"onSelect"))?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,r=t.datepicker._getInst(e.target);if(t.datepicker._get(r,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,n,r,o,s,a,l;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(r=(n=t.datepicker._get(i,"beforeShow"))?n.apply(e,[e,i]):{})&&(p(i.settings,r),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each((function(){return!(o|="fixed"===t(this).css("position"))})),s={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),s=t.datepicker._checkOffset(i,s,o),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),i.inline||(a=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[a]?i.dpDiv.show(a,t.datepicker._get(i,"showOptions"),l):i.dpDiv[a||"show"](a?l:null),t.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),t.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,c=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,n=this._getNumberOfMonths(e),r=n[1],o=e.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&f.apply(o.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null}),0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var r=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?r-s:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),r=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.pseudos.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,n,r,o,s=this._curInst;!s||e&&s!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(s,"showAnim"),n=this._get(s,"duration"),r=function(){t.datepicker._tidyDialog(s)},t.effects&&(t.effects.effect[i]||t.effects[i])?s.dpDiv.hide(i,t.datepicker._get(s,"showOptions"),n,r):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1,(o=this._get(s,"onClose"))&&o.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===n)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var r=t(e),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var r=t(e),o=this._getInst(r[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(e,i,n,r){var o,s=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((o=this._getInst(s[0])).selectedDay=o.currentDay=t("a",r).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,r=t(e),o=this._getInst(r[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,n,r,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),r=this.formatDate(i,n,this._getFormatConfig(e)),t(o).val(r))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var r,o,s,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,A=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,p=-1,g=-1,m=-1,v=-1,y=!1,b=function(t){var i=r+1<e.length&&e.charAt(r+1)===t;return i&&r++,i},_=function(t){var e=b(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),o=i.substring(l).match(r);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},w=function(e,n,r){var o=-1,s=t.map(b(e)?r:n,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(s,(function(t,e){var n=e[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return o=e[0],l+=n.length,!1})),-1!==o)return o+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==e.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<e.length;r++)if(y)"'"!==e.charAt(r)||b("'")?x():y=!1;else switch(e.charAt(r)){case"d":m=_("d");break;case"D":w("D",h,d);break;case"o":v=_("o");break;case"m":g=_("m");break;case"M":g=w("M",A,f);break;case"y":p=_("y");break;case"@":p=(a=new Date(_("@"))).getFullYear(),g=a.getMonth()+1,m=a.getDate();break;case"!":p=(a=new Date((_("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,m=a.getDate();break;case"'":b("'")?x():y=!0;break;default:x()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),v>-1)for(g=1,m=v;!(m<=(o=this._getDaysInMonth(p,g-1)));)g++,m-=o;if((a=this._daylightSavingAdjust(new Date(p,g-1,m))).getFullYear()!==p||a.getMonth()+1!==g||a.getDate()!==m)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},u=function(t,e,i,n){return l(t)?n[e]:i[e]},h="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||l("'")?h+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":h+=c("d",e.getDate(),2);break;case"D":h+=u("D",e.getDay(),r,o);break;case"o":h+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",e.getMonth()+1,2);break;case"M":h+=u("M",e.getMonth(),s,a);break;case"y":h+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=t.charAt(n)}return h},_possibleChars:function(t){var e,i="",n=!1,r=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||r("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),o=r,s=this._getFormatConfig(t);try{o=this.parseDate(i,n,s)||r}catch(t){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var r=null==i||""===i?n:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=n.getFullYear(),o=n.getMonth(),s=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(r,o))}l=a.exec(i)}return new Date(r,o,s)}(i):"number"==typeof i?isNaN(i)?n:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(r=r&&"Invalid Date"===r.toString()?n:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,r=t.selectedMonth,o=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),r===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,n,r,o,s,a,l,c,u,h,d,A,f,p,g,m,v,y,b,_,w,x,C,E,k,T,B,S,P,M,I,O,D,L,F,R,N,z,j=new Date,U=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Z=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),G=this._get(t,"hideIfNoPrevNext"),V=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Q=this._get(t,"stepMonths"),Y=1!==W[0]||1!==W[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),K=this._getMinMaxDate(t,"max"),$=t.drawMonth-q,tt=t.drawYear;if($<0&&($+=12,tt--),K)for(e=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-W[0]*W[1]+1,K.getDate())),e=J&&e<J?J:e;this._daylightSavingAdjust(new Date(tt,$,1))>e;)--$<0&&($=11,tt--);for(t.drawMonth=$,t.drawYear=tt,i=this._get(t,"prevText"),i=V?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,$-Q,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,$)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"e":"w")+"'>"+i+"</span></a>":G?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"e":"w")+"'>"+i+"</span></a>",r=this._get(t,"nextText"),r=V?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,$+Q,1)),this._getFormatConfig(t)):r,o=this._canAdjustMonth(t,1,tt,$)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"w":"e")+"'>"+r+"</span></a>":G?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"w":"e")+"'>"+r+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?X:U,s=V?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Z?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(Z?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),A=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),p=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),m=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),b="",w=0;w<W[0];w++){for(x="",this.maxRows=4,C=0;C<W[1];C++){if(E=this._daylightSavingAdjust(new Date(tt,$,t.selectedDay)),k=" ui-corner-all",T="",Y){if(T+="<div class='ui-datepicker-group",W[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",k=" ui-corner-"+(Z?"right":"left");break;case W[1]-1:T+=" ui-datepicker-group-last",k=" ui-corner-"+(Z?"left":"right");break;default:T+=" ui-datepicker-group-middle",k=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+k+"'>"+(/all|left/.test(k)&&0===w?Z?o:n:"")+(/all|right/.test(k)&&0===w?Z?n:o:"")+this._generateMonthYearHeader(t,$,tt,J,K,w>0||C>0,f,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",B=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)B+="<th scope='col'"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[S=(_+u)%7]+"'>"+A[S]+"</span></th>";for(T+=B+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,$),tt===t.selectedYear&&$===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),M=(this._getFirstDayOfMonth(tt,$)-u+7)%7,I=Math.ceil((M+P)/7),O=Y&&this.maxRows>I?this.maxRows:I,this.maxRows=O,D=this._daylightSavingAdjust(new Date(tt,$,1-M)),L=0;L<O;L++){for(T+="<tr>",F=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(D)+"</td>":"",_=0;_<7;_++)R=g?g.apply(t.input?t.input[0]:null,[D]):[!0,""],z=(N=D.getMonth()!==$)&&!v||!R[0]||J&&D<J||K&&D>K,F+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(N?" ui-datepicker-other-month":"")+(D.getTime()===E.getTime()&&$===t.selectedMonth&&t._keyEvent||y.getTime()===D.getTime()&&y.getTime()===E.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(N&&!m?"":" "+R[1]+(D.getTime()===X.getTime()?" "+this._currentClass:"")+(D.getTime()===U.getTime()?" ui-datepicker-today":""))+"'"+(N&&!m||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(N&&!m?"&#xa0;":z?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===U.getTime()?" ui-state-highlight":"")+(D.getTime()===X.getTime()?" ui-state-active":"")+(N?" ui-priority-secondary":"")+"' href='#'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);T+=F+"</tr>"}++$>11&&($=0,tt++),x+=T+="</tbody></table>"+(Y?"</div>"+(W[0]>0&&C===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=x}return b+=c,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,i,n,r,o,s,a){var l,c,u,h,d,A,f,p,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(o||!g)b+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=r&&r.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=n.getMonth())&&(!c||u<=r.getMonth())&&(b+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");b+="</select>"}if(v||(y+=b+(!o&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!m)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),A=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=A(h[0]),p=Math.max(f,A(h[1]||"")),f=n?Math.max(f,n.getFullYear()):f,p=r?Math.min(p,r.getFullYear()):p,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=p;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),v&&(y+=(!o&&g&&m?"":"&#xa0;")+b),y+"</div>"},_adjustInstDate:function(t,e,i){var n=t.selectedYear+("Y"===i?e:0),r=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,r))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,r,o)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),r=i&&e<i?i:e;return n&&r>n?n:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var r=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(e<0?e:r[0]*r[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,r=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!r||e.getTime()>=r.getTime())&&(!o||e.getTime()<=o.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)})):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new d,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get(),o=Math.max.apply(null,r);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),r=i.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){r.trigger("focus")})),e.preventDefault()):(this._delay((function(){n.trigger("focus")})),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,(function(i,n){var r,o;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),r=n.click,o={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,t("<button></button>",n).button(o).appendTo(e.uiButtonSet).on("click",(function(){r.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function n(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,n(r))},drag:function(t,i){e._trigger("drag",t,n(i))},stop:function(r,o){var s=o.offset.left-e.document.scrollLeft(),a=o.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",r,n(o))}})},_makeResizable:function(){var e=this,i=this.options,n=i.resizable,r=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function s(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(i,n){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,s(n))},resize:function(t,i){e._trigger("resize",t,s(i))},stop:function(n,r){var o=e.uiDialog.offset(),a=o.left-e.document.scrollLeft(),l=o.top-e.document.scrollTop();i.height=e.uiDialog.height(),i.width=e.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",n,s(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,r={};t.each(e,(function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(r[t]=e)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,i){var n,r,o=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((n=o.is(":data(ui-draggable)"))&&!i&&o.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((r=o.is(":data(ui-resizable)"))&&!i&&o.resizable("destroy"),r&&"string"==typeof i&&o.resizable("option","handles",i),r||!1===i||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay((function(){e=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){i._rendered||i._refreshMenu()}))},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var n=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&n.index!==e.focusIndex&&(e._trigger("focus",t,{item:n}),e.isOpen||e._select(n,t)),e.focusIndex=n.index,e.button.attr("aria-activedescendant",e.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t("<span>");return this._setText(i,e.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(e,i){var n=this,r="";t.each(i,(function(i,o){var s;o.optgroup!==r&&(s=t("<li>",{text:o.optgroup}),n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),s.appendTo(e),r=o.optgroup),n._renderItemData(e,o)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var n=t("<li>"),r=t("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(r,i.label),n.append(r).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,n,r=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),(n="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](r).eq(-1):i[t+"All"](r).eq(0)).length&&this.menuInstance.focus(e,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;!1!==t?(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var i=this,n=[];e.each((function(e,r){n.push(i._parseOption(t(r),e))})),this.items=n},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,r=this.element.find(".ui-slider-handle"),o=[];for(i=n.values&&n.values.length||1,r.length>i&&(r.slice(i).remove(),r=r.slice(0,i)),e=r.length;e<i;e++)o.push("<span tabindex='0'></span>");this.handles=r.add(t(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,r,o,s,a,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var i=Math.abs(n-c.values(e));(r>i||r===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(r=i,o=t(this),s=e)})),!1!==this._start(e,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),a=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-o.width()/2,top:e.pageY-a.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),o=this._valueMin()+n*r,this._trimAlignValue(o)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,r=this.value(),o=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),o[e]=i),i!==r&&!1!==this._trigger("slide",t,this._uiHash(e,i,o))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,r,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,r=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,r=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=r-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,r,o,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i})):(n=this.value(),r=this._valueMin(),o=this._valueMax(),i=o!==r?(n-r)/(o-r)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,n,r,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,o)))return}switch(r=this.options.step,i=n=this._hasMultipleValues()?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-r)}this._slide(e,o,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],(function(t,n){var r=i.attr(n);null!=r&&r.length&&(e[n]=r)})),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(t)}),100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){var i;function n(){this.element[0]===t.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=i,this._delay((function(){this.previous=i})))}i=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,n.call(this)})),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,e,i)}),t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return i=t-(e=null!==n.min?n.min:0),t=e+(i=Math.round(i/n.step)*n.step),t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,n,r;if("culture"===t||"numberFormat"===t)return i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,e.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:g((function(t){this._super(t)})),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:g((function(t){this._stepUp(t)})),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:g((function(t){this._stepDown(t)})),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:g((function(t){this._stepUp((t||1)*this.options.page)})),pageDown:g((function(t){this._stepDown((t||1)*this.options.page)})),value:function(t){if(!arguments.length)return this._parse(this.element.val());g(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==t.uiBackCompat&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),t.ui.spinner,t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(u=/#.*$/,function(t){var e,i;e=t.href.replace(u,""),i=location.href.replace(u,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return t.hash.length>1&&e===i}),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),(function(t){return e.tabs.index(t)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each((function(i,r){if(t(r).attr("aria-controls")===n)return e=i,!1})),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),!i&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),r=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:r=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,r),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){var n=this.tabs.length-1;for(;-1!==t.inArray((e>n&&(e=0),e<0&&(e=n),e),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),(function(t){return i.index(t)})),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,n=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return t("a",this)[0]})).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each((function(i,n){var r,o,s,a=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");e._isLocal(n)?(s=(r=n.hash).substring(1),o=e.element.find(e._sanitizeSelector(r))):(r="#"+(s=l.attr("aria-controls")||t({}).uniqueId()[0].id),(o=e.element.find(r)).length||(o=e._createPanel(s)).insertAfter(e.panels[i-1]||e.tablist),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":s,"aria-labelledby":a}),o.attr("aria-labelledby",a)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,n,r;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),r=0;n=this.tabs[r];r++)i=t(n),!0===e||-1!==t.inArray(r,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=t(this).outerHeight(!0)})),this.panels.each((function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each((function(){i=Math.max(i,t(this).height("").height())})).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,r=t(e.currentTarget).closest("li"),o=r[0]===n[0],s=o&&i.collapsible,a=s?t():this._getPanelForTab(r),l=n.length?this._getPanelForTab(n):t(),c={oldTab:n,oldPanel:l,newTab:s?t():r,newPanel:a};e.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",e,c)||(i.active=!s&&this.tabs.index(r),this.active=o?t():r,this.xhr&&this.xhr.abort(),l.length||a.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(r),e),this._toggle(e,c))},_toggle:function(e,i){var n=this,r=i.newPanel,o=i.oldPanel;function s(){n.running=!1,n._trigger("activate",e,i)}function a(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),r.length&&n.options.show?n._show(r,n.options.show,s):(r.show(),s())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,(function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()})):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),a()),o.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&o.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter((function(){return 0===t(this).attr("tabIndex")})).attr("tabIndex",-1),r.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;!1!==i&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,(function(t){return t!==e?t:null})):t.map(this.tabs,(function(t,i){return i!==e?i:null}))),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(!0!==i){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var n=this,r=this.tabs.eq(e),o=r.find(".ui-tabs-anchor"),s=this._getPanelForTab(r),a={tab:r,panel:s},l=function(t,e){"abort"===e&&n.panels.stop(!1,!0),n._removeClass(r,"ui-tabs-loading"),s.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(r,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done((function(t,e,r){setTimeout((function(){s.html(t),n._trigger("load",i,a),l(r,e)}),1)})).fail((function(t,e){setTimeout((function(){l(t,e)}),1)}))))},_ajaxSettings:function(e,i,n){var r=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,o){return r._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==t.uiBackCompat&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs,t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),r=t.inArray(i,n);-1!==r&&n.splice(r,1),e.removeData("ui-tooltip-id"),(n=t.trim(n.join(" ")))?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var n=this;this._super(e,i),"content"===e&&t.each(this.tooltips,(function(t,e){n._updateContent(e.element)}))},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,(function(i,n){var r=t.Event("blur");r.target=r.currentTarget=n.element[0],e.close(r,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})),this.disabledTitles=t([])},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each((function(){var e,n=t(this);n.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))})),this._registerCloseHandlers(e,n),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,r=this,o=e?e.type:null;if("string"==typeof n||n.nodeType||n.jquery)return this._open(e,t,n);(i=n.call(t[0],(function(i){r._delay((function(){t.data("ui-tooltip-open")&&(e&&(e.type=o),this._open(e,t,i))}))})))&&this._open(e,t,i)},_open:function(e,i,n){var r,o,s,a,l=t.extend({},this.options.position);function c(t){l.of=t,o.is(":hidden")||o.position(l)}n&&((r=this._find(i))?r.tooltip.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),r=this._tooltip(i),o=r.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(a=t("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:c}),c(e)):o.position(t.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval((function(){o.is(":visible")&&(c(l.of),clearInterval(s))}),t.fx.interval)),this._trigger("open",e,{tooltip:o})))},_registerCloseHandlers:function(e,i){var n={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(n.mouseleave="close"),e&&"focusin"!==e.type||(n.focusout="close"),this._on(!0,i,n)},close:function(e){var i,n=this,r=t(e?e.currentTarget:this.element),o=this._find(r);o?(i=o.tooltip,o.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){n._removeTooltip(t(this))})),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,(function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]})),o.closing=!0,this._trigger("close",e,{tooltip:i}),o.hiding||(o.closing=!1))):r.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),n=t("<div>").appendTo(i),r=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[r]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,(function(i,n){var r=t.Event("blur"),o=n.element;r.target=r.currentTarget=o[0],e.close(r,!0),t("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var m,v="ui-effects-",y="ui-effects-style",b="ui-effects-animated",_=t;t.effects={effect:{}},function(t,e){var i,n=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],o=t.Color=function(e,i,n,r){return new t.Color.fn.parse(e,i,n,r)},s={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=o.support={},c=t("<p>")[0],u=t.each;function h(t,e,i){var n=a[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function d(e){var n=o(),a=n._rgba=[];return e=e.toLowerCase(),u(r,(function(t,i){var r,o=i.re.exec(e),l=o&&i.parse(o),c=i.space||"rgba";if(l)return r=n[c](l),n[s[c].cache]=r[s[c].cache],a=n._rgba=r._rgba,!1})),a.length?("0,0,0,0"===a.join()&&t.extend(a,i.transparent),n):i[e]}function A(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}c.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=c.style.backgroundColor.indexOf("rgba")>-1,u(s,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),o.fn=t.extend(o.prototype,{parse:function(n,r,a,l){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(r),r=e);var c=this,A=t.type(n),f=this._rgba=[];return r!==e&&(n=[n,r,a,l],A="array"),"string"===A?this.parse(d(n)||i._default):"array"===A?(u(s.rgba.props,(function(t,e){f[e.idx]=h(n[e.idx],e)})),this):"object"===A?(u(s,n instanceof o?function(t,e){n[e.cache]&&(c[e.cache]=n[e.cache].slice())}:function(e,i){var r=i.cache;u(i.props,(function(t,e){if(!c[r]&&i.to){if("alpha"===t||null==n[t])return;c[r]=i.to(c._rgba)}c[r][e.idx]=h(n[t],e,!0)})),c[r]&&t.inArray(null,c[r].slice(0,3))<0&&(c[r][3]=1,i.from&&(c._rgba=i.from(c[r])))}),this):void 0},is:function(t){var e=o(t),i=!0,n=this;return u(s,(function(t,r){var o,s=e[r.cache];return s&&(o=n[r.cache]||r.to&&r.to(n._rgba)||[],u(r.props,(function(t,e){if(null!=s[e.idx])return i=s[e.idx]===o[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return u(s,(function(i,n){e[n.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var i=o(t),n=i._space(),r=s[n],l=0===this.alpha()?o("transparent"):this,c=l[r.cache]||r.to(l._rgba),d=c.slice();return i=i[r.cache],u(r.props,(function(t,n){var r=n.idx,o=c[r],s=i[r],l=a[n.type]||{};null!==s&&(null===o?d[r]=s:(l.mod&&(s-o>l.mod/2?o+=l.mod:o-s>l.mod/2&&(o-=l.mod)),d[r]=h((s-o)*e+o,n)))})),this[n](d)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=o(e)._rgba;return o(t.map(i,(function(t,e){return(1-n)*r[e]+n*t})))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,(function(t,e){return null==t?e>2?1:0:t}));return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),(function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,s.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=t[3],a=Math.max(n,r,o),l=Math.min(n,r,o),c=a-l,u=a+l,h=.5*u;return e=l===a?0:n===a?60*(r-o)/c+360:r===a?60*(o-n)/c+120:60*(n-r)/c+240,i=0===c?0:h<=.5?c/u:c/(2-u),[Math.round(e)%360,i,h,null==s?1:s]},s.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],r=t[3],o=n<=.5?n*(1+i):n+i-n*i,s=2*n-o;return[Math.round(255*A(s,o,e+1/3)),Math.round(255*A(s,o,e)),Math.round(255*A(s,o,e-1/3)),r]},u(s,(function(i,r){var s=r.props,a=r.cache,l=r.to,c=r.from;o.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===e)return this[a].slice();var n,r=t.type(i),d="array"===r||"object"===r?i:arguments,A=this[a].slice();return u(s,(function(t,e){var i=d["object"===r?t:e.idx];null==i&&(i=A[e.idx]),A[e.idx]=h(i,e)})),c?((n=o(c(A)))[a]=A,n):o(A)},u(s,(function(e,r){o.fn[e]||(o.fn[e]=function(o){var s,a=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":i,c=this[l](),u=c[r.idx];return"undefined"===a?u:("function"===a&&(o=o.call(this,u),a=t.type(o)),null==o&&r.empty?this:("string"===a&&(s=n.exec(o))&&(o=u+parseFloat(s[2])*("+"===s[1]?1:-1)),c[r.idx]=o,this[l](c)))})}))})),o.hook=function(e){var i=e.split(" ");u(i,(function(e,i){t.cssHooks[i]={set:function(e,n){var r,s,a="";if("transparent"!==n&&("string"!==t.type(n)||(r=d(n)))){if(n=o(r||n),!l.rgba&&1!==n._rgba[3]){for(s="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(t){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=o(e.elem,i),e.end=o(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}))},o.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return u(["Top","Right","Bottom","Left"],(function(i,n){e["border"+n+"Color"]=t})),e}},i=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(_),function(){var e=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function n(e){var i,n,r=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(n=r.length;n--;)"string"==typeof r[i=r[n]]&&(o[t.camelCase(i)]=r[i]);else for(i in r)"string"==typeof r[i]&&(o[i]=r[i]);return o}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(_.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(r,o,s,a){var l=t.speed(o,s,a);return this.queue((function(){var o,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map((function(){return{el:t(this),start:n(this)}})),(o=function(){t.each(e,(function(t,e){r[e]&&s[e+"Class"](r[e])}))})(),c=c.map((function(){return this.end=n(this.el[0]),this.diff=function(e,n){var r,o,s={};for(r in n)o=n[r],e[r]!==o&&(i[r]||!t.fx.step[r]&&isNaN(parseFloat(o))||(s[r]=o));return s}(this.start,this.end),this})),s.attr("class",a),c=c.map((function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()})),t.when.apply(t,c.get()).done((function(){o(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),l.complete.call(s[0])}))}))},t.fn.extend({addClass:function(e){return function(i,n,r,o){return n?t.effects.animateClass.call(this,{add:i},n,r,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,r,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,r,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,r,o,s){return"boolean"==typeof n||void 0===n?r?t.effects.animateClass.call(this,n?{add:i}:{remove:i},r,o,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,r,o)}}(t.fn.toggleClass),switchClass:function(e,i,n,r,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,r,o)}})}(),function(){function e(e,i,n,r){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(r=n,n=i,i={}),t.isFunction(n)&&(r=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=r||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}function n(t,e){var i=e.outerWidth(),n=e.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,n,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?i:parseFloat(r[2]),bottom:"auto"===r[3]?n:parseFloat(r[3]),left:parseFloat(r[4])||0}}t.expr&&t.expr.pseudos&&t.expr.pseudos.animated&&(t.expr.pseudos.animated=function(e){return function(i){return!!t(i).data(b)||e(i)}}(t.expr.pseudos.animated)),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data(v+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,r=e.length;n<r;n++)null!==e[n]&&(i=t.data(v+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus"),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,n){return n||(n=i,i="effect"),t.effects.effect[e]=n,t.effects.effect[e].mode=i,n},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,r="vertical"!==i?(e||100)/100:1;return{height:t.height()*r,width:t.width()*n,outerHeight:t.outerHeight()*r,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();e>1&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(y,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(y)||"",t.removeData(y)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(e){var i,n=e.css("position"),r=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(v+"placeholder",i)),e.css({position:n,left:r.left,top:r.top}),i},removePlaceholder:function(t){var e=v+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,n,r){return r=r||{},t.each(i,(function(t,i){var o=e.cssUnit(i);o[0]>0&&(r[i]=o[0]*n+o[1])})),r}}),t.fn.extend({effect:function(){var i=e.apply(this,arguments),n=t.effects.effect[i.effect],r=n.mode,o=i.queue,s=o||"fx",a=i.complete,l=i.mode,c=[],u=function(e){var i=t(this),n=t.effects.mode(i,l)||r;i.data(b,!0),c.push(n),r&&("show"===n||n===r&&"hide"===n)&&i.show(),r&&"none"===n||t.effects.saveStyle(i),t.isFunction(e)&&e()};if(t.fx.off||!n)return l?this[l](i.duration,a):this.each((function(){a&&a.call(this)}));function h(e){var o=t(this);function s(){t.isFunction(a)&&a.call(o[0]),t.isFunction(e)&&e()}i.mode=c.shift(),!1===t.uiBackCompat||r?"none"===i.mode?(o[l](),s()):n.call(o[0],i,(function(){o.removeData(b),t.effects.cleanUp(o),"hide"===i.mode&&o.hide(),s()})):(o.is(":hidden")?"hide"===l:"show"===l)?(o[l](),s()):n.call(o[0],i,s)}return!1===o?this.each(u).each(h):this.queue(s,u).queue(s,h)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],(function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])})),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):n(this.css("clip"),this)},transfer:function(e,i){var n=t(this),r=t(e.to),o="fixed"===r.css("position"),s=t("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,c=r.offset(),u={top:c.top-a,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},h=n.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(u,e.duration,e.easing,(function(){d.remove(),t.isFunction(i)&&i()}))}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=n(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),m={},t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,e){m[e]=function(e){return Math.pow(e,t+2)}})),t.extend(m,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(m,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})),t.effects,t.effects.define("blind","hide",(function(e,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=t(this),o=e.direction||"up",s=r.cssClip(),a={clip:t.extend({},s)},l=t.effects.createPlaceholder(r);a.clip[n[o][0]]=a.clip[n[o][1]],"show"===e.mode&&(r.cssClip(a.clip),l&&l.css(t.effects.clipToBox(a)),a.clip=s),l&&l.animate(t.effects.clipToBox(a),e.duration,e.easing),r.animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("bounce",(function(e,i){var n,r,o,s=t(this),a=e.mode,l="hide"===a,c="show"===a,u=e.direction||"up",h=e.distance,d=e.times||5,A=2*d+(c||l?1:0),f=e.duration/A,p=e.easing,g="up"===u||"down"===u?"top":"left",m="up"===u||"left"===u,v=0,y=s.queue().length;for(t.effects.createPlaceholder(s),o=s.css(g),h||(h=s["top"===g?"outerHeight":"outerWidth"]()/3),c&&((r={opacity:1})[g]=o,s.css("opacity",0).css(g,m?2*-h:2*h).animate(r,f,p)),l&&(h/=Math.pow(2,d-1)),(r={})[g]=o;v<d;v++)(n={})[g]=(m?"-=":"+=")+h,s.animate(n,f,p).animate(r,f,p),h=l?2*h:h/2;l&&((n={opacity:0})[g]=(m?"-=":"+=")+h,s.animate(n,f,p)),s.queue(i),t.effects.unshift(s,y,A+1)})),t.effects.define("clip","hide",(function(e,i){var n,r={},o=t(this),s=e.direction||"vertical",a="both"===s,l=a||"horizontal"===s,c=a||"vertical"===s;n=o.cssClip(),r.clip={top:c?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:c?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left},t.effects.createPlaceholder(o),"show"===e.mode&&(o.cssClip(r.clip),r.clip=n),o.animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("drop","hide",(function(e,i){var n,r=t(this),o="show"===e.mode,s=e.direction||"left",a="up"===s||"down"===s?"top":"left",l="up"===s||"left"===s?"-=":"+=",c="+="===l?"-=":"+=",u={opacity:0};t.effects.createPlaceholder(r),n=e.distance||r["top"===a?"outerHeight":"outerWidth"](!0)/2,u[a]=l+n,o&&(r.css(u),u[a]=c+n,u.opacity=1),r.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("explode","hide",(function(e,i){var n,r,o,s,a,l,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,u=c,h=t(this),d="show"===e.mode,A=h.show().css("visibility","hidden").offset(),f=Math.ceil(h.outerWidth()/u),p=Math.ceil(h.outerHeight()/c),g=[];function m(){g.push(this),g.length===c*u&&(h.css({visibility:"visible"}),t(g).remove(),i())}for(n=0;n<c;n++)for(s=A.top+n*p,l=n-(c-1)/2,r=0;r<u;r++)o=A.left+r*f,a=r-(u-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*f,top:-n*p}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:p,left:o+(d?a*f:0),top:s+(d?l*p:0),opacity:d?0:1}).animate({left:o+(d?0:a*f),top:s+(d?0:l*p),opacity:d?1:0},e.duration||500,e.easing,m)})),t.effects.define("fade","toggle",(function(e,i){var n="show"===e.mode;t(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("fold","hide",(function(e,i){var n=t(this),r=e.mode,o="show"===r,s="hide"===r,a=e.size||15,l=/([0-9]+)%/.exec(a),c=e.horizFirst?["right","bottom"]:["bottom","right"],u=e.duration/2,h=t.effects.createPlaceholder(n),d=n.cssClip(),A={clip:t.extend({},d)},f={clip:t.extend({},d)},p=[d[c[0]],d[c[1]]],g=n.queue().length;l&&(a=parseInt(l[1],10)/100*p[s?0:1]),A.clip[c[0]]=a,f.clip[c[0]]=a,f.clip[c[1]]=0,o&&(n.cssClip(f.clip),h&&h.css(t.effects.clipToBox(f)),f.clip=d),n.queue((function(i){h&&h.animate(t.effects.clipToBox(A),u,e.easing).animate(t.effects.clipToBox(f),u,e.easing),i()})).animate(A,u,e.easing).animate(f,u,e.easing).queue(i),t.effects.unshift(n,g,4)})),t.effects.define("highlight","show",(function(e,i){var n=t(this),r={backgroundColor:n.css("backgroundColor")};"hide"===e.mode&&(r.opacity=0),t.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("size",(function(e,i){var n,r,o,s=t(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=e.mode,h="effect"!==u,d=e.scale||"both",A=e.origin||["middle","center"],f=s.css("position"),p=s.position(),g=t.effects.scaledDimensions(s),m=e.from||g,v=e.to||t.effects.scaledDimensions(s,0);t.effects.createPlaceholder(s),"show"===u&&(o=m,m=v,v=o),r={from:{y:m.height/g.height,x:m.width/g.width},to:{y:v.height/g.height,x:v.width/g.width}},"box"!==d&&"both"!==d||(r.from.y!==r.to.y&&(m=t.effects.setTransition(s,l,r.from.y,m),v=t.effects.setTransition(s,l,r.to.y,v)),r.from.x!==r.to.x&&(m=t.effects.setTransition(s,c,r.from.x,m),v=t.effects.setTransition(s,c,r.to.x,v))),"content"!==d&&"both"!==d||r.from.y!==r.to.y&&(m=t.effects.setTransition(s,a,r.from.y,m),v=t.effects.setTransition(s,a,r.to.y,v)),A&&(n=t.effects.getBaseline(A,g),m.top=(g.outerHeight-m.outerHeight)*n.y+p.top,m.left=(g.outerWidth-m.outerWidth)*n.x+p.left,v.top=(g.outerHeight-v.outerHeight)*n.y+p.top,v.left=(g.outerWidth-v.outerWidth)*n.x+p.left),s.css(m),"content"!==d&&"both"!==d||(l=l.concat(["marginTop","marginBottom"]).concat(a),c=c.concat(["marginLeft","marginRight"]),s.find("*[width]").each((function(){var i=t(this),n=t.effects.scaledDimensions(i),o={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},s={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x};r.from.y!==r.to.y&&(o=t.effects.setTransition(i,l,r.from.y,o),s=t.effects.setTransition(i,l,r.to.y,s)),r.from.x!==r.to.x&&(o=t.effects.setTransition(i,c,r.from.x,o),s=t.effects.setTransition(i,c,r.to.x,s)),h&&t.effects.saveStyle(i),i.css(o),i.animate(s,e.duration,e.easing,(function(){h&&t.effects.restoreStyle(i)}))}))),s.animate(v,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=s.offset();0===v.opacity&&s.css("opacity",m.opacity),h||(s.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(s)),i()}})})),t.effects.define("scale",(function(e,i){var n=t(this),r=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)||"effect"!==r?0:100),s=t.extend(!0,{from:t.effects.scaledDimensions(n),to:t.effects.scaledDimensions(n,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(s.from.opacity=1,s.to.opacity=0),t.effects.effect.size.call(this,s,i)})),t.effects.define("puff","hide",(function(e,i){var n=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,n,i)})),t.effects.define("pulsate","show",(function(e,i){var n=t(this),r=e.mode,o="show"===r,s=o||"hide"===r,a=2*(e.times||5)+(s?1:0),l=e.duration/a,c=0,u=1,h=n.queue().length;for(!o&&n.is(":visible")||(n.css("opacity",0).show(),c=1);u<a;u++)n.animate({opacity:c},l,e.easing),c=1-c;n.animate({opacity:c},l,e.easing),n.queue(i),t.effects.unshift(n,h,a+1)})),t.effects.define("shake",(function(e,i){var n=1,r=t(this),o=e.direction||"left",s=e.distance||20,a=e.times||3,l=2*a+1,c=Math.round(e.duration/l),u="up"===o||"down"===o?"top":"left",h="up"===o||"left"===o,d={},A={},f={},p=r.queue().length;for(t.effects.createPlaceholder(r),d[u]=(h?"-=":"+=")+s,A[u]=(h?"+=":"-=")+2*s,f[u]=(h?"-=":"+=")+2*s,r.animate(d,c,e.easing);n<a;n++)r.animate(A,c,e.easing).animate(f,c,e.easing);r.animate(A,c,e.easing).animate(d,c/2,e.easing).queue(i),t.effects.unshift(r,p,l+1)})),t.effects.define("slide","show",(function(e,i){var n,r,o=t(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(o),n=o.cssClip(),r=o.position()[c],d[c]=(u?-1:1)*h+r,d.clip=o.cssClip(),d.clip[s[l][1]]=d.clip[s[l][0]],"show"===a&&(o.cssClip(d.clip),o.css(c,d[c]),d.clip=n,d[c]=r),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),!1!==t.uiBackCompat&&t.effects.define("transfer",(function(e,i){t(this).transfer(e,i)}))},void 0===(o=n.apply(e,r))||(t.exports=o)},9755:function(t,e){var i;!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,(function(n,r){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,u=o.indexOf,h={},d=h.toString,A=h.hasOwnProperty,f=A.toString,p=f.call(Object),g={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},y=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,i){var n,r,o=(i=i||y).createElement("script");if(o.text=t,e)for(n in b)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var x="3.6.3",C=function(t,e){return new C.fn.init(t,e)};function E(t){var e=!!t&&"length"in t&&t.length,i=w(t);return!m(t)&&!v(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}C.fn=C.prototype={jquery:x,constructor:C,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return C.each(this,t)},map:function(t){return this.pushStack(C.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},C.extend=C.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&s!==n&&(c&&n&&(C.isPlainObject(n)||(r=Array.isArray(n)))?(i=s[e],o=r&&!Array.isArray(i)?[]:r||C.isPlainObject(i)?i:{},r=!1,s[e]=C.extend(c,o,n)):void 0!==n&&(s[e]=n));return s},C.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==d.call(t)||(e=s(t))&&("function"!=typeof(i=A.call(e,"constructor")&&e.constructor)||f.call(i)!==p))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){_(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(E(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(E(Object(t))?C.merge(i,"string"==typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:u.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,s=!i;r<o;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,s=[];if(E(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&s.push(r);return l(s)},guid:1,support:g}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=o[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var k=function(t){var e,i,n,r,o,s,a,l,c,u,h,d,A,f,p,g,m,v,y,b="sizzle"+1*new Date,_=t.document,w=0,x=0,C=lt(),E=lt(),k=lt(),T=lt(),B=function(t,e){return t===e&&(h=!0),0},S={}.hasOwnProperty,P=[],M=P.pop,I=P.push,O=P.push,D=P.slice,L=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",N="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\[[\\x20\\t\\r\\n\\f]*("+N+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+R+"*\\]",j=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",U=new RegExp(R+"+","g"),Z=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(R+"|>"),W=new RegExp(j),q=new RegExp("^"+N+"$"),Q={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},st=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(P=D.call(_.childNodes),_.childNodes),P[_.childNodes.length].nodeType}catch(t){O={apply:P.length?function(t,e){I.apply(t,D.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function at(t,e,n,r){var o,a,c,u,h,f,m,v=e&&e.ownerDocument,_=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return n;if(!r&&(d(e),e=e||A,p)){if(11!==_&&(h=$.exec(t)))if(o=h[1]){if(9===_){if(!(c=e.getElementById(o)))return n;if(c.id===o)return n.push(c),n}else if(v&&(c=v.getElementById(o))&&y(e,c)&&c.id===o)return n.push(c),n}else{if(h[2])return O.apply(n,e.getElementsByTagName(t)),n;if((o=h[3])&&i.getElementsByClassName&&e.getElementsByClassName)return O.apply(n,e.getElementsByClassName(o)),n}if(i.qsa&&!T[t+" "]&&(!g||!g.test(t))&&(1!==_||"object"!==e.nodeName.toLowerCase())){if(m=t,v=e,1===_&&(V.test(t)||G.test(t))){for((v=tt.test(t)&&mt(e.parentNode)||e)===e&&i.scope||((u=e.getAttribute("id"))?u=u.replace(nt,rt):e.setAttribute("id",u=b)),a=(f=s(t)).length;a--;)f[a]=(u?"#"+u:":scope")+" "+yt(f[a]);m=f.join(",")}try{if(i.cssSupportsSelector&&!CSS.supports("selector(:is("+m+"))"))throw new Error;return O.apply(n,v.querySelectorAll(m)),n}catch(e){T(t,!0)}finally{u===b&&e.removeAttribute("id")}}}return l(t.replace(Z,"$1"),e,n,r)}function lt(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function ct(t){return t[b]=!0,t}function ut(t){var e=A.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var i=t.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function At(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function pt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ct((function(e){return e=+e,ct((function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},o=at.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||i&&i.nodeName||"HTML")},d=at.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:_;return s!=A&&9===s.nodeType&&s.documentElement?(f=(A=s).documentElement,p=!o(A),_!=A&&(r=A.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ot,!1):r.attachEvent&&r.attachEvent("onunload",ot)),i.scope=ut((function(t){return f.appendChild(t).appendChild(A.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.cssSupportsSelector=ut((function(){return CSS.supports("selector(*)")&&A.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),i.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ut((function(t){return t.appendChild(A.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=K.test(A.getElementsByClassName),i.getById=ut((function(t){return f.appendChild(t).id=b,!A.getElementsByName||!A.getElementsByName(b).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&p)return e.getElementsByClassName(t)},m=[],g=[],(i.qsa=K.test(A.querySelectorAll))&&(ut((function(t){var e;f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+F+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(e=A.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=K.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut((function(t){i.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),m.push("!=",j)})),i.cssSupportsSelector||g.push(":has"),g=g.length&&new RegExp(g.join("|")),m=m.length&&new RegExp(m.join("|")),e=K.test(f.compareDocumentPosition),y=e||K.test(f.contains)?function(t,e){var i=9===t.nodeType&&t.documentElement||t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},B=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t==A||t.ownerDocument==_&&y(_,t)?-1:e==A||e.ownerDocument==_&&y(_,e)?1:u?L(u,t)-L(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t==A?-1:e==A?1:r?-1:o?1:u?L(u,t)-L(u,e):0;if(r===o)return dt(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?dt(s[n],a[n]):s[n]==_?-1:a[n]==_?1:0},A):A},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&p&&!T[e+" "]&&(!m||!m.test(e))&&(!g||!g.test(e)))try{var n=v.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){T(e,!0)}return at(e,A,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=A&&d(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=A&&d(t);var r=n.attrHandle[e.toLowerCase()],o=r&&S.call(n.attrHandle,e.toLowerCase())?r(t,e,!p):void 0;return void 0!==o?o:i.attributes||!p?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(nt,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],r=0,o=0;if(h=!i.detectDuplicates,u=!i.sortStable&&t.slice(0),t.sort(B),h){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)t.splice(n[r],1)}return u=null,t},r=at.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},n=at.selectors={cacheLength:50,createPseudo:ct,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&W.test(i)&&(e=s(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+R+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=at.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(U," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,u,h,d,A,f,p=o!==s?"nextSibling":"previousSibling",g=e.parentNode,m=a&&e.nodeName.toLowerCase(),v=!l&&!a,y=!1;if(g){if(o){for(;p;){for(d=e;d=d[p];)if(a?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(y=(A=(c=(u=(h=(d=g)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],d=A&&g.childNodes[A];d=++A&&d&&d[p]||(y=A=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[w,A,y];break}}else if(v&&(y=A=(c=(u=(h=(d=e)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===y)for(;(d=++A&&d&&d[p]||(y=A=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++y||(v&&((u=(h=d[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[w,y]),d!==e)););return(y-=r)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,i){for(var n,o=r(t,e),s=o.length;s--;)t[n=L(t,o[s])]=!(i[n]=o[s])})):function(t){return r(t,0,i)}):r}},pseudos:{not:ct((function(t){var e=[],i=[],n=a(t.replace(Z,"$1"));return n[b]?ct((function(t,e,i,r){for(var o,s=n(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,r,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}})),has:ct((function(t){return function(e){return at(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,it),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:ct((function(t){return q.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=p?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,i){return[i<0?i+e:i]})),even:gt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:gt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:gt((function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:gt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=At(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ft(e);function vt(){}function yt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(t,e,i){var n=e.dir,r=e.next,o=r||n,s=i&&"parentNode"===o,a=x++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r);return!1}:function(e,i,l){var c,u,h,d=[w,a];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(u=(h=e[b]||(e[b]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=u[o])&&c[0]===w&&c[1]===a)return d[2]=c[2];if(u[o]=d,d[2]=t(e,i,l))return!0}return!1}}function _t(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function wt(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),c&&e.push(a)));return s}function xt(t,e,i,n,r,o){return n&&!n[b]&&(n=xt(n)),r&&!r[b]&&(r=xt(r,o)),ct((function(o,s,a,l){var c,u,h,d=[],A=[],f=s.length,p=o||function(t,e,i){for(var n=0,r=e.length;n<r;n++)at(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!o&&e?p:wt(p,d,t,a,l),m=i?r||(o?t:f||n)?[]:s:g;if(i&&i(g,m,a,l),n)for(c=wt(m,A),n(c,[],a,l),u=c.length;u--;)(h=c[u])&&(m[A[u]]=!(g[A[u]]=h));if(o){if(r||t){if(r){for(c=[],u=m.length;u--;)(h=m[u])&&c.push(g[u]=h);r(null,m=[],c,l)}for(u=m.length;u--;)(h=m[u])&&(c=r?L(o,h):d[u])>-1&&(o[c]=!(s[c]=h))}}else m=wt(m===s?m.splice(f,m.length):m),r?r(null,s,m,l):O.apply(s,m)}))}function Ct(t){for(var e,i,r,o=t.length,s=n.relative[t[0].type],a=s||n.relative[" "],l=s?1:0,u=bt((function(t){return t===e}),a,!0),h=bt((function(t){return L(e,t)>-1}),a,!0),d=[function(t,i,n){var r=!s&&(n||i!==c)||((e=i).nodeType?u(t,i,n):h(t,i,n));return e=null,r}];l<o;l++)if(i=n.relative[t[l].type])d=[bt(_t(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(r=++l;r<o&&!n.relative[t[r].type];r++);return xt(l>1&&_t(d),l>1&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(Z,"$1"),i,l<r&&Ct(t.slice(l,r)),r<o&&Ct(t=t.slice(r)),r<o&&yt(t))}d.push(i)}return _t(d)}return vt.prototype=n.filters=n.pseudos,n.setFilters=new vt,s=at.tokenize=function(t,e){var i,r,o,s,a,l,c,u=E[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=n.preFilter;a;){for(s in i&&!(r=H.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=G.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(Z," ")}),a=a.slice(i.length)),n.filter)!(r=Q[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):E(t,l).slice(0)},a=at.compile=function(t,e){var i,r=[],o=[],a=k[t+" "];if(!a){for(e||(e=s(t)),i=e.length;i--;)(a=Ct(e[i]))[b]?r.push(a):o.push(a);a=k(t,function(t,e){var i=e.length>0,r=t.length>0,o=function(o,s,a,l,u){var h,f,g,m=0,v="0",y=o&&[],b=[],_=c,x=o||r&&n.find.TAG("*",u),C=w+=null==_?1:Math.random()||.1,E=x.length;for(u&&(c=s==A||s||u);v!==E&&null!=(h=x[v]);v++){if(r&&h){for(f=0,s||h.ownerDocument==A||(d(h),a=!p);g=t[f++];)if(g(h,s||A,a)){l.push(h);break}u&&(w=C)}i&&((h=!g&&h)&&m--,o&&y.push(h))}if(m+=v,i&&v!==m){for(f=0;g=e[f++];)g(y,b,s,a);if(o){if(m>0)for(;v--;)y[v]||b[v]||(b[v]=M.call(l));b=wt(b)}O.apply(l,b),u&&!o&&b.length>0&&m+e.length>1&&at.uniqueSort(l)}return u&&(w=C,c=_),y};return i?ct(o):o}(o,r)),a.selector=t}return a},l=at.select=function(t,e,i,r){var o,l,c,u,h,d="function"==typeof t&&t,A=!r&&s(t=d.selector||t);if(i=i||[],1===A.length){if((l=A[0]=A[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&p&&n.relative[l[1].type]){if(!(e=(n.find.ID(c.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=Q.needsContext.test(t)?0:l.length;o--&&(c=l[o],!n.relative[u=c.type]);)if((h=n.find[u])&&(r=h(c.matches[0].replace(et,it),tt.test(l[0].type)&&mt(e.parentNode)||e))){if(l.splice(o,1),!(t=r.length&&yt(l)))return O.apply(i,r),i;break}}return(d||a(t,A))(r,e,!p,i,!e||tt.test(t)&&mt(e.parentNode)||e),i},i.sortStable=b.split("").sort(B).join("")===b,i.detectDuplicates=!!h,d(),i.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(A.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||ht(F,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),at}(n);C.find=k,C.expr=k.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=k.uniqueSort,C.text=k.getText,C.isXMLDoc=k.isXML,C.contains=k.contains,C.escapeSelector=k.escape;var T=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&C(t).is(i))break;n.push(t)}return n},B=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},S=C.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,i){return m(e)?C.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?C.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?C.grep(t,(function(t){return u.call(e,t)>-1!==i})):C.filter(e,t,i)}C.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?C.find.matchesSelector(n,t)?[n]:[]:C.find.matches(t,C.grep(e,(function(t){return 1===t.nodeType})))},C.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(C(t).filter((function(){for(e=0;e<n;e++)if(C.contains(r[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)C.find(t,r[e],i);return n>1?C.uniqueSort(i):i},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&S.test(t)?C(t):t||[],!1).length}});var O,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||O,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),M.test(n[1])&&C.isPlainObject(e))for(n in e)m(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=y.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(C):C.makeArray(t,this)}).prototype=C.fn,O=C(y);var L=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e=C(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(C.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,r=this.length,o=[],s="string"!=typeof t&&C(t);if(!S.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&C.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(C(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,i){return T(t,"parentNode",i)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,i){return T(t,"nextSibling",i)},prevUntil:function(t,e,i){return T(t,"previousSibling",i)},siblings:function(t){return B((t.parentNode||{}).firstChild,t)},children:function(t){return B(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(P(t,"template")&&(t=t.content||t),C.merge([],t.childNodes))}},(function(t,e){C.fn[t]=function(i,n){var r=C.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=C.filter(n,r)),this.length>1&&(F[t]||C.uniqueSort(r),L.test(t)&&r.reverse()),this.pushStack(r)}}));var N=/[^\x20\t\r\n\f]+/g;function z(t){return t}function j(t){throw t}function U(t,e,i,n){var r;try{t&&m(r=t.promise)?r.call(t).done(e).fail(i):t&&m(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}C.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return C.each(t.match(N)||[],(function(t,i){e[i]=!0})),e}(t):C.extend({},t);var e,i,n,r,o=[],s=[],a=-1,l=function(){for(r=r||t.once,n=e=!0;s.length;a=-1)for(i=s.shift();++a<o.length;)!1===o[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=o.length,i=!1);t.memory||(i=!1),e=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(a=o.length-1,s.push(i)),function e(i){C.each(i,(function(i,n){m(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==w(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return C.each(arguments,(function(t,e){for(var i;(i=C.inArray(e,o,i))>-1;)o.splice(i,1),i<=a&&a--})),this},has:function(t){return t?C.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=s=[],i||e||(o=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},C.extend({Deferred:function(t){var e=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return C.Deferred((function(i){C.each(e,(function(e,n){var r=m(t[n[4]])&&t[n[4]];o[n[1]]((function(){var t=r&&r.apply(this,arguments);t&&m(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,i,r){var o=0;function s(t,e,i,r){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(t<o)){if((n=i.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,m(c)?r?c.call(n,s(o,e,z,r),s(o,e,j,r)):(o++,c.call(n,s(o,e,z,r),s(o,e,j,r),s(o,e,z,e.notifyWith))):(i!==z&&(a=void 0,l=[n]),(r||e.resolveWith)(a,l))}},u=r?c:function(){try{c()}catch(n){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(n,u.stackTrace),t+1>=o&&(i!==j&&(a=void 0,l=[n]),e.rejectWith(a,l))}};t?u():(C.Deferred.getStackHook&&(u.stackTrace=C.Deferred.getStackHook()),n.setTimeout(u))}}return C.Deferred((function(n){e[0][3].add(s(0,n,m(r)?r:z,n.notifyWith)),e[1][3].add(s(0,n,m(t)?t:z)),e[2][3].add(s(0,n,m(i)?i:j))})).promise()},promise:function(t){return null!=t?C.extend(t,r):r}},o={};return C.each(e,(function(t,n){var s=n[2],a=n[5];r[n[1]]=s.add,a&&s.add((function(){i=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),r=a.call(arguments),o=C.Deferred(),s=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?a.call(arguments):i,--e||o.resolveWith(n,r)}};if(e<=1&&(U(t,o.done(s(i)).resolve,o.reject,!e),"pending"===o.state()||m(r[i]&&r[i].then)))return o.then();for(;i--;)U(r[i],s(i),o.reject);return o.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&Z.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},C.readyException=function(t){n.setTimeout((function(){throw t}))};var H=C.Deferred();function G(){y.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),C.ready()}C.fn.ready=function(t){return H.then(t).catch((function(t){C.readyException(t)})),this},C.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==t&&--C.readyWait>0||H.resolveWith(y,[C]))}}),C.ready.then=H.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(C.ready):(y.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var V=function(t,e,i,n,r,o,s){var a=0,l=t.length,c=null==i;if("object"===w(i))for(a in r=!0,i)V(t,e,a,i[a],!0,o,s);else if(void 0!==n&&(r=!0,m(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(C(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):l?e(t[0],i):o},W=/^-ms-/,q=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function Y(t){return t.replace(W,"ms-").replace(q,Q)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=C.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[Y(e)]=i;else for(n in e)r[Y(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in n?[e]:e.match(N)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||C.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var K=new J,$=new J,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function it(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(i)}catch(t){}$.set(t,e,i)}else i=void 0;return i}C.extend({hasData:function(t){return $.hasData(t)||K.hasData(t)},data:function(t,e,i){return $.access(t,e,i)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,i){return K.access(t,e,i)},_removeData:function(t,e){K.remove(t,e)}}),C.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=$.get(o),1===o.nodeType&&!K.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=Y(n.slice(5)),it(o,n,r[n]));K.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){$.set(this,t)})):V(this,(function(e){var i;if(o&&void 0===e)return void 0!==(i=$.get(o,t))||void 0!==(i=it(o,t))?i:void 0;this.each((function(){$.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){$.remove(this,t)}))}}),C.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=K.get(t,e),i&&(!n||Array.isArray(i)?n=K.access(t,e,C.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=C.queue(t,e),n=i.length,r=i.shift(),o=C._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,(function(){C.dequeue(t,e)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return K.get(t,i)||K.access(t,i,{empty:C.Callbacks("once memory").add((function(){K.remove(t,[e+"queue",i])}))})}}),C.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?C.queue(this[0],t):void 0===e?this:this.each((function(){var i=C.queue(this,t,e);C._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&C.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){C.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=C.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=K.get(o[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],st=y.documentElement,at=function(t){return C.contains(t.ownerDocument,t)},lt={composed:!0};st.getRootNode&&(at=function(t){return C.contains(t.ownerDocument,t)||t.getRootNode(lt)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===C.css(t,"display")};function ut(t,e,i,n){var r,o,s=20,a=n?function(){return n.cur()}:function(){return C.css(t,e,"")},l=a(),c=i&&i[3]||(C.cssNumber[e]?"":"px"),u=t.nodeType&&(C.cssNumber[e]||"px"!==c&&+l)&&rt.exec(C.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)C.style(t,e,u+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),u/=o;u*=2,C.style(t,e,u+c),i=i||[]}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=r)),r}var ht={};function dt(t){var e,i=t.ownerDocument,n=t.nodeName,r=ht[n];return r||(e=i.body.appendChild(i.createElement(n)),r=C.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[n]=r,r)}function At(t,e){for(var i,n,r=[],o=0,s=t.length;o<s;o++)(n=t[o]).style&&(i=n.style.display,e?("none"===i&&(r[o]=K.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&ct(n)&&(r[o]=dt(n))):"none"!==i&&(r[o]="none",K.set(n,"display",i)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}C.fn.extend({show:function(){return At(this,!0)},hide:function(){return At(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ct(this)?C(this).show():C(this).hide()}))}});var ft,pt,gt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;ft=y.createDocumentFragment().appendChild(y.createElement("div")),(pt=y.createElement("input")).setAttribute("type","radio"),pt.setAttribute("checked","checked"),pt.setAttribute("name","t"),ft.appendChild(pt),g.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",g.option=!!ft.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?C.merge([t],i):i}function _t(t,e){for(var i=0,n=t.length;i<n;i++)K.set(t[i],"globalEval",!e||K.get(e[i],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,g.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var wt=/<|&#?\w+;/;function xt(t,e,i,n,r){for(var o,s,a,l,c,u,h=e.createDocumentFragment(),d=[],A=0,f=t.length;A<f;A++)if((o=t[A])||0===o)if("object"===w(o))C.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(mt.exec(o)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,s.innerHTML=l[1]+C.htmlPrefilter(o)+l[2],u=l[0];u--;)s=s.lastChild;C.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",A=0;o=d[A++];)if(n&&C.inArray(o,n)>-1)r&&r.push(o);else if(c=at(o),s=bt(h.appendChild(o),"script"),c&&_t(s),i)for(u=0;o=s[u++];)vt.test(o.type||"")&&i.push(o);return h}var Ct=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function kt(){return!1}function Tt(t,e){return t===function(){try{return y.activeElement}catch(t){}}()==("focus"===e)}function Bt(t,e,i,n,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Bt(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=kt;else if(!r)return t;return 1===o&&(s=r,r=function(t){return C().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=C.guid++)),t.each((function(){C.event.add(this,e,r,n,i)}))}function St(t,e,i){i?(K.set(t,e,!1),C.event.add(t,e,{namespace:!1,handler:function(t){var n,r,o=K.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(C.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=a.call(arguments),K.set(this,e,o),n=i(this,e),this[e](),o!==(r=K.get(this,e))||n?K.set(this,e,!1):r={},o!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else o.length&&(K.set(this,e,{value:C.event.trigger(C.extend(o[0],C.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===K.get(t,e)&&C.event.add(t,e,Et)}C.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,c,u,h,d,A,f,p,g=K.get(t);if(X(t))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&C.find.matchesSelector(st,r),i.guid||(i.guid=C.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(N)||[""]).length;c--;)A=p=(a=Ct.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),A&&(h=C.event.special[A]||{},A=(r?h.delegateType:h.bindType)||A,h=C.event.special[A]||{},u=C.extend({type:A,origType:p,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=l[A])||((d=l[A]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(A,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),C.event.global[A]=!0)},remove:function(t,e,i,n,r){var o,s,a,l,c,u,h,d,A,f,p,g=K.hasData(t)&&K.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(N)||[""]).length;c--;)if(A=p=(a=Ct.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),A){for(h=C.event.special[A]||{},d=l[A=(n?h.delegateType:h.bindType)||A]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&p!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||C.removeEvent(t,A,g.handle),delete l[A])}else for(A in l)C.event.remove(t,A+e[c],i,n,!0);C.isEmptyObject(l)&&K.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,s,a=new Array(arguments.length),l=C.event.fix(t),c=(K.get(this,"events")||Object.create(null))[l.type]||[],u=C.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=C.event.handlers.call(this,l,c),e=0;(r=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(n=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,n,r,o,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},i=0;i<l;i++)void 0===s[r=(n=e[i]).selector+" "]&&(s[r]=n.needsContext?C(r,this).index(c)>-1:C.find(r,this,null,[c]).length),s[r]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[C.expando]?t:new C.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&P(e,"input")&&St(e,"click",Et),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&P(e,"input")&&St(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&P(e,"input")&&K.get(e,"click")||P(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},C.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:kt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:kt,isPropagationStopped:kt,isImmediatePropagationStopped:kt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(t,e){C.event.special[t]={setup:function(){return St(this,t,Tt),!1},trigger:function(){return St(this,t),!0},_default:function(e){return K.get(e.target,t)},delegateType:e}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){C.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||C.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}})),C.fn.extend({on:function(t,e,i,n){return Bt(this,t,e,i,n)},one:function(t,e,i,n){return Bt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,C(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=kt),this.each((function(){C.event.remove(this,t,i,e)}))}});var Pt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ot(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&C(t).children("tbody")[0]||t}function Dt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var i,n,r,o,s,a;if(1===e.nodeType){if(K.hasData(t)&&(a=K.get(t).events))for(r in K.remove(e,"handle events"),a)for(i=0,n=a[r].length;i<n;i++)C.event.add(e,r,a[r][i]);$.hasData(t)&&(o=$.access(t),s=C.extend({},o),$.set(e,s))}}function Rt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&gt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Nt(t,e,i,n){e=l(e);var r,o,s,a,c,u,h=0,d=t.length,A=d-1,f=e[0],p=m(f);if(p||d>1&&"string"==typeof f&&!g.checkClone&&Mt.test(f))return t.each((function(r){var o=t.eq(r);p&&(e[0]=f.call(this,r,o.html())),Nt(o,e,i,n)}));if(d&&(o=(r=xt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=o),o||n)){for(a=(s=C.map(bt(r,"script"),Dt)).length;h<d;h++)c=r,h!==A&&(c=C.clone(c,!0,!0),a&&C.merge(s,bt(c,"script"))),i.call(t[h],c,h);if(a)for(u=s[s.length-1].ownerDocument,C.map(s,Lt),h=0;h<a;h++)c=s[h],vt.test(c.type||"")&&!K.access(c,"globalEval")&&C.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?C._evalUrl&&!c.noModule&&C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):_(c.textContent.replace(It,""),c,u))}return t}function zt(t,e,i){for(var n,r=e?C.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||C.cleanData(bt(n)),n.parentNode&&(i&&at(n)&&_t(bt(n,"script")),n.parentNode.removeChild(n));return t}C.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),l=at(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(s=bt(a),n=0,r=(o=bt(t)).length;n<r;n++)Rt(o[n],s[n]);if(e)if(i)for(o=o||bt(t),s=s||bt(a),n=0,r=o.length;n<r;n++)Ft(o[n],s[n]);else Ft(t,a);return(s=bt(a,"script")).length>0&&_t(s,!l&&bt(t,"script")),a},cleanData:function(t){for(var e,i,n,r=C.event.special,o=0;void 0!==(i=t[o]);o++)if(X(i)){if(e=i[K.expando]){if(e.events)for(n in e.events)r[n]?C.event.remove(i,n):C.removeEvent(i,n,e.handle);i[K.expando]=void 0}i[$.expando]&&(i[$.expando]=void 0)}}}),C.fn.extend({detach:function(t){return zt(this,t,!0)},remove:function(t){return zt(this,t)},text:function(t){return V(this,(function(t){return void 0===t?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Nt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)}))},prepend:function(){return Nt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Nt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Nt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return C.clone(this,t,e)}))},html:function(t){return V(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!yt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(C.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Nt(this,arguments,(function(e){var i=this.parentNode;C.inArray(this,t)<0&&(C.cleanData(bt(this)),i&&i.replaceChild(e,this))}),t)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){C.fn[t]=function(t){for(var i,n=[],r=C(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),C(r[s])[e](i),c.apply(n,i.get());return this.pushStack(n)}}));var jt=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),Ut=/^--/,Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Ht=function(t,e,i){var n,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in n=i.call(t),e)t.style[r]=o[r];return n},Gt=new RegExp(ot.join("|"),"i"),Vt=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function Wt(t,e,i){var n,r,o,s,a=Ut.test(e),l=t.style;return(i=i||Zt(t))&&(s=i.getPropertyValue(e)||i[e],a&&s&&(s=s.replace(Vt,"$1")||void 0),""!==s||at(t)||(s=C.style(t,e)),!g.pixelBoxStyles()&&jt.test(s)&&Gt.test(e)&&(n=l.width,r=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=i.width,l.width=n,l.minWidth=r,l.maxWidth=o)),void 0!==s?s+"":s}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(c).appendChild(u);var t=n.getComputedStyle(u);i="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",s=36===e(t.right),r=36===e(t.width),u.style.position="absolute",o=12===e(u.offsetWidth/3),st.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var i,r,o,s,a,l,c=y.createElement("div"),u=y.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,i,r;return null==a&&(t=y.createElement("table"),e=y.createElement("tr"),i=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",st.appendChild(t).appendChild(e).appendChild(i),r=n.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,st.removeChild(t)),a}}))}();var Qt=["Webkit","Moz","ms"],Yt=y.createElement("div").style,Xt={};function Jt(t){return C.cssProps[t]||Xt[t]||(t in Yt?t:Xt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Qt.length;i--;)if((t=Qt[i]+e)in Yt)return t}(t)||t)}var Kt=/^(none|table(?!-c[ea]).+)/,$t={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,i){var n=rt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ie(t,e,i,n,r,o){var s="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=C.css(t,i+ot[s],!0,r)),n?("content"===i&&(l-=C.css(t,"padding"+ot[s],!0,r)),"margin"!==i&&(l-=C.css(t,"border"+ot[s]+"Width",!0,r))):(l+=C.css(t,"padding"+ot[s],!0,r),"padding"!==i?l+=C.css(t,"border"+ot[s]+"Width",!0,r):a+=C.css(t,"border"+ot[s]+"Width",!0,r));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))||0),l}function ne(t,e,i){var n=Zt(t),r=(!g.boxSizingReliable()||i)&&"border-box"===C.css(t,"boxSizing",!1,n),o=r,s=Wt(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(jt.test(s)){if(!i)return s;s="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&P(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===C.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===C.css(t,"boxSizing",!1,n),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ie(t,e,i||(r?"border":"content"),o,n,s)+"px"}function re(t,e,i,n,r){return new re.prototype.init(t,e,i,n,r)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Wt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=Y(e),l=Ut.test(e),c=t.style;if(l||(e=Jt(a)),s=C.cssHooks[e]||C.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:c[e];"string"==(o=typeof i)&&(r=rt.exec(i))&&r[1]&&(i=ut(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=r&&r[3]||(C.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var r,o,s,a=Y(e);return Ut.test(e)||(e=Jt(a)),(s=C.cssHooks[e]||C.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=Wt(t,e,n)),"normal"===r&&e in te&&(r=te[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),C.each(["height","width"],(function(t,e){C.cssHooks[e]={get:function(t,i,n){if(i)return!Kt.test(C.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,n):Ht(t,$t,(function(){return ne(t,e,n)}))},set:function(t,i,n){var r,o=Zt(t),s=!g.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===C.css(t,"boxSizing",!1,o),l=n?ie(t,e,n,a,o):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ie(t,e,"border",!1,o)-.5)),l&&(r=rt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=C.css(t,e)),ee(0,i,l)}}})),C.cssHooks.marginLeft=qt(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(t,e){C.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+ot[n]+e]=o[n]||o[n-2]||o[0];return r}},"margin"!==t&&(C.cssHooks[t+e].set=ee)})),C.fn.extend({css:function(t,e){return V(this,(function(t,e,i){var n,r,o={},s=0;if(Array.isArray(e)){for(n=Zt(t),r=e.length;s<r;s++)o[e[s]]=C.css(t,e[s],!1,n);return o}return void 0!==i?C.style(t,e,i):C.css(t,e)}),t,e,arguments.length>1)}}),C.Tween=re,re.prototype={constructor:re,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var t=re.propHooks[this.prop];return t&&t.get?t.get(this):re.propHooks._default.get(this)},run:function(t){var e,i=re.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):re.propHooks._default.set(this),this}},re.prototype.init.prototype=re.prototype,re.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1!==t.elem.nodeType||!C.cssHooks[t.prop]&&null==t.elem.style[Jt(t.prop)]?t.elem[t.prop]=t.now:C.style(t.elem,t.prop,t.now+t.unit)}}},re.propHooks.scrollTop=re.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},C.fx=re.prototype.init,C.fx.step={};var oe,se,ae=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function ce(){se&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ce):n.setTimeout(ce,C.fx.interval),C.fx.tick())}function ue(){return n.setTimeout((function(){oe=void 0})),oe=Date.now()}function he(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=ot[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function de(t,e,i){for(var n,r=(Ae.tweeners[e]||[]).concat(Ae.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,e,t))return n}function Ae(t,e,i){var n,r,o=0,s=Ae.prefilters.length,a=C.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=oe||ue(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(n);return a.notifyWith(t,[c,n,i]),n<1&&s?i:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},i),originalProperties:e,originalOptions:i,startTime:oe||ue(),duration:i.duration,tweens:[],createTween:function(e,i){var n=C.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var i,n,r,o,s;for(i in t)if(r=e[n=Y(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(s=C.cssHooks[n])&&"expand"in s)for(i in o=s.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(u,c.opts.specialEasing);o<s;o++)if(n=Ae.prefilters[o].call(c,t,u,c.opts))return m(n.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return C.map(u,de,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(Ae,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ut(i.elem,t,rt.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(N);for(var i,n=0,r=t.length;n<r;n++)i=t[n],Ae.tweeners[i]=Ae.tweeners[i]||[],Ae.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,s,a,l,c,u,h="width"in e||"height"in e,d=this,A={},f=t.style,p=t.nodeType&&ct(t),g=K.get(t,"fxshow");for(n in i.queue||(null==(s=C._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,C.queue(t,"fx").length||s.empty.fire()}))}))),e)if(r=e[n],ae.test(r)){if(delete e[n],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;p=!0}A[n]=g&&g[n]||C.style(t,n)}if((l=!C.isEmptyObject(e))||!C.isEmptyObject(A))for(n in h&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=K.get(t,"display")),"none"===(u=C.css(t,"display"))&&(c?u=c:(At([t],!0),c=t.style.display||c,u=C.css(t,"display"),At([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===C.css(t,"float")&&(l||(d.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,A)l||(g?"hidden"in g&&(p=g.hidden):g=K.access(t,"fxshow",{display:c}),o&&(g.hidden=!p),p&&At([t],!0),d.done((function(){for(n in p||At([t]),K.remove(t,"fxshow"),A)C.style(t,n,A[n])}))),l=de(p?g[n]:0,n,d),n in g||(g[n]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?Ae.prefilters.unshift(t):Ae.prefilters.push(t)}}),C.speed=function(t,e,i){var n=t&&"object"==typeof t?C.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return C.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=C.isEmptyObject(t),o=C.speed(e,i,n),s=function(){var e=Ae(this,C.extend({},t),o);(r||K.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=C.timers,s=K.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&le.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||C.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=K.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=C.timers,s=n?n.length:0;for(i.finish=!0,C.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),C.each(["toggle","show","hide"],(function(t,e){var i=C.fn[e];C.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(he(e,!0),t,n,r)}})),C.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){C.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),C.timers=[],C.fx.tick=function(){var t,e=0,i=C.timers;for(oe=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||C.fx.stop(),oe=void 0},C.fx.timer=function(t){C.timers.push(t),C.fx.start()},C.fx.interval=13,C.fx.start=function(){se||(se=!0,ce())},C.fx.stop=function(){se=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(t,e){return t=C.fx&&C.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var fe,pe=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return V(this,C.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){C.removeAttr(this,t)}))}}),C.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?C.prop(t,e,i):(1===o&&C.isXMLDoc(t)||(r=C.attrHooks[e.toLowerCase()]||(C.expr.match.bool.test(e)?fe:void 0)),void 0!==i?null===i?void C.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=C.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&P(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(N);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),fe={set:function(t,e,i){return!1===e?C.removeAttr(t,i):t.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=pe[e]||C.find.attr;pe[e]=function(t,e,n){var r,o,s=e.toLowerCase();return n||(o=pe[s],pe[s]=r,r=null!=i(t,e,n)?s:null,pe[s]=o),r}}));var ge=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ve(t){return(t.match(N)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(N)||[]}C.fn.extend({prop:function(t,e){return V(this,C.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[C.propFix[t]||t]}))}}),C.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(t)||(e=C.propFix[e]||e,r=C.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(t){var e,i,n,r,o,s;return m(t)?this.each((function(e){C(this).addClass(t.call(this,e,ye(this)))})):(e=be(t)).length?this.each((function(){if(n=ye(this),i=1===this.nodeType&&" "+ve(n)+" "){for(o=0;o<e.length;o++)r=e[o],i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=ve(i),n!==s&&this.setAttribute("class",s)}})):this},removeClass:function(t){var e,i,n,r,o,s;return m(t)?this.each((function(e){C(this).removeClass(t.call(this,e,ye(this)))})):arguments.length?(e=be(t)).length?this.each((function(){if(n=ye(this),i=1===this.nodeType&&" "+ve(n)+" "){for(o=0;o<e.length;o++)for(r=e[o];i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=ve(i),n!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(t,e){var i,n,r,o,s=typeof t,a="string"===s||Array.isArray(t);return m(t)?this.each((function(i){C(this).toggleClass(t.call(this,i,ye(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(i=be(t),this.each((function(){if(a)for(o=C(this),r=0;r<i.length;r++)n=i[r],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==t&&"boolean"!==s||((n=ye(this))&&K.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":K.get(this,"__className__")||""))})))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+ve(ye(i))+" ").indexOf(e)>-1)return!0;return!1}});var _e=/\r/g;C.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=m(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,C(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=C.map(r,(function(t){return null==t?"":t+""}))),(e=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=C.valHooks[r.type]||C.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(_e,""):null==i?"":i:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:ve(C.text(t))}},select:{get:function(t){var e,i,n,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:r.length;for(n=o<0?l:s?o:0;n<l;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!P(i.parentNode,"optgroup"))){if(e=C(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=C.makeArray(e),s=r.length;s--;)((n=r[s]).selected=C.inArray(C.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=C.inArray(C(t).val(),e)>-1}},g.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),g.focusin="onfocusin"in n;var we=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};C.extend(C.event,{trigger:function(t,e,i,r){var o,s,a,l,c,u,h,d,f=[i||y],p=A.call(t,"type")?t.type:t,g=A.call(t,"namespace")?t.namespace.split("."):[];if(s=d=a=i=i||y,3!==i.nodeType&&8!==i.nodeType&&!we.test(p+C.event.triggered)&&(p.indexOf(".")>-1&&(g=p.split("."),p=g.shift(),g.sort()),c=p.indexOf(":")<0&&"on"+p,(t=t[C.expando]?t:new C.Event(p,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:C.makeArray(e,[t]),h=C.event.special[p]||{},r||!h.trigger||!1!==h.trigger.apply(i,e))){if(!r&&!h.noBubble&&!v(i)){for(l=h.delegateType||p,we.test(l+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||y)&&f.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)d=s,t.type=o>1?l:h.bindType||p,(u=(K.get(s,"events")||Object.create(null))[t.type]&&K.get(s,"handle"))&&u.apply(s,e),(u=c&&s[c])&&u.apply&&X(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!X(i)||c&&m(i[p])&&!v(i)&&((a=i[c])&&(i[c]=null),C.event.triggered=p,t.isPropagationStopped()&&d.addEventListener(p,xe),i[p](),t.isPropagationStopped()&&d.removeEventListener(p,xe),C.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(t,e,i){var n=C.extend(new C.Event,i,{type:t,isSimulated:!0});C.event.trigger(n,null,e)}}),C.fn.extend({trigger:function(t,e){return this.each((function(){C.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return C.event.trigger(t,e,i,!0)}}),g.focusin||C.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){C.event.simulate(e,t.target,C.event.fix(t))};C.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,r=K.access(n,e);r||n.addEventListener(t,i,!0),K.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=K.access(n,e)-1;r?K.access(n,e,r):(n.removeEventListener(t,i,!0),K.remove(n,e))}}}));var Ce=n.location,Ee={guid:Date.now()},ke=/\?/;C.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||C.error("Invalid XML: "+(i?C.map(i.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Te=/\[\]$/,Be=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function Me(t,e,i,n){var r;if(Array.isArray(e))C.each(e,(function(e,r){i||Te.test(t)?n(t,r):Me(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)}));else if(i||"object"!==w(e))n(t,e);else for(r in e)Me(t+"["+r+"]",e[r],i,n)}C.param=function(t,e){var i,n=[],r=function(t,e){var i=m(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,(function(){r(this.name,this.value)}));else for(i in t)Me(i,t[i],e,r);return n.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&Pe.test(this.nodeName)&&!Se.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var i=C(this).val();return null==i?null:Array.isArray(i)?C.map(i,(function(t){return{name:e.name,value:t.replace(Be,"\r\n")}})):{name:e.name,value:i.replace(Be,"\r\n")}})).get()}});var Ie=/%20/g,Oe=/#.*$/,De=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fe=/^(?:GET|HEAD)$/,Re=/^\/\//,Ne={},ze={},je="*/".concat("*"),Ue=y.createElement("a");function Ze(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(N)||[];if(m(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function He(t,e,i,n){var r={},o=t===ze;function s(a){var l;return r[a]=!0,C.each(t[a]||[],(function(t,a){var c=a(e,i,n);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),l}return s(e.dataTypes[0])||!r["*"]&&s("*")}function Ge(t,e){var i,n,r=C.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&C.extend(!0,t,n),t}Ue.href=Ce.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,C.ajaxSettings),e):Ge(C.ajaxSettings,t)},ajaxPrefilter:Ze(Ne),ajaxTransport:Ze(ze),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,a,l,c,u,h,d,A=C.ajaxSetup({},e),f=A.context||A,p=A.context&&(f.nodeType||f.jquery)?C(f):C.event,g=C.Deferred(),m=C.Callbacks("once memory"),v=A.statusCode||{},b={},_={},w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Le.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(A.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)x.always(t[x.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||w;return i&&i.abort(e),E(0,e),this}};if(g.promise(x),A.url=((t||A.url||Ce.href)+"").replace(Re,Ce.protocol+"//"),A.type=e.method||e.type||A.method||A.type,A.dataTypes=(A.dataType||"*").toLowerCase().match(N)||[""],null==A.crossDomain){l=y.createElement("a");try{l.href=A.url,l.href=l.href,A.crossDomain=Ue.protocol+"//"+Ue.host!=l.protocol+"//"+l.host}catch(t){A.crossDomain=!0}}if(A.data&&A.processData&&"string"!=typeof A.data&&(A.data=C.param(A.data,A.traditional)),He(Ne,A,e,x),c)return x;for(h in(u=C.event&&A.global)&&0==C.active++&&C.event.trigger("ajaxStart"),A.type=A.type.toUpperCase(),A.hasContent=!Fe.test(A.type),r=A.url.replace(Oe,""),A.hasContent?A.data&&A.processData&&0===(A.contentType||"").indexOf("application/x-www-form-urlencoded")&&(A.data=A.data.replace(Ie,"+")):(d=A.url.slice(r.length),A.data&&(A.processData||"string"==typeof A.data)&&(r+=(ke.test(r)?"&":"?")+A.data,delete A.data),!1===A.cache&&(r=r.replace(De,"$1"),d=(ke.test(r)?"&":"?")+"_="+Ee.guid+++d),A.url=r+d),A.ifModified&&(C.lastModified[r]&&x.setRequestHeader("If-Modified-Since",C.lastModified[r]),C.etag[r]&&x.setRequestHeader("If-None-Match",C.etag[r])),(A.data&&A.hasContent&&!1!==A.contentType||e.contentType)&&x.setRequestHeader("Content-Type",A.contentType),x.setRequestHeader("Accept",A.dataTypes[0]&&A.accepts[A.dataTypes[0]]?A.accepts[A.dataTypes[0]]+("*"!==A.dataTypes[0]?", "+je+"; q=0.01":""):A.accepts["*"]),A.headers)x.setRequestHeader(h,A.headers[h]);if(A.beforeSend&&(!1===A.beforeSend.call(f,x,A)||c))return x.abort();if(w="abort",m.add(A.complete),x.done(A.success),x.fail(A.error),i=He(ze,A,e,x)){if(x.readyState=1,u&&p.trigger("ajaxSend",[x,A]),c)return x;A.async&&A.timeout>0&&(a=n.setTimeout((function(){x.abort("timeout")}),A.timeout));try{c=!1,i.send(b,E)}catch(t){if(c)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,e,s,l){var h,d,y,b,_,w=e;c||(c=!0,a&&n.clearTimeout(a),i=void 0,o=l||"",x.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(b=function(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}(A,x,s)),!h&&C.inArray("script",A.dataTypes)>-1&&C.inArray("json",A.dataTypes)<0&&(A.converters["text script"]=function(){}),b=function(t,e,i,n){var r,o,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if((a=r.split(" "))[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(A,b,x,h),h?(A.ifModified&&((_=x.getResponseHeader("Last-Modified"))&&(C.lastModified[r]=_),(_=x.getResponseHeader("etag"))&&(C.etag[r]=_)),204===t||"HEAD"===A.type?w="nocontent":304===t?w="notmodified":(w=b.state,d=b.data,h=!(y=b.error))):(y=w,!t&&w||(w="error",t<0&&(t=0))),x.status=t,x.statusText=(e||w)+"",h?g.resolveWith(f,[d,w,x]):g.rejectWith(f,[x,w,y]),x.statusCode(v),v=void 0,u&&p.trigger(h?"ajaxSuccess":"ajaxError",[x,A,h?d:y]),m.fireWith(f,[x,w]),u&&(p.trigger("ajaxComplete",[x,A]),--C.active||C.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return C.get(t,e,i,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],(function(t,e){C[e]=function(t,i,n,r){return m(i)&&(r=r||n,n=i,i=void 0),C.ajax(C.extend({url:t,type:e,dataType:r,data:i,success:n},C.isPlainObject(t)&&t))}})),C.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),C._evalUrl=function(t,e,i){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){C.globalEval(t,e,i)}})},C.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){C(this).wrapInner(t.call(this,e))})):this.each((function(){var e=C(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(i){C(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(t){return!C.expr.pseudos.visible(t)},C.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Ve={0:200,1223:204},We=C.ajaxSettings.xhr();g.cors=!!We&&"withCredentials"in We,g.ajax=We=!!We,C.ajaxTransport((function(t){var e,i;if(g.cors||We&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ve[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),C.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),C.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,r){e=C("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),y.head.appendChild(e[0])},abort:function(){i&&i()}}}));var qe,Qe=[],Ye=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qe.pop()||C.expando+"_"+Ee.guid++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",(function(t,e,i){var r,o,s,a=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ye,"$1"+r):!1!==t.jsonp&&(t.url+=(ke.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||C.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){s=arguments},i.always((function(){void 0===o?C(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,Qe.push(r)),s&&m(o)&&o(s[0]),s=o=void 0})),"script"})),g.createHTMLDocument=((qe=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),C.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(g.createHTMLDocument?((n=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(n)):e=y),o=!i&&[],(r=M.exec(t))?[e.createElement(r[1])]:(r=xt([t],e,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var n,r,o},C.fn.load=function(t,e,i){var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=ve(t.slice(a)),t=t.slice(0,a)),m(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&C.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(n?C("<div>").append(C.parseHTML(t)).find(n):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,o||[t.responseText,e,t])}))}),this},C.expr.pseudos.animated=function(t){return C.grep(C.timers,(function(e){return t===e.elem})).length},C.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,c=C.css(t,"position"),u=C(t),h={};"static"===c&&(t.style.position="relative"),a=u.offset(),o=C.css(t,"top"),l=C.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(s=(n=u.position()).top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),m(e)&&(e=e.call(t,i,C.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){C.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===C.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===C.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=C(t).offset()).top+=C.css(t,"borderTopWidth",!0),r.left+=C.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-C.css(n,"marginTop",!0),left:e.left-r.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===C.css(t,"position");)t=t.offsetParent;return t||st}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;C.fn[t]=function(n){return V(this,(function(t,n,r){var o;if(v(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r}),t,n,arguments.length)}})),C.each(["top","left"],(function(t,e){C.cssHooks[e]=qt(g.pixelPosition,(function(t,i){if(i)return i=Wt(t,e),jt.test(i)?C(t).position()[e]+"px":i}))})),C.each({Height:"height",Width:"width"},(function(t,e){C.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){C.fn[n]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===o?"margin":"border");return V(this,(function(e,i,r){var o;return v(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?C.css(e,i,a):C.style(e,i,r,a)}),e,s?r:void 0,s)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){C.fn[e]=function(t){return this.on(e,t)}})),C.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){C.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Xe=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),m(t))return n=a.call(arguments,2),r=function(){return t.apply(e||this,n.concat(a.call(arguments)))},r.guid=t.guid=t.guid||C.guid++,r},C.holdReady=function(t){t?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=P,C.isFunction=m,C.isWindow=v,C.camelCase=Y,C.type=w,C.now=Date.now,C.isNumeric=function(t){var e=C.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},C.trim=function(t){return null==t?"":(t+"").replace(Xe,"$1")},void 0===(i=function(){return C}.apply(e,[]))||(t.exports=i);var Je=n.jQuery,Ke=n.$;return C.noConflict=function(t){return n.$===C&&(n.$=Ke),t&&n.jQuery===C&&(n.jQuery=Je),C},void 0===r&&(n.jQuery=n.$=C),C}))},514:function(t,e){var i,n;void 0===(n="function"==typeof(i=function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var i={},n={};function r(t,e){var r,o,a;return e?(a=0<=(t>>>=0)&&t<256)&&(o=n[t])?o:(r=s(t,(0|t)<0?-1:0,!0),a&&(n[t]=r),r):(a=-128<=(t|=0)&&t<128)&&(o=i[t])?o:(r=s(t,t<0?-1:0,!1),a&&(i[t]=r),r)}function o(t,e){if(isNaN(t)||!isFinite(t))return e?p:f;if(e){if(t<0)return p;if(t>=h)return b}else{if(t<=-d)return _;if(t+1>=d)return y}return t<0?o(-t,e).neg():s(t%u|0,t/u|0,e)}function s(e,i,n){return new t(e,i,n)}t.fromInt=r,t.fromNumber=o,t.fromBits=s;var a=Math.pow;function l(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return f;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(t.substring(1),e,i).neg();for(var r=o(a(i,8)),s=f,c=0;c<t.length;c+=8){var u=Math.min(8,t.length-c),h=parseInt(t.substring(c,c+u),i);if(u<8){var d=o(a(i,u));s=s.mul(d).add(o(h))}else s=(s=s.mul(r)).add(o(h))}return s.unsigned=e,s}function c(e){return e instanceof t?e:"number"==typeof e?o(e):"string"==typeof e?l(e):s(e.low,e.high,e.unsigned)}t.fromString=l,t.fromValue=c;var u=4294967296,h=u*u,d=h/2,A=r(1<<24),f=r(0);t.ZERO=f;var p=r(0,!0);t.UZERO=p;var g=r(1);t.ONE=g;var m=r(1,!0);t.UONE=m;var v=r(-1);t.NEG_ONE=v;var y=s(-1,2147483647,!1);t.MAX_VALUE=y;var b=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=b;var _=s(0,-2147483648,!1);t.MIN_VALUE=_;var w=t.prototype;return w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},w.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var e=o(t),i=this.div(e),n=i.mul(e).sub(this);return i.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var r=o(a(t,6),this.unsigned),s=this,l="";;){var c=s.div(r),u=(s.sub(c.mul(r)).toInt()>>>0).toString(t);if((s=c).isZero())return u+l;for(;u.length<6;)u="0"+u;l=""+u+l}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},w.isZero=function(){return 0===this.high&&0===this.low},w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(t){return e(t)||(t=c(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},w.eq=w.equals,w.notEquals=function(t){return!this.eq(t)},w.neq=w.notEquals,w.lessThan=function(t){return this.comp(t)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(t){return this.comp(t)<=0},w.lte=w.lessThanOrEqual,w.greaterThan=function(t){return this.comp(t)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(t){return this.comp(t)>=0},w.gte=w.greaterThanOrEqual,w.compare=function(t){if(e(t)||(t=c(t)),this.eq(t))return 0;var i=this.isNegative(),n=t.isNegative();return i&&!n?-1:!i&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(g)},w.neg=w.negate,w.add=function(t){e(t)||(t=c(t));var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=t.high>>>16,l=65535&t.high,u=t.low>>>16,h=0,d=0,A=0,f=0;return A+=(f+=o+(65535&t.low))>>>16,d+=(A+=r+u)>>>16,h+=(d+=n+l)>>>16,h+=i+a,s((A&=65535)<<16|(f&=65535),(h&=65535)<<16|(d&=65535),this.unsigned)},w.subtract=function(t){return e(t)||(t=c(t)),this.add(t.neg())},w.sub=w.subtract,w.multiply=function(t){if(this.isZero())return f;if(e(t)||(t=c(t)),t.isZero())return f;if(this.eq(_))return t.isOdd()?_:f;if(t.eq(_))return this.isOdd()?_:f;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(A)&&t.lt(A))return o(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,l=t.high>>>16,u=65535&t.high,h=t.low>>>16,d=65535&t.low,p=0,g=0,m=0,v=0;return m+=(v+=a*d)>>>16,g+=(m+=r*d)>>>16,m&=65535,g+=(m+=a*h)>>>16,p+=(g+=n*d)>>>16,g&=65535,p+=(g+=r*h)>>>16,g&=65535,p+=(g+=a*u)>>>16,p+=i*d+n*h+r*u+a*l,s((m&=65535)<<16|(v&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(t){if(e(t)||(t=c(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?p:f;var i,n,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return p;if(t.gt(this.shru(1)))return m;r=p}else{if(this.eq(_))return t.eq(g)||t.eq(v)?_:t.eq(_)?g:(i=this.shr(1).div(t).shl(1)).eq(f)?t.isNegative()?g:v:(n=this.sub(t.mul(i)),r=i.add(n.div(t)));if(t.eq(_))return this.unsigned?p:f;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=f}for(n=this;n.gte(t);){i=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),l=s<=48?1:a(2,s-48),u=o(i),h=u.mul(t);h.isNegative()||h.gt(n);)h=(u=o(i-=l,this.unsigned)).mul(t);u.isZero()&&(u=g),r=r.add(u),n=n.sub(h)}return r},w.div=w.divide,w.modulo=function(t){return e(t)||(t=c(t)),this.sub(this.div(t).mul(t))},w.mod=w.modulo,w.not=function(){return s(~this.low,~this.high,this.unsigned)},w.and=function(t){return e(t)||(t=c(t)),s(this.low&t.low,this.high&t.high,this.unsigned)},w.or=function(t){return e(t)||(t=c(t)),s(this.low|t.low,this.high|t.high,this.unsigned)},w.xor=function(t){return e(t)||(t=c(t)),s(this.low^t.low,this.high^t.high,this.unsigned)},w.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?s(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):s(0,this.low<<t-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?s(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):s(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0==(t&=63))return this;var i=this.high;return t<32?s(this.low>>>t|i<<32-t,i>>>t,this.unsigned):s(32===t?i:i>>>t-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},w.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},w.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})?i.apply(e,[]):i)||(t.exports=n)},4245:t=>{t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],i=0;i<e.length;++i)if(t.hasOwnProperty(e[i]))throw new Error("Subject cannot be eventified, since it already has property '"+e[i]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(i,n,r){if("function"!=typeof n)throw new Error("callback is expected to be a function");var o=e[i];return o||(o=e[i]=[]),o.push({callback:n,ctx:r}),t},off:function(i,n){if(void 0===i)return e=Object.create(null),t;if(e[i])if("function"!=typeof n)delete e[i];else for(var r=e[i],o=0;o<r.length;++o)r[o].callback===n&&r.splice(o,1);return t},fire:function(i){var n,r=e[i];if(!r)return t;arguments.length>1&&(n=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,n)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},6505:(t,e,i)=>{t.exports=function(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var o=(e&&e.createSimulator||i(5818))(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var s=t.version>19?function(e){var i=t.getLinks(e);return i?1+i.size/3:1}:function(e){var i=t.getLinks(e);return i?1+i.length/3:1};e&&"function"==typeof e.nodeMass&&(s=e.nodeMass);var a=new Map,l={},c=0,u=o.settings.springTransform||r;c=0,t.forEachNode((function(t){g(t.id),c+=1})),t.forEachLink(m),t.on("changed",p);var h=!1,d={step:function(){if(0===c)return A(!0),!0;var t=o.step();d.lastMove=t,d.fire("step");var e=t/c<=.01;return A(e),e},getNodePosition:function(t){return b(t).pos},setNodePosition:function(t){var e=b(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=l[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:f,pinNode:function(t,e){b(t.id).isPinned=!!e},isNodePinned:function(t){return b(t.id).isPinned},dispose:function(){t.off("changed",p),d.fire("disposed")},getBody:function(t){return a.get(t)},getSpring:function(e,i){var n;if(void 0===i)n="object"!=typeof e?e:e.id;else{var r=t.hasLink(e,i);if(!r)return;n=r.id}return l[n]},getForceVectorLength:function(){var t=0,e=0;return f((function(i){t+=Math.abs(i.force.x),e+=Math.abs(i.force.y)})),Math.sqrt(t*t+e*e)},simulator:o,graph:t,lastMove:0};return n(d),d;function A(t){var e;h!==t&&(h=t,e=t,d.fire("stable",e))}function f(t){a.forEach(t)}function p(e){for(var i=0;i<e.length;++i){var n=e[i];"add"===n.changeType?(n.node&&g(n.node.id),n.link&&m(n.link)):"remove"===n.changeType&&(n.node&&(r=n.node,s=void 0,l=void 0,s=r.id,(l=a.get(s))&&(a.delete(s),o.removeBody(l))),n.link&&v(n.link))}var r,s,l;c=t.getNodesCount()}function g(e){var i=a.get(e);if(!i){var n=t.getNode(e);if(!n)throw new Error("initBody() was called with unknown node id");var r=n.position;if(!r){var s=function(t){var e=[];if(!t.links)return e;for(var i=Math.min(t.links.length,2),n=0;n<i;++n){var r=t.links[n],o=r.fromId!==t.id?a.get(r.fromId):a.get(r.toId);o&&o.pos&&e.push(o)}return e}(n);r=o.getBestNewBodyPosition(s)}(i=o.addBodyAt(r)).id=e,a.set(e,i),y(e),function(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}(n)&&(i.isPinned=!0)}}function m(t){y(t.fromId),y(t.toId);var e=a.get(t.fromId),i=a.get(t.toId),n=o.addSpring(e,i,t.length);u(t,n),l[t.id]=n}function v(e){var i=l[e.id];if(i){var n=t.getNode(e.fromId),r=t.getNode(e.toId);n&&y(n.id),r&&y(r.id),delete l[e.id],o.removeSpring(i)}}function y(t){var e=a.get(t);if(e.mass=s(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function b(t){var e=a.get(t);return e||(g(t),e=a.get(t)),e}},t.exports.simulator=i(5818);var n=i(4245);function r(){}},5189:(t,e,i)=>{const n=i(6422);t.exports=function(t){return function(e,i){let r=i&&i.indent||0,o=i&&void 0!==i.join?i.join:"\n",s=Array(r+1).join(" "),a=[];for(let i=0;i<t;++i){let t=n(i),r=0===i?"":s;a.push(r+e.replace(/{var}/g,t))}return a.join(o)}}},891:(t,e,i)=>{t.exports=function(t){let e=r(t);return new Function("bodies","settings","random",e)},t.exports.generateFunctionBody=r;const n=i(5189);function r(t){let e=n(t);return`\n  var boundingBox = {\n    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${e("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${e("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${e("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${e("var max_{var} = -Infinity;",{indent:4})}\n    ${e("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`}},6410:(t,e,i)=>{const n=i(5189);function r(t,e){return`\n${s(t,e)}\n${o(t)}\nreturn {Body: Body, Vector: Vector};\n`}function o(t){let e=n(t),i=e("{var}",{join:", "});return`\nfunction Body(${i}) {\n  this.isPinned = false;\n  this.pos = new Vector(${i});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${i}) {\n  ${e("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function s(t,e){let i=n(t),r="";return e&&(r=`${i("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`),`function Vector(${i("{var}",{join:", "})}) {\n  ${r}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${i('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${i("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${i('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${i("this.{var} = ",{join:""})}0;\n  };`}t.exports=function(t,e){let i=r(t,e),{Body:n}=new Function(i)();return n},t.exports.generateCreateBodyFunctionBody=r,t.exports.getVectorCode=s,t.exports.getBodyCode=o},6647:(t,e,i)=>{const n=i(5189);function r(t){return`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${n(t)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`}t.exports=function(t){let e=r(t);return new Function("options",e)},t.exports.generateCreateDragForceFunctionBody=r},4079:(t,e,i)=>{const n=i(5189);function r(t){let e=n(t);return`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`}t.exports=function(t){let e=r(t);return new Function("options","random",e)},t.exports.generateCreateSpringForceFunctionBody=r},1763:(t,e,i)=>{const n=i(5189);function r(t){let e=n(t);return`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${e("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${e("body.pos.{var} += d{var};",{indent:4})}\n\n    ${e("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${e("t{var} * t{var}",{join:" + "})})/length;\n`}t.exports=function(t){let e=r(t);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)},t.exports.generateIntegratorFunctionBody=r},1584:(t,e,i)=>{const n=i(5189),r=i(6422);function o(t){let e=n(t),i=Math.pow(2,t);return`\n\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n\n${c(t)}\n${s(t)}\n${l(t)}\n${a(t)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${function(t){let e=[];for(let t=0;t<i;++t)e.push(`      node.quad${t} = null;`);return e.join("\n")}()}\n      node.body = null;\n      node.mass = ${e("node.mass_{var} = ",{join:""})}0;\n      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${e("var d{var};",{indent:4})}\n    var r; \n    ${e("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${e("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < , treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${r(0)} - node.min_${r(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${e("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${function(){let t=Array(11).join(" "),e=[];for(let n=0;n<i;++n)e.push(t+`if (node.quad${n}) {`),e.push(t+`  queue[pushIdx] = node.quad${n};`),e.push(t+"  queueLength += 1;"),e.push(t+"  pushIdx += 1;"),e.push(t+"}");return e.join("\n")}()}\n        }\n      }\n    }\n\n    ${e("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${e("root.min_{var} = {var}min;",{indent:4})}\n    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${e("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${e("var min_{var} = node.min_{var};",{indent:8})}\n        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${function(e){let i=[],n=Array(9).join(" ");for(let e=0;e<t;++e)i.push(n+`if (${r(e)} > max_${r(e)}) {`),i.push(n+`  quadIdx = quadIdx + ${Math.pow(2,e)};`),i.push(n+`  min_${r(e)} = max_${r(e)};`),i.push(n+`  max_${r(e)} = node.max_${r(e)};`),i.push(n+"}");return i.join("\n")}()}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${e("child.min_{var} = min_{var};",{indent:10})}\n          ${e("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`}function s(t){let e=n(t);return`\n  function isSamePosition(point1, point2) {\n    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${e("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function a(t){var e=Math.pow(2,t);return`\nfunction setChild(node, idx, child) {\n  ${function(){let t=[];for(let i=0;i<e;++i){let e=0===i?"  ":"  else ";t.push(`${e}if (idx === ${i}) node.quad${i} = child;`)}return t.join("\n")}()}\n}`}function l(t){return`function getChild(node, idx) {\n${function(){let e=[],i=Math.pow(2,t);for(let t=0;t<i;++t)e.push(`  if (idx === ${t}) return node.quad${t};`);return e.join("\n")}()}\n  return null;\n}`}function c(t){let e=n(t),i=Math.pow(2,t);return`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${function(t){let e=[];for(let t=0;t<i;++t)e.push(`  this.quad${t} = null;`);return e.join("\n")}()}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${e("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${e("this.min_{var} = 0;",{indent:2})}\n  ${e("this.max_{var} = 0;",{indent:2})}\n}\n`}function u(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}t.exports=function(t){let e=o(t);return new Function(e)()},t.exports.generateQuadTreeFunctionBody=o,t.exports.getInsertStackCode=u,t.exports.getQuadNodeCode=c,t.exports.isSamePosition=s,t.exports.getChildBodyCode=l,t.exports.setChildBodyCode=a},6422:t=>{t.exports=function(t){return 0===t?"x":1===t?"y":2===t?"z":"c"+(t+1)}},5818:(t,e,i)=>{t.exports=function(t){var e=i(8403),h=i(5510),d=i(4245);if(t){if(void 0!==t.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==t.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}t=h(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var A=c[t.dimensions];if(!A){var f=t.dimensions;A={Body:n(f,t.debug),createQuadTree:r(f),createBounds:o(f),createDragForce:s(f),createSpringForce:a(f),integrate:l(f)},c[f]=A}var p=A.Body,g=A.createQuadTree,m=A.createBounds,v=A.createDragForce,y=A.createSpringForce,b=A.integrate,_=i(8712).random(42),w=[],x=[],C=g(t,_),E=m(w,t,_),k=y(t,_),T=v(t),B=[],S=new Map,P=0;O("nbody",(function(){if(0!==w.length){C.insertBodies(w);for(var t=w.length;t--;){var e=w[t];e.isPinned||(e.reset(),C.updateBodyForce(e),T.update(e))}}})),O("spring",(function(){for(var t=x.length;t--;)k.update(x[t])}));var M={bodies:w,quadTree:C,springs:x,settings:t,addForce:O,removeForce:function(t){var e=B.indexOf(S.get(t));e<0||(B.splice(e,1),S.delete(t))},getForces:function(){return S},step:function(){for(var e=0;e<B.length;++e)B[e](P);var i=b(w,t.timeStep,t.adaptiveTimeStepWeight);return P+=1,i},addBody:function(t){if(!t)throw new Error("Body is required");return w.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=(t=>new p(t))(t);return w.push(e),e},removeBody:function(t){if(t){var e=w.indexOf(t);if(!(e<0))return w.splice(e,1),0===w.length&&E.reset(),!0}},addSpring:function(t,i,n,r){if(!t||!i)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var o=new e(t,i,n,r>=0?r:-1);return x.push(o),o},getTotalMovement:function(){return 0},removeSpring:function(t){if(t){var e=x.indexOf(t);return e>-1?(x.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return E.getBestNewPosition(t)},getBBox:I,getBoundingBox:I,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(e){return void 0!==e?(t.gravity=e,C.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,C.options({theta:e}),this):t.theta},random:_};return function(t,e){for(var i in t)u(t,e,i)}(t,M),d(M),M;function I(){return E.update(),E.box}function O(t,e){if(S.has(t))throw new Error("Force "+t+" is already added");S.set(t,e),B.push(e)}};var n=i(6410),r=i(1584),o=i(891),s=i(6647),a=i(4079),l=i(1763),c={};function u(t,e,i){if(t.hasOwnProperty(i)&&"function"!=typeof e[i]){var n=Number.isFinite(t[i]);e[i]=n?function(n){if(void 0!==n){if(!Number.isFinite(n))throw new Error("Value of "+i+" should be a valid number.");return t[i]=n,e}return t[i]}:function(n){return void 0!==n?(t[i]=n,e):t[i]}}}},8403:t=>{t.exports=function(t,e,i,n){this.from=t,this.to=e,this.length=i,this.coefficient=n}},4736:(t,e,i)=>{t.exports=function(t){if("uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e,i=new Map,l=new Map,c={},u=0,h=t.multigraph?function(t,e,i){var n=a(t,e),r=c.hasOwnProperty(n);if(r||k(t,e)){r||(c[n]=0);var o="@"+ ++c[n];n=a(t+o,e+o)}return new s(t,e,i,n)}:function(t,e,i){var n=a(t,e),r=l.get(n);return r?(r.data=i,r):new s(t,e,i,n)},d=[],A=T,f=T,p=T,g=T,m={version:20,addNode:b,addLink:function(t,e,i){p();var n=_(t)||b(t),r=_(e)||b(e),s=h(t,e,i),a=l.has(s.id);return l.set(s.id,s),o(n,s),t!==e&&o(r,s),A(s,a?"update":"add"),g(),s},removeLink:function(t,e){return void 0!==e&&(t=k(t,e)),E(t)},removeNode:w,getNode:_,getNodeCount:x,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:x,getLinks:function(t){var e=_(t);return e?e.links:null},forEachNode:P,forEachLinkedNode:function(t,e,n){var r=_(t);if(r&&r.links&&"function"==typeof e)return n?function(t,e,n){for(var r=t.values(),o=r.next();!o.done;){var s=o.value;if(s.fromId===e&&n(i.get(s.toId),s))return!0;o=r.next()}}(r.links,t,e):function(t,e,n){for(var r=t.values(),o=r.next();!o.done;){var s=o.value,a=s.fromId===e?s.toId:s.fromId;if(n(i.get(a),s))return!0;o=r.next()}}(r.links,t,e)},forEachLink:function(t){if("function"==typeof t)for(var e=l.values(),i=e.next();!i.done;){if(t(i.value))return!0;i=e.next()}},beginUpdate:p,endUpdate:g,clear:function(){p(),P((function(t){w(t.id)})),g()},hasLink:k,hasNode:_,getLink:k};return n(m),e=m.on,m.on=function(){return m.beginUpdate=p=B,m.endUpdate=g=S,A=v,f=y,m.on=e,e.apply(m,arguments)},m;function v(t,e){d.push({link:t,changeType:e})}function y(t,e){d.push({node:t,changeType:e})}function b(t,e){if(void 0===t)throw new Error("Invalid node identifier");p();var n=_(t);return n?(n.data=e,f(n,"update")):(n=new r(t,e),f(n,"add")),i.set(t,n),g(),n}function _(t){return i.get(t)}function w(t){var e=_(t);if(!e)return!1;p();var n=e.links;return n&&(n.forEach(E),e.links=null),i.delete(t),f(e,"remove"),g(),!0}function x(){return i.size}function C(){return l.size}function E(t){if(!t)return!1;if(!l.get(t.id))return!1;p(),l.delete(t.id);var e=_(t.fromId),i=_(t.toId);return e&&e.links.delete(t),i&&i.links.delete(t),A(t,"remove"),g(),!0}function k(t,e){if(void 0!==t&&void 0!==e)return l.get(a(t,e))}function T(){}function B(){u+=1}function S(){0==(u-=1)&&d.length>0&&(m.fire("changed",d),d.length=0)}function P(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var e=i.values(),n=e.next();!n.done;){if(t(n.value))return!0;n=e.next()}}};var n=i(4245);function r(t,e){this.id=t,this.links=null,this.data=e}function o(t,e){t.links?t.links.add(e):t.links=new Set([e])}function s(t,e,i,n){this.fromId=t,this.toId=e,this.data=i,this.id=n}function a(t,e){return t.toString()+" "+e.toString()}},5510:t=>{t.exports=function t(e,i){var n;if(e||(e={}),i)for(n in i)if(i.hasOwnProperty(n)){var r=e.hasOwnProperty(n),o=typeof i[n];r&&typeof e[n]===o?"object"===o&&(e[n]=t(e[n],i[n])):e[n]=i[n]}return e}},8712:t=>{function e(t){return new i("number"==typeof t?t:+new Date)}function i(t){this.seed=t}function n(t){return Math.sqrt(2*Math.PI/t)*Math.pow(1/Math.E*(t+1/(12*t-1/(10*t))),t)}function r(){var t=this.seed;return t=4294967295&(3042594569^(t=4251993797+(t=4294967295&(3550635116+(t=374761393+(t=4294967295&(3345072700^(t=t+2127912214+(t<<12)&4294967295)^t>>>19))+(t<<5)&4294967295)^t<<9))+(t<<3)&4294967295)^t>>>16),this.seed=t,(268435455&t)/268435456}t.exports=e,t.exports.random=e,t.exports.randomIterator=function(t,i){var n=i||e();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var i,r,o;for(i=t.length-1;i>0;--i)r=n.next(i+1),o=t[r],t[r]=t[i],t[i]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,i,r;for(e=t.length-1;e>0;--e)i=n.next(e+1),r=t[i],t[i]=t[e],t[e]=r;return t}}},i.prototype.next=function(t){return Math.floor(this.nextDouble()*t)},i.prototype.nextDouble=r,i.prototype.uniform=r,i.prototype.gaussian=function(){var t,e,i;do{t=(e=2*this.nextDouble()-1)*e+(i=2*this.nextDouble()-1)*i}while(t>=1||0===t);return e*Math.sqrt(-2*Math.log(t)/t)},i.prototype.levy=function(){var t=1.5,e=Math.pow(n(2.5)*Math.sin(Math.PI*t/2)/(n(1.25)*t*Math.pow(2,.25)),1/t);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),1/t)}},3614:(t,e,i)=>{"use strict";t.exports=r;var n=i(645);function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var o=4294967296,s=1/o,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function c(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function h(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function A(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,o=i.buf;if(n=(112&(r=o[i.pos++]))>>4,r<128)return c(t,n,e);if(n|=(127&(r=o[i.pos++]))<<3,r<128)return c(t,n,e);if(n|=(127&(r=o[i.pos++]))<<10,r<128)return c(t,n,e);if(n|=(127&(r=o[i.pos++]))<<17,r<128)return c(t,n,e);if(n|=(127&(r=o[i.pos++]))<<24,r<128)return c(t,n,e);if(n|=(1&(r=o[i.pos++]))<<31,r<128)return c(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&a?function(t,e,i){return a.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var o,s,a,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&((c=(15&l)<<12|(63&o)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e));var i=l(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&u(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&u(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,A,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},4153:t=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,i=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t,r={}){if(r=Object.assign({},n,r),!t||"string"!=typeof t)return t;let o=t.trim();if(void 0!==r.skipLike&&r.skipLike.test(o))return t;if(r.hex&&e.test(o))return Number.parseInt(o,16);{const e=i.exec(o);if(e){const i=e[1],n=e[2];let a=(s=e[3])&&-1!==s.indexOf(".")?("."===(s=s.replace(/0+$/,""))?s="0":"."===s[0]?s="0"+s:"."===s[s.length-1]&&(s=s.substr(0,s.length-1)),s):s;const l=e[4]||e[6];if(!r.leadingZeros&&n.length>0&&i&&"."!==o[2])return t;if(!r.leadingZeros&&n.length>0&&!i&&"."!==o[1])return t;{const e=Number(o),s=""+e;return-1!==s.search(/[eE]/)||l?r.eNotation?e:t:-1!==o.indexOf(".")?"0"===s&&""===a||s===a||i&&s==="-"+a?e:t:n?a===s||i+a===s?e:t:o===s||o===i+s?e:t}}return t}var s}},1638:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var n=i(3379),r=i.n(n),o=i(7795),s=i.n(o),a=i(569),l=i.n(a),c=i(3565),u=i.n(c),h=i(9216),d=i.n(h),A=i(4589),f=i.n(A),p=i(2751),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=d(),r()(p.Z,g);const m=p.Z&&p.Z.locals?p.Z.locals:void 0},449:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var n=i(3379),r=i.n(n),o=i(7795),s=i.n(o),a=i(569),l=i.n(a),c=i(3565),u=i.n(c),h=i(9216),d=i.n(h),A=i(4589),f=i.n(A),p=i(2117),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=d(),r()(p.Z,g);const m=p.Z&&p.Z.locals?p.Z.locals:void 0},7468:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var n=i(3379),r=i.n(n),o=i(7795),s=i.n(o),a=i(569),l=i.n(a),c=i(3565),u=i.n(c),h=i(9216),d=i.n(h),A=i(4589),f=i.n(A),p=i(9684),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=d(),r()(p.Z,g);const m=p.Z&&p.Z.locals?p.Z.locals:void 0},3379:t=>{"use strict";var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var o={},s=[],a=0;a<t.length;a++){var l=t[a],c=n.base?l[0]+n.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var d=i(h),A={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(A);else{var f=r(A,n);n.byIndex=a,e.splice(a,0,{identifier:h,updater:f,references:1})}s.push(h)}return s}function r(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,r){var o=n(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=i(o[s]);e[a].references--}for(var l=n(t,r),c=0;c<o.length;c++){var u=i(o[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}o=l}}},569:t=>{"use strict";var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,r&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},801:function(t,e,i){!function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},r={exports:{}},o=function(t){return t&&t.Math==Math&&t},s=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},l=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),c=l,u=Function.prototype,h=u.apply,d=u.call,A="object"==typeof Reflect&&Reflect.apply||(c?d.bind(h):function(){return d.apply(h,arguments)}),f=l,p=Function.prototype,g=p.bind,m=p.call,v=f&&g.bind(m,m),y=f?function(t){return t&&v(t)}:function(t){return t&&function(){return m.apply(t,arguments)}},b=function(t){return"function"==typeof t},_={},w=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=l,C=Function.prototype.call,E=x?C.bind(C):function(){return C.apply(C,arguments)},k={},T={}.propertyIsEnumerable,B=Object.getOwnPropertyDescriptor,S=B&&!T.call({1:2},1);k.f=S?function(t){var e=B(this,t);return!!e&&e.enumerable}:T;var P,M,I=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},O=y,D=O({}.toString),L=O("".slice),F=function(t){return L(D(t),8,-1)},R=y,N=a,z=F,j=s.Object,U=R("".split),Z=N((function(){return!j("z").propertyIsEnumerable(0)}))?function(t){return"String"==z(t)?U(t,""):j(t)}:j,H=s.TypeError,G=function(t){if(null==t)throw H("Can't call method on "+t);return t},V=Z,W=G,q=function(t){return V(W(t))},Q=b,Y=function(t){return"object"==typeof t?null!==t:Q(t)},X={},J=X,K=s,$=b,tt=function(t){return $(t)?t:void 0},et=function(t,e){return arguments.length<2?tt(J[t])||tt(K[t]):J[t]&&J[t][e]||K[t]&&K[t][e]},it=y({}.isPrototypeOf),nt=et("navigator","userAgent")||"",rt=s,ot=nt,st=rt.process,at=rt.Deno,lt=st&&st.versions||at&&at.version,ct=lt&&lt.v8;ct&&(M=(P=ct.split("."))[0]>0&&P[0]<4?1:+(P[0]+P[1])),!M&&ot&&(!(P=ot.match(/Edge\/(\d+)/))||P[1]>=74)&&(P=ot.match(/Chrome\/(\d+)/))&&(M=+P[1]);var ut=M,ht=ut,dt=a,At=!!Object.getOwnPropertySymbols&&!dt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ht&&ht<41})),ft=At&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,pt=et,gt=b,mt=it,vt=ft,yt=s.Object,bt=vt?function(t){return"symbol"==typeof t}:function(t){var e=pt("Symbol");return gt(e)&&mt(e.prototype,yt(t))},_t=s.String,wt=function(t){try{return _t(t)}catch(t){return"Object"}},xt=b,Ct=wt,Et=s.TypeError,kt=function(t){if(xt(t))return t;throw Et(Ct(t)+" is not a function")},Tt=kt,Bt=function(t,e){var i=t[e];return null==i?void 0:Tt(i)},St=E,Pt=b,Mt=Y,It=s.TypeError,Ot={exports:{}},Dt=s,Lt=Object.defineProperty,Ft="__core-js_shared__",Rt=s[Ft]||function(t,e){try{Lt(Dt,t,{value:e,configurable:!0,writable:!0})}catch(i){Dt[t]=e}return e}(Ft,{}),Nt=Rt;(Ot.exports=function(t,e){return Nt[t]||(Nt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"pure",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var zt=G,jt=s.Object,Ut=function(t){return jt(zt(t))},Zt=Ut,Ht=y({}.hasOwnProperty),Gt=Object.hasOwn||function(t,e){return Ht(Zt(t),e)},Vt=y,Wt=0,qt=Math.random(),Qt=Vt(1..toString),Yt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Qt(++Wt+qt,36)},Xt=s,Jt=Ot.exports,Kt=Gt,$t=Yt,te=At,ee=ft,ie=Jt("wks"),ne=Xt.Symbol,re=ne&&ne.for,oe=ee?ne:ne&&ne.withoutSetter||$t,se=function(t){if(!Kt(ie,t)||!te&&"string"!=typeof ie[t]){var e="Symbol."+t;te&&Kt(ne,t)?ie[t]=ne[t]:ie[t]=ee&&re?re(e):oe(e)}return ie[t]},ae=E,le=Y,ce=bt,ue=Bt,he=function(t,e){var i,n;if("string"===e&&Pt(i=t.toString)&&!Mt(n=St(i,t)))return n;if(Pt(i=t.valueOf)&&!Mt(n=St(i,t)))return n;if("string"!==e&&Pt(i=t.toString)&&!Mt(n=St(i,t)))return n;throw It("Can't convert object to primitive value")},de=se,Ae=s.TypeError,fe=de("toPrimitive"),pe=bt,ge=function(t){var e=function(t,e){if(!le(t)||ce(t))return t;var i,n=ue(t,fe);if(n){if(void 0===e&&(e="default"),i=ae(n,t,e),!le(i)||ce(i))return i;throw Ae("Can't convert object to primitive value")}return void 0===e&&(e="number"),he(t,e)}(t,"string");return pe(e)?e:e+""},me=Y,ve=s.document,ye=me(ve)&&me(ve.createElement),be=function(t){return ye?ve.createElement(t):{}},_e=be,we=!w&&!a((function(){return 7!=Object.defineProperty(_e("div"),"a",{get:function(){return 7}}).a})),xe=w,Ce=E,Ee=k,ke=I,Te=q,Be=ge,Se=Gt,Pe=we,Me=Object.getOwnPropertyDescriptor;_.f=xe?Me:function(t,e){if(t=Te(t),e=Be(e),Pe)try{return Me(t,e)}catch(t){}if(Se(t,e))return ke(!Ce(Ee.f,t,e),t[e])};var Ie=a,Oe=b,De=/#|\.prototype\./,Le=function(t,e){var i=Re[Fe(t)];return i==ze||i!=Ne&&(Oe(e)?Ie(e):!!e)},Fe=Le.normalize=function(t){return String(t).replace(De,".").toLowerCase()},Re=Le.data={},Ne=Le.NATIVE="N",ze=Le.POLYFILL="P",je=Le,Ue=kt,Ze=l,He=y(y.bind),Ge=function(t,e){return Ue(t),void 0===e?t:Ze?He(t,e):function(){return t.apply(e,arguments)}},Ve={},We=w&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),qe=s,Qe=Y,Ye=qe.String,Xe=qe.TypeError,Je=function(t){if(Qe(t))return t;throw Xe(Ye(t)+" is not an object")},Ke=w,$e=we,ti=We,ei=Je,ii=ge,ni=s.TypeError,ri=Object.defineProperty,oi=Object.getOwnPropertyDescriptor,si="enumerable",ai="configurable",li="writable";Ve.f=Ke?ti?function(t,e,i){if(ei(t),e=ii(e),ei(i),"function"==typeof t&&"prototype"===e&&"value"in i&&li in i&&!i.writable){var n=oi(t,e);n&&n.writable&&(t[e]=i.value,i={configurable:ai in i?i.configurable:n.configurable,enumerable:si in i?i.enumerable:n.enumerable,writable:!1})}return ri(t,e,i)}:ri:function(t,e,i){if(ei(t),e=ii(e),ei(i),$e)try{return ri(t,e,i)}catch(t){}if("get"in i||"set"in i)throw ni("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var ci=Ve,ui=I,hi=w?function(t,e,i){return ci.f(t,e,ui(1,i))}:function(t,e,i){return t[e]=i,t},di=s,Ai=A,fi=y,pi=b,gi=_.f,mi=je,vi=X,yi=Ge,bi=hi,_i=Gt,wi=function(t){var e=function(i,n,r){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,n)}return new t(i,n,r)}return Ai(t,this,arguments)};return e.prototype=t.prototype,e},xi=function(t,e){var i,n,r,o,s,a,l,c,u=t.target,h=t.global,d=t.stat,A=t.proto,f=h?di:d?di[u]:(di[u]||{}).prototype,p=h?vi:vi[u]||bi(vi,u,{})[u],g=p.prototype;for(r in e)i=!mi(h?r:u+(d?".":"#")+r,t.forced)&&f&&_i(f,r),s=p[r],i&&(a=t.noTargetGet?(c=gi(f,r))&&c.value:f[r]),o=i&&a?a:e[r],i&&typeof s==typeof o||(l=t.bind&&i?yi(o,di):t.wrap&&i?wi(o):A&&pi(o)?fi(o):o,(t.sham||o&&o.sham||s&&s.sham)&&bi(l,"sham",!0),bi(p,r,l),A&&(_i(vi,n=u+"Prototype")||bi(vi,n,{}),bi(vi[n],r,o),t.real&&g&&!g[r]&&bi(g,r,o)))},Ci=xi,Ei=w,ki=Ve.f;Ci({target:"Object",stat:!0,forced:Object.defineProperty!==ki,sham:!Ei},{defineProperty:ki});var Ti=X.Object,Bi=r.exports=function(t,e,i){return Ti.defineProperty(t,e,i)};Ti.defineProperty.sham&&(Bi.sham=!0);var Si=r.exports,Pi=Si;function Mi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Pi(t,n.key,n)}}function Ii(t,e,i){return e&&Mi(t.prototype,e),i&&Mi(t,i),Pi(t,"prototype",{writable:!1}),t}function Oi(t,e,i){return e in t?Pi(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Di=y([].slice),Li=y,Fi=kt,Ri=Y,Ni=Gt,zi=Di,ji=l,Ui=s.Function,Zi=Li([].concat),Hi=Li([].join),Gi={},Vi=function(t,e,i){if(!Ni(Gi,e)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";Gi[e]=Ui("C,a","return new C("+Hi(n,",")+")")}return Gi[e](t,i)},Wi=ji?Ui.bind:function(t){var e=Fi(this),i=e.prototype,n=zi(arguments,1),r=function(){var i=Zi(n,zi(arguments));return this instanceof r?Vi(e,i.length,i):e.apply(t,i)};return Ri(i)&&(r.prototype=i),r},qi=Wi;xi({target:"Function",proto:!0,forced:Function.bind!==qi},{bind:qi});var Qi=X,Yi=function(t){return Qi[t+"Prototype"]},Xi=Yi("Function").bind,Ji=it,Ki=Xi,$i=Function.prototype,tn=function(t){var e=t.bind;return t===$i||Ji($i,t)&&e===$i.bind?Ki:e},en=Math.ceil,nn=Math.floor,rn=function(t){var e=+t;return e!=e||0===e?0:(e>0?nn:en)(e)},on=rn,sn=Math.min,an=function(t){return(e=t.length)>0?sn(on(e),9007199254740991):0;var e},ln=kt,cn=Ut,un=Z,hn=an,dn=s.TypeError,An=function(t){return function(e,i,n,r){ln(i);var o=cn(e),s=un(o),a=hn(o),l=t?a-1:0,c=t?-1:1;if(n<2)for(;;){if(l in s){r=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw dn("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(r=i(r,s[l],l,o));return r}},fn={left:An(!1),right:An(!0)},pn=a,gn=function(t,e){var i=[][t];return!!i&&pn((function(){i.call(null,e||function(){return 1},1)}))},mn="process"==F(s.process),vn=fn.left,yn=ut,bn=mn;xi({target:"Array",proto:!0,forced:!gn("reduce")||!bn&&yn>79&&yn<83},{reduce:function(t){var e=arguments.length;return vn(this,t,e,e>1?arguments[1]:void 0)}});var _n=Yi("Array").reduce,wn=it,xn=_n,Cn=Array.prototype,En=function(t){var e=t.reduce;return t===Cn||wn(Cn,t)&&e===Cn.reduce?xn:e},kn=F,Tn=Array.isArray||function(t){return"Array"==kn(t)},Bn={};Bn[se("toStringTag")]="z";var Sn="[object z]"===String(Bn),Pn=s,Mn=Sn,In=b,On=F,Dn=se("toStringTag"),Ln=Pn.Object,Fn="Arguments"==On(function(){return arguments}()),Rn=Mn?On:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Ln(t),Dn))?i:Fn?On(e):"Object"==(n=On(e))&&In(e.callee)?"Arguments":n},Nn=b,zn=Rt,jn=y(Function.toString);Nn(zn.inspectSource)||(zn.inspectSource=function(t){return jn(t)});var Un=zn.inspectSource,Zn=y,Hn=a,Gn=b,Vn=Rn,Wn=Un,qn=function(){},Qn=[],Yn=et("Reflect","construct"),Xn=/^\s*(?:class|function)\b/,Jn=Zn(Xn.exec),Kn=!Xn.exec(qn),$n=function(t){if(!Gn(t))return!1;try{return Yn(qn,Qn,t),!0}catch(t){return!1}},tr=function(t){if(!Gn(t))return!1;switch(Vn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Kn||!!Jn(Xn,Wn(t))}catch(t){return!0}};tr.sham=!0;var er=!Yn||Hn((function(){var t;return $n($n.call)||!$n(Object)||!$n((function(){t=!0}))||t}))?tr:$n,ir=s,nr=Tn,rr=er,or=Y,sr=se("species"),ar=ir.Array,lr=function(t,e){return new(function(t){var e;return nr(t)&&(e=t.constructor,(rr(e)&&(e===ar||nr(e.prototype))||or(e)&&null===(e=e[sr]))&&(e=void 0)),void 0===e?ar:e}(t))(0===e?0:e)},cr=Ge,ur=Z,hr=Ut,dr=an,Ar=lr,fr=y([].push),pr=function(t){var e=1==t,i=2==t,n=3==t,r=4==t,o=6==t,s=7==t,a=5==t||o;return function(l,c,u,h){for(var d,A,f=hr(l),p=ur(f),g=cr(c,u),m=dr(p),v=0,y=h||Ar,b=e?y(l,m):i||s?y(l,0):void 0;m>v;v++)if((a||v in p)&&(A=g(d=p[v],v,f),t))if(e)b[v]=A;else if(A)switch(t){case 3:return!0;case 5:return d;case 6:return v;case 2:fr(b,d)}else switch(t){case 4:return!1;case 7:fr(b,d)}return o?-1:n||r?r:b}},gr={forEach:pr(0),map:pr(1),filter:pr(2),some:pr(3),every:pr(4),find:pr(5),findIndex:pr(6),filterReject:pr(7)},mr=a,vr=ut,yr=se("species"),br=function(t){return vr>=51||!mr((function(){var e=[];return(e.constructor={})[yr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_r=gr.filter;xi({target:"Array",proto:!0,forced:!br("filter")},{filter:function(t){return _r(this,t,arguments.length>1?arguments[1]:void 0)}});var wr=Yi("Array").filter,xr=it,Cr=wr,Er=Array.prototype,kr=function(t){var e=t.filter;return t===Er||xr(Er,t)&&e===Er.filter?Cr:e},Tr=gr.map;xi({target:"Array",proto:!0,forced:!br("map")},{map:function(t){return Tr(this,t,arguments.length>1?arguments[1]:void 0)}});var Br=Yi("Array").map,Sr=it,Pr=Br,Mr=Array.prototype,Ir=function(t){var e=t.map;return t===Mr||Sr(Mr,t)&&e===Mr.map?Pr:e},Or=Tn,Dr=an,Lr=Ge,Fr=s.TypeError,Rr=function(t,e,i,n,r,o,s,a){for(var l,c,u=r,h=0,d=!!s&&Lr(s,a);h<n;){if(h in i){if(l=d?d(i[h],h,e):i[h],o>0&&Or(l))c=Dr(l),u=Rr(t,e,l,c,u,o-1)-1;else{if(u>=9007199254740991)throw Fr("Exceed the acceptable array length");t[u]=l}u++}h++}return u},Nr=Rr,zr=kt,jr=Ut,Ur=an,Zr=lr;xi({target:"Array",proto:!0},{flatMap:function(t){var e,i=jr(this),n=Ur(i);return zr(t),(e=Zr(i,0)).length=Nr(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var Hr=Yi("Array").flatMap,Gr=it,Vr=Hr,Wr=Array.prototype;var qr,Qr,Yr,Xr=function(){function t(i,n,r){var o,s,a;e(this,t),Oi(this,"_source",void 0),Oi(this,"_transformers",void 0),Oi(this,"_target",void 0),Oi(this,"_listeners",{add:tn(o=this._add).call(o,this),remove:tn(s=this._remove).call(s,this),update:tn(a=this._update).call(a,this)}),this._source=i,this._transformers=n,this._target=r}return Ii(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var e;return En(e=this._transformers).call(e,(function(t,e){return e(t)}),t)}},{key:"_add",value:function(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}},{key:"_update",value:function(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}},{key:"_remove",value:function(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}]),t}(),Jr=function(){function t(i){e(this,t),Oi(this,"_source",void 0),Oi(this,"_transformers",[]),this._source=i}return Ii(t,[{key:"filter",value:function(t){return this._transformers.push((function(e){return kr(e).call(e,t)})),this}},{key:"map",value:function(t){return this._transformers.push((function(e){return Ir(e).call(e,t)})),this}},{key:"flatMap",value:function(t){return this._transformers.push((function(e){return(i=e,n=i.flatMap,i===Wr||Gr(Wr,i)&&n===Wr.flatMap?Vr:n).call(e,t);var i,n})),this}},{key:"to",value:function(t){return new Xr(this._source,this._transformers,t)}}]),t}(),Kr=Rn,$r=s.String,to=function(t){if("Symbol"===Kr(t))throw TypeError("Cannot convert a Symbol value to a string");return $r(t)},eo=y,io=rn,no=to,ro=G,oo=eo("".charAt),so=eo("".charCodeAt),ao=eo("".slice),lo=function(t){return function(e,i){var n,r,o=no(ro(e)),s=io(i),a=o.length;return s<0||s>=a?t?"":void 0:(n=so(o,s))<55296||n>56319||s+1===a||(r=so(o,s+1))<56320||r>57343?t?oo(o,s):n:t?ao(o,s,s+2):r-56320+(n-55296<<10)+65536}},co={codeAt:lo(!1),charAt:lo(!0)},uo=b,ho=Un,Ao=s.WeakMap,fo=uo(Ao)&&/native code/.test(ho(Ao)),po=Ot.exports,go=Yt,mo=po("keys"),vo=function(t){return mo[t]||(mo[t]=go(t))},yo={},bo=fo,_o=s,wo=y,xo=Y,Co=hi,Eo=Gt,ko=Rt,To=vo,Bo=yo,So="Object already initialized",Po=_o.TypeError,Mo=_o.WeakMap;if(bo||ko.state){var Io=ko.state||(ko.state=new Mo),Oo=wo(Io.get),Do=wo(Io.has),Lo=wo(Io.set);qr=function(t,e){if(Do(Io,t))throw new Po(So);return e.facade=t,Lo(Io,t,e),e},Qr=function(t){return Oo(Io,t)||{}},Yr=function(t){return Do(Io,t)}}else{var Fo=To("state");Bo[Fo]=!0,qr=function(t,e){if(Eo(t,Fo))throw new Po(So);return e.facade=t,Co(t,Fo,e),e},Qr=function(t){return Eo(t,Fo)?t[Fo]:{}},Yr=function(t){return Eo(t,Fo)}}var Ro={set:qr,get:Qr,has:Yr,enforce:function(t){return Yr(t)?Qr(t):qr(t,{})},getterFor:function(t){return function(e){var i;if(!xo(e)||(i=Qr(e)).type!==t)throw Po("Incompatible receiver, "+t+" required");return i}}},No=w,zo=Gt,jo=Function.prototype,Uo=No&&Object.getOwnPropertyDescriptor,Zo=zo(jo,"name"),Ho={EXISTS:Zo,PROPER:Zo&&"something"===function(){}.name,CONFIGURABLE:Zo&&(!No||No&&Uo(jo,"name").configurable)},Go={},Vo=rn,Wo=Math.max,qo=Math.min,Qo=function(t,e){var i=Vo(t);return i<0?Wo(i+e,0):qo(i,e)},Yo=q,Xo=Qo,Jo=an,Ko=function(t){return function(e,i,n){var r,o=Yo(e),s=Jo(o),a=Xo(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}},$o={includes:Ko(!0),indexOf:Ko(!1)},ts=Gt,es=q,is=$o.indexOf,ns=yo,rs=y([].push),os=function(t,e){var i,n=es(t),r=0,o=[];for(i in n)!ts(ns,i)&&ts(n,i)&&rs(o,i);for(;e.length>r;)ts(n,i=e[r++])&&(~is(o,i)||rs(o,i));return o},ss=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],as=os,ls=ss,cs=Object.keys||function(t){return as(t,ls)},us=w,hs=We,ds=Ve,As=Je,fs=q,ps=cs;Go.f=us&&!hs?Object.defineProperties:function(t,e){As(t);for(var i,n=fs(e),r=ps(e),o=r.length,s=0;o>s;)ds.f(t,i=r[s++],n[i]);return t};var gs,ms=et("document","documentElement"),vs=Je,ys=Go,bs=ss,_s=yo,ws=ms,xs=be,Cs=vo("IE_PROTO"),Es=function(){},ks=function(t){return"<script>"+t+"</"+"script>"},Ts=function(t){t.write(ks("")),t.close();var e=t.parentWindow.Object;return t=null,e},Bs=function(){try{gs=new ActiveXObject("htmlfile")}catch(t){}var t,e;Bs="undefined"!=typeof document?document.domain&&gs?Ts(gs):((e=xs("iframe")).style.display="none",ws.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ks("document.F=Object")),t.close(),t.F):Ts(gs);for(var i=bs.length;i--;)delete Bs.prototype[bs[i]];return Bs()};_s[Cs]=!0;var Ss,Ps,Ms,Is=Object.create||function(t,e){var i;return null!==t?(Es.prototype=vs(t),i=new Es,Es.prototype=null,i[Cs]=t):i=Bs(),void 0===e?i:ys.f(i,e)},Os=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ds=s,Ls=Gt,Fs=b,Rs=Ut,Ns=Os,zs=vo("IE_PROTO"),js=Ds.Object,Us=js.prototype,Zs=Ns?js.getPrototypeOf:function(t){var e=Rs(t);if(Ls(e,zs))return e[zs];var i=e.constructor;return Fs(i)&&e instanceof i?i.prototype:e instanceof js?Us:null},Hs=hi,Gs=function(t,e,i,n){n&&n.enumerable?t[e]=i:Hs(t,e,i)},Vs=a,Ws=b,qs=Is,Qs=Zs,Ys=Gs,Xs=se("iterator"),Js=!1;[].keys&&("next"in(Ms=[].keys())?(Ps=Qs(Qs(Ms)))!==Object.prototype&&(Ss=Ps):Js=!0);var Ks=null==Ss||Vs((function(){var t={};return Ss[Xs].call(t)!==t}));Ws((Ss=Ks?{}:qs(Ss))[Xs])||Ys(Ss,Xs,(function(){return this}));var $s={IteratorPrototype:Ss,BUGGY_SAFARI_ITERATORS:Js},ta=Rn,ea=Sn?{}.toString:function(){return"[object "+ta(this)+"]"},ia=Sn,na=Ve.f,ra=hi,oa=Gt,sa=ea,aa=se("toStringTag"),la=function(t,e,i,n){if(t){var r=i?t:t.prototype;oa(r,aa)||na(r,aa,{configurable:!0,value:e}),n&&!ia&&ra(r,"toString",sa)}},ca={},ua=$s.IteratorPrototype,ha=Is,da=I,Aa=la,fa=ca,pa=function(){return this},ga=s,ma=b,va=ga.String,ya=ga.TypeError,ba=y,_a=Je,wa=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=ba(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return _a(i),function(t){if("object"==typeof t||ma(t))return t;throw ya("Can't set "+va(t)+" as a prototype")}(n),e?t(i,n):i.__proto__=n,i}}():void 0),xa=xi,Ca=E,Ea=function(t,e,i,n){var r=e+" Iterator";return t.prototype=ha(ua,{next:da(+!n,i)}),Aa(t,r,!1,!0),fa[r]=pa,t},ka=Zs,Ta=la,Ba=Gs,Sa=ca,Pa=Ho.PROPER,Ma=$s.BUGGY_SAFARI_ITERATORS,Ia=se("iterator"),Oa="keys",Da="values",La="entries",Fa=function(){return this},Ra=function(t,e,i,n,r,o,s){Ea(i,e,n);var a,l,c,u=function(t){if(t===r&&p)return p;if(!Ma&&t in A)return A[t];switch(t){case Oa:case Da:case La:return function(){return new i(this,t)}}return function(){return new i(this)}},h=e+" Iterator",d=!1,A=t.prototype,f=A[Ia]||A["@@iterator"]||r&&A[r],p=!Ma&&f||u(r),g="Array"==e&&A.entries||f;if(g&&(a=ka(g.call(new t)))!==Object.prototype&&a.next&&(Ta(a,h,!0,!0),Sa[h]=Fa),Pa&&r==Da&&f&&f.name!==Da&&(d=!0,p=function(){return Ca(f,this)}),r)if(l={values:u(Da),keys:o?p:u(Oa),entries:u(La)},s)for(c in l)(Ma||d||!(c in A))&&Ba(A,c,l[c]);else xa({target:e,proto:!0,forced:Ma||d},l);return s&&A[Ia]!==p&&Ba(A,Ia,p,{name:r}),Sa[e]=p,l},Na=co.charAt,za=to,ja=Ro,Ua=Ra,Za="String Iterator",Ha=ja.set,Ga=ja.getterFor(Za);Ua(String,"String",(function(t){Ha(this,{type:Za,string:za(t),index:0})}),(function(){var t,e=Ga(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:!0}:(t=Na(i,n),e.index+=t.length,{value:t,done:!1})}));var Va=E,Wa=Je,qa=Bt,Qa=function(t,e,i){var n,r;Wa(t);try{if(!(n=qa(t,"return"))){if("throw"===e)throw i;return i}n=Va(n,t)}catch(t){r=!0,n=t}if("throw"===e)throw i;if(r)throw n;return Wa(n),i},Ya=Je,Xa=Qa,Ja=ca,Ka=se("iterator"),$a=Array.prototype,tl=function(t){return void 0!==t&&(Ja.Array===t||$a[Ka]===t)},el=ge,il=Ve,nl=I,rl=function(t,e,i){var n=el(e);n in t?il.f(t,n,nl(0,i)):t[n]=i},ol=Rn,sl=Bt,al=ca,ll=se("iterator"),cl=function(t){if(null!=t)return sl(t,ll)||sl(t,"@@iterator")||al[ol(t)]},ul=E,hl=kt,dl=Je,Al=wt,fl=cl,pl=s.TypeError,gl=function(t,e){var i=arguments.length<2?fl(t):e;if(hl(i))return dl(ul(i,t));throw pl(Al(t)+" is not iterable")},ml=Ge,vl=E,yl=Ut,bl=function(t,e,i,n){try{return n?e(Ya(i)[0],i[1]):e(i)}catch(e){Xa(t,"throw",e)}},_l=tl,wl=er,xl=an,Cl=rl,El=gl,kl=cl,Tl=s.Array,Bl=se("iterator"),Sl=!1;try{var Pl=0,Ml={next:function(){return{done:!!Pl++}},return:function(){Sl=!0}};Ml[Bl]=function(){return this},Array.from(Ml,(function(){throw 2}))}catch(t){}var Il=xi,Ol=function(t){var e=yl(t),i=wl(this),n=arguments.length,r=n>1?arguments[1]:void 0,o=void 0!==r;o&&(r=ml(r,n>2?arguments[2]:void 0));var s,a,l,c,u,h,d=kl(e),A=0;if(!d||this==Tl&&_l(d))for(s=xl(e),a=i?new this(s):Tl(s);s>A;A++)h=o?r(e[A],A):e[A],Cl(a,A,h);else for(u=(c=El(e,d)).next,a=i?new this:[];!(l=vl(u,c)).done;A++)h=o?bl(c,r,[l.value,A],!0):l.value,Cl(a,A,h);return a.length=A,a},Dl=!function(t,e){if(!e&&!Sl)return!1;var i=!1;try{var n={};n[Bl]=function(){return{next:function(){return{done:i=!0}}}},t(n)}catch(t){}return i}((function(t){Array.from(t)}));Il({target:"Array",stat:!0,forced:Dl},{from:Ol});var Ll=X.Array.from,Fl=Ll,Rl=q,Nl=ca,zl=Ro;Ve.f;var jl=Ra,Ul="Array Iterator",Zl=zl.set,Hl=zl.getterFor(Ul);jl(Array,"Array",(function(t,e){Zl(this,{type:Ul,target:Rl(t),index:0,kind:e})}),(function(){var t=Hl(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),Nl.Arguments=Nl.Array;var Gl=cl,Vl=s,Wl=Rn,ql=hi,Ql=ca,Yl=se("toStringTag");for(var Xl in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Jl=Vl[Xl],Kl=Jl&&Jl.prototype;Kl&&Wl(Kl)!==Yl&&ql(Kl,Yl,Xl),Ql[Xl]=Ql.Array}var $l=Gl,tc={},ec=os,ic=ss.concat("length","prototype");tc.f=Object.getOwnPropertyNames||function(t){return ec(t,ic)};var nc={},rc=Qo,oc=an,sc=rl,ac=s.Array,lc=Math.max,cc=function(t,e,i){for(var n=oc(t),r=rc(e,n),o=rc(void 0===i?n:i,n),s=ac(lc(o-r,0)),a=0;r<o;r++,a++)sc(s,a,t[r]);return s.length=a,s},uc=F,hc=q,dc=tc.f,Ac=cc,fc="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];nc.f=function(t){return fc&&"Window"==uc(t)?function(t){try{return dc(t)}catch(t){return Ac(fc)}}(t):dc(hc(t))};var pc={};pc.f=Object.getOwnPropertySymbols;var gc={},mc=se;gc.f=mc;var vc=X,yc=Gt,bc=gc,_c=Ve.f,wc=function(t){var e=vc.Symbol||(vc.Symbol={});yc(e,t)||_c(e,t,{value:bc.f(t)})},xc=xi,Cc=s,Ec=et,kc=A,Tc=E,Bc=y,Sc=w,Pc=At,Mc=a,Ic=Gt,Oc=Tn,Dc=b,Lc=Y,Fc=it,Rc=bt,Nc=Je,zc=Ut,jc=q,Uc=ge,Zc=to,Hc=I,Gc=Is,Vc=cs,Wc=tc,qc=nc,Qc=pc,Yc=_,Xc=Ve,Jc=Go,Kc=k,$c=Di,tu=Gs,eu=Ot.exports,iu=yo,nu=Yt,ru=se,ou=gc,su=wc,au=la,lu=Ro,cu=gr.forEach,uu=vo("hidden"),hu="Symbol",du=ru("toPrimitive"),Au=lu.set,fu=lu.getterFor(hu),pu=Object.prototype,gu=Cc.Symbol,mu=gu&&gu.prototype,vu=Cc.TypeError,yu=Cc.QObject,bu=Ec("JSON","stringify"),_u=Yc.f,wu=Xc.f,xu=qc.f,Cu=Kc.f,Eu=Bc([].push),ku=eu("symbols"),Tu=eu("op-symbols"),Bu=eu("string-to-symbol-registry"),Su=eu("symbol-to-string-registry"),Pu=eu("wks"),Mu=!yu||!yu.prototype||!yu.prototype.findChild,Iu=Sc&&Mc((function(){return 7!=Gc(wu({},"a",{get:function(){return wu(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=_u(pu,e);n&&delete pu[e],wu(t,e,i),n&&t!==pu&&wu(pu,e,n)}:wu,Ou=function(t,e){var i=ku[t]=Gc(mu);return Au(i,{type:hu,tag:t,description:e}),Sc||(i.description=e),i},Du=function(t,e,i){t===pu&&Du(Tu,e,i),Nc(t);var n=Uc(e);return Nc(i),Ic(ku,n)?(i.enumerable?(Ic(t,uu)&&t[uu][n]&&(t[uu][n]=!1),i=Gc(i,{enumerable:Hc(0,!1)})):(Ic(t,uu)||wu(t,uu,Hc(1,{})),t[uu][n]=!0),Iu(t,n,i)):wu(t,n,i)},Lu=function(t,e){Nc(t);var i=jc(e),n=Vc(i).concat(zu(i));return cu(n,(function(e){Sc&&!Tc(Fu,i,e)||Du(t,e,i[e])})),t},Fu=function(t){var e=Uc(t),i=Tc(Cu,this,e);return!(this===pu&&Ic(ku,e)&&!Ic(Tu,e))&&(!(i||!Ic(this,e)||!Ic(ku,e)||Ic(this,uu)&&this[uu][e])||i)},Ru=function(t,e){var i=jc(t),n=Uc(e);if(i!==pu||!Ic(ku,n)||Ic(Tu,n)){var r=_u(i,n);return!r||!Ic(ku,n)||Ic(i,uu)&&i[uu][n]||(r.enumerable=!0),r}},Nu=function(t){var e=xu(jc(t)),i=[];return cu(e,(function(t){Ic(ku,t)||Ic(iu,t)||Eu(i,t)})),i},zu=function(t){var e=t===pu,i=xu(e?Tu:jc(t)),n=[];return cu(i,(function(t){!Ic(ku,t)||e&&!Ic(pu,t)||Eu(n,ku[t])})),n};if(Pc||(gu=function(){if(Fc(mu,this))throw vu("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Zc(arguments[0]):void 0,e=nu(t),i=function(t){this===pu&&Tc(i,Tu,t),Ic(this,uu)&&Ic(this[uu],e)&&(this[uu][e]=!1),Iu(this,e,Hc(1,t))};return Sc&&Mu&&Iu(pu,e,{configurable:!0,set:i}),Ou(e,t)},tu(mu=gu.prototype,"toString",(function(){return fu(this).tag})),tu(gu,"withoutSetter",(function(t){return Ou(nu(t),t)})),Kc.f=Fu,Xc.f=Du,Jc.f=Lu,Yc.f=Ru,Wc.f=qc.f=Nu,Qc.f=zu,ou.f=function(t){return Ou(ru(t),t)},Sc&&wu(mu,"description",{configurable:!0,get:function(){return fu(this).description}})),xc({global:!0,wrap:!0,forced:!Pc,sham:!Pc},{Symbol:gu}),cu(Vc(Pu),(function(t){su(t)})),xc({target:hu,stat:!0,forced:!Pc},{for:function(t){var e=Zc(t);if(Ic(Bu,e))return Bu[e];var i=gu(e);return Bu[e]=i,Su[i]=e,i},keyFor:function(t){if(!Rc(t))throw vu(t+" is not a symbol");if(Ic(Su,t))return Su[t]},useSetter:function(){Mu=!0},useSimple:function(){Mu=!1}}),xc({target:"Object",stat:!0,forced:!Pc,sham:!Sc},{create:function(t,e){return void 0===e?Gc(t):Lu(Gc(t),e)},defineProperty:Du,defineProperties:Lu,getOwnPropertyDescriptor:Ru}),xc({target:"Object",stat:!0,forced:!Pc},{getOwnPropertyNames:Nu,getOwnPropertySymbols:zu}),xc({target:"Object",stat:!0,forced:Mc((function(){Qc.f(1)}))},{getOwnPropertySymbols:function(t){return Qc.f(zc(t))}}),bu){var ju=!Pc||Mc((function(){var t=gu();return"[null]"!=bu([t])||"{}"!=bu({a:t})||"{}"!=bu(Object(t))}));xc({target:"JSON",stat:!0,forced:ju},{stringify:function(t,e,i){var n=$c(arguments),r=e;if((Lc(e)||void 0!==t)&&!Rc(t))return Oc(e)||(e=function(t,e){if(Dc(r)&&(e=Tc(r,this,t,e)),!Rc(e))return e}),n[1]=e,kc(bu,null,n)}})}if(!mu[du]){var Uu=mu.valueOf;tu(mu,du,(function(t){return Tc(Uu,this)}))}au(gu,hu),iu[uu]=!0;var Zu=X.Object.getOwnPropertySymbols,Hu={exports:{}},Gu=xi,Vu=a,Wu=q,qu=_.f,Qu=w,Yu=Vu((function(){qu(1)}));Gu({target:"Object",stat:!0,forced:!Qu||Yu,sham:!Qu},{getOwnPropertyDescriptor:function(t,e){return qu(Wu(t),e)}});var Xu=X.Object,Ju=Hu.exports=function(t,e){return Xu.getOwnPropertyDescriptor(t,e)};Xu.getOwnPropertyDescriptor.sham&&(Ju.sham=!0);var Ku=Hu.exports,$u=et,th=tc,eh=pc,ih=Je,nh=y([].concat),rh=$u("Reflect","ownKeys")||function(t){var e=th.f(ih(t)),i=eh.f;return i?nh(e,i(t)):e},oh=rh,sh=q,ah=_,lh=rl;xi({target:"Object",stat:!0,sham:!w},{getOwnPropertyDescriptors:function(t){for(var e,i,n=sh(t),r=ah.f,o=oh(n),s={},a=0;o.length>a;)void 0!==(i=r(n,e=o[a++]))&&lh(s,e,i);return s}});var ch=X.Object.getOwnPropertyDescriptors,uh={exports:{}},hh=xi,dh=w,Ah=Go.f;hh({target:"Object",stat:!0,forced:Object.defineProperties!==Ah,sham:!dh},{defineProperties:Ah});var fh=X.Object,ph=uh.exports=function(t,e){return fh.defineProperties(t,e)};fh.defineProperties.sham&&(ph.sham=!0);var gh=uh.exports,mh=Si;xi({target:"Array",stat:!0},{isArray:Tn});var vh=X.Array.isArray,yh=vh;var bh=xi,_h=s,wh=a,xh=Tn,Ch=Y,Eh=Ut,kh=an,Th=rl,Bh=lr,Sh=br,Ph=ut,Mh=se("isConcatSpreadable"),Ih=9007199254740991,Oh="Maximum allowed index exceeded",Dh=_h.TypeError,Lh=Ph>=51||!wh((function(){var t=[];return t[Mh]=!1,t.concat()[0]!==t})),Fh=Sh("concat"),Rh=function(t){if(!Ch(t))return!1;var e=t[Mh];return void 0!==e?!!e:xh(t)};bh({target:"Array",proto:!0,forced:!Lh||!Fh},{concat:function(t){var e,i,n,r,o,s=Eh(this),a=Bh(s,0),l=0;for(e=-1,n=arguments.length;e<n;e++)if(Rh(o=-1===e?s:arguments[e])){if(l+(r=kh(o))>Ih)throw Dh(Oh);for(i=0;i<r;i++,l++)i in o&&Th(a,l,o[i])}else{if(l>=Ih)throw Dh(Oh);Th(a,l++,o)}return a.length=l,a}}),wc("asyncIterator"),wc("hasInstance"),wc("isConcatSpreadable"),wc("iterator"),wc("match"),wc("matchAll"),wc("replace"),wc("search"),wc("species"),wc("split"),wc("toPrimitive"),wc("toStringTag"),wc("unscopables"),la(s.JSON,"JSON",!0);var Nh=X.Symbol,zh=Nh;wc("asyncDispose"),wc("dispose"),wc("matcher"),wc("metadata"),wc("observable"),wc("patternMatch"),wc("replaceAll");var jh=zh;var Uh=xi,Zh=s,Hh=Tn,Gh=er,Vh=Y,Wh=Qo,qh=an,Qh=q,Yh=rl,Xh=se,Jh=Di,Kh=br("slice"),$h=Xh("species"),td=Zh.Array,ed=Math.max;Uh({target:"Array",proto:!0,forced:!Kh},{slice:function(t,e){var i,n,r,o=Qh(this),s=qh(o),a=Wh(t,s),l=Wh(void 0===e?s:e,s);if(Hh(o)&&(i=o.constructor,(Gh(i)&&(i===td||Hh(i.prototype))||Vh(i)&&null===(i=i[$h]))&&(i=void 0),i===td||void 0===i))return Jh(o,a,l);for(n=new(void 0===i?td:i)(ed(l-a,0)),r=0;a<l;a++,r++)a in o&&Yh(n,r,o[a]);return n.length=r,n}});var id=Yi("Array").slice,nd=it,rd=id,od=Array.prototype,sd=function(t){var e=t.slice;return t===od||nd(od,t)&&e===od.slice?rd:e},ad=sd,ld=Ll;function cd(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function ud(t,e){var i;if(t){if("string"==typeof t)return cd(t,e);var n=ad(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?ld(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cd(t,e):void 0}}function hd(t,e){return function(t){if(yh(t))return t}(t)||function(t,e){var i=null==t?null:void 0!==jh&&$l(t)||t["@@iterator"];if(null!=i){var n,r,o=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(o.push(n.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==i.return||i.return()}finally{if(a)throw r}}return o}}(t,e)||ud(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dd=gc.f("iterator"),Ad=dd;function fd(t){return fd="function"==typeof jh&&"symbol"==typeof Ad?function(t){return typeof t}:function(t){return t&&"function"==typeof jh&&t.constructor===jh&&t!==jh.prototype?"symbol":typeof t},fd(t)}function pd(t){return function(t){if(yh(t))return cd(t)}(t)||function(t){if(void 0!==jh&&null!=$l(t)||null!=t["@@iterator"])return ld(t)}(t)||ud(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gd=Nh,md=Yi("Array").concat,vd=it,yd=md,bd=Array.prototype,_d=function(t){var e=t.concat;return t===bd||vd(bd,t)&&e===bd.concat?yd:e},wd=sd;xi({target:"Reflect",stat:!0},{ownKeys:rh});var xd=X.Reflect.ownKeys,Cd=vh,Ed=Ut,kd=cs;xi({target:"Object",stat:!0,forced:a((function(){kd(1)}))},{keys:function(t){return kd(Ed(t))}});var Td=X.Object.keys,Bd=xi,Sd=y,Pd=s.Date,Md=Sd(Pd.prototype.getTime);Bd({target:"Date",stat:!0},{now:function(){return Md(new Pd)}}),X.Date.now;var Id=gr.forEach,Od=gn("forEach")?[].forEach:function(t){return Id(this,t,arguments.length>1?arguments[1]:void 0)};xi({target:"Array",proto:!0,forced:[].forEach!=Od},{forEach:Od});var Dd=Yi("Array").forEach,Ld=Rn,Fd=Gt,Rd=it,Nd=Dd,zd=Array.prototype,jd={DOMTokenList:!0,NodeList:!0},Ud=function(t){var e=t.forEach;return t===zd||Rd(zd,t)&&e===zd.forEach||Fd(jd,Ld(t))?Nd:e},Zd=xi,Hd=Tn,Gd=y([].reverse),Vd=[1,2];Zd({target:"Array",proto:!0,forced:String(Vd)===String(Vd.reverse())},{reverse:function(){return Hd(this)&&(this.length=this.length),Gd(this)}});var Wd=Yi("Array").reverse,qd=it,Qd=Wd,Yd=Array.prototype,Xd=xi,Jd=s,Kd=Qo,$d=rn,tA=an,eA=Ut,iA=lr,nA=rl,rA=br("splice"),oA=Jd.TypeError,sA=Math.max,aA=Math.min,lA=9007199254740991,cA="Maximum allowed length exceeded";Xd({target:"Array",proto:!0,forced:!rA},{splice:function(t,e){var i,n,r,o,s,a,l=eA(this),c=tA(l),u=Kd(t,c),h=arguments.length;if(0===h?i=n=0:1===h?(i=0,n=c-u):(i=h-2,n=aA(sA($d(e),0),c-u)),c+i-n>lA)throw oA(cA);for(r=iA(l,n),o=0;o<n;o++)(s=u+o)in l&&nA(r,o,l[s]);if(r.length=n,i<n){for(o=u;o<c-n;o++)a=o+i,(s=o+n)in l?l[a]=l[s]:delete l[a];for(o=c;o>c-n+i;o--)delete l[o-1]}else if(i>n)for(o=c-n;o>u;o--)a=o+i-1,(s=o+n-1)in l?l[a]=l[s]:delete l[a];for(o=0;o<i;o++)l[o+u]=arguments[o+2];return l.length=c-n+i,r}});var uA=Yi("Array").splice,hA=it,dA=uA,AA=Array.prototype,fA=function(t){var e=t.splice;return t===AA||hA(AA,t)&&e===AA.splice?dA:e},pA=w,gA=y,mA=E,vA=a,yA=cs,bA=pc,_A=k,wA=Ut,xA=Z,CA=Object.assign,EA=Object.defineProperty,kA=gA([].concat),TA=!CA||vA((function(){if(pA&&1!==CA({b:1},CA(EA({},"a",{enumerable:!0,get:function(){EA(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=CA({},t)[i]||yA(CA({},e)).join("")!=n}))?function(t,e){for(var i=wA(t),n=arguments.length,r=1,o=bA.f,s=_A.f;n>r;)for(var a,l=xA(arguments[r++]),c=o?kA(yA(l),o(l)):yA(l),u=c.length,h=0;u>h;)a=c[h++],pA&&!mA(s,l,a)||(i[a]=l[a]);return i}:CA,BA=TA;xi({target:"Object",stat:!0,forced:Object.assign!==BA},{assign:BA});var SA=X.Object.assign,PA=$o.includes;xi({target:"Array",proto:!0},{includes:function(t){return PA(this,t,arguments.length>1?arguments[1]:void 0)}}),Yi("Array").includes;var MA=Y,IA=F,OA=se("match"),DA=function(t){var e;return MA(t)&&(void 0!==(e=t[OA])?!!e:"RegExp"==IA(t))},LA=s.TypeError,FA=se("match"),RA=xi,NA=function(t){if(DA(t))throw LA("The method doesn't accept regular expressions");return t},zA=G,jA=to,UA=y("".indexOf);RA({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[FA]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~UA(jA(zA(this)),jA(NA(t)),arguments.length>1?arguments[1]:void 0)}}),Yi("String").includes;var ZA=Ut,HA=Zs,GA=Os;xi({target:"Object",stat:!0,forced:a((function(){HA(1)})),sham:!GA},{getPrototypeOf:function(t){return HA(ZA(t))}});var VA=X.Object.getPrototypeOf,WA=w,qA=y,QA=cs,YA=q,XA=qA(k.f),JA=qA([].push),KA=function(t){return function(e){for(var i,n=YA(e),r=QA(n),o=r.length,s=0,a=[];o>s;)i=r[s++],WA&&!XA(n,i)||JA(a,t?[i,n[i]]:n[i]);return a}},$A={entries:KA(!0),values:KA(!1)}.values;xi({target:"Object",stat:!0},{values:function(t){return $A(t)}}),X.Object.values;var tf="\t\n\v\f\r \u2028\u2029\ufeff",ef=G,nf=to,rf=y("".replace),of="[\t\n\v\f\r \u2028\u2029\ufeff]",sf=RegExp("^"+of+of+"*"),af=RegExp(of+of+"*$"),lf=function(t){return function(e){var i=nf(ef(e));return 1&t&&(i=rf(i,sf,"")),2&t&&(i=rf(i,af,"")),i}},cf={start:lf(1),end:lf(2),trim:lf(3)},uf=s,hf=a,df=y,Af=to,ff=cf.trim,pf=tf,gf=uf.parseInt,mf=uf.Symbol,vf=mf&&mf.iterator,yf=/^[+-]?0x/i,bf=df(yf.exec),_f=8!==gf(pf+"08")||22!==gf(pf+"0x16")||vf&&!hf((function(){gf(Object(vf))}))?function(t,e){var i=ff(Af(t));return gf(i,e>>>0||(bf(yf,i)?16:10))}:gf;xi({global:!0,forced:parseInt!=_f},{parseInt:_f});var wf=xi,xf=$o.indexOf,Cf=gn,Ef=y([].indexOf),kf=!!Ef&&1/Ef([1],1,-0)<0,Tf=Cf("indexOf");wf({target:"Array",proto:!0,forced:kf||!Tf},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return kf?Ef(this,t,e)||0:xf(this,t,e)}}),Yi("Array").indexOf;var Bf,Sf=Ho.PROPER,Pf=tf,Mf=cf.trim;xi({target:"String",proto:!0,forced:(Bf="trim",a((function(){return!!Pf[Bf]()||""!==""[Bf]()||Sf&&Pf[Bf].name!==Bf})))},{trim:function(){return Mf(this)}}),Yi("String").trim,xi({target:"Object",stat:!0,sham:!w},{create:Is});var If=X.Object,Of=function(t,e){return If.create(t,e)},Df=Of,Lf=xi,Ff=et,Rf=A,Nf=y,zf=a,jf=s.Array,Uf=Ff("JSON","stringify"),Zf=Nf(/./.exec),Hf=Nf("".charAt),Gf=Nf("".charCodeAt),Vf=Nf("".replace),Wf=Nf(1..toString),qf=/[\uD800-\uDFFF]/g,Qf=/^[\uD800-\uDBFF]$/,Yf=/^[\uDC00-\uDFFF]$/,Xf=function(t,e,i){var n=Hf(i,e-1),r=Hf(i,e+1);return Zf(Qf,t)&&!Zf(Yf,r)||Zf(Yf,t)&&!Zf(Qf,n)?"\\u"+Wf(Gf(t,0),16):t},Jf=zf((function(){return'"\\udf06\\ud834"'!==Uf("\udf06\ud834")||'"\\udead"'!==Uf("\udead")}));Uf&&Lf({target:"JSON",stat:!0,forced:Jf},{stringify:function(t,e,i){for(var n=0,r=arguments.length,o=jf(r);n<r;n++)o[n]=arguments[n];var s=Rf(Uf,null,o);return"string"==typeof s?Vf(s,qf,Xf):s}});var Kf=X,$f=A;Kf.JSON||(Kf.JSON={stringify:JSON.stringify});var tp=function(t,e,i){return $f(Kf.JSON.stringify,null,arguments)},ep=s.TypeError,ip=xi,np=s,rp=A,op=b,sp=Di,ap=function(t,e){if(t<e)throw ep("Not enough arguments");return t},lp=/MSIE .\./.test(nt),cp=np.Function,up=function(t){return function(e,i){var n=ap(arguments.length,1)>2,r=op(e)?e:cp(e),o=n?sp(arguments,2):void 0;return t(n?function(){rp(r,this,o)}:r,i)}};ip({global:!0,bind:!0,forced:lp},{setTimeout:up(np.setTimeout),setInterval:up(np.setInterval)});var hp=X.setTimeout,dp=Ut,Ap=Qo,fp=an;xi({target:"Array",proto:!0},{fill:function(t){for(var e=dp(this),i=fp(e),n=arguments.length,r=Ap(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=void 0===o?i:Ap(o,i);s>r;)e[r++]=t;return e}}),Yi("Array").fill;var pp={exports:{}};!function(t){function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((i=n[r])===e||i.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}(pp);var gp,mp=pp.exports;function vp(){return vp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},vp.apply(this,arguments)}function yp(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function bp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}gp="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var _p,wp=gp,xp=["","webkit","Moz","MS","ms","o"],Cp="undefined"==typeof document?{style:{}}:document.createElement("div"),Ep=Math.round,kp=Math.abs,Tp=Date.now;function Bp(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<xp.length;){if((n=(i=xp[o])?i+r:e)in t)return n;o++}}_p="undefined"==typeof window?{}:window;var Sp=Bp(Cp.style,"touchAction"),Pp=void 0!==Sp;var Mp="compute",Ip="auto",Op="manipulation",Dp="none",Lp="pan-x",Fp="pan-y",Rp=function(){if(!Pp)return!1;var t={},e=_p.CSS&&_p.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){return t[i]=!e||_p.CSS.supports("touch-action",i)})),t}(),Np="ontouchstart"in _p,zp=void 0!==Bp(_p,"PointerEvent"),jp=Np&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Up="touch",Zp="mouse",Hp=16,Gp=24,Vp=["x","y"],Wp=["clientX","clientY"];function qp(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function Qp(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function Yp(t,e){return t.indexOf(e)>-1}var Xp=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===Mp&&(t=this.compute()),Pp&&this.manager.element.style&&Rp[t]&&(this.manager.element.style[Sp]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return qp(this.manager.recognizers,(function(e){Qp(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(Yp(t,Dp))return Dp;var e=Yp(t,Lp),i=Yp(t,Fp);return e&&i?Dp:e||i?e?Lp:Fp:Yp(t,Op)?Op:Ip}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=Yp(n,Dp)&&!Rp.none,o=Yp(n,Fp)&&!Rp["pan-y"],s=Yp(n,Lp)&&!Rp["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&6&i||s&&i&Gp?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function Jp(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Kp(t){var e=t.length;if(1===e)return{x:Ep(t[0].clientX),y:Ep(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:Ep(i/e),y:Ep(n/e)}}function $p(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:Ep(t.pointers[i].clientX),clientY:Ep(t.pointers[i].clientY)},i++;return{timeStamp:Tp(),pointers:e,center:Kp(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tg(t,e,i){i||(i=Vp);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function eg(t,e,i){i||(i=Vp);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function ig(t,e){return t===e?1:kp(t)>=kp(e)?t<0?2:4:e<0?8:Hp}function ng(t,e,i){return{x:e/t||0,y:i/t||0}}function rg(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=$p(e)),r>1&&!i.firstMultiple?i.firstMultiple=$p(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,l=e.center=Kp(n);e.timeStamp=Tp(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=eg(a,l),e.distance=tg(a,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=ig(e.deltaX,e.deltaY);var c,u,h=ng(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=kp(h.x)>kp(h.y)?h.x:h.y,e.scale=s?(c=s.pointers,tg((u=n)[0],u[1],Wp)/tg(c[0],c[1],Wp)):1,e.rotation=s?function(t,e){return eg(e[1],e[0],Wp)+eg(t[1],t[0],Wp)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=ng(a,l,c);n=u.x,r=u.y,i=kp(u.x)>kp(u.y)?u.x:u.y,o=ig(l,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var d,A=t.element,f=e.srcEvent;Jp(d=f.composedPath?f.composedPath()[0]:f.path?f.path[0]:f.target,A)&&(A=d),e.target=A}function og(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r==0,s=12&e&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,rg(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function sg(t){return t.trim().split(/\s+/g)}function ag(t,e,i){qp(sg(e),(function(e){t.addEventListener(e,i,!1)}))}function lg(t,e,i){qp(sg(e),(function(e){t.removeEventListener(e,i,!1)}))}function cg(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var ug=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Qp(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ag(this.element,this.evEl,this.domHandler),this.evTarget&&ag(this.target,this.evTarget,this.domHandler),this.evWin&&ag(cg(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&lg(this.element,this.evEl,this.domHandler),this.evTarget&&lg(this.target,this.evTarget,this.domHandler),this.evWin&&lg(cg(this.element),this.evWin,this.domHandler)},t}();function hg(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}var dg={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Ag={2:Up,3:"pen",4:Zp,5:"kinect"},fg="pointerdown",pg="pointermove pointerup pointercancel";_p.MSPointerEvent&&!_p.PointerEvent&&(fg="MSPointerDown",pg="MSPointerMove MSPointerUp MSPointerCancel");var gg=function(t){function e(){var i,n=e.prototype;return n.evEl=fg,n.evWin=pg,(i=t.apply(this,arguments)||this).store=i.manager.session.pointerEvents=[],i}return yp(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=dg[n],o=Ag[t.pointerType]||t.pointerType,s=o===Up,a=hg(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))},e}(ug);function mg(t){return Array.prototype.slice.call(t,0)}function vg(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];hg(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}var yg={touchstart:1,touchmove:2,touchend:4,touchcancel:8},bg="touchstart touchmove touchend touchcancel",_g=function(t){function e(){var i;return e.prototype.evTarget=bg,(i=t.apply(this,arguments)||this).targetIds={},i}return yp(e,t),e.prototype.handler=function(t){var e=yg[t.type],i=wg.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Up,srcEvent:t})},e}(ug);function wg(t,e){var i,n,r=mg(t.touches),o=this.targetIds;if(3&e&&1===r.length)return o[r[0].identifier]=!0,[r,r];var s=mg(t.changedTouches),a=[],l=this.target;if(n=r.filter((function(t){return Jp(t.target,l)})),1===e)for(i=0;i<n.length;)o[n[i].identifier]=!0,i++;for(i=0;i<s.length;)o[s[i].identifier]&&a.push(s[i]),12&e&&delete o[s[i].identifier],i++;return a.length?[vg(n.concat(a),"identifier",!0),a]:void 0}var xg={mousedown:1,mousemove:2,mouseup:4},Cg="mousedown",Eg="mousemove mouseup",kg=function(t){function e(){var i,n=e.prototype;return n.evEl=Cg,n.evWin=Eg,(i=t.apply(this,arguments)||this).pressed=!1,i}return yp(e,t),e.prototype.handler=function(t){var e=xg[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Zp,srcEvent:t}))},e}(ug);function Tg(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY},n=this.lastTouches;this.lastTouches.push(i);setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function Bg(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,Tg.call(this,e)):12&t&&Tg.call(this,e)}function Sg(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=25&&s<=25)return!0}return!1}var Pg=function(){return function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handler=function(t,e,i){var r=i.pointerType===Up,o=i.pointerType===Zp;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)Bg.call(bp(bp(n)),e,i);else if(o&&Sg.call(bp(bp(n)),i))return;n.callback(t,e,i)}},n.touch=new _g(n.manager,n.handler),n.mouse=new kg(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return yp(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(ug)}();function Mg(t,e,i){return!!Array.isArray(t)&&(qp(t,i[e],i),!0)}var Ig=32,Og=1;function Dg(t,e){var i=e.manager;return i?i.get(t):t}function Lg(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Fg=function(){function t(t){void 0===t&&(t={}),this.options=vp({enable:!0},t),this.id=Og++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return wp(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(Mg(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Dg(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return Mg(t,"dropRecognizeWith",this)||(t=Dg(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(Mg(t,"requireFailure",this))return this;var e=this.requireFail;return-1===hg(e,t=Dg(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(Mg(t,"dropRequireFailure",this))return this;t=Dg(t,this);var e=hg(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Lg(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Lg(i))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Ig},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=wp({},t);if(!Qp(this.options.enable,[this,e]))return this.reset(),void(this.state=Ig);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),Rg=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,vp({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}yp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Op]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime<i.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!==t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||tg(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.interval),2):8}return Ig},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=Ig}),this.options.interval),Ig},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Fg),Ng=function(t){function e(e){return void 0===e&&(e={}),t.call(this,vp({pointers:1},e))||this}yp(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:Ig},e}(Fg);function zg(t){return t===Hp?"down":8===t?"up":2===t?"left":4===t?"right":""}var jg=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,vp({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,i.pY=null,i}yp(e,t);var i=e.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(Fp),t&Gp&&e.push(Lp),e},i.directionTest=function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!==this.pX,n=Math.abs(t.deltaX)):(r=0===s?1:s<0?8:Hp,i=s!==this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},i.attrTest=function(t){return Ng.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},i.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=zg(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(Ng),Ug=function(t){function e(e){return void 0===e&&(e={}),t.call(this,vp({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}yp(e,t);var i=e.prototype;return i.getTouchAction=function(){return jg.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,n=this.options.direction;return 30&n?i=e.overallVelocity:6&n?i=e.overallVelocityX:n&Gp&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&kp(i)>this.options.velocity&&4&e.eventType},i.emit=function(t){var e=zg(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Ng),Zg=function(t){function e(e){return void 0===e&&(e={}),t.call(this,vp({event:"pinch",threshold:0,pointers:2},e))||this}yp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Dp]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},i.emit=function(e){if(1!==e.scale){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(Ng),Hg=function(t){function e(e){return void 0===e&&(e={}),t.call(this,vp({event:"rotate",threshold:0,pointers:2},e))||this}yp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Dp]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Ng),Gg=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,vp({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,i._input=null,i}yp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Ip]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime>i.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.time);else if(4&t.eventType)return 8;return Ig},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Tp(),this.manager.emit(this.options.event,this._input)))},e}(Fg),Vg={domEvents:!1,touchAction:Mp,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Wg=[[Hg,{enable:!1}],[Zg,{enable:!1},["rotate"]],[Ug,{direction:6}],[jg,{direction:6},["swipe"]],[Rg],[Rg,{event:"doubletap",taps:2},["tap"]],[Gg]];function qg(t,e){var i,n=t.element;n.style&&(qp(t.options.cssProps,(function(r,o){i=Bp(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}var Qg=function(){function t(t,e){var i,n=this;this.options=wp({},Vg,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(zp?gg:jp?_g:Np?Pg:kg))(i,og),this.touchAction=new Xp(this,this.options.touchAction),qg(this,!0),qp(this.options.recognizers,(function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return wp(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!==r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(e.curRecognizer=i,r=i),o++}},e.get=function(t){if(t instanceof Fg)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if(Mg(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(Mg(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,n=hg(i,e);-1!==n&&(i.splice(n,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return qp(sg(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return qp(sg(t),(function(t){e?i[t]&&i[t].splice(hg(i[t],e),1):delete i[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},e.destroy=function(){this.element&&qg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Yg={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Xg="touchstart",Jg="touchstart touchmove touchend touchcancel",Kg=function(t){function e(){var i,n=e.prototype;return n.evTarget=Xg,n.evWin=Jg,(i=t.apply(this,arguments)||this).started=!1,i}return yp(e,t),e.prototype.handler=function(t){var e=Yg[t.type];if(1===e&&(this.started=!0),this.started){var i=$g.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Up,srcEvent:t})}},e}(ug);function $g(t,e){var i=mg(t.touches),n=mg(t.changedTouches);return 12&e&&(i=vg(i.concat(n),"identifier",!0)),[i,n]}function tm(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,n,i),t.apply(this,arguments)}}var em=tm((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&void 0===t[n[r]])&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),im=tm((function(t,e){return em(t,e,!0)}),"merge","Use `assign`.");function nm(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&wp(n,i)}function rm(t,e){return function(){return t.apply(e,arguments)}}var om=function(){var t=function(t,e){return void 0===e&&(e={}),new Qg(t,vp({recognizers:Wg.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=Hp,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=Gp,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=Hp,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=Ig,t.Manager=Qg,t.Input=ug,t.TouchAction=Xp,t.TouchInput=_g,t.MouseInput=kg,t.PointerEventInput=gg,t.TouchMouseInput=Pg,t.SingleTouchInput=Kg,t.Recognizer=Fg,t.AttrRecognizer=Ng,t.Tap=Rg,t.Pan=jg,t.Swipe=Ug,t.Pinch=Zg,t.Rotate=Hg,t.Press=Gg,t.on=ag,t.off=lg,t.each=qp,t.merge=im,t.extend=em,t.bindFn=rm,t.assign=wp,t.inherit=nm,t.bindFn=rm,t.prefixed=Bp,t.toArray=mg,t.inArray=hg,t.uniqueArray=vg,t.splitStr=sg,t.boolOrFn=Qp,t.hasParent=Jp,t.addEventListeners=ag,t.removeEventListeners=lg,t.defaults=wp({},Vg,{preset:Wg}),t}();function sm(t,e){var i=void 0!==gd&&$l(t)||t["@@iterator"];if(!i){if(Cd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return am(t,e);var n=wd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Fl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?am(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function am(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var lm=gd("DELETE");function cm(){var t=um.apply(void 0,arguments);return dm(t),t}function um(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<2)return e[0];var n;if(e.length>2)return um.apply(void 0,_d(n=[cm(e[0],e[1])]).call(n,pd(wd(e).call(e,2))));var r,o=e[0],s=e[1],a=sm(xd(s));try{for(a.s();!(r=a.n()).done;){var l=r.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===lm?delete o[l]:null===o[l]||null===s[l]||"object"!==fd(o[l])||"object"!==fd(s[l])||Cd(o[l])||Cd(s[l])?o[l]=hm(s[l]):o[l]=um(o[l],s[l]))}}catch(t){a.e(t)}finally{a.f()}return o}function hm(t){return Cd(t)?Ir(t).call(t,(function(t){return hm(t)})):"object"===fd(t)&&null!==t?um({},t):t}function dm(t){for(var e=0,i=Td(t);e<i.length;e++){var n=i[e];t[n]===lm?delete t[n]:"object"===fd(t[n])&&null!==t[n]&&dm(t[n])}}var Am="undefined"!=typeof window?window.Hammer||om:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}()};function fm(t){var e,i=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){i._dom.overlay.parentNode.removeChild(i._dom.overlay)}));var n=Am(this._dom.overlay);n.on("tap",tn(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){n.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ud(r).call(r,(function(t){n.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||i.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",i._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&i.deactivate()}}mp(fm.prototype),fm.current=null,fm.prototype.destroy=function(){var t,e;this.deactivate();var i,n,r,o=sm((n=t=fA(e=this._cleanupQueue).call(e,0),r=n.reverse,n===Yd||qd(Yd,n)&&r===Yd.reverse?Qd:r).call(t));try{for(o.s();!(i=o.n()).done;)(0,i.value)()}catch(t){o.e(t)}finally{o.f()}},fm.prototype.activate=function(){fm.current&&fm.current.deactivate(),fm.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},fm.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},fm.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var pm=er,gm=wt,mm=s.TypeError,vm=xi,ym=A,bm=Wi,_m=function(t){if(pm(t))return t;throw mm(gm(t)+" is not a constructor")},wm=Je,xm=Y,Cm=Is,Em=a,km=et("Reflect","construct"),Tm=Object.prototype,Bm=[].push,Sm=Em((function(){function t(){}return!(km((function(){}),[],t)instanceof t)})),Pm=!Em((function(){km((function(){}))})),Mm=Sm||Pm;vm({target:"Reflect",stat:!0,forced:Mm,sham:Mm},{construct:function(t,e){_m(t),wm(e);var i=arguments.length<3?t:_m(arguments[2]);if(Pm&&!Sm)return km(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return ym(Bm,n,e),new(ym(bm,t,n))}var r=i.prototype,o=Cm(xm(r)?r:Tm),s=ym(t,o,e);return xm(s)?s:o}});var Im=X.Reflect.construct;function Om(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Dm=Of;xi({target:"Object",stat:!0},{setPrototypeOf:wa});var Lm=X.Object.setPrototypeOf;function Fm(t,e){return Fm=Lm||function(t,e){return t.__proto__=e,t},Fm(t,e)}function Rm(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Dm(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Pi(t,"prototype",{writable:!1}),e&&Fm(t,e)}function Nm(t,e){if(e&&("object"===fd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Om(t)}var zm=VA;function jm(t){return jm=Lm?zm:function(t){return t.__proto__||zm(t)},jm(t)}var Um={exports:{}};!function(t){var e=function(t){var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),s=new B(n||[]);return o._invoke=function(t,e,i){var n=h;return function(r,o){if(n===A)throw new Error("Generator is already running");if(n===f){if("throw"===r)throw o;return P()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=E(s,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=A;var l=u(t,e,i);if("normal"===l.type){if(n=i.done?f:d,l.arg===p)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(t,i,s),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",A="executing",f="completed",p={};function g(){}function m(){}function v(){}var y={};l(y,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(S([])));_&&_!==i&&n.call(_,o)&&(y=_);var w=v.prototype=g.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(r,o,s,a){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,a)}))}a(l.arg)}var r;this._invoke=function(t,n){function o(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(o,o):o()}}function E(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,E(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=v,l(w,"constructor",v),l(v,"constructor",m),m.displayName=l(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,a,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(C.prototype),l(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var s=new C(c(e,i,n,r),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(w),l(w,a,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=S,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:S(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(Um);var Zm=Um.exports,Hm={exports:{}},Gm=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Vm=a,Wm=Y,qm=F,Qm=Gm,Ym=Object.isExtensible,Xm=Vm((function(){Ym(1)}))||Qm?function(t){return!!Wm(t)&&(!Qm||"ArrayBuffer"!=qm(t))&&(!Ym||Ym(t))}:Ym,Jm=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),Km=xi,$m=y,tv=yo,ev=Y,iv=Gt,nv=Ve.f,rv=tc,ov=nc,sv=Xm,av=Jm,lv=!1,cv=Yt("meta"),uv=0,hv=function(t){nv(t,cv,{value:{objectID:"O"+uv++,weakData:{}}})},dv=Hm.exports={enable:function(){dv.enable=function(){},lv=!0;var t=rv.f,e=$m([].splice),i={};i[cv]=1,t(i).length&&(rv.f=function(i){for(var n=t(i),r=0,o=n.length;r<o;r++)if(n[r]===cv){e(n,r,1);break}return n},Km({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ov.f}))},fastKey:function(t,e){if(!ev(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!iv(t,cv)){if(!sv(t))return"F";if(!e)return"E";hv(t)}return t[cv].objectID},getWeakData:function(t,e){if(!iv(t,cv)){if(!sv(t))return!0;if(!e)return!1;hv(t)}return t[cv].weakData},onFreeze:function(t){return av&&lv&&sv(t)&&!iv(t,cv)&&hv(t),t}};tv[cv]=!0;var Av=Ge,fv=E,pv=Je,gv=wt,mv=tl,vv=an,yv=it,bv=gl,_v=cl,wv=Qa,xv=s.TypeError,Cv=function(t,e){this.stopped=t,this.result=e},Ev=Cv.prototype,kv=function(t,e,i){var n,r,o,s,a,l,c,u=i&&i.that,h=!(!i||!i.AS_ENTRIES),d=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),f=Av(e,u),p=function(t){return n&&wv(n,"normal",t),new Cv(!0,t)},g=function(t){return h?(pv(t),A?f(t[0],t[1],p):f(t[0],t[1])):A?f(t,p):f(t)};if(d)n=t;else{if(!(r=_v(t)))throw xv(gv(t)+" is not iterable");if(mv(r)){for(o=0,s=vv(t);s>o;o++)if((a=g(t[o]))&&yv(Ev,a))return a;return new Cv(!1)}n=bv(t,r)}for(l=n.next;!(c=fv(l,n)).done;){try{a=g(c.value)}catch(t){wv(n,"throw",t)}if("object"==typeof a&&a&&yv(Ev,a))return a}return new Cv(!1)},Tv=it,Bv=s.TypeError,Sv=function(t,e){if(Tv(e,t))return t;throw Bv("Incorrect invocation")},Pv=xi,Mv=s,Iv=Hm.exports,Ov=a,Dv=hi,Lv=kv,Fv=Sv,Rv=b,Nv=Y,zv=la,jv=Ve.f,Uv=gr.forEach,Zv=w,Hv=Ro.set,Gv=Ro.getterFor,Vv=function(t,e,i){var n,r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),s=r?"set":"add",a=Mv[t],l=a&&a.prototype,c={};if(Zv&&Rv(a)&&(o||l.forEach&&!Ov((function(){(new a).entries().next()})))){var u=(n=e((function(e,i){Hv(Fv(e,u),{type:t,collection:new a}),null!=i&&Lv(i,e[s],{that:e,AS_ENTRIES:r})}))).prototype,h=Gv(t);Uv(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"==t||"set"==t;!(t in l)||o&&"clear"==t||Dv(u,t,(function(i,n){var r=h(this).collection;if(!e&&o&&!Nv(i))return"get"==t&&void 0;var s=r[t](0===i?0:i,n);return e?this:s}))})),o||jv(u,"size",{configurable:!0,get:function(){return h(this).collection.size}})}else n=i.getConstructor(e,t,r,s),Iv.enable();return zv(n,t,!1,!0),c[t]=n,Pv({global:!0,forced:!0},c),o||i.setStrong(n,t,r),n},Wv=Gs,qv=et,Qv=Ve,Yv=w,Xv=se("species"),Jv=Ve.f,Kv=Is,$v=function(t,e,i){for(var n in e)i&&i.unsafe&&t[n]?t[n]=e[n]:Wv(t,n,e[n],i);return t},ty=Ge,ey=Sv,iy=kv,ny=Ra,ry=function(t){var e=qv(t),i=Qv.f;Yv&&e&&!e[Xv]&&i(e,Xv,{configurable:!0,get:function(){return this}})},oy=w,sy=Hm.exports.fastKey,ay=Ro.set,ly=Ro.getterFor,cy={getConstructor:function(t,e,i,n){var r=t((function(t,r){ey(t,o),ay(t,{type:e,index:Kv(null),first:void 0,last:void 0,size:0}),oy||(t.size=0),null!=r&&iy(r,t[n],{that:t,AS_ENTRIES:i})})),o=r.prototype,s=ly(e),a=function(t,e,i){var n,r,o=s(t),a=l(t,e);return a?a.value=i:(o.last=a={index:r=sy(e,!0),key:e,value:i,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),oy?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t},l=function(t,e){var i,n=s(t),r=sy(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return $v(o,{clear:function(){for(var t=s(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,oy?t.size=0:this.size=0},delete:function(t){var e=this,i=s(e),n=l(e,t);if(n){var r=n.next,o=n.previous;delete i.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),i.first==n&&(i.first=r),i.last==n&&(i.last=o),oy?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=s(this),n=ty(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),$v(o,i?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),oy&&Jv(o,"size",{get:function(){return s(this).size}}),r},setStrong:function(t,e,i){var n=e+" Iterator",r=ly(e),o=ly(n);ny(t,e,(function(t,e){ay(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),ry(e)}};Vv("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),cy);var uy=X.Map,hy=gr.some;xi({target:"Array",proto:!0,forced:!gn("some")},{some:function(t){return hy(this,t,arguments.length>1?arguments[1]:void 0)}});var dy=Yi("Array").some,Ay=it,fy=dy,py=Array.prototype,gy=Yi("Array").keys,my=Rn,vy=Gt,yy=it,by=gy,_y=Array.prototype,wy={DOMTokenList:!0,NodeList:!0},xy=function(t){var e=t.keys;return t===_y||yy(_y,t)&&e===_y.keys||vy(wy,my(t))?by:e},Cy=cc,Ey=Math.floor,ky=function(t,e){var i=t.length,n=Ey(i/2);return i<8?Ty(t,e):By(t,ky(Cy(t,0,n),e),ky(Cy(t,n),e),e)},Ty=function(t,e){for(var i,n,r=t.length,o=1;o<r;){for(n=o,i=t[o];n&&e(t[n-1],i)>0;)t[n]=t[--n];n!==o++&&(t[n]=i)}return t},By=function(t,e,i,n){for(var r=e.length,o=i.length,s=0,a=0;s<r||a<o;)t[s+a]=s<r&&a<o?n(e[s],i[a])<=0?e[s++]:i[a++]:s<r?e[s++]:i[a++];return t},Sy=ky,Py=nt.match(/firefox\/(\d+)/i),My=!!Py&&+Py[1],Iy=/MSIE|Trident/.test(nt),Oy=nt.match(/AppleWebKit\/(\d+)\./),Dy=!!Oy&&+Oy[1],Ly=xi,Fy=y,Ry=kt,Ny=Ut,zy=an,jy=to,Uy=a,Zy=Sy,Hy=gn,Gy=My,Vy=Iy,Wy=ut,qy=Dy,Qy=[],Yy=Fy(Qy.sort),Xy=Fy(Qy.push),Jy=Uy((function(){Qy.sort(void 0)})),Ky=Uy((function(){Qy.sort(null)})),$y=Hy("sort"),tb=!Uy((function(){if(Wy)return Wy<70;if(!(Gy&&Gy>3)){if(Vy)return!0;if(qy)return qy<603;var t,e,i,n,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)Qy.push({k:e+n,v:i})}for(Qy.sort((function(t,e){return e.v-t.v})),n=0;n<Qy.length;n++)e=Qy[n].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));Ly({target:"Array",proto:!0,forced:Jy||!Ky||!$y||!tb},{sort:function(t){void 0!==t&&Ry(t);var e=Ny(this);if(tb)return void 0===t?Yy(e):Yy(e,t);var i,n,r=[],o=zy(e);for(n=0;n<o;n++)n in e&&Xy(r,e[n]);for(Zy(r,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:jy(e)>jy(i)?1:-1}}(t)),i=r.length,n=0;n<i;)e[n]=r[n++];for(;n<o;)delete e[n++];return e}});var eb,ib=Yi("Array").sort,nb=it,rb=ib,ob=Array.prototype,sb=function(t){var e=t.sort;return t===ob||nb(ob,t)&&e===ob.sort?rb:e},ab=Yi("Array").values,lb=Rn,cb=Gt,ub=it,hb=ab,db=Array.prototype,Ab={DOMTokenList:!0,NodeList:!0},fb=function(t){var e=t.values;return t===db||ub(db,t)&&e===db.values||cb(Ab,lb(t))?hb:e},pb=dd,gb=Yi("Array").entries,mb=Rn,vb=Gt,yb=it,bb=gb,_b=Array.prototype,wb={DOMTokenList:!0,NodeList:!0},xb=new Uint8Array(16);function Cb(){if(!eb&&!(eb="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eb(xb)}var Eb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kb(t){return"string"==typeof t&&Eb.test(t)}for(var Tb=[],Bb=0;Bb<256;++Bb)Tb.push((Bb+256).toString(16).substr(1));function Sb(t,e,i){var n=(t=t||{}).random||(t.rng||Cb)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var r=0;r<16;++r)e[i+r]=n[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(Tb[t[e+0]]+Tb[t[e+1]]+Tb[t[e+2]]+Tb[t[e+3]]+"-"+Tb[t[e+4]]+Tb[t[e+5]]+"-"+Tb[t[e+6]]+Tb[t[e+7]]+"-"+Tb[t[e+8]]+Tb[t[e+9]]+"-"+Tb[t[e+10]]+Tb[t[e+11]]+Tb[t[e+12]]+Tb[t[e+13]]+Tb[t[e+14]]+Tb[t[e+15]]).toLowerCase();if(!kb(i))throw TypeError("Stringified UUID is invalid");return i}(n)}function Pb(t){return"string"==typeof t||"number"==typeof t}var Mb=function(){function t(i){e(this,t),Oi(this,"delay",void 0),Oi(this,"max",void 0),Oi(this,"_queue",[]),Oi(this,"_timeout",null),Oi(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(i)}return Ii(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}}},{key:"replace",value:function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.queue({args:e,fn:n,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=hp((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,e;Ud(t=fA(e=this._queue).call(e,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(e,i){var n=new t(i);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){n.flush()};var r=[{name:"flush",original:void 0}];if(i&&i.replace)for(var o=0;o<i.replace.length;o++){var s=i.replace[o];r.push({name:s,original:e[s]}),n.replace(e,s)}return n._extended={object:e,methods:r},n}}]),t}(),Ib=function(){function t(){e(this,t),Oi(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Oi(this,"subscribe",t.prototype.on),Oi(this,"unsubscribe",t.prototype.off)}return Ii(t,[{key:"_trigger",value:function(t,e,i){var n,r;if("*"===t)throw new Error("Cannot trigger event *");Ud(n=_d(r=[]).call(r,pd(this._subscribers[t]),pd(this._subscribers["*"]))).call(n,(function(n){n(t,e,null!=i?i:null)}))}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var i;this._subscribers[t]=kr(i=this._subscribers[t]).call(i,(function(t){return t!==e}))}}]),t}();Vv("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),cy);var Ob,Db=X.Set,Lb=gl;function Fb(t,e){var i=void 0!==gd&&$l(t)||t["@@iterator"];if(!i){if(Cd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Rb(t,e);var n=wd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Fl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ob=pb;var Nb=function(){function t(i){e(this,t),Oi(this,"_pairs",void 0),this._pairs=i}return Ii(t,[{key:Ob,value:Zm.mark((function t(){var e,i,n,r,o;return Zm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Fb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=hd(i.value,2),r=n[0],o=n[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:Zm.mark((function t(){var e,i,n,r,o;return Zm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Fb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=hd(i.value,2),r=n[0],o=n[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:Zm.mark((function t(){var e,i,n,r;return Zm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Fb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=hd(i.value,1),r=n[0],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:Zm.mark((function t(){var e,i,n,r;return Zm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Fb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=hd(i.value,2),r=n[1],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return Ir(t=pd(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return Ir(t=pd(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return pd(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=Df(null),i=Fb(this._pairs);try{for(i.s();!(t=i.n()).done;){var n=hd(t.value,2),r=n[0],o=n[1];e[r]=o}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"toMap",value:function(){return new uy(this._pairs)}},{key:"toIdSet",value:function(){return new Db(this.toIdArray())}},{key:"toItemSet",value:function(){return new Db(this.toItemArray())}},{key:"cache",value:function(){return new t(pd(this._pairs))}},{key:"distinct",value:function(t){var e,i=new Db,n=Fb(this._pairs);try{for(n.s();!(e=n.n()).done;){var r=hd(e.value,2),o=r[0],s=r[1];i.add(t(s,o))}}catch(t){n.e(t)}finally{n.f()}return i}},{key:"filter",value:function(e){var i=this._pairs;return new t(Oi({},pb,Zm.mark((function t(){var n,r,o,s,a;return Zm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Fb(i),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=10;break}if(o=hd(r.value,2),s=o[0],a=o[1],!e(a,s)){t.next=8;break}return t.next=8,[s,a];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(t){var e,i=Fb(this._pairs);try{for(i.s();!(e=i.n()).done;){var n=hd(e.value,2),r=n[0];t(n[1],r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"map",value:function(e){var i=this._pairs;return new t(Oi({},pb,Zm.mark((function t(){var n,r,o,s,a;return Zm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Fb(i),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return o=hd(r.value,2),s=o[0],a=o[1],t.next=7,[s,e(a,s)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))))}},{key:"max",value:function(t){var e=Lb(this._pairs),i=e.next();if(i.done)return null;for(var n=i.value[1],r=t(i.value[1],i.value[0]);!(i=e.next()).done;){var o=hd(i.value,2),s=o[0],a=o[1],l=t(a,s);l>r&&(r=l,n=a)}return n}},{key:"min",value:function(t){var e=Lb(this._pairs),i=e.next();if(i.done)return null;for(var n=i.value[1],r=t(i.value[1],i.value[0]);!(i=e.next()).done;){var o=hd(i.value,2),s=o[0],a=o[1],l=t(a,s);l<r&&(r=l,n=a)}return n}},{key:"reduce",value:function(t,e){var i,n=Fb(this._pairs);try{for(n.s();!(i=n.n()).done;){var r=hd(i.value,2),o=r[0];e=t(e,r[1],o)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"sort",value:function(e){var i=this;return new t(Oi({},pb,(function(){var t;return Lb(sb(t=pd(i._pairs)).call(t,(function(t,i){var n=hd(t,2),r=n[0],o=n[1],s=hd(i,2),a=s[0],l=s[1];return e(o,l,r,a)})))})))}}]),t}();function zb(t,e){var i=Td(t);if(Zu){var n=Zu(t);e&&(n=kr(n).call(n,(function(e){return Ku(t,e).enumerable}))),i.push.apply(i,n)}return i}function jb(t){for(var e=1;e<arguments.length;e++){var i,n,r=null!=arguments[e]?arguments[e]:{};e%2?Ud(i=zb(Object(r),!0)).call(i,(function(e){Oi(t,e,r[e])})):ch?gh(t,ch(r)):Ud(n=zb(Object(r))).call(n,(function(e){mh(t,e,Ku(r,e))}))}return t}function Ub(t,e){var i=void 0!==gd&&$l(t)||t["@@iterator"];if(!i){if(Cd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Zb(t,e);var n=wd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Fl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Zb(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Hb(t){var e=function(){if("undefined"==typeof Reflect||!Im)return!1;if(Im.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Im(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=jm(t);if(e){var r=jm(this).constructor;i=Im(n,arguments,r)}else i=n.apply(this,arguments);return Nm(this,i)}}var Gb=function(t){Rm(n,t);var i=Hb(n);function n(t,r){var o;return e(this,n),Oi(Om(o=i.call(this)),"flush",void 0),Oi(Om(o),"length",void 0),Oi(Om(o),"_options",void 0),Oi(Om(o),"_data",void 0),Oi(Om(o),"_idProp",void 0),Oi(Om(o),"_queue",null),t&&!Cd(t)&&(r=t,t=[]),o._options=r||{},o._data=new uy,o.length=0,o._idProp=o._options.fieldId||"id",t&&t.length&&o.add(t),o.setOptions(r),o}return Ii(n,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Mb.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===fd(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var i,n,r,o=this,s=[];if(Cd(t)){var a=Ir(t).call(t,(function(t){return t[o._idProp]}));if((n=a,r=n.some,n===py||Ay(py,n)&&r===py.some?fy:r).call(a,(function(t){return o._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var l=0,c=t.length;l<c;l++)i=this._addItem(t[l]),s.push(i)}else{if(!t||"object"!==fd(t))throw new Error("Unknown dataType");i=this._addItem(t),s.push(i)}return s.length&&this._trigger("add",{items:s},e),s}},{key:"update",value:function(t,e){var i=this,n=[],r=[],o=[],s=[],a=this._idProp,l=function(t){var e=t[a];if(null!=e&&i._data.has(e)){var l=t,c=SA({},i._data.get(e)),u=i._updateItem(l);r.push(u),s.push(l),o.push(c)}else{var h=i._addItem(t);n.push(h)}};if(Cd(t))for(var c=0,u=t.length;c<u;c++)t[c]&&"object"===fd(t[c])?l(t[c]):console.warn("Ignoring input item, which is not an object at index "+c);else{if(!t||"object"!==fd(t))throw new Error("Unknown dataType");l(t)}if(n.length&&this._trigger("add",{items:n},e),r.length){var h={items:r,oldData:o,data:s};this._trigger("update",h,e)}return _d(n).call(n,r)}},{key:"updateOnly",value:function(t,e){var i,n=this;Cd(t)||(t=[t]);var r=Ir(i=Ir(t).call(t,(function(t){var e=n._data.get(t[n._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}}))).call(i,(function(t){var e=t.oldData,i=t.update,r=e[n._idProp],o=function(t){for(var e,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return cm.apply(void 0,_d(e=[{},t]).call(e,n))}(e,i);return n._data.set(r,o),{id:r,oldData:e,updatedData:o}}));if(r.length){var o={items:Ir(r).call(r,(function(t){return t.id})),oldData:Ir(r).call(r,(function(t){return t.oldData})),data:Ir(r).call(r,(function(t){return t.updatedData}))};return this._trigger("update",o,e),o.items}return[]}},{key:"get",value:function(t,e){var i=void 0,n=void 0,r=void 0;Pb(t)?(i=t,r=e):Cd(t)?(n=t,r=e):r=t;var o,s=r&&"Object"===r.returnType?"Object":"Array",a=r&&kr(r),l=[],c=void 0,u=void 0,h=void 0;if(null!=i)(c=this._data.get(i))&&a&&!a(c)&&(c=void 0);else if(null!=n)for(var d=0,A=n.length;d<A;d++)null==(c=this._data.get(n[d]))||a&&!a(c)||l.push(c);else for(var f,p=0,g=(u=pd(xy(f=this._data).call(f))).length;p<g;p++)h=u[p],null==(c=this._data.get(h))||a&&!a(c)||l.push(c);if(r&&r.order&&null==i&&this._sort(l,r.order),r&&r.fields){var m=r.fields;if(null!=i&&null!=c)c=this._filterFields(c,m);else for(var v=0,y=l.length;v<y;v++)l[v]=this._filterFields(l[v],m)}if("Object"==s){for(var b={},_=0,w=l.length;_<w;_++){var x=l[_];b[x[this._idProp]]=x}return b}return null!=i?null!==(o=c)&&void 0!==o?o:null:l}},{key:"getIds",value:function(t){var e=this._data,i=t&&kr(t),n=t&&t.order,r=pd(xy(e).call(e)),o=[];if(i)if(n){for(var s=[],a=0,l=r.length;a<l;a++){var c=r[a],u=this._data.get(c);null!=u&&i(u)&&s.push(u)}this._sort(s,n);for(var h=0,d=s.length;h<d;h++)o.push(s[h][this._idProp])}else for(var A=0,f=r.length;A<f;A++){var p=r[A],g=this._data.get(p);null!=g&&i(g)&&o.push(g[this._idProp])}else if(n){for(var m=[],v=0,y=r.length;v<y;v++){var b=r[v];m.push(e.get(b))}this._sort(m,n);for(var _=0,w=m.length;_<w;_++)o.push(m[_][this._idProp])}else for(var x=0,C=r.length;x<C;x++){var E=r[x],k=e.get(E);null!=k&&o.push(k[this._idProp])}return o}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var i=e&&kr(e),n=this._data,r=pd(xy(n).call(n));if(e&&e.order)for(var o=this.get(e),s=0,a=o.length;s<a;s++){var l=o[s];t(l,l[this._idProp])}else for(var c=0,u=r.length;c<u;c++){var h=r[c],d=this._data.get(h);null==d||i&&!i(d)||t(d,h)}}},{key:"map",value:function(t,e){for(var i=e&&kr(e),n=[],r=this._data,o=pd(xy(r).call(r)),s=0,a=o.length;s<a;s++){var l=o[s],c=this._data.get(l);null==c||i&&!i(c)||n.push(t(c,l))}return e&&e.order&&this._sort(n,e.order),n}},{key:"_filterFields",value:function(t,e){var i;return t?En(i=Cd(e)?e:Td(e)).call(i,(function(e,i){return e[i]=t[i],e}),{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var i=e;sb(t).call(t,(function(t,e){var n=t[i],r=e[i];return n>r?1:n<r?-1:0}))}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");sb(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var i=[],n=[],r=Cd(t)?t:[t],o=0,s=r.length;o<s;o++){var a=this._remove(r[o]);if(a){var l=a[this._idProp];null!=l&&(i.push(l),n.push(a))}}return i.length&&this._trigger("remove",{items:i,oldData:n},e),i}},{key:"_remove",value:function(t){var e;if(Pb(t)?e=t:t&&"object"===fd(t)&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var i=this._data.get(e)||null;return this._data.delete(e),--this.length,i}return null}},{key:"clear",value:function(t){for(var e,i=pd(xy(e=this._data).call(e)),n=[],r=0,o=i.length;r<o;r++)n.push(this._data.get(i[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:n},t),i}},{key:"max",value:function(t){var e,i,n=null,r=null,o=Ub(fb(e=this._data).call(e));try{for(o.s();!(i=o.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==r||a>r)&&(n=s,r=a)}}catch(t){o.e(t)}finally{o.f()}return n||null}},{key:"min",value:function(t){var e,i,n=null,r=null,o=Ub(fb(e=this._data).call(e));try{for(o.s();!(i=o.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==r||a<r)&&(n=s,r=a)}}catch(t){o.e(t)}finally{o.f()}return n||null}},{key:"distinct",value:function(t){for(var e=this._data,i=pd(xy(e).call(e)),n=[],r=0,o=0,s=i.length;o<s;o++){for(var a=i[o],l=e.get(a)[t],c=!1,u=0;u<r;u++)if(n[u]==l){c=!0;break}c||void 0===l||(n[r]=l,r++)}return n}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=Sb()),t}(t,this._idProp),i=e[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,e),++this.length,i}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+tp(t)+")");var i=this._data.get(e);if(!i)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,jb(jb({},i),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new Nb(Oi({},pb,Zm.mark((function i(){var n,r,o,s;return Zm.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=Ub(t),i.prev=1,n.s();case 3:if((r=n.n()).done){i.next=11;break}if(o=r.value,null==(s=e.get(o))){i.next=9;break}return i.next=9,[o,s];case 9:i.next=3;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),n.e(i.t0);case 16:return i.prev=16,n.f(),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[1,13,16,19]])}))))}var i,n,r;return new Nb(Oi({},pb,tn((n=this._data,r=n.entries,i=n===_b||yb(_b,n)&&r===_b.entries||vb(wb,mb(n))?bb:r)).call(i,this._data)))}}]),n}(Ib);function Vb(t,e){var i=void 0!==gd&&$l(t)||t["@@iterator"];if(!i){if(Cd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Wb(t,e);var n=wd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Fl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Wb(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function qb(t){var e=function(){if("undefined"==typeof Reflect||!Im)return!1;if(Im.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Im(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=jm(t);if(e){var r=jm(this).constructor;i=Im(n,arguments,r)}else i=n.apply(this,arguments);return Nm(this,i)}}var Qb=function(t){Rm(n,t);var i=qb(n);function n(t,r){var o,s;return e(this,n),Oi(Om(s=i.call(this)),"length",0),Oi(Om(s),"_listener",void 0),Oi(Om(s),"_data",void 0),Oi(Om(s),"_ids",new Db),Oi(Om(s),"_options",void 0),s._options=r||{},s._listener=tn(o=s._onEvent).call(o,Om(s)),s.setData(t),s}return Ii(n,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:kr(this._options)}),i=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:i})}if(null!=t){this._data=t;for(var n=this._data.getIds({filter:kr(this._options)}),r=0,o=n.length;r<o;r++){var s=n[r];this._ids.add(s)}this.length=n.length,this._trigger("add",{items:n})}else this._data=new Gb;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:kr(this._options)}),e=pd(this._ids),i={},n=[],r=[],o=[],s=0,a=t.length;s<a;s++){var l=t[s];i[l]=!0,this._ids.has(l)||(n.push(l),this._ids.add(l))}for(var c=0,u=e.length;c<u;c++){var h=e[c],d=this._data.get(h);null==d?console.error("If you see this, report it please."):i[h]||(r.push(h),o.push(d),this._ids.delete(h))}this.length+=n.length-r.length,n.length&&this._trigger("add",{items:n}),r.length&&this._trigger("remove",{items:r,oldData:o})}},{key:"get",value:function(t,e){if(null==this._data)return null;var i,n=null;Pb(t)||Cd(t)?(n=t,i=e):i=t;var r=SA({},this._options,i),o=kr(this._options),s=i&&kr(i);return o&&s&&(r.filter=function(t){return o(t)&&s(t)}),null==n?this._data.get(r):this._data.get(n,r)}},{key:"getIds",value:function(t){if(this._data.length){var e,i=kr(this._options),n=null!=t?kr(t):null;return e=n?i?function(t){return i(t)&&n(t)}:n:i,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var i,n,r=kr(this._options),o=e&&kr(e);n=o?r?function(t){return r(t)&&o(t)}:o:r,Ud(i=this._data).call(i,t,{filter:n,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var i,n,r=kr(this._options),o=e&&kr(e);return n=o?r?function(t){return r(t)&&o(t)}:o:r,Ir(i=this._data).call(i,t,{filter:n,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||Oi({},pb,tn(e=xy(this._ids)).call(e,this._ids)))}},{key:"dispose",value:function(){var t;null!==(t=this._data)&&void 0!==t&&t.off&&this._data.off("*",this._listener);var e,i="This data view has already been disposed of.",r={get:function(){throw new Error(i)},set:function(){throw new Error(i)},configurable:!1},o=Vb(xd(n.prototype));try{for(o.s();!(e=o.n()).done;){var s=e.value;mh(this,s,r)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_onEvent",value:function(t,e,i){if(e&&e.items&&this._data){var n=e.items,r=[],o=[],s=[],a=[],l=[],c=[];switch(t){case"add":for(var u=0,h=n.length;u<h;u++){var d=n[u];this.get(d)&&(this._ids.add(d),r.push(d))}break;case"update":for(var A=0,f=n.length;A<f;A++){var p=n[A];this.get(p)?this._ids.has(p)?(o.push(p),l.push(e.data[A]),a.push(e.oldData[A])):(this._ids.add(p),r.push(p)):this._ids.has(p)&&(this._ids.delete(p),s.push(p),c.push(e.oldData[A]))}break;case"remove":for(var g=0,m=n.length;g<m;g++){var v=n[g];this._ids.has(v)&&(this._ids.delete(v),s.push(v),c.push(e.oldData[g]))}}this.length+=r.length-s.length,r.length&&this._trigger("add",{items:r},i),o.length&&this._trigger("update",{items:o,oldData:a,data:l},i),s.length&&this._trigger("remove",{items:s,oldData:c},i)}}}]),n}(Ib);function Yb(t,e){return"object"===fd(e)&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof Ud(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof Ir(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}t.DELETE=lm,t.DataSet=Gb,t.DataStream=Nb,t.DataView=Qb,t.Queue=Mb,t.createNewDataPipeFrom=function(t){return new Jr(t)},t.isDataSetLike=Yb,t.isDataViewLike=function(t,e){return"object"===fd(e)&&null!==e&&t===e.idProp&&"function"==typeof Ud(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof Ir(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&Yb(t,e.getDataSet())},Object.defineProperty(t,"__esModule",{value:!0})}(e)},404:function(t,e,i){!function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},r={exports:{}},o=function(t){return t&&t.Math==Math&&t},s=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},l=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),c=l,u=Function.prototype,h=u.apply,d=u.call,A="object"==typeof Reflect&&Reflect.apply||(c?d.bind(h):function(){return d.apply(h,arguments)}),f=l,p=Function.prototype,g=p.bind,m=p.call,v=f&&g.bind(m,m),y=f?function(t){return t&&v(t)}:function(t){return t&&function(){return m.apply(t,arguments)}},b=function(t){return"function"==typeof t},_={},w=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=l,C=Function.prototype.call,E=x?C.bind(C):function(){return C.apply(C,arguments)},k={},T={}.propertyIsEnumerable,B=Object.getOwnPropertyDescriptor,S=B&&!T.call({1:2},1);k.f=S?function(t){var e=B(this,t);return!!e&&e.enumerable}:T;var P,M,I=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},O=y,D=O({}.toString),L=O("".slice),F=function(t){return L(D(t),8,-1)},R=y,N=a,z=F,j=s.Object,U=R("".split),Z=N((function(){return!j("z").propertyIsEnumerable(0)}))?function(t){return"String"==z(t)?U(t,""):j(t)}:j,H=s.TypeError,G=function(t){if(null==t)throw H("Can't call method on "+t);return t},V=Z,W=G,q=function(t){return V(W(t))},Q=b,Y=function(t){return"object"==typeof t?null!==t:Q(t)},X={},J=X,K=s,$=b,tt=function(t){return $(t)?t:void 0},et=function(t,e){return arguments.length<2?tt(J[t])||tt(K[t]):J[t]&&J[t][e]||K[t]&&K[t][e]},it=y({}.isPrototypeOf),nt=et("navigator","userAgent")||"",rt=s,ot=nt,st=rt.process,at=rt.Deno,lt=st&&st.versions||at&&at.version,ct=lt&&lt.v8;ct&&(M=(P=ct.split("."))[0]>0&&P[0]<4?1:+(P[0]+P[1])),!M&&ot&&(!(P=ot.match(/Edge\/(\d+)/))||P[1]>=74)&&(P=ot.match(/Chrome\/(\d+)/))&&(M=+P[1]);var ut=M,ht=ut,dt=a,At=!!Object.getOwnPropertySymbols&&!dt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ht&&ht<41})),ft=At&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,pt=et,gt=b,mt=it,vt=ft,yt=s.Object,bt=vt?function(t){return"symbol"==typeof t}:function(t){var e=pt("Symbol");return gt(e)&&mt(e.prototype,yt(t))},_t=s.String,wt=function(t){try{return _t(t)}catch(t){return"Object"}},xt=b,Ct=wt,Et=s.TypeError,kt=function(t){if(xt(t))return t;throw Et(Ct(t)+" is not a function")},Tt=kt,Bt=function(t,e){var i=t[e];return null==i?void 0:Tt(i)},St=E,Pt=b,Mt=Y,It=s.TypeError,Ot={exports:{}},Dt=s,Lt=Object.defineProperty,Ft="__core-js_shared__",Rt=s[Ft]||function(t,e){try{Lt(Dt,t,{value:e,configurable:!0,writable:!0})}catch(i){Dt[t]=e}return e}(Ft,{}),Nt=Rt;(Ot.exports=function(t,e){return Nt[t]||(Nt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"pure",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var zt=G,jt=s.Object,Ut=function(t){return jt(zt(t))},Zt=Ut,Ht=y({}.hasOwnProperty),Gt=Object.hasOwn||function(t,e){return Ht(Zt(t),e)},Vt=y,Wt=0,qt=Math.random(),Qt=Vt(1..toString),Yt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Qt(++Wt+qt,36)},Xt=s,Jt=Ot.exports,Kt=Gt,$t=Yt,te=At,ee=ft,ie=Jt("wks"),ne=Xt.Symbol,re=ne&&ne.for,oe=ee?ne:ne&&ne.withoutSetter||$t,se=function(t){if(!Kt(ie,t)||!te&&"string"!=typeof ie[t]){var e="Symbol."+t;te&&Kt(ne,t)?ie[t]=ne[t]:ie[t]=ee&&re?re(e):oe(e)}return ie[t]},ae=E,le=Y,ce=bt,ue=Bt,he=se,de=s.TypeError,Ae=he("toPrimitive"),fe=function(t,e){if(!le(t)||ce(t))return t;var i,n=ue(t,Ae);if(n){if(void 0===e&&(e="default"),i=ae(n,t,e),!le(i)||ce(i))return i;throw de("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var i,n;if("string"===e&&Pt(i=t.toString)&&!Mt(n=St(i,t)))return n;if(Pt(i=t.valueOf)&&!Mt(n=St(i,t)))return n;if("string"!==e&&Pt(i=t.toString)&&!Mt(n=St(i,t)))return n;throw It("Can't convert object to primitive value")}(t,e)},pe=bt,ge=function(t){var e=fe(t,"string");return pe(e)?e:e+""},me=Y,ve=s.document,ye=me(ve)&&me(ve.createElement),be=function(t){return ye?ve.createElement(t):{}},_e=be,we=!w&&!a((function(){return 7!=Object.defineProperty(_e("div"),"a",{get:function(){return 7}}).a})),xe=w,Ce=E,Ee=k,ke=I,Te=q,Be=ge,Se=Gt,Pe=we,Me=Object.getOwnPropertyDescriptor;_.f=xe?Me:function(t,e){if(t=Te(t),e=Be(e),Pe)try{return Me(t,e)}catch(t){}if(Se(t,e))return ke(!Ce(Ee.f,t,e),t[e])};var Ie=a,Oe=b,De=/#|\.prototype\./,Le=function(t,e){var i=Re[Fe(t)];return i==ze||i!=Ne&&(Oe(e)?Ie(e):!!e)},Fe=Le.normalize=function(t){return String(t).replace(De,".").toLowerCase()},Re=Le.data={},Ne=Le.NATIVE="N",ze=Le.POLYFILL="P",je=Le,Ue=kt,Ze=l,He=y(y.bind),Ge=function(t,e){return Ue(t),void 0===e?t:Ze?He(t,e):function(){return t.apply(e,arguments)}},Ve={},We=w&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),qe=s,Qe=Y,Ye=qe.String,Xe=qe.TypeError,Je=function(t){if(Qe(t))return t;throw Xe(Ye(t)+" is not an object")},Ke=w,$e=we,ti=We,ei=Je,ii=ge,ni=s.TypeError,ri=Object.defineProperty,oi=Object.getOwnPropertyDescriptor;Ve.f=Ke?ti?function(t,e,i){if(ei(t),e=ii(e),ei(i),"function"==typeof t&&"prototype"===e&&"value"in i&&"writable"in i&&!i.writable){var n=oi(t,e);n&&n.writable&&(t[e]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return ri(t,e,i)}:ri:function(t,e,i){if(ei(t),e=ii(e),ei(i),$e)try{return ri(t,e,i)}catch(t){}if("get"in i||"set"in i)throw ni("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var si=Ve,ai=I,li=w?function(t,e,i){return si.f(t,e,ai(1,i))}:function(t,e,i){return t[e]=i,t},ci=s,ui=A,hi=y,di=b,Ai=_.f,fi=je,pi=X,gi=Ge,mi=li,vi=Gt,yi=function(t){var e=function(i,n,r){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,n)}return new t(i,n,r)}return ui(t,this,arguments)};return e.prototype=t.prototype,e},bi=function(t,e){var i,n,r,o,s,a,l,c,u=t.target,h=t.global,d=t.stat,A=t.proto,f=h?ci:d?ci[u]:(ci[u]||{}).prototype,p=h?pi:pi[u]||mi(pi,u,{})[u],g=p.prototype;for(r in e)i=!fi(h?r:u+(d?".":"#")+r,t.forced)&&f&&vi(f,r),s=p[r],i&&(a=t.noTargetGet?(c=Ai(f,r))&&c.value:f[r]),o=i&&a?a:e[r],i&&typeof s==typeof o||(l=t.bind&&i?gi(o,ci):t.wrap&&i?yi(o):A&&di(o)?hi(o):o,(t.sham||o&&o.sham||s&&s.sham)&&mi(l,"sham",!0),mi(p,r,l),A&&(vi(pi,n=u+"Prototype")||mi(pi,n,{}),mi(pi[n],r,o),t.real&&g&&!g[r]&&mi(g,r,o)))},_i=bi,wi=w,xi=Ve.f;_i({target:"Object",stat:!0,forced:Object.defineProperty!==xi,sham:!wi},{defineProperty:xi});var Ci=X.Object,Ei=r.exports=function(t,e,i){return Ci.defineProperty(t,e,i)};Ci.defineProperty.sham&&(Ei.sham=!0);var ki=r.exports,Ti=ki;function Bi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Ti(t,n.key,n)}}function Si(t,e,i){return e&&Bi(t.prototype,e),i&&Bi(t,i),Ti(t,"prototype",{writable:!1}),t}function Pi(t,e,i){return e in t?Ti(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Mi=y([].slice),Ii=y,Oi=kt,Di=Y,Li=Gt,Fi=Mi,Ri=l,Ni=s.Function,zi=Ii([].concat),ji=Ii([].join),Ui={},Zi=function(t,e,i){if(!Li(Ui,e)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";Ui[e]=Ni("C,a","return new C("+ji(n,",")+")")}return Ui[e](t,i)},Hi=Ri?Ni.bind:function(t){var e=Oi(this),i=e.prototype,n=Fi(arguments,1),r=function(){var i=zi(n,Fi(arguments));return this instanceof r?Zi(e,i.length,i):e.apply(t,i)};return Di(i)&&(r.prototype=i),r},Gi=Hi;bi({target:"Function",proto:!0,forced:Function.bind!==Gi},{bind:Gi});var Vi=X,Wi=function(t){return Vi[t+"Prototype"]},qi=Wi("Function").bind,Qi=it,Yi=qi,Xi=Function.prototype,Ji=function(t){var e=t.bind;return t===Xi||Qi(Xi,t)&&e===Xi.bind?Yi:e},Ki=Math.ceil,$i=Math.floor,tn=function(t){var e=+t;return e!=e||0===e?0:(e>0?$i:Ki)(e)},en=tn,nn=Math.min,rn=function(t){return function(t){return t>0?nn(en(t),9007199254740991):0}(t.length)},on=kt,sn=Ut,an=Z,ln=rn,cn=s.TypeError,un=function(t){return function(e,i,n,r){on(i);var o=sn(e),s=an(o),a=ln(o),l=t?a-1:0,c=t?-1:1;if(n<2)for(;;){if(l in s){r=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw cn("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(r=i(r,s[l],l,o));return r}},hn={left:un(!1),right:un(!0)},dn=a,An=function(t,e){var i=[][t];return!!i&&dn((function(){i.call(null,e||function(){return 1},1)}))},fn="process"==F(s.process),pn=hn.left,gn=ut,mn=fn;bi({target:"Array",proto:!0,forced:!An("reduce")||!mn&&gn>79&&gn<83},{reduce:function(t){var e=arguments.length;return pn(this,t,e,e>1?arguments[1]:void 0)}});var vn=Wi("Array").reduce,yn=it,bn=vn,_n=Array.prototype,wn=function(t){var e=t.reduce;return t===_n||yn(_n,t)&&e===_n.reduce?bn:e},xn=F,Cn=Array.isArray||function(t){return"Array"==xn(t)},En={};En[se("toStringTag")]="z";var kn="[object z]"===String(En),Tn=s,Bn=kn,Sn=b,Pn=F,Mn=se("toStringTag"),In=Tn.Object,On="Arguments"==Pn(function(){return arguments}()),Dn=Bn?Pn:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=In(t),Mn))?i:On?Pn(e):"Object"==(n=Pn(e))&&Sn(e.callee)?"Arguments":n},Ln=b,Fn=Rt,Rn=y(Function.toString);Ln(Fn.inspectSource)||(Fn.inspectSource=function(t){return Rn(t)});var Nn=Fn.inspectSource,zn=y,jn=a,Un=b,Zn=Dn,Hn=Nn,Gn=function(){},Vn=[],Wn=et("Reflect","construct"),qn=/^\s*(?:class|function)\b/,Qn=zn(qn.exec),Yn=!qn.exec(Gn),Xn=function(t){if(!Un(t))return!1;try{return Wn(Gn,Vn,t),!0}catch(t){return!1}},Jn=function(t){if(!Un(t))return!1;switch(Zn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Yn||!!Qn(qn,Hn(t))}catch(t){return!0}};Jn.sham=!0;var Kn=!Wn||jn((function(){var t;return Xn(Xn.call)||!Xn(Object)||!Xn((function(){t=!0}))||t}))?Jn:Xn,$n=s,tr=Cn,er=Kn,ir=Y,nr=se("species"),rr=$n.Array,or=function(t,e){return new(function(t){var e;return tr(t)&&(e=t.constructor,(er(e)&&(e===rr||tr(e.prototype))||ir(e)&&null===(e=e[nr]))&&(e=void 0)),void 0===e?rr:e}(t))(0===e?0:e)},sr=Ge,ar=Z,lr=Ut,cr=rn,ur=or,hr=y([].push),dr=function(t){var e=1==t,i=2==t,n=3==t,r=4==t,o=6==t,s=7==t,a=5==t||o;return function(l,c,u,h){for(var d,A,f=lr(l),p=ar(f),g=sr(c,u),m=cr(p),v=0,y=h||ur,b=e?y(l,m):i||s?y(l,0):void 0;m>v;v++)if((a||v in p)&&(A=g(d=p[v],v,f),t))if(e)b[v]=A;else if(A)switch(t){case 3:return!0;case 5:return d;case 6:return v;case 2:hr(b,d)}else switch(t){case 4:return!1;case 7:hr(b,d)}return o?-1:n||r?r:b}},Ar={forEach:dr(0),map:dr(1),filter:dr(2),some:dr(3),every:dr(4),find:dr(5),findIndex:dr(6),filterReject:dr(7)},fr=a,pr=ut,gr=se("species"),mr=function(t){return pr>=51||!fr((function(){var e=[];return(e.constructor={})[gr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},vr=Ar.filter;bi({target:"Array",proto:!0,forced:!mr("filter")},{filter:function(t){return vr(this,t,arguments.length>1?arguments[1]:void 0)}});var yr=Wi("Array").filter,br=it,_r=yr,wr=Array.prototype,xr=function(t){var e=t.filter;return t===wr||br(wr,t)&&e===wr.filter?_r:e},Cr=Ar.map;bi({target:"Array",proto:!0,forced:!mr("map")},{map:function(t){return Cr(this,t,arguments.length>1?arguments[1]:void 0)}});var Er=Wi("Array").map,kr=it,Tr=Er,Br=Array.prototype,Sr=function(t){var e=t.map;return t===Br||kr(Br,t)&&e===Br.map?Tr:e},Pr=Cn,Mr=rn,Ir=Ge,Or=s.TypeError,Dr=function(t,e,i,n,r,o,s,a){for(var l,c,u=r,h=0,d=!!s&&Ir(s,a);h<n;){if(h in i){if(l=d?d(i[h],h,e):i[h],o>0&&Pr(l))c=Mr(l),u=Dr(t,e,l,c,u,o-1)-1;else{if(u>=9007199254740991)throw Or("Exceed the acceptable array length");t[u]=l}u++}h++}return u},Lr=Dr,Fr=kt,Rr=Ut,Nr=rn,zr=or;bi({target:"Array",proto:!0},{flatMap:function(t){var e,i=Rr(this),n=Nr(i);return Fr(t),(e=zr(i,0)).length=Lr(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var jr,Ur,Zr,Hr=Wi("Array").flatMap,Gr=it,Vr=Hr,Wr=Array.prototype,qr=function(){function t(i,n,r){var o,s,a;e(this,t),Pi(this,"_source",void 0),Pi(this,"_transformers",void 0),Pi(this,"_target",void 0),Pi(this,"_listeners",{add:Ji(o=this._add).call(o,this),remove:Ji(s=this._remove).call(s,this),update:Ji(a=this._update).call(a,this)}),this._source=i,this._transformers=n,this._target=r}return Si(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var e;return wn(e=this._transformers).call(e,(function(t,e){return e(t)}),t)}},{key:"_add",value:function(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}},{key:"_update",value:function(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}},{key:"_remove",value:function(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}]),t}(),Qr=function(){function t(i){e(this,t),Pi(this,"_source",void 0),Pi(this,"_transformers",[]),this._source=i}return Si(t,[{key:"filter",value:function(t){return this._transformers.push((function(e){return xr(e).call(e,t)})),this}},{key:"map",value:function(t){return this._transformers.push((function(e){return Sr(e).call(e,t)})),this}},{key:"flatMap",value:function(t){return this._transformers.push((function(e){return function(t){var e=t.flatMap;return t===Wr||Gr(Wr,t)&&e===Wr.flatMap?Vr:e}(e).call(e,t)})),this}},{key:"to",value:function(t){return new qr(this._source,this._transformers,t)}}]),t}(),Yr=Dn,Xr=s.String,Jr=function(t){if("Symbol"===Yr(t))throw TypeError("Cannot convert a Symbol value to a string");return Xr(t)},Kr=y,$r=tn,to=Jr,eo=G,io=Kr("".charAt),no=Kr("".charCodeAt),ro=Kr("".slice),oo=function(t){return function(e,i){var n,r,o=to(eo(e)),s=$r(i),a=o.length;return s<0||s>=a?t?"":void 0:(n=no(o,s))<55296||n>56319||s+1===a||(r=no(o,s+1))<56320||r>57343?t?io(o,s):n:t?ro(o,s,s+2):r-56320+(n-55296<<10)+65536}},so={codeAt:oo(!1),charAt:oo(!0)},ao=b,lo=Nn,co=s.WeakMap,uo=ao(co)&&/native code/.test(lo(co)),ho=Ot.exports,Ao=Yt,fo=ho("keys"),po=function(t){return fo[t]||(fo[t]=Ao(t))},go={},mo=uo,vo=s,yo=y,bo=Y,_o=li,wo=Gt,xo=Rt,Co=po,Eo=go,ko="Object already initialized",To=vo.TypeError,Bo=vo.WeakMap;if(mo||xo.state){var So=xo.state||(xo.state=new Bo),Po=yo(So.get),Mo=yo(So.has),Io=yo(So.set);jr=function(t,e){if(Mo(So,t))throw new To(ko);return e.facade=t,Io(So,t,e),e},Ur=function(t){return Po(So,t)||{}},Zr=function(t){return Mo(So,t)}}else{var Oo=Co("state");Eo[Oo]=!0,jr=function(t,e){if(wo(t,Oo))throw new To(ko);return e.facade=t,_o(t,Oo,e),e},Ur=function(t){return wo(t,Oo)?t[Oo]:{}},Zr=function(t){return wo(t,Oo)}}var Do={set:jr,get:Ur,has:Zr,enforce:function(t){return Zr(t)?Ur(t):jr(t,{})},getterFor:function(t){return function(e){var i;if(!bo(e)||(i=Ur(e)).type!==t)throw To("Incompatible receiver, "+t+" required");return i}}},Lo=w,Fo=Gt,Ro=Function.prototype,No=Lo&&Object.getOwnPropertyDescriptor,zo=Fo(Ro,"name"),jo={EXISTS:zo,PROPER:zo&&"something"===function(){}.name,CONFIGURABLE:zo&&(!Lo||Lo&&No(Ro,"name").configurable)},Uo={},Zo=tn,Ho=Math.max,Go=Math.min,Vo=function(t,e){var i=Zo(t);return i<0?Ho(i+e,0):Go(i,e)},Wo=q,qo=Vo,Qo=rn,Yo=function(t){return function(e,i,n){var r,o=Wo(e),s=Qo(o),a=qo(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}},Xo={includes:Yo(!0),indexOf:Yo(!1)},Jo=Gt,Ko=q,$o=Xo.indexOf,ts=go,es=y([].push),is=function(t,e){var i,n=Ko(t),r=0,o=[];for(i in n)!Jo(ts,i)&&Jo(n,i)&&es(o,i);for(;e.length>r;)Jo(n,i=e[r++])&&(~$o(o,i)||es(o,i));return o},ns=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],rs=is,os=ns,ss=Object.keys||function(t){return rs(t,os)},as=w,ls=We,cs=Ve,us=Je,hs=q,ds=ss;Uo.f=as&&!ls?Object.defineProperties:function(t,e){us(t);for(var i,n=hs(e),r=ds(e),o=r.length,s=0;o>s;)cs.f(t,i=r[s++],n[i]);return t};var As,fs=et("document","documentElement"),ps=Je,gs=Uo,ms=ns,vs=go,ys=fs,bs=be,_s=po("IE_PROTO"),ws=function(){},xs=function(t){return"<script>"+t+"<\/script>"},Cs=function(t){t.write(xs("")),t.close();var e=t.parentWindow.Object;return t=null,e},Es=function(){try{As=new ActiveXObject("htmlfile")}catch(t){}var t,e;Es="undefined"!=typeof document?document.domain&&As?Cs(As):((e=bs("iframe")).style.display="none",ys.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(xs("document.F=Object")),t.close(),t.F):Cs(As);for(var i=ms.length;i--;)delete Es.prototype[ms[i]];return Es()};vs[_s]=!0;var ks,Ts,Bs,Ss=Object.create||function(t,e){var i;return null!==t?(ws.prototype=ps(t),i=new ws,ws.prototype=null,i[_s]=t):i=Es(),void 0===e?i:gs.f(i,e)},Ps=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ms=s,Is=Gt,Os=b,Ds=Ut,Ls=Ps,Fs=po("IE_PROTO"),Rs=Ms.Object,Ns=Rs.prototype,zs=Ls?Rs.getPrototypeOf:function(t){var e=Ds(t);if(Is(e,Fs))return e[Fs];var i=e.constructor;return Os(i)&&e instanceof i?i.prototype:e instanceof Rs?Ns:null},js=li,Us=function(t,e,i,n){n&&n.enumerable?t[e]=i:js(t,e,i)},Zs=a,Hs=b,Gs=Ss,Vs=zs,Ws=Us,qs=se("iterator"),Qs=!1;[].keys&&("next"in(Bs=[].keys())?(Ts=Vs(Vs(Bs)))!==Object.prototype&&(ks=Ts):Qs=!0);var Ys=null==ks||Zs((function(){var t={};return ks[qs].call(t)!==t}));Hs((ks=Ys?{}:Gs(ks))[qs])||Ws(ks,qs,(function(){return this}));var Xs={IteratorPrototype:ks,BUGGY_SAFARI_ITERATORS:Qs},Js=Dn,Ks=kn?{}.toString:function(){return"[object "+Js(this)+"]"},$s=kn,ta=Ve.f,ea=li,ia=Gt,na=Ks,ra=se("toStringTag"),oa=function(t,e,i,n){if(t){var r=i?t:t.prototype;ia(r,ra)||ta(r,ra,{configurable:!0,value:e}),n&&!$s&&ea(r,"toString",na)}},sa={},aa=Xs.IteratorPrototype,la=Ss,ca=I,ua=oa,ha=sa,da=function(){return this},Aa=s,fa=b,pa=Aa.String,ga=Aa.TypeError,ma=y,va=Je,ya=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=ma(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return va(i),function(t){if("object"==typeof t||fa(t))return t;throw ga("Can't set "+pa(t)+" as a prototype")}(n),e?t(i,n):i.__proto__=n,i}}():void 0),ba=bi,_a=E,wa=zs,xa=oa,Ca=Us,Ea=sa,ka=jo.PROPER,Ta=Xs.BUGGY_SAFARI_ITERATORS,Ba=se("iterator"),Sa="keys",Pa="values",Ma="entries",Ia=function(){return this},Oa=function(t,e,i,n,r,o,s){!function(t,e,i,n){var r=e+" Iterator";t.prototype=la(aa,{next:ca(+!n,i)}),ua(t,r,!1,!0),ha[r]=da}(i,e,n);var a,l,c,u=function(t){if(t===r&&p)return p;if(!Ta&&t in A)return A[t];switch(t){case Sa:case Pa:case Ma:return function(){return new i(this,t)}}return function(){return new i(this)}},h=e+" Iterator",d=!1,A=t.prototype,f=A[Ba]||A["@@iterator"]||r&&A[r],p=!Ta&&f||u(r),g="Array"==e&&A.entries||f;if(g&&(a=wa(g.call(new t)))!==Object.prototype&&a.next&&(xa(a,h,!0,!0),Ea[h]=Ia),ka&&r==Pa&&f&&f.name!==Pa&&(d=!0,p=function(){return _a(f,this)}),r)if(l={values:u(Pa),keys:o?p:u(Sa),entries:u(Ma)},s)for(c in l)(Ta||d||!(c in A))&&Ca(A,c,l[c]);else ba({target:e,proto:!0,forced:Ta||d},l);return s&&A[Ba]!==p&&Ca(A,Ba,p,{name:r}),Ea[e]=p,l},Da=so.charAt,La=Jr,Fa=Do,Ra=Oa,Na="String Iterator",za=Fa.set,ja=Fa.getterFor(Na);Ra(String,"String",(function(t){za(this,{type:Na,string:La(t),index:0})}),(function(){var t,e=ja(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:!0}:(t=Da(i,n),e.index+=t.length,{value:t,done:!1})}));var Ua=E,Za=Je,Ha=Bt,Ga=function(t,e,i){var n,r;Za(t);try{if(!(n=Ha(t,"return"))){if("throw"===e)throw i;return i}n=Ua(n,t)}catch(t){r=!0,n=t}if("throw"===e)throw i;if(r)throw n;return Za(n),i},Va=Je,Wa=Ga,qa=sa,Qa=se("iterator"),Ya=Array.prototype,Xa=function(t){return void 0!==t&&(qa.Array===t||Ya[Qa]===t)},Ja=ge,Ka=Ve,$a=I,tl=function(t,e,i){var n=Ja(e);n in t?Ka.f(t,n,$a(0,i)):t[n]=i},el=Dn,il=Bt,nl=sa,rl=se("iterator"),ol=function(t){if(null!=t)return il(t,rl)||il(t,"@@iterator")||nl[el(t)]},sl=E,al=kt,ll=Je,cl=wt,ul=ol,hl=s.TypeError,dl=function(t,e){var i=arguments.length<2?ul(t):e;if(al(i))return ll(sl(i,t));throw hl(cl(t)+" is not iterable")},Al=Ge,fl=E,pl=Ut,gl=function(t,e,i,n){try{return n?e(Va(i)[0],i[1]):e(i)}catch(e){Wa(t,"throw",e)}},ml=Xa,vl=Kn,yl=rn,bl=tl,_l=dl,wl=ol,xl=s.Array,Cl=se("iterator"),El=!1;try{var kl=0,Tl={next:function(){return{done:!!kl++}},return:function(){El=!0}};Tl[Cl]=function(){return this},Array.from(Tl,(function(){throw 2}))}catch(t){}bi({target:"Array",stat:!0,forced:!function(t,e){if(!e&&!El)return!1;var i=!1;try{var n={};n[Cl]=function(){return{next:function(){return{done:i=!0}}}},t(n)}catch(t){}return i}((function(t){Array.from(t)}))},{from:function(t){var e=pl(t),i=vl(this),n=arguments.length,r=n>1?arguments[1]:void 0,o=void 0!==r;o&&(r=Al(r,n>2?arguments[2]:void 0));var s,a,l,c,u,h,d=wl(e),A=0;if(!d||this==xl&&ml(d))for(s=yl(e),a=i?new this(s):xl(s);s>A;A++)h=o?r(e[A],A):e[A],bl(a,A,h);else for(u=(c=_l(e,d)).next,a=i?new this:[];!(l=fl(u,c)).done;A++)h=o?gl(c,r,[l.value,A],!0):l.value,bl(a,A,h);return a.length=A,a}});var Bl=X.Array.from,Sl=Bl,Pl=q,Ml=sa,Il=Do;Ve.f;var Ol=Oa,Dl="Array Iterator",Ll=Il.set,Fl=Il.getterFor(Dl);Ol(Array,"Array",(function(t,e){Ll(this,{type:Dl,target:Pl(t),index:0,kind:e})}),(function(){var t=Fl(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),Ml.Arguments=Ml.Array;var Rl=ol,Nl=s,zl=Dn,jl=li,Ul=sa,Zl=se("toStringTag");for(var Hl in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Gl=Nl[Hl],Vl=Gl&&Gl.prototype;Vl&&zl(Vl)!==Zl&&jl(Vl,Zl,Hl),Ul[Hl]=Ul.Array}var Wl=Rl,ql={},Ql=is,Yl=ns.concat("length","prototype");ql.f=Object.getOwnPropertyNames||function(t){return Ql(t,Yl)};var Xl={},Jl=Vo,Kl=rn,$l=tl,tc=s.Array,ec=Math.max,ic=function(t,e,i){for(var n=Kl(t),r=Jl(e,n),o=Jl(void 0===i?n:i,n),s=tc(ec(o-r,0)),a=0;r<o;r++,a++)$l(s,a,t[r]);return s.length=a,s},nc=F,rc=q,oc=ql.f,sc=ic,ac="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Xl.f=function(t){return ac&&"Window"==nc(t)?function(t){try{return oc(t)}catch(t){return sc(ac)}}(t):oc(rc(t))};var lc={};lc.f=Object.getOwnPropertySymbols;var cc={},uc=se;cc.f=uc;var hc=X,dc=Gt,Ac=cc,fc=Ve.f,pc=function(t){var e=hc.Symbol||(hc.Symbol={});dc(e,t)||fc(e,t,{value:Ac.f(t)})},gc=bi,mc=s,vc=et,yc=A,bc=E,_c=y,wc=w,xc=At,Cc=a,Ec=Gt,kc=Cn,Tc=b,Bc=Y,Sc=it,Pc=bt,Mc=Je,Ic=Ut,Oc=q,Dc=ge,Lc=Jr,Fc=I,Rc=Ss,Nc=ss,zc=ql,jc=Xl,Uc=lc,Zc=_,Hc=Ve,Gc=Uo,Vc=k,Wc=Mi,qc=Us,Qc=Ot.exports,Yc=go,Xc=Yt,Jc=se,Kc=cc,$c=pc,tu=oa,eu=Do,iu=Ar.forEach,nu=po("hidden"),ru="Symbol",ou=Jc("toPrimitive"),su=eu.set,au=eu.getterFor(ru),lu=Object.prototype,cu=mc.Symbol,uu=cu&&cu.prototype,hu=mc.TypeError,du=mc.QObject,Au=vc("JSON","stringify"),fu=Zc.f,pu=Hc.f,gu=jc.f,mu=Vc.f,vu=_c([].push),yu=Qc("symbols"),bu=Qc("op-symbols"),_u=Qc("string-to-symbol-registry"),wu=Qc("symbol-to-string-registry"),xu=Qc("wks"),Cu=!du||!du.prototype||!du.prototype.findChild,Eu=wc&&Cc((function(){return 7!=Rc(pu({},"a",{get:function(){return pu(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=fu(lu,e);n&&delete lu[e],pu(t,e,i),n&&t!==lu&&pu(lu,e,n)}:pu,ku=function(t,e){var i=yu[t]=Rc(uu);return su(i,{type:ru,tag:t,description:e}),wc||(i.description=e),i},Tu=function(t,e,i){t===lu&&Tu(bu,e,i),Mc(t);var n=Dc(e);return Mc(i),Ec(yu,n)?(i.enumerable?(Ec(t,nu)&&t[nu][n]&&(t[nu][n]=!1),i=Rc(i,{enumerable:Fc(0,!1)})):(Ec(t,nu)||pu(t,nu,Fc(1,{})),t[nu][n]=!0),Eu(t,n,i)):pu(t,n,i)},Bu=function(t,e){Mc(t);var i=Oc(e),n=Nc(i).concat(Iu(i));return iu(n,(function(e){wc&&!bc(Su,i,e)||Tu(t,e,i[e])})),t},Su=function(t){var e=Dc(t),i=bc(mu,this,e);return!(this===lu&&Ec(yu,e)&&!Ec(bu,e))&&(!(i||!Ec(this,e)||!Ec(yu,e)||Ec(this,nu)&&this[nu][e])||i)},Pu=function(t,e){var i=Oc(t),n=Dc(e);if(i!==lu||!Ec(yu,n)||Ec(bu,n)){var r=fu(i,n);return!r||!Ec(yu,n)||Ec(i,nu)&&i[nu][n]||(r.enumerable=!0),r}},Mu=function(t){var e=gu(Oc(t)),i=[];return iu(e,(function(t){Ec(yu,t)||Ec(Yc,t)||vu(i,t)})),i},Iu=function(t){var e=t===lu,i=gu(e?bu:Oc(t)),n=[];return iu(i,(function(t){!Ec(yu,t)||e&&!Ec(lu,t)||vu(n,yu[t])})),n};if(xc||(cu=function(){if(Sc(uu,this))throw hu("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Lc(arguments[0]):void 0,e=Xc(t),i=function(t){this===lu&&bc(i,bu,t),Ec(this,nu)&&Ec(this[nu],e)&&(this[nu][e]=!1),Eu(this,e,Fc(1,t))};return wc&&Cu&&Eu(lu,e,{configurable:!0,set:i}),ku(e,t)},qc(uu=cu.prototype,"toString",(function(){return au(this).tag})),qc(cu,"withoutSetter",(function(t){return ku(Xc(t),t)})),Vc.f=Su,Hc.f=Tu,Gc.f=Bu,Zc.f=Pu,zc.f=jc.f=Mu,Uc.f=Iu,Kc.f=function(t){return ku(Jc(t),t)},wc&&pu(uu,"description",{configurable:!0,get:function(){return au(this).description}})),gc({global:!0,wrap:!0,forced:!xc,sham:!xc},{Symbol:cu}),iu(Nc(xu),(function(t){$c(t)})),gc({target:ru,stat:!0,forced:!xc},{for:function(t){var e=Lc(t);if(Ec(_u,e))return _u[e];var i=cu(e);return _u[e]=i,wu[i]=e,i},keyFor:function(t){if(!Pc(t))throw hu(t+" is not a symbol");if(Ec(wu,t))return wu[t]},useSetter:function(){Cu=!0},useSimple:function(){Cu=!1}}),gc({target:"Object",stat:!0,forced:!xc,sham:!wc},{create:function(t,e){return void 0===e?Rc(t):Bu(Rc(t),e)},defineProperty:Tu,defineProperties:Bu,getOwnPropertyDescriptor:Pu}),gc({target:"Object",stat:!0,forced:!xc},{getOwnPropertyNames:Mu,getOwnPropertySymbols:Iu}),gc({target:"Object",stat:!0,forced:Cc((function(){Uc.f(1)}))},{getOwnPropertySymbols:function(t){return Uc.f(Ic(t))}}),Au){var Ou=!xc||Cc((function(){var t=cu();return"[null]"!=Au([t])||"{}"!=Au({a:t})||"{}"!=Au(Object(t))}));gc({target:"JSON",stat:!0,forced:Ou},{stringify:function(t,e,i){var n=Wc(arguments),r=e;if((Bc(e)||void 0!==t)&&!Pc(t))return kc(e)||(e=function(t,e){if(Tc(r)&&(e=bc(r,this,t,e)),!Pc(e))return e}),n[1]=e,yc(Au,null,n)}})}if(!uu[ou]){var Du=uu.valueOf;qc(uu,ou,(function(t){return bc(Du,this)}))}tu(cu,ru),Yc[nu]=!0;var Lu=X.Object.getOwnPropertySymbols,Fu={exports:{}},Ru=bi,Nu=a,zu=q,ju=_.f,Uu=w,Zu=Nu((function(){ju(1)}));Ru({target:"Object",stat:!0,forced:!Uu||Zu,sham:!Uu},{getOwnPropertyDescriptor:function(t,e){return ju(zu(t),e)}});var Hu=X.Object,Gu=Fu.exports=function(t,e){return Hu.getOwnPropertyDescriptor(t,e)};Hu.getOwnPropertyDescriptor.sham&&(Gu.sham=!0);var Vu=Fu.exports,Wu=et,qu=ql,Qu=lc,Yu=Je,Xu=y([].concat),Ju=Wu("Reflect","ownKeys")||function(t){var e=qu.f(Yu(t)),i=Qu.f;return i?Xu(e,i(t)):e},Ku=Ju,$u=q,th=_,eh=tl;bi({target:"Object",stat:!0,sham:!w},{getOwnPropertyDescriptors:function(t){for(var e,i,n=$u(t),r=th.f,o=Ku(n),s={},a=0;o.length>a;)void 0!==(i=r(n,e=o[a++]))&&eh(s,e,i);return s}});var ih=X.Object.getOwnPropertyDescriptors,nh={exports:{}},rh=bi,oh=w,sh=Uo.f;rh({target:"Object",stat:!0,forced:Object.defineProperties!==sh,sham:!oh},{defineProperties:sh});var ah=X.Object,lh=nh.exports=function(t,e){return ah.defineProperties(t,e)};ah.defineProperties.sham&&(lh.sham=!0);var ch=nh.exports,uh=ki;bi({target:"Array",stat:!0},{isArray:Cn});var hh=X.Array.isArray,dh=hh,Ah=bi,fh=s,ph=a,gh=Cn,mh=Y,vh=Ut,yh=rn,bh=tl,_h=or,wh=mr,xh=ut,Ch=se("isConcatSpreadable"),Eh=9007199254740991,kh="Maximum allowed index exceeded",Th=fh.TypeError,Bh=xh>=51||!ph((function(){var t=[];return t[Ch]=!1,t.concat()[0]!==t})),Sh=wh("concat"),Ph=function(t){if(!mh(t))return!1;var e=t[Ch];return void 0!==e?!!e:gh(t)};Ah({target:"Array",proto:!0,forced:!Bh||!Sh},{concat:function(t){var e,i,n,r,o,s=vh(this),a=_h(s,0),l=0;for(e=-1,n=arguments.length;e<n;e++)if(Ph(o=-1===e?s:arguments[e])){if(l+(r=yh(o))>Eh)throw Th(kh);for(i=0;i<r;i++,l++)i in o&&bh(a,l,o[i])}else{if(l>=Eh)throw Th(kh);bh(a,l++,o)}return a.length=l,a}}),pc("asyncIterator"),pc("hasInstance"),pc("isConcatSpreadable"),pc("iterator"),pc("match"),pc("matchAll"),pc("replace"),pc("search"),pc("species"),pc("split"),pc("toPrimitive"),pc("toStringTag"),pc("unscopables"),oa(s.JSON,"JSON",!0);var Mh=X.Symbol,Ih=Mh;pc("asyncDispose"),pc("dispose"),pc("matcher"),pc("metadata"),pc("observable"),pc("patternMatch"),pc("replaceAll");var Oh=Ih,Dh=bi,Lh=s,Fh=Cn,Rh=Kn,Nh=Y,zh=Vo,jh=rn,Uh=q,Zh=tl,Hh=se,Gh=Mi,Vh=mr("slice"),Wh=Hh("species"),qh=Lh.Array,Qh=Math.max;Dh({target:"Array",proto:!0,forced:!Vh},{slice:function(t,e){var i,n,r,o=Uh(this),s=jh(o),a=zh(t,s),l=zh(void 0===e?s:e,s);if(Fh(o)&&(i=o.constructor,(Rh(i)&&(i===qh||Fh(i.prototype))||Nh(i)&&null===(i=i[Wh]))&&(i=void 0),i===qh||void 0===i))return Gh(o,a,l);for(n=new(void 0===i?qh:i)(Qh(l-a,0)),r=0;a<l;a++,r++)a in o&&Zh(n,r,o[a]);return n.length=r,n}});var Yh=Wi("Array").slice,Xh=it,Jh=Yh,Kh=Array.prototype,$h=function(t){var e=t.slice;return t===Kh||Xh(Kh,t)&&e===Kh.slice?Jh:e},td=$h,ed=Bl;function id(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function nd(t,e){var i;if(t){if("string"==typeof t)return id(t,e);var n=td(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?ed(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?id(t,e):void 0}}function rd(t,e){return function(t){if(dh(t))return t}(t)||function(t,e){var i=null==t?null:void 0!==Oh&&Wl(t)||t["@@iterator"];if(null!=i){var n,r,o=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(o.push(n.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==i.return||i.return()}finally{if(a)throw r}}return o}}(t,e)||nd(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var od=cc.f("iterator"),sd=od;function ad(t){return ad="function"==typeof Oh&&"symbol"==typeof sd?function(t){return typeof t}:function(t){return t&&"function"==typeof Oh&&t.constructor===Oh&&t!==Oh.prototype?"symbol":typeof t},ad(t)}function ld(t){return function(t){if(dh(t))return id(t)}(t)||function(t){if(void 0!==Oh&&null!=Wl(t)||null!=t["@@iterator"])return ed(t)}(t)||nd(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cd=Mh,ud=Wi("Array").concat,hd=it,dd=ud,Ad=Array.prototype,fd=function(t){var e=t.concat;return t===Ad||hd(Ad,t)&&e===Ad.concat?dd:e},pd=$h;bi({target:"Reflect",stat:!0},{ownKeys:Ju});var gd=X.Reflect.ownKeys,md=hh,vd=Ut,yd=ss;bi({target:"Object",stat:!0,forced:a((function(){yd(1)}))},{keys:function(t){return yd(vd(t))}});var bd=X.Object.keys,_d=bi,wd=y,xd=s.Date,Cd=wd(xd.prototype.getTime);_d({target:"Date",stat:!0},{now:function(){return Cd(new xd)}}),X.Date.now;var Ed=Ar.forEach,kd=An("forEach")?[].forEach:function(t){return Ed(this,t,arguments.length>1?arguments[1]:void 0)};bi({target:"Array",proto:!0,forced:[].forEach!=kd},{forEach:kd});var Td=Wi("Array").forEach,Bd=Dn,Sd=Gt,Pd=it,Md=Td,Id=Array.prototype,Od={DOMTokenList:!0,NodeList:!0},Dd=function(t){var e=t.forEach;return t===Id||Pd(Id,t)&&e===Id.forEach||Sd(Od,Bd(t))?Md:e},Ld=bi,Fd=Cn,Rd=y([].reverse),Nd=[1,2];Ld({target:"Array",proto:!0,forced:String(Nd)===String(Nd.reverse())},{reverse:function(){return Fd(this)&&(this.length=this.length),Rd(this)}});var zd=Wi("Array").reverse,jd=it,Ud=zd,Zd=Array.prototype,Hd=bi,Gd=s,Vd=Vo,Wd=tn,qd=rn,Qd=Ut,Yd=or,Xd=tl,Jd=mr("splice"),Kd=Gd.TypeError,$d=Math.max,tA=Math.min,eA=9007199254740991,iA="Maximum allowed length exceeded";Hd({target:"Array",proto:!0,forced:!Jd},{splice:function(t,e){var i,n,r,o,s,a,l=Qd(this),c=qd(l),u=Vd(t,c),h=arguments.length;if(0===h?i=n=0:1===h?(i=0,n=c-u):(i=h-2,n=tA($d(Wd(e),0),c-u)),c+i-n>eA)throw Kd(iA);for(r=Yd(l,n),o=0;o<n;o++)(s=u+o)in l&&Xd(r,o,l[s]);if(r.length=n,i<n){for(o=u;o<c-n;o++)a=o+i,(s=o+n)in l?l[a]=l[s]:delete l[a];for(o=c;o>c-n+i;o--)delete l[o-1]}else if(i>n)for(o=c-n;o>u;o--)a=o+i-1,(s=o+n-1)in l?l[a]=l[s]:delete l[a];for(o=0;o<i;o++)l[o+u]=arguments[o+2];return l.length=c-n+i,r}});var nA=Wi("Array").splice,rA=it,oA=nA,sA=Array.prototype,aA=function(t){var e=t.splice;return t===sA||rA(sA,t)&&e===sA.splice?oA:e},lA=w,cA=y,uA=E,hA=a,dA=ss,AA=lc,fA=k,pA=Ut,gA=Z,mA=Object.assign,vA=Object.defineProperty,yA=cA([].concat),bA=!mA||hA((function(){if(lA&&1!==mA({b:1},mA(vA({},"a",{enumerable:!0,get:function(){vA(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=mA({},t)[i]||dA(mA({},e)).join("")!=n}))?function(t,e){for(var i=pA(t),n=arguments.length,r=1,o=AA.f,s=fA.f;n>r;)for(var a,l=gA(arguments[r++]),c=o?yA(dA(l),o(l)):dA(l),u=c.length,h=0;u>h;)a=c[h++],lA&&!uA(s,l,a)||(i[a]=l[a]);return i}:mA,_A=bA;bi({target:"Object",stat:!0,forced:Object.assign!==_A},{assign:_A});var wA=X.Object.assign,xA=Xo.includes;bi({target:"Array",proto:!0},{includes:function(t){return xA(this,t,arguments.length>1?arguments[1]:void 0)}}),Wi("Array").includes;var CA=Y,EA=F,kA=se("match"),TA=s.TypeError,BA=se("match"),SA=bi,PA=function(t){if(function(t){var e;return CA(t)&&(void 0!==(e=t[kA])?!!e:"RegExp"==EA(t))}(t))throw TA("The method doesn't accept regular expressions");return t},MA=G,IA=Jr,OA=y("".indexOf);SA({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[BA]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~OA(IA(MA(this)),IA(PA(t)),arguments.length>1?arguments[1]:void 0)}}),Wi("String").includes;var DA=Ut,LA=zs,FA=Ps;bi({target:"Object",stat:!0,forced:a((function(){LA(1)})),sham:!FA},{getPrototypeOf:function(t){return LA(DA(t))}});var RA=X.Object.getPrototypeOf,NA=w,zA=y,jA=ss,UA=q,ZA=zA(k.f),HA=zA([].push),GA=function(t){return function(e){for(var i,n=UA(e),r=jA(n),o=r.length,s=0,a=[];o>s;)i=r[s++],NA&&!ZA(n,i)||HA(a,t?[i,n[i]]:n[i]);return a}},VA=(GA(!0),GA(!1));bi({target:"Object",stat:!0},{values:function(t){return VA(t)}}),X.Object.values;var WA="\t\n\v\f\r \u2028\u2029\ufeff",qA=G,QA=Jr,YA=y("".replace),XA="[\t\n\v\f\r \u2028\u2029\ufeff]",JA=RegExp("^"+XA+XA+"*"),KA=RegExp(XA+XA+"*$"),$A=function(t){return function(e){var i=QA(qA(e));return 1&t&&(i=YA(i,JA,"")),2&t&&(i=YA(i,KA,"")),i}},tf={start:$A(1),end:$A(2),trim:$A(3)},ef=s,nf=a,rf=y,of=Jr,sf=tf.trim,af=WA,lf=ef.parseInt,cf=ef.Symbol,uf=cf&&cf.iterator,hf=/^[+-]?0x/i,df=rf(hf.exec),Af=8!==lf(af+"08")||22!==lf(af+"0x16")||uf&&!nf((function(){lf(Object(uf))}))?function(t,e){var i=sf(of(t));return lf(i,e>>>0||(df(hf,i)?16:10))}:lf;bi({global:!0,forced:parseInt!=Af},{parseInt:Af});var ff=bi,pf=Xo.indexOf,gf=An,mf=y([].indexOf),vf=!!mf&&1/mf([1],1,-0)<0,yf=gf("indexOf");ff({target:"Array",proto:!0,forced:vf||!yf},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return vf?mf(this,t,e)||0:pf(this,t,e)}}),Wi("Array").indexOf;var bf=jo.PROPER,_f=a,wf=WA,xf=tf.trim;bi({target:"String",proto:!0,forced:function(t){return _f((function(){return!!wf[t]()||""!==""[t]()||bf&&wf[t].name!==t}))}("trim")},{trim:function(){return xf(this)}}),Wi("String").trim,bi({target:"Object",stat:!0,sham:!w},{create:Ss});var Cf=X.Object,Ef=function(t,e){return Cf.create(t,e)},kf=Ef,Tf=bi,Bf=et,Sf=A,Pf=y,Mf=a,If=s.Array,Of=Bf("JSON","stringify"),Df=Pf(/./.exec),Lf=Pf("".charAt),Ff=Pf("".charCodeAt),Rf=Pf("".replace),Nf=Pf(1..toString),zf=/[\uD800-\uDFFF]/g,jf=/^[\uD800-\uDBFF]$/,Uf=/^[\uDC00-\uDFFF]$/,Zf=function(t,e,i){var n=Lf(i,e-1),r=Lf(i,e+1);return Df(jf,t)&&!Df(Uf,r)||Df(Uf,t)&&!Df(jf,n)?"\\u"+Nf(Ff(t,0),16):t},Hf=Mf((function(){return'"\\udf06\\ud834"'!==Of("\udf06\ud834")||'"\\udead"'!==Of("\udead")}));Of&&Tf({target:"JSON",stat:!0,forced:Hf},{stringify:function(t,e,i){for(var n=0,r=arguments.length,o=If(r);n<r;n++)o[n]=arguments[n];var s=Sf(Of,null,o);return"string"==typeof s?Rf(s,zf,Zf):s}});var Gf=X,Vf=A;Gf.JSON||(Gf.JSON={stringify:JSON.stringify});var Wf=function(t,e,i){return Vf(Gf.JSON.stringify,null,arguments)},qf=s.TypeError,Qf=bi,Yf=s,Xf=A,Jf=b,Kf=Mi,$f=function(t,e){if(t<e)throw qf("Not enough arguments");return t},tp=/MSIE .\./.test(nt),ep=Yf.Function,ip=function(t){return function(e,i){var n=$f(arguments.length,1)>2,r=Jf(e)?e:ep(e),o=n?Kf(arguments,2):void 0;return t(n?function(){Xf(r,this,o)}:r,i)}};Qf({global:!0,bind:!0,forced:tp},{setTimeout:ip(Yf.setTimeout),setInterval:ip(Yf.setInterval)});var np=X.setTimeout,rp=Ut,op=Vo,sp=rn;bi({target:"Array",proto:!0},{fill:function(t){for(var e=rp(this),i=sp(e),n=arguments.length,r=op(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=void 0===o?i:op(o,i);s>r;)e[r++]=t;return e}}),Wi("Array").fill;var ap={exports:{}};!function(t){function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((i=n[r])===e||i.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}(ap);var lp,cp=ap.exports;function up(){return up=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},up.apply(this,arguments)}function hp(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function dp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}lp="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var Ap,fp=lp,pp=["","webkit","Moz","MS","ms","o"],gp="undefined"==typeof document?{style:{}}:document.createElement("div"),mp=Math.round,vp=Math.abs,yp=Date.now;function bp(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<pp.length;){if((n=(i=pp[o])?i+r:e)in t)return n;o++}}Ap="undefined"==typeof window?{}:window;var _p=bp(gp.style,"touchAction"),wp=void 0!==_p,xp="compute",Cp="auto",Ep="manipulation",kp="none",Tp="pan-x",Bp="pan-y",Sp=function(){if(!wp)return!1;var t={},e=Ap.CSS&&Ap.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){return t[i]=!e||Ap.CSS.supports("touch-action",i)})),t}(),Pp="ontouchstart"in Ap,Mp=void 0!==bp(Ap,"PointerEvent"),Ip=Pp&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Op="touch",Dp="mouse",Lp=["x","y"],Fp=["clientX","clientY"];function Rp(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function Np(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function zp(t,e){return t.indexOf(e)>-1}var jp=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===xp&&(t=this.compute()),wp&&this.manager.element.style&&Sp[t]&&(this.manager.element.style[_p]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return Rp(this.manager.recognizers,(function(e){Np(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(zp(t,kp))return kp;var e=zp(t,Tp),i=zp(t,Bp);return e&&i?kp:e||i?e?Tp:Bp:zp(t,Ep)?Ep:Cp}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=zp(n,kp)&&!Sp.none,o=zp(n,Bp)&&!Sp["pan-y"],s=zp(n,Tp)&&!Sp["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&6&i||s&&24&i?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function Up(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Zp(t){var e=t.length;if(1===e)return{x:mp(t[0].clientX),y:mp(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:mp(i/e),y:mp(n/e)}}function Hp(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:mp(t.pointers[i].clientX),clientY:mp(t.pointers[i].clientY)},i++;return{timeStamp:yp(),pointers:e,center:Zp(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Gp(t,e,i){i||(i=Lp);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function Vp(t,e,i){i||(i=Lp);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function Wp(t,e){return t===e?1:vp(t)>=vp(e)?t<0?2:4:e<0?8:16}function qp(t,e,i){return{x:e/t||0,y:i/t||0}}function Qp(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r==0,s=12&e&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=Hp(e)),r>1&&!i.firstMultiple?i.firstMultiple=Hp(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,l=e.center=Zp(n);e.timeStamp=yp(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Vp(a,l),e.distance=Gp(a,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=Wp(e.deltaX,e.deltaY);var c,u,h=qp(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=vp(h.x)>vp(h.y)?h.x:h.y,e.scale=s?(c=s.pointers,Gp((u=n)[0],u[1],Fp)/Gp(c[0],c[1],Fp)):1,e.rotation=s?function(t,e){return Vp(e[1],e[0],Fp)+Vp(t[1],t[0],Fp)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=qp(a,l,c);n=u.x,r=u.y,i=vp(u.x)>vp(u.y)?u.x:u.y,o=Wp(l,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var d,A=t.element,f=e.srcEvent;Up(d=f.composedPath?f.composedPath()[0]:f.path?f.path[0]:f.target,A)&&(A=d),e.target=A}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Yp(t){return t.trim().split(/\s+/g)}function Xp(t,e,i){Rp(Yp(e),(function(e){t.addEventListener(e,i,!1)}))}function Jp(t,e,i){Rp(Yp(e),(function(e){t.removeEventListener(e,i,!1)}))}function Kp(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var $p=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Np(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Xp(this.element,this.evEl,this.domHandler),this.evTarget&&Xp(this.target,this.evTarget,this.domHandler),this.evWin&&Xp(Kp(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Jp(this.element,this.evEl,this.domHandler),this.evTarget&&Jp(this.target,this.evTarget,this.domHandler),this.evWin&&Jp(Kp(this.element),this.evWin,this.domHandler)},t}();function tg(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}var eg={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ig={2:Op,3:"pen",4:Dp,5:"kinect"},ng="pointerdown",rg="pointermove pointerup pointercancel";Ap.MSPointerEvent&&!Ap.PointerEvent&&(ng="MSPointerDown",rg="MSPointerMove MSPointerUp MSPointerCancel");var og=function(t){function e(){var i,n=e.prototype;return n.evEl=ng,n.evWin=rg,(i=t.apply(this,arguments)||this).store=i.manager.session.pointerEvents=[],i}return hp(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=eg[n],o=ig[t.pointerType]||t.pointerType,s=o===Op,a=tg(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))},e}($p);function sg(t){return Array.prototype.slice.call(t,0)}function ag(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];tg(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}var lg={touchstart:1,touchmove:2,touchend:4,touchcancel:8},cg="touchstart touchmove touchend touchcancel",ug=function(t){function e(){var i;return e.prototype.evTarget=cg,(i=t.apply(this,arguments)||this).targetIds={},i}return hp(e,t),e.prototype.handler=function(t){var e=lg[t.type],i=hg.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Op,srcEvent:t})},e}($p);function hg(t,e){var i,n,r=sg(t.touches),o=this.targetIds;if(3&e&&1===r.length)return o[r[0].identifier]=!0,[r,r];var s=sg(t.changedTouches),a=[],l=this.target;if(n=r.filter((function(t){return Up(t.target,l)})),1===e)for(i=0;i<n.length;)o[n[i].identifier]=!0,i++;for(i=0;i<s.length;)o[s[i].identifier]&&a.push(s[i]),12&e&&delete o[s[i].identifier],i++;return a.length?[ag(n.concat(a),"identifier",!0),a]:void 0}var dg={mousedown:1,mousemove:2,mouseup:4},Ag="mousedown",fg="mousemove mouseup",pg=function(t){function e(){var i,n=e.prototype;return n.evEl=Ag,n.evWin=fg,(i=t.apply(this,arguments)||this).pressed=!1,i}return hp(e,t),e.prototype.handler=function(t){var e=dg[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Dp,srcEvent:t}))},e}($p);function gg(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY},n=this.lastTouches;this.lastTouches.push(i),setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function mg(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gg.call(this,e)):12&t&&gg.call(this,e)}function vg(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=25&&s<=25)return!0}return!1}var yg=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handler=function(t,e,i){var r=i.pointerType===Op,o=i.pointerType===Dp;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)mg.call(dp(dp(n)),e,i);else if(o&&vg.call(dp(dp(n)),i))return;n.callback(t,e,i)}},n.touch=new ug(n.manager,n.handler),n.mouse=new pg(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return hp(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}($p);function bg(t,e,i){return!!Array.isArray(t)&&(Rp(t,i[e],i),!0)}var _g=32,wg=1;function xg(t,e){var i=e.manager;return i?i.get(t):t}function Cg(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Eg=function(){function t(t){void 0===t&&(t={}),this.options=up({enable:!0},t),this.id=wg++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return fp(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(bg(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=xg(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return bg(t,"dropRecognizeWith",this)||(t=xg(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(bg(t,"requireFailure",this))return this;var e=this.requireFail;return-1===tg(e,t=xg(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(bg(t,"dropRequireFailure",this))return this;t=xg(t,this);var e=tg(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Cg(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Cg(i))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=_g},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=fp({},t);if(!Np(this.options.enable,[this,e]))return this.reset(),void(this.state=_g);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),kg=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,up({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}hp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Ep]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime<i.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!==t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||Gp(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.interval),2):8}return _g},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=_g}),this.options.interval),_g},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Eg),Tg=function(t){function e(e){return void 0===e&&(e={}),t.call(this,up({pointers:1},e))||this}hp(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:_g},e}(Eg);function Bg(t){return 16===t?"down":8===t?"up":2===t?"left":4===t?"right":""}var Sg=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,up({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,i.pY=null,i}hp(e,t);var i=e.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(Bp),24&t&&e.push(Tp),e},i.directionTest=function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!==this.pX,n=Math.abs(t.deltaX)):(r=0===s?1:s<0?8:16,i=s!==this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},i.attrTest=function(t){return Tg.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},i.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=Bg(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(Tg),Pg=function(t){function e(e){return void 0===e&&(e={}),t.call(this,up({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}hp(e,t);var i=e.prototype;return i.getTouchAction=function(){return Sg.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,n=this.options.direction;return 30&n?i=e.overallVelocity:6&n?i=e.overallVelocityX:24&n&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&vp(i)>this.options.velocity&&4&e.eventType},i.emit=function(t){var e=Bg(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Tg),Mg=function(t){function e(e){return void 0===e&&(e={}),t.call(this,up({event:"pinch",threshold:0,pointers:2},e))||this}hp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[kp]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},i.emit=function(e){if(1!==e.scale){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(Tg),Ig=function(t){function e(e){return void 0===e&&(e={}),t.call(this,up({event:"rotate",threshold:0,pointers:2},e))||this}hp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[kp]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Tg),Og=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,up({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,i._input=null,i}hp(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Cp]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime>i.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.time);else if(4&t.eventType)return 8;return _g},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=yp(),this.manager.emit(this.options.event,this._input)))},e}(Eg),Dg={domEvents:!1,touchAction:xp,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Lg=[[Ig,{enable:!1}],[Mg,{enable:!1},["rotate"]],[Pg,{direction:6}],[Sg,{direction:6},["swipe"]],[kg],[kg,{event:"doubletap",taps:2},["tap"]],[Og]];function Fg(t,e){var i,n=t.element;n.style&&(Rp(t.options.cssProps,(function(r,o){i=bp(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}var Rg=function(){function t(t,e){var i=this;this.options=fp({},Dg,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(Mp?og:Ip?ug:Pp?yg:pg))(this,Qp),this.touchAction=new jp(this,this.options.touchAction),Fg(this,!0),Rp(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return fp(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!==r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(e.curRecognizer=i,r=i),o++}},e.get=function(t){if(t instanceof Eg)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if(bg(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(bg(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,n=tg(i,e);-1!==n&&(i.splice(n,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return Rp(Yp(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return Rp(Yp(t),(function(t){e?i[t]&&i[t].splice(tg(i[t],e),1):delete i[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},e.destroy=function(){this.element&&Fg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Ng={touchstart:1,touchmove:2,touchend:4,touchcancel:8},zg="touchstart",jg="touchstart touchmove touchend touchcancel",Ug=function(t){function e(){var i,n=e.prototype;return n.evTarget=zg,n.evWin=jg,(i=t.apply(this,arguments)||this).started=!1,i}return hp(e,t),e.prototype.handler=function(t){var e=Ng[t.type];if(1===e&&(this.started=!0),this.started){var i=Zg.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Op,srcEvent:t})}},e}($p);function Zg(t,e){var i=sg(t.touches),n=sg(t.changedTouches);return 12&e&&(i=ag(i.concat(n),"identifier",!0)),[i,n]}function Hg(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,n,i),t.apply(this,arguments)}}var Gg=Hg((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&void 0===t[n[r]])&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),Vg=Hg((function(t,e){return Gg(t,e,!0)}),"merge","Use `assign`.");function Wg(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&fp(n,i)}function qg(t,e){return function(){return t.apply(e,arguments)}}var Qg=function(){var t=function(t,e){return void 0===e&&(e={}),new Rg(t,up({recognizers:Lg.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=16,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=24,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=16,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=_g,t.Manager=Rg,t.Input=$p,t.TouchAction=jp,t.TouchInput=ug,t.MouseInput=pg,t.PointerEventInput=og,t.TouchMouseInput=yg,t.SingleTouchInput=Ug,t.Recognizer=Eg,t.AttrRecognizer=Tg,t.Tap=kg,t.Pan=Sg,t.Swipe=Pg,t.Pinch=Mg,t.Rotate=Ig,t.Press=Og,t.on=Xp,t.off=Jp,t.each=Rp,t.merge=Vg,t.extend=Gg,t.bindFn=qg,t.assign=fp,t.inherit=Wg,t.bindFn=qg,t.prefixed=bp,t.toArray=sg,t.inArray=tg,t.uniqueArray=ag,t.splitStr=Yp,t.boolOrFn=Np,t.hasParent=Up,t.addEventListeners=Xp,t.removeEventListeners=Jp,t.defaults=fp({},Dg,{preset:Lg}),t}();function Yg(t,e){var i=void 0!==cd&&Wl(t)||t["@@iterator"];if(!i){if(md(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Xg(t,e);var n=pd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Sl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xg(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Xg(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Jg=cd("DELETE");function Kg(){var t=$g.apply(void 0,arguments);return em(t),t}function $g(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<2)return e[0];var n;if(e.length>2)return $g.apply(void 0,fd(n=[Kg(e[0],e[1])]).call(n,ld(pd(e).call(e,2))));var r,o=e[0],s=e[1],a=Yg(gd(s));try{for(a.s();!(r=a.n()).done;){var l=r.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===Jg?delete o[l]:null===o[l]||null===s[l]||"object"!==ad(o[l])||"object"!==ad(s[l])||md(o[l])||md(s[l])?o[l]=tm(s[l]):o[l]=$g(o[l],s[l]))}}catch(t){a.e(t)}finally{a.f()}return o}function tm(t){return md(t)?Sr(t).call(t,(function(t){return tm(t)})):"object"===ad(t)&&null!==t?$g({},t):t}function em(t){for(var e=0,i=bd(t);e<i.length;e++){var n=i[e];t[n]===Jg?delete t[n]:"object"===ad(t[n])&&null!==t[n]&&em(t[n])}}var im="undefined"!=typeof window?window.Hammer||Qg:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}()};function nm(t){var e,i=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){i._dom.overlay.parentNode.removeChild(i._dom.overlay)}));var n=im(this._dom.overlay);n.on("tap",Ji(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){n.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Dd(r).call(r,(function(t){n.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||i.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",i._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&i.deactivate()}}cp(nm.prototype),nm.current=null,nm.prototype.destroy=function(){var t,e;this.deactivate();var i,n=Yg(function(t){var e=t.reverse;return t===Zd||jd(Zd,t)&&e===Zd.reverse?Ud:e}(t=aA(e=this._cleanupQueue).call(e,0)).call(t));try{for(n.s();!(i=n.n()).done;)(0,i.value)()}catch(t){n.e(t)}finally{n.f()}},nm.prototype.activate=function(){nm.current&&nm.current.deactivate(),nm.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},nm.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},nm.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var rm=Kn,om=wt,sm=s.TypeError,am=bi,lm=A,cm=Hi,um=function(t){if(rm(t))return t;throw sm(om(t)+" is not a constructor")},hm=Je,dm=Y,Am=Ss,fm=a,pm=et("Reflect","construct"),gm=Object.prototype,mm=[].push,vm=fm((function(){function t(){}return!(pm((function(){}),[],t)instanceof t)})),ym=!fm((function(){pm((function(){}))})),bm=vm||ym;am({target:"Reflect",stat:!0,forced:bm,sham:bm},{construct:function(t,e){um(t),hm(e);var i=arguments.length<3?t:um(arguments[2]);if(ym&&!vm)return pm(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return lm(mm,n,e),new(lm(cm,t,n))}var r=i.prototype,o=Am(dm(r)?r:gm),s=lm(t,o,e);return dm(s)?s:o}});var _m=X.Reflect.construct;function wm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var xm=Ef;bi({target:"Object",stat:!0},{setPrototypeOf:ya});var Cm=X.Object.setPrototypeOf;function Em(t,e){return Em=Cm||function(t,e){return t.__proto__=e,t},Em(t,e)}function km(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=xm(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ti(t,"prototype",{writable:!1}),e&&Em(t,e)}function Tm(t,e){if(e&&("object"===ad(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wm(t)}var Bm=RA;function Sm(t){return Sm=Cm?Bm:function(t){return t.__proto__||Bm(t)},Sm(t)}var Pm={exports:{}};!function(t){var e=function(t){var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),s=new B(n||[]);return o._invoke=function(t,e,i){var n=h;return function(r,o){if(n===A)throw new Error("Generator is already running");if(n===f){if("throw"===r)throw o;return P()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=E(s,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=A;var l=u(t,e,i);if("normal"===l.type){if(n=i.done?f:d,l.arg===p)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(t,i,s),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",A="executing",f="completed",p={};function g(){}function m(){}function v(){}var y={};l(y,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(S([])));_&&_!==i&&n.call(_,o)&&(y=_);var w=v.prototype=g.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(r,o,s,a){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,a)}))}a(l.arg)}var r;this._invoke=function(t,n){function o(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(o,o):o()}}function E(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,E(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=v,l(w,"constructor",v),l(v,"constructor",m),m.displayName=l(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,a,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(C.prototype),l(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var s=new C(c(e,i,n,r),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(w),l(w,a,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=S,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:S(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(Pm);var Mm=Pm.exports,Im={exports:{}},Om=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Dm=a,Lm=Y,Fm=F,Rm=Om,Nm=Object.isExtensible,zm=Dm((function(){Nm(1)}))||Rm?function(t){return!!Lm(t)&&(!Rm||"ArrayBuffer"!=Fm(t))&&(!Nm||Nm(t))}:Nm,jm=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),Um=bi,Zm=y,Hm=go,Gm=Y,Vm=Gt,Wm=Ve.f,qm=ql,Qm=Xl,Ym=zm,Xm=jm,Jm=!1,Km=Yt("meta"),$m=0,tv=function(t){Wm(t,Km,{value:{objectID:"O"+$m++,weakData:{}}})},ev=Im.exports={enable:function(){ev.enable=function(){},Jm=!0;var t=qm.f,e=Zm([].splice),i={};i[Km]=1,t(i).length&&(qm.f=function(i){for(var n=t(i),r=0,o=n.length;r<o;r++)if(n[r]===Km){e(n,r,1);break}return n},Um({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Qm.f}))},fastKey:function(t,e){if(!Gm(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Vm(t,Km)){if(!Ym(t))return"F";if(!e)return"E";tv(t)}return t[Km].objectID},getWeakData:function(t,e){if(!Vm(t,Km)){if(!Ym(t))return!0;if(!e)return!1;tv(t)}return t[Km].weakData},onFreeze:function(t){return Xm&&Jm&&Ym(t)&&!Vm(t,Km)&&tv(t),t}};Hm[Km]=!0;var iv=Ge,nv=E,rv=Je,ov=wt,sv=Xa,av=rn,lv=it,cv=dl,uv=ol,hv=Ga,dv=s.TypeError,Av=function(t,e){this.stopped=t,this.result=e},fv=Av.prototype,pv=function(t,e,i){var n,r,o,s,a,l,c,u=i&&i.that,h=!(!i||!i.AS_ENTRIES),d=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),f=iv(e,u),p=function(t){return n&&hv(n,"normal",t),new Av(!0,t)},g=function(t){return h?(rv(t),A?f(t[0],t[1],p):f(t[0],t[1])):A?f(t,p):f(t)};if(d)n=t;else{if(!(r=uv(t)))throw dv(ov(t)+" is not iterable");if(sv(r)){for(o=0,s=av(t);s>o;o++)if((a=g(t[o]))&&lv(fv,a))return a;return new Av(!1)}n=cv(t,r)}for(l=n.next;!(c=nv(l,n)).done;){try{a=g(c.value)}catch(t){hv(n,"throw",t)}if("object"==typeof a&&a&&lv(fv,a))return a}return new Av(!1)},gv=it,mv=s.TypeError,vv=function(t,e){if(gv(e,t))return t;throw mv("Incorrect invocation")},yv=bi,bv=s,_v=Im.exports,wv=a,xv=li,Cv=pv,Ev=vv,kv=b,Tv=Y,Bv=oa,Sv=Ve.f,Pv=Ar.forEach,Mv=w,Iv=Do.set,Ov=Do.getterFor,Dv=function(t,e,i){var n,r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),s=r?"set":"add",a=bv[t],l=a&&a.prototype,c={};if(Mv&&kv(a)&&(o||l.forEach&&!wv((function(){(new a).entries().next()})))){var u=(n=e((function(e,i){Iv(Ev(e,u),{type:t,collection:new a}),null!=i&&Cv(i,e[s],{that:e,AS_ENTRIES:r})}))).prototype,h=Ov(t);Pv(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"==t||"set"==t;!(t in l)||o&&"clear"==t||xv(u,t,(function(i,n){var r=h(this).collection;if(!e&&o&&!Tv(i))return"get"==t&&void 0;var s=r[t](0===i?0:i,n);return e?this:s}))})),o||Sv(u,"size",{configurable:!0,get:function(){return h(this).collection.size}})}else n=i.getConstructor(e,t,r,s),_v.enable();return Bv(n,t,!1,!0),c[t]=n,yv({global:!0,forced:!0},c),o||i.setStrong(n,t,r),n},Lv=Us,Fv=et,Rv=Ve,Nv=w,zv=se("species"),jv=Ve.f,Uv=Ss,Zv=function(t,e,i){for(var n in e)i&&i.unsafe&&t[n]?t[n]=e[n]:Lv(t,n,e[n],i);return t},Hv=Ge,Gv=vv,Vv=pv,Wv=Oa,qv=w,Qv=Im.exports.fastKey,Yv=Do.set,Xv=Do.getterFor,Jv={getConstructor:function(t,e,i,n){var r=t((function(t,r){Gv(t,o),Yv(t,{type:e,index:Uv(null),first:void 0,last:void 0,size:0}),qv||(t.size=0),null!=r&&Vv(r,t[n],{that:t,AS_ENTRIES:i})})),o=r.prototype,s=Xv(e),a=function(t,e,i){var n,r,o=s(t),a=l(t,e);return a?a.value=i:(o.last=a={index:r=Qv(e,!0),key:e,value:i,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),qv?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t},l=function(t,e){var i,n=s(t),r=Qv(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return Zv(o,{clear:function(){for(var t=s(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,qv?t.size=0:this.size=0},delete:function(t){var e=this,i=s(e),n=l(e,t);if(n){var r=n.next,o=n.previous;delete i.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),i.first==n&&(i.first=r),i.last==n&&(i.last=o),qv?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=s(this),n=Hv(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Zv(o,i?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),qv&&jv(o,"size",{get:function(){return s(this).size}}),r},setStrong:function(t,e,i){var n=e+" Iterator",r=Xv(e),o=Xv(n);Wv(t,e,(function(t,e){Yv(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),function(t){var e=Fv(t),i=Rv.f;Nv&&e&&!e[zv]&&i(e,zv,{configurable:!0,get:function(){return this}})}(e)}};Dv("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Jv);var Kv=X.Map,$v=Ar.some;bi({target:"Array",proto:!0,forced:!An("some")},{some:function(t){return $v(this,t,arguments.length>1?arguments[1]:void 0)}});var ty=Wi("Array").some,ey=it,iy=ty,ny=Array.prototype,ry=Wi("Array").keys,oy=Dn,sy=Gt,ay=it,ly=ry,cy=Array.prototype,uy={DOMTokenList:!0,NodeList:!0},hy=function(t){var e=t.keys;return t===cy||ay(cy,t)&&e===cy.keys||sy(uy,oy(t))?ly:e},dy=ic,Ay=Math.floor,fy=function(t,e){var i=t.length,n=Ay(i/2);return i<8?py(t,e):gy(t,fy(dy(t,0,n),e),fy(dy(t,n),e),e)},py=function(t,e){for(var i,n,r=t.length,o=1;o<r;){for(n=o,i=t[o];n&&e(t[n-1],i)>0;)t[n]=t[--n];n!==o++&&(t[n]=i)}return t},gy=function(t,e,i,n){for(var r=e.length,o=i.length,s=0,a=0;s<r||a<o;)t[s+a]=s<r&&a<o?n(e[s],i[a])<=0?e[s++]:i[a++]:s<r?e[s++]:i[a++];return t},my=fy,vy=nt.match(/firefox\/(\d+)/i),yy=!!vy&&+vy[1],by=/MSIE|Trident/.test(nt),_y=nt.match(/AppleWebKit\/(\d+)\./),wy=!!_y&&+_y[1],xy=bi,Cy=y,Ey=kt,ky=Ut,Ty=rn,By=Jr,Sy=a,Py=my,My=An,Iy=yy,Oy=by,Dy=ut,Ly=wy,Fy=[],Ry=Cy(Fy.sort),Ny=Cy(Fy.push),zy=Sy((function(){Fy.sort(void 0)})),jy=Sy((function(){Fy.sort(null)})),Uy=My("sort"),Zy=!Sy((function(){if(Dy)return Dy<70;if(!(Iy&&Iy>3)){if(Oy)return!0;if(Ly)return Ly<603;var t,e,i,n,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)Fy.push({k:e+n,v:i})}for(Fy.sort((function(t,e){return e.v-t.v})),n=0;n<Fy.length;n++)e=Fy[n].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));xy({target:"Array",proto:!0,forced:zy||!jy||!Uy||!Zy},{sort:function(t){void 0!==t&&Ey(t);var e=ky(this);if(Zy)return void 0===t?Ry(e):Ry(e,t);var i,n,r=[],o=Ty(e);for(n=0;n<o;n++)n in e&&Ny(r,e[n]);for(Py(r,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:By(e)>By(i)?1:-1}}(t)),i=r.length,n=0;n<i;)e[n]=r[n++];for(;n<o;)delete e[n++];return e}});var Hy,Gy=Wi("Array").sort,Vy=it,Wy=Gy,qy=Array.prototype,Qy=function(t){var e=t.sort;return t===qy||Vy(qy,t)&&e===qy.sort?Wy:e},Yy=Wi("Array").values,Xy=Dn,Jy=Gt,Ky=it,$y=Yy,tb=Array.prototype,eb={DOMTokenList:!0,NodeList:!0},ib=function(t){var e=t.values;return t===tb||Ky(tb,t)&&e===tb.values||Jy(eb,Xy(t))?$y:e},nb=od,rb=Wi("Array").entries,ob=Dn,sb=Gt,ab=it,lb=rb,cb=Array.prototype,ub={DOMTokenList:!0,NodeList:!0},hb=new Uint8Array(16);function db(){if(!Hy&&!(Hy="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hy(hb)}var Ab=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fb(t){return"string"==typeof t&&Ab.test(t)}for(var pb=[],gb=0;gb<256;++gb)pb.push((gb+256).toString(16).substr(1));function mb(t,e,i){var n=(t=t||{}).random||(t.rng||db)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var r=0;r<16;++r)e[i+r]=n[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(pb[t[e+0]]+pb[t[e+1]]+pb[t[e+2]]+pb[t[e+3]]+"-"+pb[t[e+4]]+pb[t[e+5]]+"-"+pb[t[e+6]]+pb[t[e+7]]+"-"+pb[t[e+8]]+pb[t[e+9]]+"-"+pb[t[e+10]]+pb[t[e+11]]+pb[t[e+12]]+pb[t[e+13]]+pb[t[e+14]]+pb[t[e+15]]).toLowerCase();if(!fb(i))throw TypeError("Stringified UUID is invalid");return i}(n)}function vb(t){return"string"==typeof t||"number"==typeof t}var yb=function(){function t(i){e(this,t),Pi(this,"delay",void 0),Pi(this,"max",void 0),Pi(this,"_queue",[]),Pi(this,"_timeout",null),Pi(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(i)}return Si(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}}},{key:"replace",value:function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.queue({args:e,fn:n,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=np((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,e;Dd(t=aA(e=this._queue).call(e,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(e,i){var n=new t(i);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){n.flush()};var r=[{name:"flush",original:void 0}];if(i&&i.replace)for(var o=0;o<i.replace.length;o++){var s=i.replace[o];r.push({name:s,original:e[s]}),n.replace(e,s)}return n._extended={object:e,methods:r},n}}]),t}(),bb=function(){function t(){e(this,t),Pi(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Pi(this,"subscribe",t.prototype.on),Pi(this,"unsubscribe",t.prototype.off)}return Si(t,[{key:"_trigger",value:function(t,e,i){var n,r;if("*"===t)throw new Error("Cannot trigger event *");Dd(n=fd(r=[]).call(r,ld(this._subscribers[t]),ld(this._subscribers["*"]))).call(n,(function(n){n(t,e,null!=i?i:null)}))}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var i;this._subscribers[t]=xr(i=this._subscribers[t]).call(i,(function(t){return t!==e}))}}]),t}();Dv("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Jv);var _b,wb=X.Set,xb=dl;function Cb(t,e){var i=void 0!==cd&&Wl(t)||t["@@iterator"];if(!i){if(md(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Eb(t,e);var n=pd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Sl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Eb(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}_b=nb;var kb=function(){function t(i){e(this,t),Pi(this,"_pairs",void 0),this._pairs=i}return Si(t,[{key:_b,value:Mm.mark((function t(){var e,i,n,r,o;return Mm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Cb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=rd(i.value,2),r=n[0],o=n[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:Mm.mark((function t(){var e,i,n,r,o;return Mm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Cb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=rd(i.value,2),r=n[0],o=n[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:Mm.mark((function t(){var e,i,n,r;return Mm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Cb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=rd(i.value,1),r=n[0],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:Mm.mark((function t(){var e,i,n,r;return Mm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Cb(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return n=rd(i.value,2),r=n[1],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return Sr(t=ld(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return Sr(t=ld(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return ld(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=kf(null),i=Cb(this._pairs);try{for(i.s();!(t=i.n()).done;){var n=rd(t.value,2),r=n[0],o=n[1];e[r]=o}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"toMap",value:function(){return new Kv(this._pairs)}},{key:"toIdSet",value:function(){return new wb(this.toIdArray())}},{key:"toItemSet",value:function(){return new wb(this.toItemArray())}},{key:"cache",value:function(){return new t(ld(this._pairs))}},{key:"distinct",value:function(t){var e,i=new wb,n=Cb(this._pairs);try{for(n.s();!(e=n.n()).done;){var r=rd(e.value,2),o=r[0],s=r[1];i.add(t(s,o))}}catch(t){n.e(t)}finally{n.f()}return i}},{key:"filter",value:function(e){var i=this._pairs;return new t(Pi({},nb,Mm.mark((function t(){var n,r,o,s,a;return Mm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Cb(i),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=10;break}if(o=rd(r.value,2),s=o[0],a=o[1],!e(a,s)){t.next=8;break}return t.next=8,[s,a];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(t){var e,i=Cb(this._pairs);try{for(i.s();!(e=i.n()).done;){var n=rd(e.value,2),r=n[0];t(n[1],r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"map",value:function(e){var i=this._pairs;return new t(Pi({},nb,Mm.mark((function t(){var n,r,o,s,a;return Mm.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Cb(i),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return o=rd(r.value,2),s=o[0],a=o[1],t.next=7,[s,e(a,s)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))))}},{key:"max",value:function(t){var e=xb(this._pairs),i=e.next();if(i.done)return null;for(var n=i.value[1],r=t(i.value[1],i.value[0]);!(i=e.next()).done;){var o=rd(i.value,2),s=o[0],a=o[1],l=t(a,s);l>r&&(r=l,n=a)}return n}},{key:"min",value:function(t){var e=xb(this._pairs),i=e.next();if(i.done)return null;for(var n=i.value[1],r=t(i.value[1],i.value[0]);!(i=e.next()).done;){var o=rd(i.value,2),s=o[0],a=o[1],l=t(a,s);l<r&&(r=l,n=a)}return n}},{key:"reduce",value:function(t,e){var i,n=Cb(this._pairs);try{for(n.s();!(i=n.n()).done;){var r=rd(i.value,2),o=r[0];e=t(e,r[1],o)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"sort",value:function(e){var i=this;return new t(Pi({},nb,(function(){var t;return xb(Qy(t=ld(i._pairs)).call(t,(function(t,i){var n=rd(t,2),r=n[0],o=n[1],s=rd(i,2),a=s[0],l=s[1];return e(o,l,r,a)})))})))}}]),t}();function Tb(t,e){var i=bd(t);if(Lu){var n=Lu(t);e&&(n=xr(n).call(n,(function(e){return Vu(t,e).enumerable}))),i.push.apply(i,n)}return i}function Bb(t){for(var e=1;e<arguments.length;e++){var i,n,r=null!=arguments[e]?arguments[e]:{};e%2?Dd(i=Tb(Object(r),!0)).call(i,(function(e){Pi(t,e,r[e])})):ih?ch(t,ih(r)):Dd(n=Tb(Object(r))).call(n,(function(e){uh(t,e,Vu(r,e))}))}return t}function Sb(t,e){var i=void 0!==cd&&Wl(t)||t["@@iterator"];if(!i){if(md(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Pb(t,e);var n=pd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Sl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Pb(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Mb=function(t){km(n,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!_m)return!1;if(_m.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(_m(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Sm(t);if(e){var r=Sm(this).constructor;i=_m(n,arguments,r)}else i=n.apply(this,arguments);return Tm(this,i)}}(n);function n(t,r){var o;return e(this,n),Pi(wm(o=i.call(this)),"flush",void 0),Pi(wm(o),"length",void 0),Pi(wm(o),"_options",void 0),Pi(wm(o),"_data",void 0),Pi(wm(o),"_idProp",void 0),Pi(wm(o),"_queue",null),t&&!md(t)&&(r=t,t=[]),o._options=r||{},o._data=new Kv,o.length=0,o._idProp=o._options.fieldId||"id",t&&t.length&&o.add(t),o.setOptions(r),o}return Si(n,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=yb.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===ad(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var i,n=this,r=[];if(md(t)){var o=Sr(t).call(t,(function(t){return t[n._idProp]}));if(function(t){var e=t.some;return t===ny||ey(ny,t)&&e===ny.some?iy:e}(o).call(o,(function(t){return n._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var s=0,a=t.length;s<a;s++)i=this._addItem(t[s]),r.push(i)}else{if(!t||"object"!==ad(t))throw new Error("Unknown dataType");i=this._addItem(t),r.push(i)}return r.length&&this._trigger("add",{items:r},e),r}},{key:"update",value:function(t,e){var i=this,n=[],r=[],o=[],s=[],a=this._idProp,l=function(t){var e=t[a];if(null!=e&&i._data.has(e)){var l=t,c=wA({},i._data.get(e)),u=i._updateItem(l);r.push(u),s.push(l),o.push(c)}else{var h=i._addItem(t);n.push(h)}};if(md(t))for(var c=0,u=t.length;c<u;c++)t[c]&&"object"===ad(t[c])?l(t[c]):console.warn("Ignoring input item, which is not an object at index "+c);else{if(!t||"object"!==ad(t))throw new Error("Unknown dataType");l(t)}if(n.length&&this._trigger("add",{items:n},e),r.length){var h={items:r,oldData:o,data:s};this._trigger("update",h,e)}return fd(n).call(n,r)}},{key:"updateOnly",value:function(t,e){var i,n=this;md(t)||(t=[t]);var r=Sr(i=Sr(t).call(t,(function(t){var e=n._data.get(t[n._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}}))).call(i,(function(t){var e=t.oldData,i=t.update,r=e[n._idProp],o=function(t){for(var e,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return Kg.apply(void 0,fd(e=[{},t]).call(e,n))}(e,i);return n._data.set(r,o),{id:r,oldData:e,updatedData:o}}));if(r.length){var o={items:Sr(r).call(r,(function(t){return t.id})),oldData:Sr(r).call(r,(function(t){return t.oldData})),data:Sr(r).call(r,(function(t){return t.updatedData}))};return this._trigger("update",o,e),o.items}return[]}},{key:"get",value:function(t,e){var i=void 0,n=void 0,r=void 0;vb(t)?(i=t,r=e):md(t)?(n=t,r=e):r=t;var o,s=r&&"Object"===r.returnType?"Object":"Array",a=r&&xr(r),l=[],c=void 0,u=void 0,h=void 0;if(null!=i)(c=this._data.get(i))&&a&&!a(c)&&(c=void 0);else if(null!=n)for(var d=0,A=n.length;d<A;d++)null==(c=this._data.get(n[d]))||a&&!a(c)||l.push(c);else for(var f,p=0,g=(u=ld(hy(f=this._data).call(f))).length;p<g;p++)h=u[p],null==(c=this._data.get(h))||a&&!a(c)||l.push(c);if(r&&r.order&&null==i&&this._sort(l,r.order),r&&r.fields){var m=r.fields;if(null!=i&&null!=c)c=this._filterFields(c,m);else for(var v=0,y=l.length;v<y;v++)l[v]=this._filterFields(l[v],m)}if("Object"==s){for(var b={},_=0,w=l.length;_<w;_++){var x=l[_];b[x[this._idProp]]=x}return b}return null!=i?null!==(o=c)&&void 0!==o?o:null:l}},{key:"getIds",value:function(t){var e=this._data,i=t&&xr(t),n=t&&t.order,r=ld(hy(e).call(e)),o=[];if(i)if(n){for(var s=[],a=0,l=r.length;a<l;a++){var c=r[a],u=this._data.get(c);null!=u&&i(u)&&s.push(u)}this._sort(s,n);for(var h=0,d=s.length;h<d;h++)o.push(s[h][this._idProp])}else for(var A=0,f=r.length;A<f;A++){var p=r[A],g=this._data.get(p);null!=g&&i(g)&&o.push(g[this._idProp])}else if(n){for(var m=[],v=0,y=r.length;v<y;v++){var b=r[v];m.push(e.get(b))}this._sort(m,n);for(var _=0,w=m.length;_<w;_++)o.push(m[_][this._idProp])}else for(var x=0,C=r.length;x<C;x++){var E=r[x],k=e.get(E);null!=k&&o.push(k[this._idProp])}return o}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var i=e&&xr(e),n=this._data,r=ld(hy(n).call(n));if(e&&e.order)for(var o=this.get(e),s=0,a=o.length;s<a;s++){var l=o[s];t(l,l[this._idProp])}else for(var c=0,u=r.length;c<u;c++){var h=r[c],d=this._data.get(h);null==d||i&&!i(d)||t(d,h)}}},{key:"map",value:function(t,e){for(var i=e&&xr(e),n=[],r=this._data,o=ld(hy(r).call(r)),s=0,a=o.length;s<a;s++){var l=o[s],c=this._data.get(l);null==c||i&&!i(c)||n.push(t(c,l))}return e&&e.order&&this._sort(n,e.order),n}},{key:"_filterFields",value:function(t,e){var i;return t?wn(i=md(e)?e:bd(e)).call(i,(function(e,i){return e[i]=t[i],e}),{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var i=e;Qy(t).call(t,(function(t,e){var n=t[i],r=e[i];return n>r?1:n<r?-1:0}))}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");Qy(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var i=[],n=[],r=md(t)?t:[t],o=0,s=r.length;o<s;o++){var a=this._remove(r[o]);if(a){var l=a[this._idProp];null!=l&&(i.push(l),n.push(a))}}return i.length&&this._trigger("remove",{items:i,oldData:n},e),i}},{key:"_remove",value:function(t){var e;if(vb(t)?e=t:t&&"object"===ad(t)&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var i=this._data.get(e)||null;return this._data.delete(e),--this.length,i}return null}},{key:"clear",value:function(t){for(var e,i=ld(hy(e=this._data).call(e)),n=[],r=0,o=i.length;r<o;r++)n.push(this._data.get(i[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:n},t),i}},{key:"max",value:function(t){var e,i,n=null,r=null,o=Sb(ib(e=this._data).call(e));try{for(o.s();!(i=o.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==r||a>r)&&(n=s,r=a)}}catch(t){o.e(t)}finally{o.f()}return n||null}},{key:"min",value:function(t){var e,i,n=null,r=null,o=Sb(ib(e=this._data).call(e));try{for(o.s();!(i=o.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==r||a<r)&&(n=s,r=a)}}catch(t){o.e(t)}finally{o.f()}return n||null}},{key:"distinct",value:function(t){for(var e=this._data,i=ld(hy(e).call(e)),n=[],r=0,o=0,s=i.length;o<s;o++){for(var a=i[o],l=e.get(a)[t],c=!1,u=0;u<r;u++)if(n[u]==l){c=!0;break}c||void 0===l||(n[r]=l,r++)}return n}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=mb()),t}(t,this._idProp),i=e[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,e),++this.length,i}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+Wf(t)+")");var i=this._data.get(e);if(!i)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,Bb(Bb({},i),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new kb(Pi({},nb,Mm.mark((function i(){var n,r,o,s;return Mm.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=Sb(t),i.prev=1,n.s();case 3:if((r=n.n()).done){i.next=11;break}if(o=r.value,null==(s=e.get(o))){i.next=9;break}return i.next=9,[o,s];case 9:i.next=3;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),n.e(i.t0);case 16:return i.prev=16,n.f(),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[1,13,16,19]])}))))}var i;return new kb(Pi({},nb,Ji(i=function(t){var e=t.entries;return t===cb||ab(cb,t)&&e===cb.entries||sb(ub,ob(t))?lb:e}(this._data)).call(i,this._data)))}}]),n}(bb);function Ib(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Ob=function(t){km(n,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!_m)return!1;if(_m.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(_m(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Sm(t);if(e){var r=Sm(this).constructor;i=_m(n,arguments,r)}else i=n.apply(this,arguments);return Tm(this,i)}}(n);function n(t,r){var o,s;return e(this,n),Pi(wm(s=i.call(this)),"length",0),Pi(wm(s),"_listener",void 0),Pi(wm(s),"_data",void 0),Pi(wm(s),"_ids",new wb),Pi(wm(s),"_options",void 0),s._options=r||{},s._listener=Ji(o=s._onEvent).call(o,wm(s)),s.setData(t),s}return Si(n,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:xr(this._options)}),i=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:i})}if(null!=t){this._data=t;for(var n=this._data.getIds({filter:xr(this._options)}),r=0,o=n.length;r<o;r++){var s=n[r];this._ids.add(s)}this.length=n.length,this._trigger("add",{items:n})}else this._data=new Mb;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:xr(this._options)}),e=ld(this._ids),i={},n=[],r=[],o=[],s=0,a=t.length;s<a;s++){var l=t[s];i[l]=!0,this._ids.has(l)||(n.push(l),this._ids.add(l))}for(var c=0,u=e.length;c<u;c++){var h=e[c],d=this._data.get(h);null==d?console.error("If you see this, report it please."):i[h]||(r.push(h),o.push(d),this._ids.delete(h))}this.length+=n.length-r.length,n.length&&this._trigger("add",{items:n}),r.length&&this._trigger("remove",{items:r,oldData:o})}},{key:"get",value:function(t,e){if(null==this._data)return null;var i,n=null;vb(t)||md(t)?(n=t,i=e):i=t;var r=wA({},this._options,i),o=xr(this._options),s=i&&xr(i);return o&&s&&(r.filter=function(t){return o(t)&&s(t)}),null==n?this._data.get(r):this._data.get(n,r)}},{key:"getIds",value:function(t){if(this._data.length){var e,i=xr(this._options),n=null!=t?xr(t):null;return e=n?i?function(t){return i(t)&&n(t)}:n:i,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var i,n,r=xr(this._options),o=e&&xr(e);n=o?r?function(t){return r(t)&&o(t)}:o:r,Dd(i=this._data).call(i,t,{filter:n,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var i,n,r=xr(this._options),o=e&&xr(e);return n=o?r?function(t){return r(t)&&o(t)}:o:r,Sr(i=this._data).call(i,t,{filter:n,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||Pi({},nb,Ji(e=hy(this._ids)).call(e,this._ids)))}},{key:"dispose",value:function(){var t;null!==(t=this._data)&&void 0!==t&&t.off&&this._data.off("*",this._listener);var e,i="This data view has already been disposed of.",r={get:function(){throw new Error(i)},set:function(){throw new Error(i)},configurable:!1},o=function(t,e){var i=void 0!==cd&&Wl(t)||t["@@iterator"];if(!i){if(md(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Ib(t,e);var n=pd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Sl(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ib(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(gd(n.prototype));try{for(o.s();!(e=o.n()).done;){var s=e.value;uh(this,s,r)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_onEvent",value:function(t,e,i){if(e&&e.items&&this._data){var n=e.items,r=[],o=[],s=[],a=[],l=[],c=[];switch(t){case"add":for(var u=0,h=n.length;u<h;u++){var d=n[u];this.get(d)&&(this._ids.add(d),r.push(d))}break;case"update":for(var A=0,f=n.length;A<f;A++){var p=n[A];this.get(p)?this._ids.has(p)?(o.push(p),l.push(e.data[A]),a.push(e.oldData[A])):(this._ids.add(p),r.push(p)):this._ids.has(p)&&(this._ids.delete(p),s.push(p),c.push(e.oldData[A]))}break;case"remove":for(var g=0,m=n.length;g<m;g++){var v=n[g];this._ids.has(v)&&(this._ids.delete(v),s.push(v),c.push(e.oldData[g]))}}this.length+=r.length-s.length,r.length&&this._trigger("add",{items:r},i),o.length&&this._trigger("update",{items:o,oldData:a,data:l},i),s.length&&this._trigger("remove",{items:s,oldData:c},i)}}}]),n}(bb);function Db(t,e){return"object"===ad(e)&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof Dd(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof Sr(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}t.DELETE=Jg,t.DataSet=Mb,t.DataStream=kb,t.DataView=Ob,t.Queue=yb,t.createNewDataPipeFrom=function(t){return new Qr(t)},t.isDataSetLike=Db,t.isDataViewLike=function(t,e){return"object"===ad(e)&&null!==e&&t===e.idProp&&"function"==typeof Dd(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof Sr(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&Db(t,e.getDataSet())},Object.defineProperty(t,"__esModule",{value:!0})}(e)},1054:function(t,e,i){!function(t,e){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}var o=function(t){return t&&t.Math==Math&&t},s=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},l=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,h={f:u&&!c.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:c},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},A={}.toString,f=function(t){return A.call(t).slice(8,-1)},p="".split,g=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==f(t)?p.call(t,""):Object(t)}:Object,m=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return g(m(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},b=function(t,e){if(!y(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!y(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},_={}.hasOwnProperty,w=function(t,e){return _.call(t,e)},x=s.document,C=y(x)&&y(x.createElement),E=function(t){return C?x.createElement(t):{}},k=!l&&!a((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),T=Object.getOwnPropertyDescriptor,B={f:l?T:function(t,e){if(t=v(t),e=b(e,!0),k)try{return T(t,e)}catch(t){}if(w(t,e))return d(!h.f.call(t,e),t[e])}},S=/#|\.prototype\./,P=function(t,e){var i=I[M(t)];return i==D||i!=O&&("function"==typeof e?a(e):!!e)},M=P.normalize=function(t){return String(t).replace(S,".").toLowerCase()},I=P.data={},O=P.NATIVE="N",D=P.POLYFILL="P",L=P,F={},R=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},N=function(t,e,i){if(R(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},z=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},j=Object.defineProperty,U={f:l?j:function(t,e,i){if(z(t),e=b(e,!0),z(i),k)try{return j(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},Z=l?function(t,e,i){return U.f(t,e,d(1,i))}:function(t,e,i){return t[e]=i,t},H=B.f,G=function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},V=function(t,e){var i,n,r,o,a,l,c,u,h=t.target,d=t.global,A=t.stat,f=t.proto,p=d?s:A?s[h]:(s[h]||{}).prototype,g=d?F:F[h]||(F[h]={}),m=g.prototype;for(r in e)i=!L(d?r:h+(A?".":"#")+r,t.forced)&&p&&w(p,r),a=g[r],i&&(l=t.noTargetGet?(u=H(p,r))&&u.value:p[r]),o=i&&l?l:e[r],i&&typeof a==typeof o||(c=t.bind&&i?N(o,s):t.wrap&&i?G(o):f&&"function"==typeof o?N(Function.call,o):o,(t.sham||o&&o.sham||a&&a.sham)&&Z(c,"sham",!0),g[r]=c,f&&(w(F,n=h+"Prototype")||Z(F,n,{}),F[n][r]=o,t.real&&m&&!m[r]&&Z(m,r,o)))},W=Math.ceil,q=Math.floor,Q=function(t){return isNaN(t=+t)?0:(t>0?q:W)(t)},Y=Math.min,X=function(t){return t>0?Y(Q(t),9007199254740991):0},J=Math.max,K=Math.min,$=function(t,e){var i=Q(t);return i<0?J(i+e,0):K(i,e)},tt=function(t){return function(e,i,n){var r,o=v(e),s=X(o.length),a=$(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}},et={includes:tt(!0),indexOf:tt(!1)},it={},nt=et.indexOf,rt=function(t,e){var i,n=v(t),r=0,o=[];for(i in n)!w(it,i)&&w(n,i)&&o.push(i);for(;e.length>r;)w(n,i=e[r++])&&(~nt(o,i)||o.push(i));return o},ot=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],st=Object.keys||function(t){return rt(t,ot)},at={f:Object.getOwnPropertySymbols},lt=function(t){return Object(m(t))},ct=Object.assign,ut=Object.defineProperty,ht=!ct||a((function(){if(l&&1!==ct({b:1},ct(ut({},"a",{enumerable:!0,get:function(){ut(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=ct({},t)[i]||st(ct({},e)).join("")!=n}))?function(t,e){for(var i=lt(t),n=arguments.length,r=1,o=at.f,s=h.f;n>r;)for(var a,c=g(arguments[r++]),u=o?st(c).concat(o(c)):st(c),d=u.length,A=0;d>A;)a=u[A++],l&&!s.call(c,a)||(i[a]=c[a]);return i}:ct;V({target:"Object",stat:!0,forced:Object.assign!==ht},{assign:ht});var dt=F.Object.assign,At=[].slice,ft={},pt=function(t,e,i){if(!(e in ft)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";ft[e]=Function("C,a","return new C("+n.join(",")+")")}return ft[e](t,i)},gt=Function.bind||function(t){var e=R(this),i=At.call(arguments,1),n=function(){var r=i.concat(At.call(arguments));return this instanceof n?pt(e,r.length,r):e.apply(t,r)};return y(e.prototype)&&(n.prototype=e.prototype),n};V({target:"Function",proto:!0},{bind:gt});var mt=function(t){return F[t+"Prototype"]},vt=mt("Function").bind,yt=Function.prototype,bt=function(t){var e=t.bind;return t===yt||t instanceof Function&&e===yt.bind?vt:e};function _t(t,e,i,n){t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!1),t.closePath()}function wt(t,e,i,n,r,o){var s=Math.PI/180;n-2*o<0&&(o=n/2),r-2*o<0&&(o=r/2),t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.arc(e+n-o,i+o,o,270*s,360*s,!1),t.lineTo(e+n,i+r-o),t.arc(e+n-o,i+r-o,o,0,90*s,!1),t.lineTo(e+o,i+r),t.arc(e+o,i+r-o,o,90*s,180*s,!1),t.lineTo(e,i+o),t.arc(e+o,i+o,o,180*s,270*s,!1),t.closePath()}function xt(t,e,i,n,r){var o=.5522848,s=n/2*o,a=r/2*o,l=e+n,c=i+r,u=e+n/2,h=i+r/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,u-s,i,u,i),t.bezierCurveTo(u+s,i,l,h-a,l,h),t.bezierCurveTo(l,h+a,u+s,c,u,c),t.bezierCurveTo(u-s,c,e,h+a,e,h),t.closePath()}function Ct(t,e,i,n,r){var o=r*(1/3),s=.5522848,a=n/2*s,l=o/2*s,c=e+n,u=i+o,h=e+n/2,d=i+o/2,A=i+(r-o/2),f=i+r;t.beginPath(),t.moveTo(c,d),t.bezierCurveTo(c,d+l,h+a,u,h,u),t.bezierCurveTo(h-a,u,e,d+l,e,d),t.bezierCurveTo(e,d-l,h-a,i,h,i),t.bezierCurveTo(h+a,i,c,d-l,c,d),t.lineTo(c,A),t.bezierCurveTo(c,A+l,h+a,f,h,f),t.bezierCurveTo(h-a,f,e,A+l,e,A),t.lineTo(e,d)}function Et(t,e,i,n,r,o){t.beginPath(),t.moveTo(e,i);for(var s=o.length,a=n-e,l=r-i,c=l/a,u=Math.sqrt(a*a+l*l),h=0,d=!0,A=0,f=+o[0];u>=.1;)(f=+o[h++%s])>u&&(f=u),A=Math.sqrt(f*f/(1+c*c)),e+=A=a<0?-A:A,i+=c*A,!0===d?t.lineTo(e,i):t.moveTo(e,i),u-=f,d=!d}var kt={circle:_t,dashedLine:Et,database:Ct,diamond:function(t,e,i,n){t.beginPath(),t.lineTo(e,i+n),t.lineTo(e+n,i),t.lineTo(e,i-n),t.lineTo(e-n,i),t.closePath()},ellipse:xt,ellipse_vis:xt,hexagon:function(t,e,i,n){t.beginPath();var r=2*Math.PI/6;t.moveTo(e+n,i);for(var o=1;o<6;o++)t.lineTo(e+n*Math.cos(r*o),i+n*Math.sin(r*o));t.closePath()},roundRect:wt,square:function(t,e,i,n){t.beginPath(),t.rect(e-n,i-n,2*n,2*n),t.closePath()},star:function(t,e,i,n){t.beginPath(),i+=.1*(n*=.82);for(var r=0;r<10;r++){var o=r%2==0?1.3*n:.5*n;t.lineTo(e+o*Math.sin(2*r*Math.PI/10),i-o*Math.cos(2*r*Math.PI/10))}t.closePath()},triangle:function(t,e,i,n){t.beginPath(),i+=.275*(n*=1.15);var r=2*n,o=r/2,s=Math.sqrt(3)/6*r,a=Math.sqrt(r*r-o*o);t.moveTo(e,i-(a-s)),t.lineTo(e+o,i+s),t.lineTo(e-o,i+s),t.lineTo(e,i-(a-s)),t.closePath()},triangleDown:function(t,e,i,n){t.beginPath(),i-=.275*(n*=1.15);var r=2*n,o=r/2,s=Math.sqrt(3)/6*r,a=Math.sqrt(r*r-o*o);t.moveTo(e,i+(a-s)),t.lineTo(e+o,i-s),t.lineTo(e-o,i-s),t.lineTo(e,i+(a-s)),t.closePath()}},Tt=r((function(t){function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((i=n[r])===e||i.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}})),Bt=function(t){return function(e,i){var n,r,o=String(m(e)),s=Q(i),a=o.length;return s<0||s>=a?t?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):n:t?o.slice(s,s+2):r-56320+(n-55296<<10)+65536}},St={codeAt:Bt(!1),charAt:Bt(!0)},Pt="__core-js_shared__",Mt=s[Pt]||function(t,e){try{Z(s,t,e)}catch(i){s[t]=e}return e}(Pt,{}),It=Function.toString;"function"!=typeof Mt.inspectSource&&(Mt.inspectSource=function(t){return It.call(t)});var Ot,Dt,Lt,Ft=Mt.inspectSource,Rt=s.WeakMap,Nt="function"==typeof Rt&&/native code/.test(Ft(Rt)),zt=r((function(t){(t.exports=function(t,e){return Mt[t]||(Mt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.9.1",mode:"pure",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})})),jt=0,Ut=Math.random(),Zt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++jt+Ut).toString(36)},Ht=zt("keys"),Gt=function(t){return Ht[t]||(Ht[t]=Zt(t))},Vt=s.WeakMap;if(Nt){var Wt=Mt.state||(Mt.state=new Vt),qt=Wt.get,Qt=Wt.has,Yt=Wt.set;Ot=function(t,e){return e.facade=t,Yt.call(Wt,t,e),e},Dt=function(t){return qt.call(Wt,t)||{}},Lt=function(t){return Qt.call(Wt,t)}}else{var Xt=Gt("state");it[Xt]=!0,Ot=function(t,e){return e.facade=t,Z(t,Xt,e),e},Dt=function(t){return w(t,Xt)?t[Xt]:{}},Lt=function(t){return w(t,Xt)}}var Jt,Kt,$t={set:Ot,get:Dt,has:Lt,enforce:function(t){return Lt(t)?Dt(t):Ot(t,{})},getterFor:function(t){return function(e){var i;if(!y(e)||(i=Dt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},te=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),ee=Gt("IE_PROTO"),ie=Object.prototype,ne=te?Object.getPrototypeOf:function(t){return t=lt(t),w(t,ee)?t[ee]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ie:null},re="process"==f(s.process),oe=function(t){return"function"==typeof t?t:void 0},se=function(t,e){return arguments.length<2?oe(F[t])||oe(s[t]):F[t]&&F[t][e]||s[t]&&s[t][e]},ae=se("navigator","userAgent")||"",le=s.process,ce=le&&le.versions,ue=ce&&ce.v8;ue?Kt=(Jt=ue.split("."))[0]+Jt[1]:ae&&(!(Jt=ae.match(/Edge\/(\d+)/))||Jt[1]>=74)&&(Jt=ae.match(/Chrome\/(\d+)/))&&(Kt=Jt[1]);var he,de,Ae,fe=Kt&&+Kt,pe=!!Object.getOwnPropertySymbols&&!a((function(){return!Symbol.sham&&(re?38===fe:fe>37&&fe<41)})),ge=pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,me=zt("wks"),ve=s.Symbol,ye=ge?ve:ve&&ve.withoutSetter||Zt,be=function(t){return w(me,t)&&(pe||"string"==typeof me[t])||(pe&&w(ve,t)?me[t]=ve[t]:me[t]=ye("Symbol."+t)),me[t]},_e=be("iterator"),we=!1;[].keys&&("next"in(Ae=[].keys())?(de=ne(ne(Ae)))!==Object.prototype&&(he=de):we=!0);var xe=null==he||a((function(){var t={};return he[_e].call(t)!==t}));xe&&(he={}),xe&&!w(he,_e)&&Z(he,_e,(function(){return this}));var Ce,Ee={IteratorPrototype:he,BUGGY_SAFARI_ITERATORS:we},ke=l?Object.defineProperties:function(t,e){z(t);for(var i,n=st(e),r=n.length,o=0;r>o;)U.f(t,i=n[o++],e[i]);return t},Te=se("document","documentElement"),Be=Gt("IE_PROTO"),Se=function(){},Pe=function(t){return"<script>"+t+"<\/script>"},Me=function(){try{Ce=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Me=Ce?function(t){t.write(Pe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ce):((e=E("iframe")).style.display="none",Te.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Pe("document.F=Object")),t.close(),t.F);for(var i=ot.length;i--;)delete Me.prototype[ot[i]];return Me()};it[Be]=!0;var Ie=Object.create||function(t,e){var i;return null!==t?(Se.prototype=z(t),i=new Se,Se.prototype=null,i[Be]=t):i=Me(),void 0===e?i:ke(i,e)},Oe={};Oe[be("toStringTag")]="z";var De="[object z]"===String(Oe),Le=be("toStringTag"),Fe="Arguments"==f(function(){return arguments}()),Re=De?f:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Le))?i:Fe?f(e):"Object"==(n=f(e))&&"function"==typeof e.callee?"Arguments":n},Ne=De?{}.toString:function(){return"[object "+Re(this)+"]"},ze=U.f,je=be("toStringTag"),Ue=function(t,e,i,n){if(t){var r=i?t:t.prototype;w(r,je)||ze(r,je,{configurable:!0,value:e}),n&&!De&&Z(r,"toString",Ne)}},Ze={},He=Ee.IteratorPrototype,Ge=function(){return this},Ve=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return z(i),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(i,n):i.__proto__=n,i}}():void 0),We=function(t,e,i,n){n&&n.enumerable?t[e]=i:Z(t,e,i)},qe=Ee.IteratorPrototype,Qe=Ee.BUGGY_SAFARI_ITERATORS,Ye=be("iterator"),Xe="keys",Je="values",Ke="entries",$e=function(){return this},ti=function(t,e,i,n,r,o,s){!function(t,e,i){var n=e+" Iterator";t.prototype=Ie(He,{next:d(1,i)}),Ue(t,n,!1,!0),Ze[n]=Ge}(i,e,n);var a,l,c,u=function(t){if(t===r&&g)return g;if(!Qe&&t in f)return f[t];switch(t){case Xe:case Je:case Ke:return function(){return new i(this,t)}}return function(){return new i(this)}},h=e+" Iterator",A=!1,f=t.prototype,p=f[Ye]||f["@@iterator"]||r&&f[r],g=!Qe&&p||u(r),m="Array"==e&&f.entries||p;if(m&&(a=ne(m.call(new t)),qe!==Object.prototype&&a.next&&(Ue(a,h,!0,!0),Ze[h]=$e)),r==Je&&p&&p.name!==Je&&(A=!0,g=function(){return p.call(this)}),s&&f[Ye]!==g&&Z(f,Ye,g),Ze[e]=g,r)if(l={values:u(Je),keys:o?g:u(Xe),entries:u(Ke)},s)for(c in l)(Qe||A||!(c in f))&&We(f,c,l[c]);else V({target:e,proto:!0,forced:Qe||A},l);return l},ei=St.charAt,ii="String Iterator",ni=$t.set,ri=$t.getterFor(ii);ti(String,"String",(function(t){ni(this,{type:ii,string:String(t),index:0})}),(function(){var t,e=ri(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:!0}:(t=ei(i,n),e.index+=t.length,{value:t,done:!1})}));var oi=function(t){var e=t.return;if(void 0!==e)return z(e.call(t)).value},si=function(t,e,i,n){try{return n?e(z(i)[0],i[1]):e(i)}catch(e){throw oi(t),e}},ai=be("iterator"),li=Array.prototype,ci=function(t){return void 0!==t&&(Ze.Array===t||li[ai]===t)},ui=function(t,e,i){var n=b(e);n in t?U.f(t,n,d(0,i)):t[n]=i},hi=be("iterator"),di=function(t){if(null!=t)return t[hi]||t["@@iterator"]||Ze[Re(t)]},Ai=be("iterator"),fi=!1;try{var pi=0,gi={next:function(){return{done:!!pi++}},return:function(){fi=!0}};gi[Ai]=function(){return this},Array.from(gi,(function(){throw 2}))}catch(t){}var mi=!function(t,e){if(!fi)return!1;var i=!1;try{var n={};n[Ai]=function(){return{next:function(){return{done:i=!0}}}},function(t){Array.from(t)}(n)}catch(t){}return i}();V({target:"Array",stat:!0,forced:mi},{from:function(t){var e,i,n,r,o,s,a=lt(t),l="function"==typeof this?this:Array,c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,d=di(a),A=0;if(h&&(u=N(u,c>2?arguments[2]:void 0,2)),null==d||l==Array&&ci(d))for(i=new l(e=X(a.length));e>A;A++)s=h?u(a[A],A):a[A],ui(i,A,s);else for(o=(r=d.call(a)).next,i=new l;!(n=o.call(r)).done;A++)s=h?si(r,u,[n.value,A],!0):n.value,ui(i,A,s);return i.length=A,i}});var vi=F.Array.from,yi=vi,bi="Array Iterator",_i=$t.set,wi=$t.getterFor(bi);ti(Array,"Array",(function(t,e){_i(this,{type:bi,target:v(t),index:0,kind:e})}),(function(){var t=wi(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),Ze.Arguments=Ze.Array;var xi=be("toStringTag");for(var Ci in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Ei=s[Ci],ki=Ei&&Ei.prototype;ki&&Re(ki)!==xi&&Z(ki,xi,Ci),Ze[Ci]=Ze.Array}var Ti=di,Bi=function(t){var e=di(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return z(e.call(t))},Si=Array.isArray||function(t){return"Array"==f(t)},Pi=ot.concat("length","prototype"),Mi={f:Object.getOwnPropertyNames||function(t){return rt(t,Pi)}},Ii=Mi.f,Oi={}.toString,Di="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Li={f:function(t){return Di&&"[object Window]"==Oi.call(t)?function(t){try{return Ii(t)}catch(t){return Di.slice()}}(t):Ii(v(t))}},Fi={f:be},Ri=U.f,Ni=function(t){var e=F.Symbol||(F.Symbol={});w(e,t)||Ri(e,t,{value:Fi.f(t)})},zi=be("species"),ji=function(t,e){var i;return Si(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!Si(i.prototype)?y(i)&&null===(i=i[zi])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},Ui=[].push,Zi=function(t){var e=1==t,i=2==t,n=3==t,r=4==t,o=6==t,s=7==t,a=5==t||o;return function(l,c,u,h){for(var d,A,f=lt(l),p=g(f),m=N(c,u,3),v=X(p.length),y=0,b=h||ji,_=e?b(l,v):i||s?b(l,0):void 0;v>y;y++)if((a||y in p)&&(A=m(d=p[y],y,f),t))if(e)_[y]=A;else if(A)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:Ui.call(_,d)}else switch(t){case 4:return!1;case 7:Ui.call(_,d)}return o?-1:n||r?r:_}},Hi={forEach:Zi(0),map:Zi(1),filter:Zi(2),some:Zi(3),every:Zi(4),find:Zi(5),findIndex:Zi(6),filterOut:Zi(7)},Gi=Hi.forEach,Vi=Gt("hidden"),Wi="Symbol",qi=be("toPrimitive"),Qi=$t.set,Yi=$t.getterFor(Wi),Xi=Object.prototype,Ji=s.Symbol,Ki=se("JSON","stringify"),$i=B.f,tn=U.f,en=Li.f,nn=h.f,rn=zt("symbols"),on=zt("op-symbols"),sn=zt("string-to-symbol-registry"),an=zt("symbol-to-string-registry"),ln=zt("wks"),cn=s.QObject,un=!cn||!cn.prototype||!cn.prototype.findChild,hn=l&&a((function(){return 7!=Ie(tn({},"a",{get:function(){return tn(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=$i(Xi,e);n&&delete Xi[e],tn(t,e,i),n&&t!==Xi&&tn(Xi,e,n)}:tn,dn=function(t,e){var i=rn[t]=Ie(Ji.prototype);return Qi(i,{type:Wi,tag:t,description:e}),l||(i.description=e),i},An=ge?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Ji},fn=function(t,e,i){t===Xi&&fn(on,e,i),z(t);var n=b(e,!0);return z(i),w(rn,n)?(i.enumerable?(w(t,Vi)&&t[Vi][n]&&(t[Vi][n]=!1),i=Ie(i,{enumerable:d(0,!1)})):(w(t,Vi)||tn(t,Vi,d(1,{})),t[Vi][n]=!0),hn(t,n,i)):tn(t,n,i)},pn=function(t,e){z(t);var i=v(e),n=st(i).concat(yn(i));return Gi(n,(function(e){l&&!gn.call(i,e)||fn(t,e,i[e])})),t},gn=function(t){var e=b(t,!0),i=nn.call(this,e);return!(this===Xi&&w(rn,e)&&!w(on,e))&&(!(i||!w(this,e)||!w(rn,e)||w(this,Vi)&&this[Vi][e])||i)},mn=function(t,e){var i=v(t),n=b(e,!0);if(i!==Xi||!w(rn,n)||w(on,n)){var r=$i(i,n);return!r||!w(rn,n)||w(i,Vi)&&i[Vi][n]||(r.enumerable=!0),r}},vn=function(t){var e=en(v(t)),i=[];return Gi(e,(function(t){w(rn,t)||w(it,t)||i.push(t)})),i},yn=function(t){var e=t===Xi,i=en(e?on:v(t)),n=[];return Gi(i,(function(t){!w(rn,t)||e&&!w(Xi,t)||n.push(rn[t])})),n};if(pe||(We((Ji=function(){if(this instanceof Ji)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Zt(t),i=function(t){this===Xi&&i.call(on,t),w(this,Vi)&&w(this[Vi],e)&&(this[Vi][e]=!1),hn(this,e,d(1,t))};return l&&un&&hn(Xi,e,{configurable:!0,set:i}),dn(e,t)}).prototype,"toString",(function(){return Yi(this).tag})),We(Ji,"withoutSetter",(function(t){return dn(Zt(t),t)})),h.f=gn,U.f=fn,B.f=mn,Mi.f=Li.f=vn,at.f=yn,Fi.f=function(t){return dn(be(t),t)},l&&tn(Ji.prototype,"description",{configurable:!0,get:function(){return Yi(this).description}})),V({global:!0,wrap:!0,forced:!pe,sham:!pe},{Symbol:Ji}),Gi(st(ln),(function(t){Ni(t)})),V({target:Wi,stat:!0,forced:!pe},{for:function(t){var e=String(t);if(w(sn,e))return sn[e];var i=Ji(e);return sn[e]=i,an[i]=e,i},keyFor:function(t){if(!An(t))throw TypeError(t+" is not a symbol");if(w(an,t))return an[t]},useSetter:function(){un=!0},useSimple:function(){un=!1}}),V({target:"Object",stat:!0,forced:!pe,sham:!l},{create:function(t,e){return void 0===e?Ie(t):pn(Ie(t),e)},defineProperty:fn,defineProperties:pn,getOwnPropertyDescriptor:mn}),V({target:"Object",stat:!0,forced:!pe},{getOwnPropertyNames:vn,getOwnPropertySymbols:yn}),V({target:"Object",stat:!0,forced:a((function(){at.f(1)}))},{getOwnPropertySymbols:function(t){return at.f(lt(t))}}),Ki){var bn=!pe||a((function(){var t=Ji();return"[null]"!=Ki([t])||"{}"!=Ki({a:t})||"{}"!=Ki(Object(t))}));V({target:"JSON",stat:!0,forced:bn},{stringify:function(t,e,i){for(var n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e,(y(e)||void 0!==t)&&!An(t))return Si(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!An(e))return e}),r[1]=e,Ki.apply(null,r)}})}Ji.prototype[qi]||Z(Ji.prototype,qi,Ji.prototype.valueOf),Ue(Ji,Wi),it[Vi]=!0;var _n=F.Object.getOwnPropertySymbols,wn=B.f,xn=a((function(){wn(1)}));V({target:"Object",stat:!0,forced:!l||xn,sham:!l},{getOwnPropertyDescriptor:function(t,e){return wn(v(t),e)}});var Cn=r((function(t){var e=F.Object,i=t.exports=function(t,i){return e.getOwnPropertyDescriptor(t,i)};e.getOwnPropertyDescriptor.sham&&(i.sham=!0)})),En=Cn,kn=se("Reflect","ownKeys")||function(t){var e=Mi.f(z(t)),i=at.f;return i?e.concat(i(t)):e};V({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(t){for(var e,i,n=v(t),r=B.f,o=kn(n),s={},a=0;o.length>a;)void 0!==(i=r(n,e=o[a++]))&&ui(s,e,i);return s}});var Tn=F.Object.getOwnPropertyDescriptors;V({target:"Object",stat:!0,forced:!l,sham:!l},{defineProperties:ke});var Bn=r((function(t){var e=F.Object,i=t.exports=function(t,i){return e.defineProperties(t,i)};e.defineProperties.sham&&(i.sham=!0)}));V({target:"Object",stat:!0,forced:!l,sham:!l},{defineProperty:U.f});var Sn=r((function(t){var e=F.Object,i=t.exports=function(t,i,n){return e.defineProperty(t,i,n)};e.defineProperty.sham&&(i.sham=!0)})),Pn=Sn;function Mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var In=Sn;function On(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),In(t,n.key,n)}}function Dn(t,e,i){return e&&On(t.prototype,e),i&&On(t,i),t}function Ln(t,e,i){return e in t?In(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}V({target:"Array",stat:!0},{isArray:Si});var Fn=F.Array.isArray,Rn=Fn,Nn=be("species"),zn=function(t){return fe>=51||!a((function(){var e=[];return(e.constructor={})[Nn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},jn=be("isConcatSpreadable"),Un=9007199254740991,Zn="Maximum allowed index exceeded",Hn=fe>=51||!a((function(){var t=[];return t[jn]=!1,t.concat()[0]!==t})),Gn=zn("concat"),Vn=function(t){if(!y(t))return!1;var e=t[jn];return void 0!==e?!!e:Si(t)};V({target:"Array",proto:!0,forced:!Hn||!Gn},{concat:function(t){var e,i,n,r,o,s=lt(this),a=ji(s,0),l=0;for(e=-1,n=arguments.length;e<n;e++)if(Vn(o=-1===e?s:arguments[e])){if(l+(r=X(o.length))>Un)throw TypeError(Zn);for(i=0;i<r;i++,l++)i in o&&ui(a,l,o[i])}else{if(l>=Un)throw TypeError(Zn);ui(a,l++,o)}return a.length=l,a}}),Ni("asyncIterator"),Ni("hasInstance"),Ni("isConcatSpreadable"),Ni("iterator"),Ni("match"),Ni("matchAll"),Ni("replace"),Ni("search"),Ni("species"),Ni("split"),Ni("toPrimitive"),Ni("toStringTag"),Ni("unscopables"),Ue(s.JSON,"JSON",!0);var Wn=F.Symbol;Ni("asyncDispose"),Ni("dispose"),Ni("observable"),Ni("patternMatch"),Ni("replaceAll");var qn=Wn,Qn=be("iterator"),Yn=function(t){var e=Object(t);return void 0!==e[Qn]||"@@iterator"in e||Ze.hasOwnProperty(Re(e))},Xn=zn("slice"),Jn=be("species"),Kn=[].slice,$n=Math.max;V({target:"Array",proto:!0,forced:!Xn},{slice:function(t,e){var i,n,r,o=v(this),s=X(o.length),a=$(t,s),l=$(void 0===e?s:e,s);if(Si(o)&&("function"!=typeof(i=o.constructor)||i!==Array&&!Si(i.prototype)?y(i)&&null===(i=i[Jn])&&(i=void 0):i=void 0,i===Array||void 0===i))return Kn.call(o,a,l);for(n=new(void 0===i?Array:i)($n(l-a,0)),r=0;a<l;a++,r++)a in o&&ui(n,r,o[a]);return n.length=r,n}});var tr=mt("Array").slice,er=Array.prototype,ir=function(t){var e=t.slice;return t===er||t instanceof Array&&e===er.slice?tr:e},nr=ir,rr=vi;function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function sr(t,e){var i;if(t){if("string"==typeof t)return or(t,e);var n=nr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?rr(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(t,e):void 0}}function ar(t,e){return function(t){if(Rn(t))return t}(t)||function(t,e){if(void 0!==qn&&Yn(Object(t))){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=Bi(t);!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}}(t,e)||sr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lr=Fi.f("iterator");function cr(t){return(cr="function"==typeof qn&&"symbol"==typeof lr?function(t){return typeof t}:function(t){return t&&"function"==typeof qn&&t.constructor===qn&&t!==qn.prototype?"symbol":typeof t})(t)}function ur(t){return function(t){if(Rn(t))return or(t)}(t)||function(t){if(void 0!==qn&&Yn(Object(t)))return rr(t)}(t)||sr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hr=Wn,dr=mt("Array").concat,Ar=Array.prototype,fr=function(t){var e=t.concat;return t===Ar||t instanceof Array&&e===Ar.concat?dr:e},pr=ir;V({target:"Reflect",stat:!0},{ownKeys:kn}),F.Reflect.ownKeys;var gr=Fn,mr=Hi.map,vr=zn("map");V({target:"Array",proto:!0,forced:!vr},{map:function(t){return mr(this,t,arguments.length>1?arguments[1]:void 0)}});var yr=mt("Array").map,br=Array.prototype,_r=function(t){var e=t.map;return t===br||t instanceof Array&&e===br.map?yr:e},wr=a((function(){st(1)}));V({target:"Object",stat:!0,forced:wr},{keys:function(t){return st(lt(t))}});var xr=F.Object.keys;V({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Cr=F.Date.now,Er=function(t,e){var i=[][t];return!!i&&a((function(){i.call(null,e||function(){throw 1},1)}))},kr=Hi.forEach,Tr=Er("forEach")?[].forEach:function(t){return kr(this,t,arguments.length>1?arguments[1]:void 0)};V({target:"Array",proto:!0,forced:[].forEach!=Tr},{forEach:Tr});var Br=mt("Array").forEach,Sr=Array.prototype,Pr={DOMTokenList:!0,NodeList:!0},Mr=function(t){var e=t.forEach;return t===Sr||t instanceof Array&&e===Sr.forEach||Pr.hasOwnProperty(Re(t))?Br:e},Ir=[].reverse,Or=[1,2];V({target:"Array",proto:!0,forced:String(Or)===String(Or.reverse())},{reverse:function(){return Si(this)&&(this.length=this.length),Ir.call(this)}});var Dr=mt("Array").reverse,Lr=Array.prototype,Fr=function(t){var e=t.reverse;return t===Lr||t instanceof Array&&e===Lr.reverse?Dr:e},Rr=zn("splice"),Nr=Math.max,zr=Math.min,jr=9007199254740991,Ur="Maximum allowed length exceeded";V({target:"Array",proto:!0,forced:!Rr},{splice:function(t,e){var i,n,r,o,s,a,l=lt(this),c=X(l.length),u=$(t,c),h=arguments.length;if(0===h?i=n=0:1===h?(i=0,n=c-u):(i=h-2,n=zr(Nr(Q(e),0),c-u)),c+i-n>jr)throw TypeError(Ur);for(r=ji(l,n),o=0;o<n;o++)(s=u+o)in l&&ui(r,o,l[s]);if(r.length=n,i<n){for(o=u;o<c-n;o++)a=o+i,(s=o+n)in l?l[a]=l[s]:delete l[a];for(o=c;o>c-n+i;o--)delete l[o-1]}else if(i>n)for(o=c-n;o>u;o--)a=o+i-1,(s=o+n-1)in l?l[a]=l[s]:delete l[a];for(o=0;o<i;o++)l[o+u]=arguments[o+2];return l.length=c-n+i,r}});var Zr=mt("Array").splice,Hr=Array.prototype,Gr=function(t){var e=t.splice;return t===Hr||t instanceof Array&&e===Hr.splice?Zr:e},Vr=et.includes;V({target:"Array",proto:!0},{includes:function(t){return Vr(this,t,arguments.length>1?arguments[1]:void 0)}});var Wr=mt("Array").includes,qr=be("match"),Qr=function(t){if(function(t){var e;return y(t)&&(void 0!==(e=t[qr])?!!e:"RegExp"==f(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},Yr=be("match");V({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[Yr]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(m(this)).indexOf(Qr(t),arguments.length>1?arguments[1]:void 0)}});var Xr=mt("String").includes,Jr=Array.prototype,Kr=String.prototype,$r=function(t){var e=t.includes;return t===Jr||t instanceof Array&&e===Jr.includes?Wr:"string"==typeof t||t===Kr||t instanceof String&&e===Kr.includes?Xr:e},to=a((function(){ne(1)}));V({target:"Object",stat:!0,forced:to,sham:!te},{getPrototypeOf:function(t){return ne(lt(t))}});var eo=F.Object.getPrototypeOf,io=eo,no=Hi.filter,ro=zn("filter");V({target:"Array",proto:!0,forced:!ro},{filter:function(t){return no(this,t,arguments.length>1?arguments[1]:void 0)}});var oo=mt("Array").filter,so=Array.prototype,ao=function(t){var e=t.filter;return t===so||t instanceof Array&&e===so.filter?oo:e},lo=h.f,co=function(t){return function(e){for(var i,n=v(e),r=st(n),o=r.length,s=0,a=[];o>s;)i=r[s++],l&&!lo.call(n,i)||a.push(t?[i,n[i]]:n[i]);return a}},uo=(co(!0),co(!1));V({target:"Object",stat:!0},{values:function(t){return uo(t)}}),F.Object.values;var ho="\t\n\v\f\r \u2028\u2029\ufeff",Ao="["+ho+"]",fo=RegExp("^"+Ao+Ao+"*"),po=RegExp(Ao+Ao+"*$"),go=function(t){return function(e){var i=String(m(e));return 1&t&&(i=i.replace(fo,"")),2&t&&(i=i.replace(po,"")),i}},mo={start:go(1),end:go(2),trim:go(3)},vo=mo.trim,yo=s.parseInt,bo=/^[+-]?0[Xx]/,_o=8!==yo(ho+"08")||22!==yo(ho+"0x16")?function(t,e){var i=vo(String(t));return yo(i,e>>>0||(bo.test(i)?16:10))}:yo;V({global:!0,forced:parseInt!=_o},{parseInt:_o});var wo=F.parseInt,xo=et.indexOf,Co=[].indexOf,Eo=!!Co&&1/[1].indexOf(1,-0)<0,ko=Er("indexOf");V({target:"Array",proto:!0,forced:Eo||!ko},{indexOf:function(t){return Eo?Co.apply(this,arguments)||0:xo(this,t,arguments.length>1?arguments[1]:void 0)}});var To,Bo=mt("Array").indexOf,So=Array.prototype,Po=function(t){var e=t.indexOf;return t===So||t instanceof Array&&e===So.indexOf?Bo:e},Mo=mo.trim;V({target:"String",proto:!0,forced:(To="trim",a((function(){return!!ho[To]()||""!=""[To]()||ho[To].name!==To})))},{trim:function(){return Mo(this)}}),mt("String").trim,V({target:"Object",stat:!0,sham:!l},{create:Ie});var Io=F.Object,Oo=function(t,e){return Io.create(t,e)},Do=Oo,Lo=se("JSON","stringify"),Fo=/[\uD800-\uDFFF]/g,Ro=/^[\uD800-\uDBFF]$/,No=/^[\uDC00-\uDFFF]$/,zo=function(t,e,i){var n=i.charAt(e-1),r=i.charAt(e+1);return Ro.test(t)&&!No.test(r)||No.test(t)&&!Ro.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},jo=a((function(){return'"\\udf06\\ud834"'!==Lo("\udf06\ud834")||'"\\udead"'!==Lo("\udead")}));Lo&&V({target:"JSON",stat:!0,forced:jo},{stringify:function(t,e,i){var n=Lo.apply(null,arguments);return"string"==typeof n?n.replace(Fo,zo):n}}),F.JSON||(F.JSON={stringify:JSON.stringify});var Uo=function(t,e,i){return F.JSON.stringify.apply(null,arguments)},Zo=[].slice,Ho=/MSIE .\./.test(ae),Go=function(t){return function(e,i){var n=arguments.length>2,r=n?Zo.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};V({global:!0,bind:!0,forced:Ho},{setTimeout:Go(s.setTimeout),setInterval:Go(s.setInterval)});var Vo=F.setTimeout;V({target:"Array",proto:!0},{fill:function(t){for(var e=lt(this),i=X(e.length),n=arguments.length,r=$(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=void 0===o?i:$(o,i);s>r;)e[r++]=t;return e}});var Wo=mt("Array").fill,qo=Array.prototype,Qo=function(t){var e=t.fill;return t===qo||t instanceof Array&&e===qo.fill?Wo:e};function Yo(){return(Yo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function Xo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ko,$o="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign,ts=["","webkit","Moz","MS","ms","o"],es="undefined"==typeof document?{style:{}}:document.createElement("div"),is=Math.round,ns=Math.abs,rs=Date.now;function os(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<ts.length;){if((n=(i=ts[o])?i+r:e)in t)return n;o++}}Ko="undefined"==typeof window?{}:window;var ss=os(es.style,"touchAction"),as=void 0!==ss,ls="compute",cs="auto",us="manipulation",hs="none",ds="pan-x",As="pan-y",fs=function(){if(!as)return!1;var t={},e=Ko.CSS&&Ko.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){return t[i]=!e||Ko.CSS.supports("touch-action",i)})),t}(),ps="ontouchstart"in Ko,gs=void 0!==os(Ko,"PointerEvent"),ms=ps&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),vs="touch",ys="mouse",bs=["x","y"],_s=["clientX","clientY"];function ws(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function xs(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function Cs(t,e){return t.indexOf(e)>-1}var Es=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===ls&&(t=this.compute()),as&&this.manager.element.style&&fs[t]&&(this.manager.element.style[ss]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return ws(this.manager.recognizers,(function(e){xs(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(Cs(t,hs))return hs;var e=Cs(t,ds),i=Cs(t,As);return e&&i?hs:e||i?e?ds:As:Cs(t,us)?us:cs}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=Cs(n,hs)&&!fs.none,o=Cs(n,As)&&!fs["pan-y"],s=Cs(n,ds)&&!fs["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&6&i||s&&24&i?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function ks(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Ts(t){var e=t.length;if(1===e)return{x:is(t[0].clientX),y:is(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:is(i/e),y:is(n/e)}}function Bs(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:is(t.pointers[i].clientX),clientY:is(t.pointers[i].clientY)},i++;return{timeStamp:rs(),pointers:e,center:Ts(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Ss(t,e,i){i||(i=bs);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function Ps(t,e,i){i||(i=bs);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function Ms(t,e){return t===e?1:ns(t)>=ns(e)?t<0?2:4:e<0?8:16}function Is(t,e,i){return{x:e/t||0,y:i/t||0}}function Os(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r==0,s=12&e&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=Bs(e)),r>1&&!i.firstMultiple?i.firstMultiple=Bs(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,l=e.center=Ts(n);e.timeStamp=rs(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Ps(a,l),e.distance=Ss(a,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=Ms(e.deltaX,e.deltaY);var c,u,h=Is(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=ns(h.x)>ns(h.y)?h.x:h.y,e.scale=s?(c=s.pointers,Ss((u=n)[0],u[1],_s)/Ss(c[0],c[1],_s)):1,e.rotation=s?function(t,e){return Ps(e[1],e[0],_s)+Ps(t[1],t[0],_s)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=Is(a,l,c);n=u.x,r=u.y,i=ns(u.x)>ns(u.y)?u.x:u.y,o=Ms(l,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var d,A=t.element,f=e.srcEvent;ks(d=f.composedPath?f.composedPath()[0]:f.path?f.path[0]:f.target,A)&&(A=d),e.target=A}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Ds(t){return t.trim().split(/\s+/g)}function Ls(t,e,i){ws(Ds(e),(function(e){t.addEventListener(e,i,!1)}))}function Fs(t,e,i){ws(Ds(e),(function(e){t.removeEventListener(e,i,!1)}))}function Rs(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ns=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){xs(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Ls(this.element,this.evEl,this.domHandler),this.evTarget&&Ls(this.target,this.evTarget,this.domHandler),this.evWin&&Ls(Rs(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Fs(this.element,this.evEl,this.domHandler),this.evTarget&&Fs(this.target,this.evTarget,this.domHandler),this.evWin&&Fs(Rs(this.element),this.evWin,this.domHandler)},t}();function zs(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}var js={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Us={2:vs,3:"pen",4:ys,5:"kinect"},Zs="pointerdown",Hs="pointermove pointerup pointercancel";Ko.MSPointerEvent&&!Ko.PointerEvent&&(Zs="MSPointerDown",Hs="MSPointerMove MSPointerUp MSPointerCancel");var Gs=function(t){function e(){var i,n=e.prototype;return n.evEl=Zs,n.evWin=Hs,(i=t.apply(this,arguments)||this).store=i.manager.session.pointerEvents=[],i}return Xo(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=js[n],o=Us[t.pointerType]||t.pointerType,s=o===vs,a=zs(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))},e}(Ns);function Vs(t){return Array.prototype.slice.call(t,0)}function Ws(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];zs(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}var qs={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Qs="touchstart touchmove touchend touchcancel",Ys=function(t){function e(){var i;return e.prototype.evTarget=Qs,(i=t.apply(this,arguments)||this).targetIds={},i}return Xo(e,t),e.prototype.handler=function(t){var e=qs[t.type],i=Xs.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:vs,srcEvent:t})},e}(Ns);function Xs(t,e){var i,n,r=Vs(t.touches),o=this.targetIds;if(3&e&&1===r.length)return o[r[0].identifier]=!0,[r,r];var s=Vs(t.changedTouches),a=[],l=this.target;if(n=r.filter((function(t){return ks(t.target,l)})),1===e)for(i=0;i<n.length;)o[n[i].identifier]=!0,i++;for(i=0;i<s.length;)o[s[i].identifier]&&a.push(s[i]),12&e&&delete o[s[i].identifier],i++;return a.length?[Ws(n.concat(a),"identifier",!0),a]:void 0}var Js={mousedown:1,mousemove:2,mouseup:4},Ks="mousedown",$s="mousemove mouseup",ta=function(t){function e(){var i,n=e.prototype;return n.evEl=Ks,n.evWin=$s,(i=t.apply(this,arguments)||this).pressed=!1,i}return Xo(e,t),e.prototype.handler=function(t){var e=Js[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:ys,srcEvent:t}))},e}(Ns);function ea(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY},n=this.lastTouches;this.lastTouches.push(i),setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function ia(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ea.call(this,e)):12&t&&ea.call(this,e)}function na(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=25&&s<=25)return!0}return!1}var ra=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handler=function(t,e,i){var r=i.pointerType===vs,o=i.pointerType===ys;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)ia.call(Jo(Jo(n)),e,i);else if(o&&na.call(Jo(Jo(n)),i))return;n.callback(t,e,i)}},n.touch=new Ys(n.manager,n.handler),n.mouse=new ta(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return Xo(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(Ns);function oa(t,e,i){return!!Array.isArray(t)&&(ws(t,i[e],i),!0)}var sa=32,aa=1;function la(t,e){var i=e.manager;return i?i.get(t):t}function ca(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var ua=function(){function t(t){void 0===t&&(t={}),this.options=Yo({enable:!0},t),this.id=aa++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return $o(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(oa(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=la(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return oa(t,"dropRecognizeWith",this)||(t=la(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(oa(t,"requireFailure",this))return this;var e=this.requireFail;return-1===zs(e,t=la(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(oa(t,"dropRequireFailure",this))return this;t=la(t,this);var e=zs(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+ca(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+ca(i))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=sa},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=$o({},t);if(!xs(this.options.enable,[this,e]))return this.reset(),void(this.state=sa);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),ha=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,Yo({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}Xo(e,t);var i=e.prototype;return i.getTouchAction=function(){return[us]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime<i.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!==t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||Ss(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.interval),2):8}return sa},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=sa}),this.options.interval),sa},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(ua),da=function(t){function e(e){return void 0===e&&(e={}),t.call(this,Yo({pointers:1},e))||this}Xo(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:sa},e}(ua);function Aa(t){return 16===t?"down":8===t?"up":2===t?"left":4===t?"right":""}var fa=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,Yo({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,i.pY=null,i}Xo(e,t);var i=e.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(As),24&t&&e.push(ds),e},i.directionTest=function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!==this.pX,n=Math.abs(t.deltaX)):(r=0===s?1:s<0?8:16,i=s!==this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},i.attrTest=function(t){return da.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},i.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=Aa(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(da),pa=function(t){function e(e){return void 0===e&&(e={}),t.call(this,Yo({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}Xo(e,t);var i=e.prototype;return i.getTouchAction=function(){return fa.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,n=this.options.direction;return 30&n?i=e.overallVelocity:6&n?i=e.overallVelocityX:24&n&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&ns(i)>this.options.velocity&&4&e.eventType},i.emit=function(t){var e=Aa(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(da),ga=function(t){function e(e){return void 0===e&&(e={}),t.call(this,Yo({event:"pinch",threshold:0,pointers:2},e))||this}Xo(e,t);var i=e.prototype;return i.getTouchAction=function(){return[hs]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},i.emit=function(e){if(1!==e.scale){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(da),ma=function(t){function e(e){return void 0===e&&(e={}),t.call(this,Yo({event:"rotate",threshold:0,pointers:2},e))||this}Xo(e,t);var i=e.prototype;return i.getTouchAction=function(){return[hs]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(da),va=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,Yo({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,i._input=null,i}Xo(e,t);var i=e.prototype;return i.getTouchAction=function(){return[cs]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime>i.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.time);else if(4&t.eventType)return 8;return sa},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=rs(),this.manager.emit(this.options.event,this._input)))},e}(ua),ya={domEvents:!1,touchAction:ls,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ba=[[ma,{enable:!1}],[ga,{enable:!1},["rotate"]],[pa,{direction:6}],[fa,{direction:6},["swipe"]],[ha],[ha,{event:"doubletap",taps:2},["tap"]],[va]];function _a(t,e){var i,n=t.element;n.style&&(ws(t.options.cssProps,(function(r,o){i=os(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}var wa=function(){function t(t,e){var i=this;this.options=$o({},ya,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(gs?Gs:ms?Ys:ps?ra:ta))(this,Os),this.touchAction=new Es(this,this.options.touchAction),_a(this,!0),ws(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return $o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!==r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(e.curRecognizer=i,r=i),o++}},e.get=function(t){if(t instanceof ua)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if(oa(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(oa(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,n=zs(i,e);-1!==n&&(i.splice(n,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return ws(Ds(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return ws(Ds(t),(function(t){e?i[t]&&i[t].splice(zs(i[t],e),1):delete i[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},e.destroy=function(){this.element&&_a(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),xa={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ca="touchstart",Ea="touchstart touchmove touchend touchcancel",ka=function(t){function e(){var i,n=e.prototype;return n.evTarget=Ca,n.evWin=Ea,(i=t.apply(this,arguments)||this).started=!1,i}return Xo(e,t),e.prototype.handler=function(t){var e=xa[t.type];if(1===e&&(this.started=!0),this.started){var i=Ta.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:vs,srcEvent:t})}},e}(Ns);function Ta(t,e){var i=Vs(t.touches),n=Vs(t.changedTouches);return 12&e&&(i=Ws(i.concat(n),"identifier",!0)),[i,n]}function Ba(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,n,i),t.apply(this,arguments)}}var Sa=Ba((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&void 0===t[n[r]])&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),Pa=Ba((function(t,e){return Sa(t,e,!0)}),"merge","Use `assign`.");function Ma(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&$o(n,i)}function Ia(t,e){return function(){return t.apply(e,arguments)}}var Oa=function(){var t=function(t,e){return void 0===e&&(e={}),new wa(t,Yo({recognizers:ba.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=16,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=24,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=16,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=sa,t.Manager=wa,t.Input=Ns,t.TouchAction=Es,t.TouchInput=Ys,t.MouseInput=ta,t.PointerEventInput=Gs,t.TouchMouseInput=ra,t.SingleTouchInput=ka,t.Recognizer=ua,t.AttrRecognizer=da,t.Tap=ha,t.Pan=fa,t.Swipe=pa,t.Pinch=ga,t.Rotate=ma,t.Press=va,t.on=Ls,t.off=Fs,t.each=ws,t.merge=Pa,t.extend=Sa,t.bindFn=Ia,t.assign=$o,t.inherit=Ma,t.bindFn=Ia,t.prefixed=os,t.toArray=Vs,t.inArray=zs,t.uniqueArray=Ws,t.splitStr=Ds,t.boolOrFn=xs,t.hasParent=ks,t.addEventListeners=Ls,t.removeEventListeners=Fs,t.defaults=$o({},ya,{preset:ba}),t}();function Da(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return La(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?La(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function La(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Fa(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Ra(e.length?e:[Cr()])}function Ra(t){var e=ar(function(){for(var t=Na(),e=t(" "),i=t(" "),n=t(" "),r=0;r<arguments.length;r++)(e-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(e+=1),(i-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(i+=1),(n-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(n+=1);return[e,i,n]}(t),3),i=e[0],n=e[1],r=e[2],o=1,s=function(){var t=2091639*i+2.3283064365386963e-10*o;return i=n,n=r,r=t-(o=0|t)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.algorithm="Alea",s.seed=t,s.version="0.9",s}function Na(){var t=4022871197;return function(e){for(var i=e.toString(),n=0;n<i.length;n++){var r=.02519603282416938*(t+=i.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}hr("DELETE");var za="undefined"!=typeof window?window.Hammer||Oa:function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(){return{set:t}}};var t};function ja(t){var e,i=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){i._dom.overlay.parentNode.removeChild(i._dom.overlay)}));var n=za(this._dom.overlay);n.on("tap",bt(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){n.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Mr(r).call(r,(function(t){n.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||i.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",i._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&i.deactivate()}}Tt(ja.prototype),ja.current=null,ja.prototype.destroy=function(){var t,e;this.deactivate();var i,n=Da(Fr(t=Gr(e=this._cleanupQueue).call(e,0)).call(t));try{for(n.s();!(i=n.n()).done;)(0,i.value)()}catch(t){n.e(t)}finally{n.f()}},ja.prototype.activate=function(){ja.current&&ja.current.deactivate(),ja.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},ja.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},ja.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var Ua=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Za=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ha=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Ga=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Va(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(Va(e),t.removeChild(e))}}function Wa(t){return t instanceof String||"string"==typeof t}function qa(t){return"object"===cr(t)&&null!==t}function Qa(t,e,i,n){var r=!1;!0===n&&(r=null===e[i]&&void 0!==t[i]),r?delete t[i]:t[i]=e[i]}function Ya(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in t)if(void 0!==e[n])if(null===e[n]||"object"!==cr(e[n]))Qa(t,e,n,i);else{var r=t[n],o=e[n];qa(r)&&qa(o)&&Ya(r,o,i)}}function Xa(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(gr(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<t.length;r++){var o=t[r];if(Object.prototype.hasOwnProperty.call(i,o))if(i[o]&&i[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?Ka(e[o],i[o],!1,n):Qa(e,i,o,n);else{if(gr(i[o]))throw new TypeError("Arrays are not supported by deepExtend");Qa(e,i,o,n)}}return e}function Ja(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(gr(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&!$r(t).call(t,r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?Ka(e[r],i[r]):Qa(e,i,r,n);else if(gr(i[r])){e[r]=[];for(var o=0;o<i[r].length;o++)e[r].push(i[r][o])}else Qa(e,i,r,n);return e}function Ka(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)||!0===i)if("object"===cr(e[r])&&null!==e[r]&&io(e[r])===Object.prototype)void 0===t[r]?t[r]=Ka({},e[r],i):"object"===cr(t[r])&&null!==t[r]&&io(t[r])===Object.prototype?Ka(t[r],e[r],i):Qa(t,e,r,n);else if(gr(e[r])){var o;t[r]=pr(o=e[r]).call(o)}else Qa(t,e,r,n);return t}function $a(t,e){var i;return fr(i=[]).call(i,ur(t),[e])}function tl(t){return pr(t).call(t)}function el(t){return t.getBoundingClientRect().top}function il(t,e){if(gr(t))for(var i=t.length,n=0;n<i;n++)e(t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function nl(t){var e;switch(t.length){case 3:case 4:return(e=Za.exec(t))?{r:wo(e[1]+e[1],16),g:wo(e[2]+e[2],16),b:wo(e[3]+e[3],16)}:null;case 6:case 7:return(e=Ua.exec(t))?{r:wo(e[1],16),g:wo(e[2],16),b:wo(e[3],16)}:null;default:return null}}function rl(t,e){if($r(t).call(t,"rgba"))return t;if($r(t).call(t,"rgb")){var i=t.substr(Po(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"}var n=nl(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+e+")"}function ol(t,e,i){var n;return"#"+pr(n=((1<<24)+(t<<16)+(e<<8)+i).toString(16)).call(n,1)}function sl(t,e){if(Wa(t)){var i=t;if(hl(i)){var n,r=_r(n=i.substr(4).substr(0,i.length-5).split(",")).call(n,(function(t){return wo(t)}));i=ol(r[0],r[1],r[2])}if(!0===ul(i)){var o=function(t){var e=nl(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return al(e.r,e.g,e.b)}(i),s={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},a={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},l=cl(a.h,a.s,a.v),c=cl(s.h,s.s,s.v);return{background:i,border:l,highlight:{background:c,border:l},hover:{background:c,border:l}}}return{background:i,border:i,highlight:{background:i,border:i},hover:{background:i,border:i}}}return e?{background:t.background||e.background,border:t.border||e.border,highlight:Wa(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:Wa(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:Wa(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Wa(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function al(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),r=Math.max(t,Math.max(e,i));return n===r?{h:0,s:0,v:n}:{h:60*((t===n?3:i===n?1:5)-(t===n?e-i:i===n?t-e:i-t)/(r-n))/360,s:(r-n)/r,v:r}}function ll(t,e,i){var n,r,o,s=Math.floor(6*t),a=6*t-s,l=i*(1-e),c=i*(1-a*e),u=i*(1-(1-a)*e);switch(s%6){case 0:n=i,r=u,o=l;break;case 1:n=c,r=i,o=l;break;case 2:n=l,r=i,o=u;break;case 3:n=l,r=c,o=i;break;case 4:n=u,r=l,o=i;break;case 5:n=i,r=l,o=c}return{r:Math.floor(255*n),g:Math.floor(255*r),b:Math.floor(255*o)}}function cl(t,e,i){var n=ll(t,e,i);return ol(n.r,n.g,n.b)}function ul(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function hl(t){return Ha.test(t)}function dl(t){return Ga.test(t)}function Al(t){if(null===t||"object"!==cr(t))return null;if(t instanceof Element)return t;var e=Do(t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"object"==cr(t[i])&&(e[i]=Al(t[i]));return e}function fl(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(t){return null!=t},o=function(t){return null!==t&&"object"===cr(t)},s=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0};if(!o(t))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!r(i))throw new Error("Parameter option must have a value");if(!o(n))throw new Error("Parameter globalOptions must be an object");var a=function(t,e,i){o(t[i])||(t[i]={});var n=e[i],r=t[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},l=e[i],c=o(n)&&!s(n)?n[i]:void 0,u=c?c.enabled:void 0;if(void 0!==l){if("boolean"==typeof l)return o(t[i])||(t[i]={}),void(t[i].enabled=l);if(null===l&&!o(t[i])){if(!r(c))return;t[i]=Do(c)}if(o(l)){var h=!0;void 0!==l.enabled?h=l.enabled:void 0!==u&&(h=c.enabled),a(t,e,i),t[i].enabled=h}}}var pl={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function gl(t,e){var i;gr(e)||(e=[e]);var n,r=Da(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o){i=o[e[0]];for(var s=1;s<e.length;s++)i&&(i=i[e[s]]);if(void 0!==i)break}}}catch(t){r.e(t)}finally{r.f()}return i}var ml={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},vl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Mn(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Dn(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return ml[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var i,n=this._isColorString(t);if(void 0!==n&&(t=n),!0===Wa(t)){if(!0===hl(t)){var r=t.substr(4).substr(0,t.length-5).split(",");i={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===dl(t)){var o=t.substr(5).substr(0,t.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===ul(t)){var s=nl(t);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var a=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Uo(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=dt({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",Vo((function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=dt({},t)),this.color=t;var e=al(t.r,t.g,t.b),i=2*Math.PI,n=this.r*e.s,r=this.centerCoordinates.x+n*Math.sin(i*e.h),o=this.centerCoordinates.y+n*Math.cos(i*e.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=al(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=ll(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=al(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,r),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Qo(i).call(i),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,e,i,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var r=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=bt(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=bt(e=this._apply).call(e,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=bt(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=bt(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new za(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(function(e){e.isFirst&&t._moveSelector(e)})),this.hammer.on("tap",(function(e){t._moveSelector(e)})),this.hammer.on("panstart",(function(e){t._moveSelector(e)})),this.hammer.on("panmove",(function(e){t._moveSelector(e)})),this.hammer.on("panend",(function(e){t._moveSelector(e)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e,i,n,r,o=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,o,s),this.centerCoordinates={x:.5*o,y:.5*s},this.r=.49*o;var a,l=2*Math.PI/360,c=1/this.r;for(n=0;n<360;n++)for(r=0;r<this.r;r++)e=this.centerCoordinates.x+r*Math.sin(l*n),i=this.centerCoordinates.y+r*Math.cos(l*n),a=ll(.002777777777777778*n,r*c,1),t.fillStyle="rgb("+a.r+","+a.g+","+a.b+")",t.fillRect(e-.5,i-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,o,s)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,n=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,s=i-o,a=n-r,l=Math.atan2(s,a),c=.98*Math.min(Math.sqrt(s*s+a*a),o),u=Math.cos(l)*c+r,h=Math.sin(l)*c+o;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=h-.5*this.colorPickerSelector.clientWidth+"px";var d=l/(2*Math.PI);d=d<0?d+1:d;var A=c/this.r,f=al(this.color.r,this.color.g,this.color.b);f.h=d,f.s=A;var p=ll(f.h,f.s,f.v);p.a=this.color.a,this.color=p,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();function yl(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<1)throw new TypeError("Invalid arguments.");if(1===e.length)return document.createTextNode(e[0]);var n=document.createElement(e[0]);return n.appendChild(yl.apply(void 0,ur(pr(e).call(e,1)))),n}var bl,_l=!1,wl="background: #FFeeee; color: #dd0000",xl=ja,Cl=function(){function t(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};Mn(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},dt(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new vl(r),this.wrapper=void 0}return Dn(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"==typeof t)this.options.filter=t;else if(gr(t))this.options.filter=t.join();else if("object"===cr(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==ao(t)&&(this.options.filter=ao(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===ao(this.options)&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=ao(this.options),e=0,i=!1;for(var n in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,n)&&(this.allowCreation=!1,i=!1,"function"==typeof t?i=(i=t(n,[]))||this._handleObject(this.configureOptions[n],[n],!0):!0!==t&&-1===Po(t).call(t,n)||(i=!0),!1!==i&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return Mr(n).call(n,(function(t){e.appendChild(t)})),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerText=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");if(n.className="vis-configuration vis-config-label vis-config-s"+e.length,!0===i){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(yl("i","b",t))}else n.innerText=t+":";return n}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var r=0;void 0!==e&&-1!==Po(t).call(t,e)&&(r=Po(t).call(t,e));for(var o=0;o<t.length;o++){var s=document.createElement("option");s.value=t[o],o===r&&(s.selected="selected"),s.innerText=t[o],n.appendChild(s)}var a=this;n.onchange=function(){a._update(this.value,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,n)}},{key:"_makeRange",value:function(t,e,i){var n=t[0],r=t[1],o=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=r,a.max=o}catch(t){}a.step=s;var l="",c=0;if(void 0!==e){var u=1.2;e<0&&e*u<r?(a.min=Math.ceil(e*u),c=a.min,l="range increased"):e/u<r&&(a.min=Math.ceil(e/u),c=a.min,l="range increased"),e*u>o&&1!==o&&(a.max=Math.ceil(e*u),c=a.max,l="range increased"),a.value=e}else a.value=n;var h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=a.value;var d=this;a.onchange=function(){h.value=this.value,d._update(Number(this.value),i)},a.oninput=function(){h.value=this.value};var A=this._makeLabel(i[i.length-1],i),f=this._makeItem(i,A,a,h);""!==l&&this.popupHistory[f]!==c&&(this.popupHistory[f]=c,this._setupPopup(l,f))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Vo((function(){t.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=Vo((function(){t._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"===cr(t)?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var r=this;n.onchange=function(){r._update(this.checked,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var r=this;n.onchange=function(){r._update(this.value,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,r=t[1],o=document.createElement("div");"none"!==(e=void 0===e?r:e)?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e):o.className="vis-configuration vis-config-colorBlock none",e=void 0===e?r:e,o.onclick=function(){n._showColorPicker(e,o,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_showColorPicker",value:function(t,e,i){var n=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=r,n._update(r,i)})),this.colorPicker.setCloseCallback((function(){e.onclick=function(){n._showColorPicker(t,e,i)}}))}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,r=ao(this.options),o=!1;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){n=!0;var a=t[s],l=$a(e,s);if("function"==typeof r&&!1===(n=r(s,e))&&!gr(a)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,l,!0),this.allowCreation=!1===i),!1!==n){o=!0;var c=this._getValue(l);if(gr(a))this._handleArray(a,c,l);else if("string"==typeof a)this._makeTextInput(a,c,l);else if("boolean"==typeof a)this._makeCheckbox(a,c,l);else if(a instanceof Object){if(!this.hideOption(e,s,this.moduleOptions))if(void 0!==a.enabled){var u=$a(l,"enabled"),h=this._getValue(u);if(!0===h){var d=this._makeLabel(s,l,!0);this._makeItem(l,d),o=this._handleObject(a,l)||o}else this._makeCheckbox(a,h,l)}else{var A=this._makeLabel(s,l,!0);this._makeItem(l,A),o=this._handleObject(a,l)||o}}else console.error("dont know how to handle",a,s,l)}}return o}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i;t="false"!==(t="true"===t||t)&&t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===n[e[r]]&&(n[e[r]]={}),r!==e.length-1?n=n[e[r]]:n[e[r]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(yl("pre","const options = "+Uo(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}(),El=za,kl=function(){function t(e,i){Mn(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Dn(t,[{key:"setPosition",value:function(t,e){this.x=wo(t),this.y=wo(e)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,s=0;if("flip"==this.overflowMethod){var a=!1,l=!0;this.y-e<this.padding&&(l=!1),this.x+i>r-this.padding&&(a=!0),o=a?this.x-i:this.x,s=l?this.y-e:this.y}else(s=this.y-e)+e+this.padding>n&&(s=n-e-this.padding),s<this.padding&&(s=this.padding),(o=this.x)+i+this.padding>r&&(o=r-i-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),Tl=wl,Bl=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"validate",value:function(e,i,n){_l=!1,bl=i;var r=i;return void 0!==n&&(r=i[n]),t.parse(e,r,[]),_l}},{key:"parse",value:function(e,i,n){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.check(r,e,i,n)}},{key:"check",value:function(e,i,n,r){if(void 0!==n[e]||void 0!==n.__any__){var o=e,s=!0;void 0===n[e]&&void 0!==n.__any__&&(o="__any__",s="object"===t.getType(i[e]));var a=n[o];s&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(e,i,n,o,a,r)}else t.getSuggestion(e,n,r)}},{key:"checkFields",value:function(e,i,n,r,o,s){var a=function(i){console.error("%c"+i+t.printLocation(s,e),wl)},l=t.getType(i[e]),c=o[l];void 0!==c?"array"===t.getType(c)&&-1===Po(c).call(c,i[e])?(a('Invalid option detected in "'+e+'". Allowed values are:'+t.print(c)+' not "'+i[e]+'". '),_l=!0):"object"===l&&"__any__"!==r&&(s=$a(s,e),t.parse(i[e],n[r],s)):void 0===o.any&&(a('Invalid type received for "'+e+'". Expected: '+t.print(xr(o))+". Received ["+l+'] "'+i[e]+'"'),_l=!0)}},{key:"getType",value:function(t){var e=cr(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":gr(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,n){var r,o=t.findInOptions(e,i,n,!1),s=t.findInOptions(e,bl,[],!0);r=void 0!==o.indexMatch?" in "+t.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':s.distance<=4&&o.distance>s.distance?" in "+t.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(s.path,s.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+t.printLocation(o.path,e):". Did you mean one of these: "+t.print(xr(i))+t.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+r,wl),_l=!0}},{key:"findInOptions",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=1e9,s="",a=[],l=e.toLowerCase(),c=void 0;for(var u in i){var h=void 0;if(void 0!==i[u].__type__&&!0===r){var d=t.findInOptions(e,i[u],$a(n,u));o>d.distance&&(s=d.closestMatch,a=d.path,o=d.distance,c=d.indexMatch)}else{var A;-1!==Po(A=u.toLowerCase()).call(A,l)&&(c=u),o>(h=t.levenshteinDistance(e,u))&&(s=u,a=tl(n),o=h)}}return{closestMatch:s,path:a,distance:o,indexMatch:c}}},{key:"printLocation",value:function(t,e){for(var i="\n\n"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",n=0;n<t.length;n++){for(var r=0;r<n+1;r++)i+="  ";i+=t[n]+": {\n"}for(var o=0;o<t.length+1;o++)i+="  ";i+=e+"\n";for(var s=0;s<t.length+1;s++){for(var a=0;a<t.length-s;a++)i+="  ";i+="}\n"}return i+"\n\n"}},{key:"print",value:function(t){return Uo(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n,r=[];for(i=0;i<=e.length;i++)r[i]=[i];for(n=0;n<=t.length;n++)r[0][n]=n;for(i=1;i<=e.length;i++)for(n=1;n<=t.length;n++)e.charAt(i-1)==t.charAt(n-1)?r[i][n]=r[i-1][n-1]:r[i][n]=Math.min(r[i-1][n-1]+1,Math.min(r[i][n-1]+1,r[i-1][n]+1));return r[e.length][t.length]}}]),t}();function Sl(t){return Dl=t,function(){var t={};if(Ll=0,Fl=Dl.charAt(0),ql(),"strict"===Rl&&(t.strict=!0,ql()),"graph"!==Rl&&"digraph"!==Rl||(t.type=Rl,ql()),Nl===Il&&(t.id=Rl,ql()),"{"!=Rl)throw $l("Angle bracket { expected");if(ql(),Ql(t),"}"!=Rl)throw $l("Angle bracket } expected");if(ql(),""!==Rl)throw $l("End of file expected");return ql(),delete t.node,delete t.edge,delete t.graph,t}()}var Pl={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},Ml=Do(Pl);Ml.color="color.color",Ml.style="dashes";var Il=2,Ol={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Dl="",Ll=0,Fl="",Rl="",Nl=0;function zl(){Ll++,Fl=Dl.charAt(Ll)}function jl(){return Dl.charAt(Ll+1)}function Ul(t){var e=t.charCodeAt(0);return e<47?35===e||46===e:e<59?e>47:e<91?e>64:e<96?95===e:e<123&&e>96}function Zl(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Hl(t,e,i){for(var n=e.split("."),r=t;n.length;){var o=n.shift();n.length?(r[o]||(r[o]={}),r=r[o]):r[o]=i}}function Gl(t,e){for(var i,n,r=null,o=[t],s=t;s.parent;)o.push(s.parent),s=s.parent;if(s.nodes)for(i=0,n=s.nodes.length;i<n;i++)if(e.id===s.nodes[i].id){r=s.nodes[i];break}for(r||(r={id:e.id},t.node&&(r.attr=Zl(r.attr,t.node))),i=o.length-1;i>=0;i--){var a,l=o[i];l.nodes||(l.nodes=[]),-1===Po(a=l.nodes).call(a,r)&&l.nodes.push(r)}e.attr&&(r.attr=Zl(r.attr,e.attr))}function Vl(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=Zl({},t.edge);e.attr=Zl(i,e.attr)}}function Wl(t,e,i,n,r){var o={from:e,to:i,type:n};return t.edge&&(o.attr=Zl({},t.edge)),o.attr=Zl(o.attr||{},r),null!=r&&r.hasOwnProperty("arrows")&&null!=r.arrows&&(o.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),o}function ql(){for(Nl=0,Rl="";" "===Fl||"\t"===Fl||"\n"===Fl||"\r"===Fl;)zl();do{var t=!1;if("#"===Fl){for(var e=Ll-1;" "===Dl.charAt(e)||"\t"===Dl.charAt(e);)e--;if("\n"===Dl.charAt(e)||""===Dl.charAt(e)){for(;""!=Fl&&"\n"!=Fl;)zl();t=!0}}if("/"===Fl&&"/"===jl()){for(;""!=Fl&&"\n"!=Fl;)zl();t=!0}if("/"===Fl&&"*"===jl()){for(;""!=Fl;){if("*"===Fl&&"/"===jl()){zl(),zl();break}zl()}t=!0}for(;" "===Fl||"\t"===Fl||"\n"===Fl||"\r"===Fl;)zl()}while(t);if(""!==Fl){var i=Fl+jl();if(Ol[i])return Nl=1,Rl=i,zl(),void zl();if(Ol[Fl])return Nl=1,Rl=Fl,void zl();if(Ul(Fl)||"-"===Fl){for(Rl+=Fl,zl();Ul(Fl);)Rl+=Fl,zl();return"false"===Rl?Rl=!1:"true"===Rl?Rl=!0:isNaN(Number(Rl))||(Rl=Number(Rl)),void(Nl=Il)}if('"'===Fl){for(zl();""!=Fl&&('"'!=Fl||'"'===Fl&&'"'===jl());)'"'===Fl?(Rl+=Fl,zl()):"\\"===Fl&&"n"===jl()?(Rl+="\n",zl()):Rl+=Fl,zl();if('"'!=Fl)throw $l('End of string " expected');return zl(),void(Nl=Il)}for(Nl=3;""!=Fl;)Rl+=Fl,zl();throw new SyntaxError('Syntax error in part "'+tc(Rl,30)+'"')}Nl=1}function Ql(t){for(;""!==Rl&&"}"!=Rl;)Yl(t),";"===Rl&&ql()}function Yl(t){var e=Xl(t);if(e)Jl(t,e);else if(!function(t){return"node"===Rl?(ql(),t.node=Kl(),"node"):"edge"===Rl?(ql(),t.edge=Kl(),"edge"):"graph"===Rl?(ql(),t.graph=Kl(),"graph"):null}(t)){if(Nl!=Il)throw $l("Identifier expected");var i=Rl;if(ql(),"="===Rl){if(ql(),Nl!=Il)throw $l("Identifier expected");t[i]=Rl,ql()}else!function(t,e){var i={id:e},n=Kl();n&&(i.attr=n),Gl(t,i),Jl(t,e)}(t,i)}}function Xl(t){var e=null;if("subgraph"===Rl&&((e={}).type="subgraph",ql(),Nl===Il&&(e.id=Rl,ql())),"{"===Rl){if(ql(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Ql(e),"}"!=Rl)throw $l("Angle bracket } expected");ql(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function Jl(t,e){for(;"->"===Rl||"--"===Rl;){var i,n=Rl;ql();var r=Xl(t);if(r)i=r;else{if(Nl!=Il)throw $l("Identifier or subgraph expected");Gl(t,{id:i=Rl}),ql()}Vl(t,Wl(t,e,i,n,Kl())),e=i}}function Kl(){for(var t,e,i=null,n={dashed:!0,solid:!1,dotted:[1,5]},r={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},o=new Array,s=new Array;"["===Rl;){for(ql(),i={};""!==Rl&&"]"!=Rl;){if(Nl!=Il)throw $l("Attribute name expected");var a=Rl;if(ql(),"="!=Rl)throw $l("Equal sign = expected");if(ql(),Nl!=Il)throw $l("Attribute value expected");var l=Rl;"style"===a&&(l=n[l]),"arrowhead"===a&&(a="arrows",l={to:{enabled:!0,type:r[l]}}),"arrowtail"===a&&(a="arrows",l={from:{enabled:!0,type:r[l]}}),o.push({attr:i,name:a,value:l}),s.push(a),ql(),","==Rl&&ql()}if("]"!=Rl)throw $l("Bracket ] expected");ql()}if($r(s).call(s,"dir")){var c={arrows:{}};for(t=0;t<o.length;t++)if("arrows"===o[t].name)if(null!=o[t].value.to)c.arrows.to=t;else{if(null==o[t].value.from)throw $l("Invalid value of arrows");c.arrows.from=t}else"dir"===o[t].name&&(c.dir=t);var u,h,d=o[c.dir].value;if(!$r(s).call(s,"arrows"))if("both"===d)o.push({attr:o[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=o.length-1,o.push({attr:o[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=o.length-1;else if("forward"===d)o.push({attr:o[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=o.length-1;else if("back"===d)o.push({attr:o[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=o.length-1;else{if("none"!==d)throw $l('Invalid dir type "'+d+'"');o.push({attr:o[c.dir].attr,name:"arrows",value:""}),c.arrows.to=o.length-1}if("both"===d)c.arrows.to&&c.arrows.from?(h=o[c.arrows.to].value.to.type,u=o[c.arrows.from].value.from.type,o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}},Gr(o).call(o,c.arrows.from,1)):c.arrows.to?(h=o[c.arrows.to].value.to.type,u="arrow",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.from&&(h="arrow",u=o[c.arrows.from].value.from.type,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}});else if("back"===d)c.arrows.to&&c.arrows.from?(h="",u=o[c.arrows.from].value.from.type,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.to?(h="",u="arrow",c.arrows.from=c.arrows.to,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.from&&(h="",u=o[c.arrows.from].value.from.type,o[c.arrows.to]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}),o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{from:{enabled:!0,type:o[c.arrows.from].value.from.type}}};else if("none"===d){var A;o[A=c.arrows.to?c.arrows.to:c.arrows.from]={attr:o[A].attr,name:o[A].name,value:""}}else{if("forward"!==d)throw $l('Invalid dir type "'+d+'"');c.arrows.to&&c.arrows.from||c.arrows.to?(h=o[c.arrows.to].value.to.type,u="",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.from&&(h="arrow",u="",c.arrows.to=c.arrows.from,o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}),o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:o[c.arrows.to].value.to.type}}}}Gr(o).call(o,c.dir,1)}if($r(s).call(s,"penwidth")){var f=[];for(e=o.length,t=0;t<e;t++)"width"!==o[t].name&&("penwidth"===o[t].name&&(o[t].name="width"),f.push(o[t]));o=f}for(e=o.length,t=0;t<e;t++)Hl(o[t].attr,o[t].name,o[t].value);return i}function $l(t){return new SyntaxError(t+', got "'+tc(Rl,30)+'" (char '+Ll+")")}function tc(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function ec(t,e,i){for(var n=e.split("."),r=n.pop(),o=t,s=0;s<n.length;s++){var a=n[s];a in o||(o[a]={}),o=o[a]}return o[r]=i,t}function ic(t,e){var i={};for(var n in t)if(t.hasOwnProperty(n)){var r=e[n];gr(r)?Mr(r).call(r,(function(e){ec(i,e,t[n])})):ec(i,"string"==typeof r?r:n,t[n])}return i}function nc(t){var e,i=Sl(t),n={nodes:[],edges:[],options:{}};if(i.nodes&&Mr(e=i.nodes).call(e,(function(t){var e={id:t.id,label:String(t.label||t.id)};Zl(e,ic(t.attr,Pl)),e.image&&(e.shape="image"),n.nodes.push(e)})),i.edges){var r,o=function(t){var e={from:t.from,to:t.to};return Zl(e,ic(t.attr,Ml)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};Mr(r=i.edges).call(r,(function(t){var e,i,r,s,a,l,c;e=t.from instanceof Object?t.from.nodes:{id:t.from},i=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&Mr(r=t.from.edges).call(r,(function(t){var e=o(t);n.edges.push(e)})),a=i,l=function(e,i){var r=Wl(n,e.id,i.id,t.type,t.attr),s=o(r);n.edges.push(s)},gr(s=e)?Mr(s).call(s,(function(t){gr(a)?Mr(a).call(a,(function(e){l(t,e)})):l(t,a)})):gr(a)?Mr(a).call(a,(function(t){l(s,t)})):l(s,a),t.to instanceof Object&&t.to.edges&&Mr(c=t.to.edges).call(c,(function(t){var e=o(t);n.edges.push(e)}))}))}return i.attr&&(n.options=i.attr),n}var rc=Object.freeze({__proto__:null,parseDOT:Sl,DOTToGraph:nc});function oc(t,e){var i,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(n.nodes.fixed=e.fixed),null!=e.parseColor&&(n.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(n.edges.inheritColor=e.inheritColor));var r=t.edges,o=_r(r).call(r,(function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===n.edges.inheritColor&&(e.color=t.color),e}));return{nodes:_r(i=t.nodes).call(i,(function(t){var e={id:t.id,fixed:n.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===n.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e})),edges:o}}var sc=Object.freeze({__proto__:null,parseGephi:oc}),ac=Object.freeze({__proto__:null,en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},es:{addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},ru:{addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},cn:{addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},uk:{addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},cs:{addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"}}),lc=function(){function t(){Mn(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return Dn(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var i=Math.floor(e/2),n=Math.floor(e/4),r=Math.floor(e/8),o=Math.floor(e/16),s=Math.floor(t/2),a=Math.floor(t/4),l=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*a,this.canvas.height=i,this.coordinates=[[0,0,s,i],[s,0,a,n],[s,n,l,r],[5*l,n,c,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var n=this.coordinates[i-1],r=this.coordinates[i];t.drawImage(this.canvas,n[0],n[1],n[2],n[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,n,r,o){if(this.initialized())if(e>2){e*=.5;for(var s=0;e>2&&s<this.NUM_ITERATIONS;)e*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];t.drawImage(this.canvas,a[0],a[1],a[2],a[3],i,n,r,o)}else t.drawImage(this.image,i,n,r,o)}}]),t}(),cc=function(){function t(e){Mn(this,t),this.images={},this.imageBroken={},this.callback=e}return Dn(t,[{key:"_tryloadBrokenUrl",value:function(t,e,i){void 0!==t&&void 0!==i&&(void 0!==e?(i.image.onerror=function(){console.error("Could not load brokenImage:",e)},i.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,n=this.images[t];if(n)return n;var r=new lc;return this.images[t]=r,r.image.onload=function(){i._fixImageCoordinates(r.image),r.init(),i._redrawWithImage(r)},r.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,r)},r.image.src=t,r}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}(),uc=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),hc=r((function(t){var e=U.f,i=Zt("meta"),n=0,r=Object.isExtensible||function(){return!0},o=function(t){e(t,i,{value:{objectID:"O"+ ++n,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!w(t,i)){if(!r(t))return"F";if(!e)return"E";o(t)}return t[i].objectID},getWeakData:function(t,e){if(!w(t,i)){if(!r(t))return!0;if(!e)return!1;o(t)}return t[i].weakData},onFreeze:function(t){return uc&&s.REQUIRED&&r(t)&&!w(t,i)&&o(t),t}};it[i]=!0})),dc=function(t,e){this.stopped=t,this.result=e},Ac=function(t,e,i){var n,r,o,s,a,l,c,u=i&&i.that,h=!(!i||!i.AS_ENTRIES),d=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),f=N(e,u,1+h+A),p=function(t){return n&&oi(n),new dc(!0,t)},g=function(t){return h?(z(t),A?f(t[0],t[1],p):f(t[0],t[1])):A?f(t,p):f(t)};if(d)n=t;else{if("function"!=typeof(r=di(t)))throw TypeError("Target is not iterable");if(ci(r)){for(o=0,s=X(t.length);s>o;o++)if((a=g(t[o]))&&a instanceof dc)return a;return new dc(!1)}n=r.call(t)}for(l=n.next;!(c=l.call(n)).done;){try{a=g(c.value)}catch(t){throw oi(n),t}if("object"==typeof a&&a&&a instanceof dc)return a}return new dc(!1)},fc=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t},pc=U.f,gc=Hi.forEach,mc=$t.set,vc=$t.getterFor,yc=function(t,e,i){var n,r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),c=r?"set":"add",u=s[t],h=u&&u.prototype,d={};if(l&&"function"==typeof u&&(o||h.forEach&&!a((function(){(new u).entries().next()})))){n=e((function(e,i){mc(fc(e,n,t),{type:t,collection:new u}),null!=i&&Ac(i,e[c],{that:e,AS_ENTRIES:r})}));var A=vc(t);gc(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"==t||"set"==t;!(t in h)||o&&"clear"==t||Z(n.prototype,t,(function(i,n){var r=A(this).collection;if(!e&&o&&!y(i))return"get"==t&&void 0;var s=r[t](0===i?0:i,n);return e?this:s}))})),o||pc(n.prototype,"size",{configurable:!0,get:function(){return A(this).collection.size}})}else n=i.getConstructor(e,t,r,c),hc.REQUIRED=!0;return Ue(n,t,!1,!0),d[t]=n,V({global:!0,forced:!0},d),o||i.setStrong(n,t,r),n},bc=function(t,e,i){for(var n in e)i&&i.unsafe&&t[n]?t[n]=e[n]:We(t,n,e[n],i);return t},_c=be("species"),wc=U.f,xc=hc.fastKey,Cc=$t.set,Ec=$t.getterFor,kc={getConstructor:function(t,e,i,n){var r=t((function(t,o){fc(t,r,e),Cc(t,{type:e,index:Ie(null),first:void 0,last:void 0,size:0}),l||(t.size=0),null!=o&&Ac(o,t[n],{that:t,AS_ENTRIES:i})})),o=Ec(e),s=function(t,e,i){var n,r,s=o(t),c=a(t,e);return c?c.value=i:(s.last=c={index:r=xc(e,!0),key:e,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=c),n&&(n.next=c),l?s.size++:t.size++,"F"!==r&&(s.index[r]=c)),t},a=function(t,e){var i,n=o(t),r=xc(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return bc(r.prototype,{clear:function(){for(var t=o(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,l?t.size=0:this.size=0},delete:function(t){var e=this,i=o(e),n=a(e,t);if(n){var r=n.next,s=n.previous;delete i.index[n.index],n.removed=!0,s&&(s.next=r),r&&(r.previous=s),i.first==n&&(i.first=r),i.last==n&&(i.last=s),l?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=o(this),n=N(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),bc(r.prototype,i?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),l&&wc(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(t,e,i){var n=e+" Iterator",r=Ec(e),o=Ec(n);ti(t,e,(function(t,e){Cc(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),function(t){var e=se(t),i=U.f;l&&e&&!e[_c]&&i(e,_c,{configurable:!0,get:function(){return this}})}(e)}};yc("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),kc);var Tc=F.Map,Bc=function(){function t(){Mn(this,t),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},dt(this.options,this.defaultOptions)}return Dn(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&-1===Po(e).call(e,i)){var n=t[i];this.add(i,n)}}},{key:"clear",value:function(){this._groups=new Tc,this._groupNames=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._groups.get(t);if(void 0===i&&e)if(!1===this.options.useDefaultGroups&&this._groupNames.length>0){var n=this._groupIndex%this._groupNames.length;++this._groupIndex,(i={}).color=this._groups.get(this._groupNames[n]),this._groups.set(t,i)}else{var r=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,(i={}).color=this._defaultGroups[r],this._groups.set(t,i)}return i}},{key:"add",value:function(t,e){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,e),e}}]),t}();V({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var Sc=F.Number.isNaN,Pc=s.isFinite,Mc=Number.isFinite||function(t){return"number"==typeof t&&Pc(t)};V({target:"Number",stat:!0},{isFinite:Mc});var Ic=F.Number.isFinite,Oc=Hi.some,Dc=Er("some");V({target:"Array",proto:!0,forced:!Dc},{some:function(t){return Oc(this,t,arguments.length>1?arguments[1]:void 0)}});var Lc=mt("Array").some,Fc=Array.prototype,Rc=mo.trim,Nc=s.parseFloat,zc=1/Nc(ho+"-0")!=-1/0?function(t){var e=Rc(String(t)),i=Nc(e);return 0===i&&"-"==e.charAt(0)?-0:i}:Nc;V({global:!0,forced:parseFloat!=zc},{parseFloat:zc});var jc=F.parseFloat,Uc=Li.f,Zc=a((function(){return!Object.getOwnPropertyNames(1)}));V({target:"Object",stat:!0,forced:Zc},{getOwnPropertyNames:Uc});var Hc=F.Object;function Gc(t,e){var i=["node","edge","label"],n=!0,r=gl(e,"chosen");if("boolean"==typeof r)n=r;else if("object"===cr(r)){if(-1===Po(i).call(i,t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var o=gl(e,["chosen",t]);"boolean"!=typeof o&&"function"!=typeof o||(n=o)}return n}function Vc(t,e,i){if(t.width<=0||t.height<=0)return!1;if(void 0!==i){var n={x:e.x-i.x,y:e.y-i.y};if(0!==i.angle){var r=-i.angle;e={x:Math.cos(r)*n.x-Math.sin(r)*n.y,y:Math.sin(r)*n.x+Math.cos(r)*n.y}}else e=n}var o=t.x+t.width,s=t.y+t.width;return t.left<e.x&&o>e.x&&t.top<e.y&&s>e.y}function Wc(t){return"string"==typeof t&&""!==t}function qc(t,e,i,n){var r=n.x,o=n.y;if("function"==typeof n.distanceToBorder){var s=n.distanceToBorder(t,e),a=Math.sin(e)*s,l=Math.cos(e)*s;l===s?(r+=s,o=n.y):a===s?(r=n.x,o-=s):(r+=l,o-=a)}else n.shape.width>n.shape.height?(r=n.x+.5*n.shape.width,o=n.y-i):(r=n.x+i,o=n.y-.5*n.shape.height);return{x:r,y:o}}var Qc=mt("Array").values,Yc=Array.prototype,Xc={DOMTokenList:!0,NodeList:!0},Jc=function(t){var e=t.values;return t===Yc||t instanceof Array&&e===Yc.values||Xc.hasOwnProperty(Re(t))?Qc:e},Kc=function(){function t(e){Mn(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return Dn(t,[{key:"_add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var n=e;void 0!==e&&""!==e||(n=" ");var r=this.measureText(n,i),o=dt({},Jc(r));o.text=e,o.width=r.width,o.mod=i,void 0!==e&&""!==e||(o.width=0),this.lines[t].blocks.push(o),this.lines[t].width+=o.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var n=0;n<e.blocks.length;n++){var r=e.blocks[n];i<r.height&&(i=r.height)}e.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,i=0;i<this.lines.length;i++){var n=this.lines[i];n.width>t&&(t=n.width),e+=n.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var i=this.lines[e];if(0!==i.blocks.length&&(e!==this.lines.length-1||0!==i.width)){var n={};dt(n,i),n.blocks=[];for(var r=void 0,o=[],s=0;s<i.blocks.length;s++){var a=i.blocks[s];0!==a.width?o.push(a):void 0===r&&(r=a)}0===o.length&&void 0!==r&&o.push(r),n.blocks=o,t.push(n)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}(),$c={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},tu=function(){function t(e){Mn(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return Dn(t,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e)||(this.setTag(t),0))}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ar(this.prepareRegExp(t),2),n=i[0],r=i[1],o=n.test(this.text.substr(this.position,r));return o&&e&&(this.position+=r-1),o}},{key:"parseEndTag",value:function(t,e,i){var n=this.mod()===t;return!(!(n="mono"===t?n&&this.mono:n&&!this.mono)||!this.match(e)||(void 0!==i?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),0))}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,i;if(t instanceof RegExp)i=t,e=1;else{var n=$c[t];i=void 0!==n?n:new RegExp(t),e=t.length}return[i,e]}}]),t}(),eu=function(){function t(e,i,n,r){var o=this;Mn(this,t),this.ctx=e,this.parent=i,this.selected=n,this.hover=r,this.lines=new Kc((function(t,i){if(void 0===t)return 0;var s=o.parent.getFormattingValues(e,n,r,i),a=0;return""!==t&&(a=o.ctx.measureText(t).width),{width:a,values:s}}))}return Dn(t,[{key:"process",value:function(t){if(!Wc(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var i=String(t).split("\n"),n=i.length;if(e.multi)for(var r=0;r<n;r++){var o=this.splitBlocks(i[r],e.multi);if(void 0!==o)if(0!==o.length){if(e.maxWdt>0)for(var s=0;s<o.length;s++){var a=o[s].mod,l=o[s].text;this.splitStringIntoLines(l,a,!0)}else for(var c=0;c<o.length;c++){var u=o[c].mod,h=o[c].text;this.lines.append(h,u)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var d=0;d<n;d++)this.splitStringIntoLines(i[d]);else for(var A=0;A<n;A++)this.lines.newLine(i[A]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new tu(t),i=function(t){return!!/&/.test(t)&&(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0)};e.position<e.text.length;){var n=e.text.charAt(e.position);e.parseWS(n)||/</.test(n)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||i(n)||e.add(n),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,i=new tu(t),n=!0,r=function(t){return!!/\\/.test(t)&&(i.position<e.text.length+1&&(i.position++,t=e.text.charAt(i.position),/ \t/.test(t)?i.spacing=!0:(i.add(t),n=!1)),!0)};i.position<i.text.length;){var o=i.text.charAt(i.position);i.parseWS(o)||r(o)||(n||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono")||(i.add(o),n=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var n=e+(""===e?"":" ")+t[i];if(this.overMaxWidth(n))break;e=n,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(pr(t).call(t,0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);for(var n=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");n.length>0;){var r=this.getLongestFit(n);if(0===r){var o=n[0],s=this.getLongestFitWord(o);this.lines.newLine(pr(o).call(o,0,s),e),n[0]=pr(o).call(o,s)}else{var a=r;" "===n[r-1]?r--:" "===n[a]&&a++;var l=pr(n).call(n,0,r).join("");r==n.length&&i?this.lines.append(l,e):this.lines.newLine(l,e),n=pr(n).call(n,a)}}}}]),t}(),iu=["bold","ital","boldital","mono"],nu=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Mn(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return Dn(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),Wc(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===cr(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var i=this;il(iu,(function(t){i.fontOptions[t]={}})),t.parseFontString(this.fontOptions,e)?this.fontOptions.vadjust=0:il(e,(function(t,e){null!=t&&"object"!==cr(t)&&(i.fontOptions[e]=t)}))}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=gl(t,"widthConstraint");if("number"==typeof i)e.maxWdt=Number(i),e.minWdt=Number(i);else if("object"===cr(i)){var n=gl(t,["widthConstraint","maximum"]);"number"==typeof n&&(e.maxWdt=Number(n));var r=gl(t,["widthConstraint","minimum"]);"number"==typeof r&&(e.minWdt=Number(r))}var o=gl(t,"heightConstraint");if("number"==typeof o)e.minHgt=Number(o);else if("object"===cr(o)){var s=gl(t,["heightConstraint","minimum"]);"number"==typeof s&&(e.minHgt=Number(s));var a=gl(t,["heightConstraint","valign"]);"string"==typeof a&&("top"!==a&&"bottom"!==a||(e.valign=a))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),Ka(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=Gc("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(e){for(var i={},n=0;n<e.length;++n){var r=e[n],o={};t.parseFontString(o,r)&&(r=o),il(r,(function(t,e){void 0!==t&&(Object.prototype.hasOwnProperty.call(i,e)||(-1!==Po(iu).call(iu,e)?i[e]={}:i[e]=t))}))}return i}},{key:"getFontOption",value:function(e,i,n){for(var r,o=0;o<e.length;++o){var s=e[o];if(Object.prototype.hasOwnProperty.call(s,i)){if(null==(r=s[i]))continue;var a={};if(t.parseFontString(a,r)&&(r=a),Object.prototype.hasOwnProperty.call(r,n))return r[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(t,e){for(var i={},n=["color","size","face","mod","vadjust"],r=0;r<n.length;++r){var o=n[r];i[o]=this.getFontOption(t,e,o)}return i}},{key:"propagateFonts",value:function(t){var e=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var n=function(t){var n=iu[t],r=e.fontOptions[n];il(e.getFontOptions(i,n),(function(t,e){r[e]=t})),r.size=Number(r.size),r.vadjust=Number(r.vadjust)},r=0;r<iu.length;++r)n(r)}},{key:"draw",value:function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,n,r,e,i,o),this._drawBackground(t),this._drawText(t,e,this.size.yLine,o,s))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",r=arguments.length>4?arguments[4]:void 0,o=ar(this._setAlignment(t,e,i,n),2);e=o[0],i=o[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var s=0;s<this.lineCount;s++){var a=this.lines[s];if(a&&a.blocks){var l=0;this.isEdgeLabel||"center"===this.fontOptions.align?l+=(this.size.width-a.width)/2:"right"===this.fontOptions.align&&(l+=this.size.width-a.width);for(var c=0;c<a.blocks.length;c++){var u=a.blocks[c];t.font=u.font;var h=ar(this._getColor(u.color,r,u.strokeColor),2),d=h[0],A=h[1];u.strokeWidth>0&&(t.lineWidth=u.strokeWidth,t.strokeStyle=A,t.lineJoin="round"),t.fillStyle=d,u.strokeWidth>0&&t.strokeText(u.text,e+l,i+u.vadjust),t.fillText(u.text,e+l,i+u.vadjust),l+=u.width}i+=a.height}}}},{key:"_setAlignment",value:function(t,e,i,n){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(e=0,i=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"):t.textBaseline=n,[e,i]}},{key:"_getColor",value:function(t,e,i){var n=t||"#000000",r=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));n=rl(n,o),r=rl(r,o)}return[n,r]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=n-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,n){var r=function(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0!==t[e][i]?t[e][i]:t[i]},o={color:r(this.fontOptions,n,"color"),size:r(this.fontOptions,n,"size"),face:r(this.fontOptions,n,"face"),mod:r(this.fontOptions,n,"mod"),vadjust:r(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,e,i));var s="";return void 0!==o.mod&&""!==o.mod&&(s+=o.mod+" "),s+=o.size+"px "+o.face,t.font=s.replace(/"/g,""),o.font=t.font,o.height=o.size,o}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,n){return new eu(t,this,e,i).process(n)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var n=this._processLabelText(t,e,i,this.elementOptions.label);this.fontOptions.minWdt>0&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,this.fontOptions.minHgt>0&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var i=e.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),t}(),ru=se("Reflect","construct"),ou=a((function(){function t(){}return!(ru((function(){}),[],t)instanceof t)})),su=!a((function(){ru((function(){}))})),au=ou||su;V({target:"Reflect",stat:!0,forced:au,sham:au},{construct:function(t,e){R(t),z(e);var i=arguments.length<3?t:R(arguments[2]);if(su&&!ou)return ru(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(gt.apply(t,n))}var r=i.prototype,o=Ie(y(r)?r:Object.prototype),s=Function.apply.call(t,o,e);return y(s)?s:o}});var lu=F.Reflect.construct,cu=Oo;V({target:"Object",stat:!0},{setPrototypeOf:Ve});var uu=F.Object.setPrototypeOf;function hu(t,e){return(hu=uu||function(t,e){return t.__proto__=e,t})(t,e)}function du(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=cu(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hu(t,e)}function Au(t,e){return!e||"object"!==cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var fu=eo;function pu(t){return(pu=uu?fu:function(t){return t.__proto__||fu(t)})(t)}var gu=function(){function t(e,i,n){Mn(this,t),this.body=i,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return Dn(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==cr(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){t.save(),t.fillStyle=e.color,this.enableShadow(t,e),Qo(t).call(t),this.disableShadow(t,e),t.restore(),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,n,r){void 0!==i&&this.resize(i,n,r),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,n,r){this._updateBoundingBox(t,e,i,n,r)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var n=this.textSize.width,r=this.textSize.height;return 0===n&&(n=14,r=14),{width:n,height:r}}}]),t}();var mu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r))._setMargins(r),o}return Dn(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.width=n.width+this.margin.right+this.margin.left,this.height=n.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,o),wt(t,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r)}},{key:"updateBoundingBox",value:function(t,e,i,n,r){this._updateBoundingBox(t,e,i,n,r);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),i}(gu);var vu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r)).labelOffset=0,o.selected=!1,o}return Dn(i,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==cr(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*n}else{var r=this._getImagePadding();t=this.imageObj.width+r.left+r.right,e=this.imageObj.height+r.top+r.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,n){this.initContextForDraw(t,n),_t(t,e,i,n.size),this.performFill(t,n)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=void 0!==e.opacity?e.opacity:1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale);var n=this._getImagePadding(),r=this.left+n.left,o=this.top+n.top,s=this.width-n.left-n.right,a=this.height-n.top-n.bottom;this.imageObj.drawImageAtPosition(t,i,r,o,s,a),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,n,r){var o=0;if(void 0!==this.height){o=.5*this.height;var s=this.labelModule.getTextSize(t,n,r);s.lineCount>=1&&(o+=s.height/2)}var a=i+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(t,e,a,n,r,"hanging")}}]),i}(gu);var yu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r))._setMargins(r),o}return Dn(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i),r=Math.max(n.width+this.margin.right+this.margin.left,n.height+this.margin.top+this.margin.bottom);this.options.size=r/2,this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,o),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,n,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),i}(vu);var bu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r,o,s){var a;return Mn(this,i),(a=e.call(this,t,n,r)).setImages(o,s),a}return Dn(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var n=2*this.options.size;return this.width=n,this.height=n,void(this.radius=.5*this.width)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r,o){this.switchImages(n),this.resize();var s=e,a=i;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=i,s+=this.width/2,a+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),this._drawRawCircle(t,s,a,o),t.save(),t.clip(),this._drawImageAtPosition(t,o),t.restore(),this._drawImageLabel(t,s,a,n,r),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=e,this.boundingBox.left=t,this.boundingBox.right=t+2*this.options.size,this.boundingBox.bottom=e+2*this.options.size):(this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),i}(vu);var _u=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){var r,o;this.labelModule.getTextSize(t,e,i);var s=2*n.size;this.width=null!==(r=this.customSizeWidth)&&void 0!==r?r:s,this.height=null!==(o=this.customSizeHeight)&&void 0!==o?o:s,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,n,r,o,s,a){var l,c=this;return this.resize(t,o,s,a),this.left=n-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,a),(l=e,Object.prototype.hasOwnProperty.call(kt,l)?kt[l]:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];CanvasRenderingContext2D.prototype[l].call(t,i)})(t,n,r,a.size),this.performFill(t,a),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,n,r)),{drawExternalLabel:function(){if(void 0!==c.options.label){c.labelModule.calculateLabelSize(t,o,s,n,r,"hanging");var e=r+.5*c.height+.5*c.labelModule.size.height;c.labelModule.draw(t,n,e,o,s,"hanging")}c.updateBoundingBox(n,r)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),i}(gu);function wu(t,e){var i=xr(t);if(_n){var n=_n(t);e&&(n=ao(n).call(n,(function(e){return En(t,e).enumerable}))),i.push.apply(i,n)}return i}function xu(t){for(var e=1;e<arguments.length;e++){var i,n=null!=arguments[e]?arguments[e]:{};if(e%2)Mr(i=wu(Object(n),!0)).call(i,(function(e){Ln(t,e,n[e])}));else if(Tn)Bn(t,Tn(n));else{var r;Mr(r=wu(Object(n))).call(r,(function(e){Pn(t,e,En(n,e))}))}}return t}var Cu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r,o){var s;return Mn(this,i),(s=e.call(this,t,n,r,o)).ctxRenderer=o,s}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r,o),this.left=e-this.width/2,this.top=i-this.height/2,t.save();var s=this.ctxRenderer({ctx:t,id:this.options.id,x:e,y:i,state:{selected:n,hover:r},style:xu({},o),label:this.options.label});if(null!=s.drawNode&&s.drawNode(),t.restore(),s.drawExternalLabel){var a=s.drawExternalLabel;s.drawExternalLabel=function(){t.save(),a(),t.restore()}}return s.nodeDimensions&&(this.customSizeWidth=s.nodeDimensions.width,this.customSizeHeight=s.nodeDimensions.height),s}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);var Eu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r))._setMargins(r),o}return Dn(i,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i).width+this.margin.right+this.margin.left;this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,o),Ct(t,e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(gu);var ku=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"diamond",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);var Tu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"circle",2,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),this.options.size}}]),i}(_u);var Bu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.height=2*n.height,this.width=n.width+n.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,o),xt(t,this.left,this.top,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var i=.5*this.width,n=.5*this.height,r=Math.sin(e)*i,o=Math.cos(e)*n;return i*n/Math.sqrt(r*r+o*o)}}]),i}(gu);var Su=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r))._setMargins(r),o}return Dn(i,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,r,o){var s=this;return this.resize(t,n,r),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,n,r,o),{drawExternalLabel:function(){void 0!==s.options.label&&s.labelModule.draw(t,s.left+s.iconSize.width/2+s.margin.left,i+s.height/2+5,n),s.updateBoundingBox(e,i)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,i,n,r,o){var s=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=[null!=this.options.icon.weight?this.options.icon.weight:n?"bold":"",(null!=this.options.icon.weight&&n?5:0)+s+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,o),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(gu);var Pu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r,o,s){var a;return Mn(this,i),(a=e.call(this,t,n,r)).setImages(o,s),a}return Dn(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var n=2*this.options.size;return this.width=n,void(this.height=n)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r,o){t.save(),this.switchImages(n),this.resize();var s=e,a=i;if("top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=i,s+=this.width/2,a+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),!0===this.options.shapeProperties.useBorderWithImage){var l=this.options.borderWidth,c=this.options.borderWidthSelected||2*this.options.borderWidth,u=(n?c:l)/this.body.view.scale;t.lineWidth=Math.min(this.width,u),t.beginPath();var h=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,d=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background;void 0!==o.opacity&&(h=rl(h,o.opacity),d=rl(d,o.opacity)),t.strokeStyle=h,t.fillStyle=d,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),Qo(t).call(t),this.performStroke(t,o),t.closePath()}this._drawImageAtPosition(t,o),this._drawImageLabel(t,s,a,n,r),this.updateBoundingBox(e,i),t.restore()}},{key:"updateBoundingBox",value:function(t,e){this.resize(),"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=e):(this.left=t-this.width/2,this.top=e-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(vu);var Mu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"square",2,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);var Iu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"hexagon",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);var Ou=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"star",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);var Du=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r))._setMargins(r),o}return Dn(i,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r),this.disableShadow(t,o),this.updateBoundingBox(e,i,t,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(gu);var Lu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"triangle",3,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);var Fu=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"draw",value:function(t,e,i,n,r,o){return this._drawShape(t,"triangleDown",3,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(_u);function Ru(t,e){var i=xr(t);if(_n){var n=_n(t);e&&(n=ao(n).call(n,(function(e){return En(t,e).enumerable}))),i.push.apply(i,n)}return i}function Nu(t){for(var e=1;e<arguments.length;e++){var i,n=null!=arguments[e]?arguments[e]:{};if(e%2)Mr(i=Ru(Object(n),!0)).call(i,(function(e){Ln(t,e,n[e])}));else if(Tn)Bn(t,Tn(n));else{var r;Mr(r=Ru(Object(n))).call(r,(function(e){Pn(t,e,En(n,e))}))}}return t}var zu=function(){function t(e,i,n,r,o,s){Mn(this,t),this.options=Al(o),this.globalOptions=o,this.defaultOptions=s,this.body=i,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new nu(this.body,this.options,!1),this.setOptions(e)}return Dn(t,[{key:"attachEdge",value:function(t){var e;-1===Po(e=this.edges).call(e,t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e,i,n=Po(e=this.edges).call(e,t);-1!=n&&Gr(i=this.edges).call(i,n,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(void 0!==e.color&&(this._localColor=e.color),void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=wo(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=wo(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=jc(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var n=[e,this.options,this.defaultOptions];return this.chooser=Gc("node",n),this._load_images(),this.updateLabelModule(e),void 0!==e.opacity&&t.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(null!=this.options.borderWidthSelected?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var e=this.options.opacity;t.borderColor=rl(t.borderColor,e),t.color=rl(t.color,e),t.shadowColor=rl(t.shadowColor,e)}return t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,Nu(Nu({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);var i=this.grouplist.get(this.options.group,!1),n=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new mu(this.options,this.body,this.labelModule);break;case"circle":this.shape=new yu(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new bu(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new Cu(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new Eu(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new ku(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Tu(this.options,this.body,this.labelModule);break;case"ellipse":default:this.shape=new Bu(this.options,this.body,this.labelModule);break;case"icon":this.shape=new Su(this.options,this.body,this.labelModule);break;case"image":this.shape=new Pu(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Mu(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new Iu(this.options,this.body,this.labelModule);break;case"star":this.shape=new Ou(this.options,this.body,this.labelModule);break;case"text":this.shape=new Du(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Lu(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Fu(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.size=this.options.scaling.min+n*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&Vc(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),Vc(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return void 0===t||"center"===t||"top-left"===t}},{key:"updateGroupOptions",value:function(e,i,n){var r;if(void 0!==n){var o=e.group;if(void 0!==i&&void 0!==i.group&&o!==i.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof o||"string"==typeof o&&""!=o){var s=n.get(o);void 0!==s.opacity&&void 0===i.opacity&&(t.checkOpacity(s.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+s.opacity),s.opacity=void 0));var a=ao(r=function(t){return Hc.getOwnPropertyNames(t)}(i)).call(r,(function(t){return null!=i[t]}));a.push("font"),Ja(a,e,s),e.color=sl(e.color)}}}},{key:"parseOptions",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;if(Ja(["color","fixed","shadow"],e,i,n),t.checkMass(i),void 0!==e.opacity&&(t.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),void 0!==i.opacity&&(t.checkOpacity(i.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+i.opacity),i.opacity=void 0)),i.shapeProperties&&!t.checkCoordinateOrigin(i.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+i.shapeProperties.coordinateOrigin),fl(e,i,"shadow",r),void 0!==i.color&&null!==i.color){var s=sl(i.color);Ya(e.color,s)}else!0===n&&null===i.color&&(e.color=Al(r.color));void 0!==i.fixed&&null!==i.fixed&&("boolean"==typeof i.fixed?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(void 0!==i.fixed.x&&"boolean"==typeof i.fixed.x&&(e.fixed.x=i.fixed.x),void 0!==i.fixed.y&&"boolean"==typeof i.fixed.y&&(e.fixed.y=i.fixed.y))),!0===n&&null===i.font&&(e.font=Al(r.font)),t.updateGroupOptions(e,i,o),void 0!==i.scaling&&fl(e.scaling,i.scaling,"label",r.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var i="";void 0!==e&&(i=" in node id: "+e),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",Tl),t.mass=1}}}]),t}();function ju(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Uu=function(){function t(e,i,n,r){var o,s=this;if(Mn(this,t),this.body=e,this.images=i,this.groups=n,this.layoutEngine=r,this.body.functions.createNode=bt(o=this.create).call(o,this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data,e.oldData)},remove:function(t,e){s.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Al(this.defaultOptions),this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t,e,i=this;this.body.emitter.on("refreshNodes",bt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",bt(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){il(i.nodesListeners,(function(t,e){i.body.data.nodes&&i.body.data.nodes.off(e,t)})),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){if(zu.parseOptions(this.options,t),void 0!==t.opacity&&(Sc(t.opacity)||!Ic(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),void 0!==t.shape)for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if(void 0!==t.font||void 0!==t.widthConstraint||void 0!==t.heightConstraint)for(var i=0,n=xr(this.body.nodes);i<n.length;i++){var r=n[i];this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh()}if(void 0!==t.size)for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.body.nodes[o].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.nodes;if(e.isDataViewLike("id",t))this.body.data.nodes=t;else if(gr(t))this.body.data.nodes=new e.DataSet,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new e.DataSet}if(n&&il(this.nodesListeners,(function(t,e){n.off(e,t)})),this.body.nodes={},this.body.data.nodes){var r=this;il(this.nodesListeners,(function(t,e){r.body.data.nodes.on(e,t)}));var o=this.body.data.nodes.getIds();this.add(o,!0)}!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=0;r<t.length;r++){e=t[r];var o=this.body.data.nodes.get(e),s=this.create(o);n.push(s),this.body.nodes[e]=s}this.layoutEngine.positionInitially(n),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var n=this.body.nodes,r=!1,o=0;o<t.length;o++){var s=t[o],a=n[s],l=e[o];void 0!==a?a.setOptions(l)&&(r=!0):(r=!0,a=this.create(l),n[s]=a)}r||void 0===i||(r=function(t){var e=t.some;return t===Fc||t instanceof Array&&e===Fc.some?Lc:e}(e).call(e,(function(t,e){var n=i[e];return n&&n.level!==t.level}))),!0===r?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++)delete e[t[i]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];il(this.body.nodes,(function(i,n){var r=t.body.data.nodes.get(n);void 0!==r&&(!0===e&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(r))}))}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===gr(t)){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var n=this.body.nodes[t[i]];e[t[i]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[t]){var r=this.body.nodes[t];e[t]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var s=this.body.nodes[this.body.nodeIndices[o]];e[this.body.nodeIndices[o]]={x:Math.round(s.x),y:Math.round(s.y)}}return e}},{key:"getPosition",value:function(t){if(null==t)throw new TypeError("No id was specified for getPosition method.");if(null==this.body.nodes[t])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t,e=[],i=this.body.data.nodes.getDataSet(),n=function(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return ju(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ju(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(i.get());try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.id,s=this.body.nodes[o],a=Math.round(s.x),l=Math.round(s.y);r.x===a&&r.y===l||e.push({id:o,x:a,y:l})}}catch(t){n.e(t)}finally{n.f()}i.update(e)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],r={},o=0;o<n.edges.length;o++){var s=n.edges[o];"to"!==e&&s.toId==n.id?void 0===r[s.fromId]&&(i.push(s.fromId),r[s.fromId]=!0):"from"!==e&&s.fromId==n.id&&void 0===r[s.toId]&&(i.push(s.toId),r[s.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n=0;n<i.edges.length;n++)e.push(i.edges[n].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var n=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),Vo((function(){n.body.emitter.emit("startSimulation")}),0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}();V({target:"Reflect",stat:!0},{get:function t(e,i){var n,r,o=arguments.length<3?e:arguments[2];return z(e)===o?e[i]:(n=B.f(e,i))?w(n,"value")?n.value:void 0===n.get?void 0:n.get.call(o):y(r=ne(e))?t(r,i,o):void 0}});var Zu=F.Reflect.get,Hu=Cn;function Gu(t,e,i){return(Gu="undefined"!=typeof Reflect&&Zu?Zu:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pu(t)););return t}(t,e);if(n){var r=Hu(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}var Vu=Math.hypot,Wu=Math.abs,qu=Math.sqrt,Qu=!!Vu&&Vu(1/0,NaN)!==1/0;V({target:"Math",stat:!0,forced:Qu},{hypot:function(t,e){for(var i,n,r=0,o=0,s=arguments.length,a=0;o<s;)a<(i=Wu(arguments[o++]))?(r=r*(n=a/i)*n+1,a=i):r+=i>0?(n=i/a)*n:i;return a===1/0?1/0:a*qu(r)}});var Yu=F.Math.hypot;function Xu(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}var Ju=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"transform",value:function(t,e){gr(t)||(t=[t]);for(var i=e.point.x,n=e.point.y,r=e.angle,o=e.length,s=0;s<t.length;++s){var a=t[s],l=a.x*Math.cos(r)-a.y*Math.sin(r),c=a.x*Math.sin(r)+a.y*Math.cos(r);a.x=i+o*l,a.y=n+o*c}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),t}(),Ku=function(t){du(i,t);var e=Xu(i);function i(){return Mn(this,i),e.apply(this,arguments)}return Dn(i,null,[{key:"draw",value:function(t,e){if(e.image){t.save(),t.translate(e.point.x,e.point.y),t.rotate(Math.PI/2+e.angle);var i=null!=e.imageWidth?e.imageWidth:e.image.width,n=null!=e.imageHeight?e.imageHeight:e.image.height;e.image.drawImageAtPosition(t,1,-i/2,0,i,n),t.restore()}return!1}}]),i}(Ju),$u=function(t){du(i,t);var e=Xu(i);function i(){return Mn(this,i),e.apply(this,arguments)}return Dn(i,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),i}(Ju),th=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),eh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};Ju.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var n=Math.PI,r=e.angle-n/2,o=e.angle+n/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,r,o,!1),t.stroke(),!0}}]),t}(),ih=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i={x:-.3,y:0};Ju.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var n=Math.PI,r=e.angle+n/2,o=e.angle+3*n/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,r,o,!1),t.stroke(),!0}}]),t}(),nh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),rh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),oh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};return Ju.transform(i,e),_t(t,i.x,i.y,.4*e.length),!0}}]),t}(),sh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),ah=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),lh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),ch=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Ju.transform(i,e),Ju.drawPath(t,i),!0}}]),t}(),uh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"image":return Ku.draw(t,e);case"circle":return oh.draw(t,e);case"box":return ah.draw(t,e);case"crow":return th.draw(t,e);case"curve":return eh.draw(t,e);case"diamond":return lh.draw(t,e);case"inv_curve":return ih.draw(t,e);case"triangle":return nh.draw(t,e);case"inv_triangle":return rh.draw(t,e);case"bar":return sh.draw(t,e);case"vee":return ch.draw(t,e);default:return $u.draw(t,e)}}}]),t}();function hh(t,e){var i=xr(t);if(_n){var n=_n(t);e&&(n=ao(n).call(n,(function(e){return En(t,e).enumerable}))),i.push.apply(i,n)}return i}function dh(t){for(var e=1;e<arguments.length;e++){var i,n=null!=arguments[e]?arguments[e]:{};if(e%2)Mr(i=hh(Object(n),!0)).call(i,(function(e){Ln(t,e,n[e])}));else if(Tn)Bn(t,Tn(n));else{var r;Mr(r=hh(Object(n))).call(r,(function(e){Pn(t,e,En(n,e))}))}}return t}var Ah=function(){function t(e,i,n){Mn(this,t),this._body=i,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}return Dn(t,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,r):this._drawLine(t,e,r)}},{key:"_drawLine",value:function(t,e,i,n,r){if(this.from!=this.to)this._line(t,e,i,n,r);else{var o=ar(this._getCircleData(t),3),s=o[0],a=o[1],l=o[2];this._circle(t,e,s,a,l)}}},{key:"_drawDashedLine",value:function(t,e,i,n,r){t.lineCap="round";var o=gr(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(o),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var s=ar(this._getCircleData(t),3),a=s[0],l=s[1],c=s[2];this._circle(t,e,a,l,c)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)Et(t,this.from.x,this.from.y,this.to.x,this.to.y,o);else{var u=ar(this._getCircleData(t),3),h=u[0],d=u[1],A=u[2];this._circle(t,e,h,d,A)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e,i=ar(pr(e=this._getCircleData(t)).call(e,0,2),2),n=i[0],r=i[1];return{from:this._findBorderPositionCircle(this.from,t,{x:n,y:r,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:n,y:r,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e=this.options.selfReference.size;void 0!==t&&void 0===this.from.shape.width&&this.from.shape.resize(t);var i=qc(t,this.options.selfReference.angle,e,this.from);return[i.x,i.y,e]}},{key:"_pointOnCircle",value:function(t,e,i,n){var r=2*n*Math.PI;return{x:t+i*Math.cos(r),y:e-i*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){var n,r=i.x,o=i.y,s=i.low,a=i.high,l=i.direction,c=this.options.selfReference.size,u=.5*(s+a),h=0;!0===this.options.arrowStrikethrough&&(-1===l?h=this.options.endPointOffset.from:1===l&&(h=this.options.endPointOffset.to));var d=0;do{u=.5*(s+a),n=this._pointOnCircle(r,o,c,u);var A=Math.atan2(t.y-n.y,t.x-n.x),f=t.distanceToBorder(e,A)+h-Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));if(Math.abs(f)<.05)break;f>0?l>0?s=u:a=u:l>0?a=u:s=u,++d}while(s<=a&&d<10);return dh(dh({},n),{},{t:u})}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),n=this.from.options.color.highlight.border,r=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(n=rl(this.from.options.color.border,e.opacity),r=rl(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?r=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(n=this.from.options.color.border),i.addColorStop(0,n),i.addColorStop(1,r),i}return"to"===e.inheritsColor?rl(this.to.options.color.border,e.opacity):rl(this.from.options.color.border,e.opacity)}return rl(e.color,e.opacity)}},{key:"_circle",value:function(t,e,i,n,r){this.enableShadow(t,e);var o=0,s=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var a=this.options.selfReference.angle,l=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:i,y:n,low:a,high:l,direction:-1}),u=this._findBorderPositionCircle(this.from,t,{x:i,y:n,low:a,high:l,direction:1});o=Math.atan2(c.y-n,c.x-i),s=Math.atan2(u.y-n,u.x-i)}t.beginPath(),t.arc(i,n,r,o,s,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,n,r,o){if(this.from!=this.to)return this._getDistanceToEdge(t,e,i,n,r,o);var s=ar(this._getCircleData(void 0),3),a=s[0],l=s[1],c=s[2],u=a-r,h=l-o;return Math.abs(Math.sqrt(u*u+h*h)-c)}},{key:"_getDistanceToLine",value:function(t,e,i,n,r,o){var s=i-t,a=n-e,l=((r-t)*s+(o-e)*a)/(s*s+a*a);l>1?l=1:l<0&&(l=0);var c=t+l*s-r,u=e+l*a-o;return Math.sqrt(c*c+u*u)}},{key:"getArrowData",value:function(t,e,i,n,r,o){var s,a,l,c,u,h,d,A=o.width;"from"===e?(l=this.from,c=this.to,u=o.fromArrowScale<0,h=Math.abs(o.fromArrowScale),d=o.fromArrowType):"to"===e?(l=this.to,c=this.from,u=o.toArrowScale<0,h=Math.abs(o.toArrowScale),d=o.toArrowType):(l=this.to,c=this.from,u=o.middleArrowScale<0,h=Math.abs(o.middleArrowScale),d=o.middleArrowType);var f=15*h+3*A;if(l!=c){var p=f/Yu(l.x-c.x,l.y-c.y);if("middle"!==e)if(!0===this.options.smooth.enabled){var g=this._findBorderPosition(l,t,{via:i}),m=this.getPoint(g.t+p*("from"===e?1:-1),i);s=Math.atan2(g.y-m.y,g.x-m.x),a=g}else s=Math.atan2(l.y-c.y,l.x-c.x),a=this._findBorderPosition(l,t);else{var v=(u?-p:p)/2,y=this.getPoint(.5+v,i),b=this.getPoint(.5-v,i);s=Math.atan2(y.y-b.y,y.x-b.x),a=this.getPoint(.5,i)}}else{var _=ar(this._getCircleData(t),3),w=_[0],x=_[1],C=_[2];if("from"===e){var E=this.options.selfReference.angle,k=this.options.selfReference.angle+Math.PI,T=this._findBorderPositionCircle(this.from,t,{x:w,y:x,low:E,high:k,direction:-1});s=-2*T.t*Math.PI+1.5*Math.PI+.1*Math.PI,a=T}else if("to"===e){var B=this.options.selfReference.angle,S=this.options.selfReference.angle+Math.PI,P=this._findBorderPositionCircle(this.from,t,{x:w,y:x,low:B,high:S,direction:1});s=-2*P.t*Math.PI+1.5*Math.PI-1.1*Math.PI,a=P}else{var M=this.options.selfReference.angle/(2*Math.PI);a=this._pointOnCircle(w,x,C,M),s=-2*M*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:a,core:{x:a.x-.9*f*Math.cos(s),y:a.y-.9*f*Math.sin(s)},angle:s,length:f,type:d}}},{key:"drawArrowHead",value:function(t,e,i,n,r){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,uh.draw(t,r)&&(this.enableShadow(t,e),Qo(t).call(t),this.disableShadow(t,e))}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1!==e)if(void 0!==t.setLineDash){var i=gr(e)?e:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==t.setLineDash?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}();function fh(t,e){var i=xr(t);if(_n){var n=_n(t);e&&(n=ao(n).call(n,(function(e){return En(t,e).enumerable}))),i.push.apply(i,n)}return i}function ph(t){for(var e=1;e<arguments.length;e++){var i,n=null!=arguments[e]?arguments[e]:{};if(e%2)Mr(i=fh(Object(n),!0)).call(i,(function(e){Ln(t,e,n[e])}));else if(Tn)Bn(t,Tn(n));else{var r;Mr(r=fh(Object(n))).call(r,(function(e){Pn(t,e,En(n,e))}))}}return t}var gh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"_findBorderPositionBezier",value:function(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),o=10,s=.2,a=!1,l=1,c=0,u=this.to,h=this.options.endPointOffset?this.options.endPointOffset.to:0;t.id===this.from.id&&(u=this.from,a=!0,h=this.options.endPointOffset?this.options.endPointOffset.from:0),!1===this.options.arrowStrikethrough&&(h=0);var d=0;do{n=.5*(c+l),i=this.getPoint(n,r);var A=Math.atan2(u.y-i.y,u.x-i.x),f=u.distanceToBorder(e,A)+h-Math.sqrt(Math.pow(i.x-u.x,2)+Math.pow(i.y-u.y,2));if(Math.abs(f)<s)break;f<0?!1===a?c=n:l=n:!1===a?l=n:c=n,++d}while(c<=l&&d<o);return ph(ph({},i),{},{t:n})}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,r,o,s){var a,l,c,u,h,d=1e9,A=t,f=e;for(l=1;l<10;l++)c=.1*l,u=Math.pow(1-c,2)*t+2*c*(1-c)*s.x+Math.pow(c,2)*i,h=Math.pow(1-c,2)*e+2*c*(1-c)*s.y+Math.pow(c,2)*n,l>0&&(d=(a=this._getDistanceToLine(A,f,u,h,r,o))<d?a:d),A=u,f=h;return d}},{key:"_bezierCurve",value:function(t,e,i,n){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=i&&null!=i.x?null!=n&&null!=n.x?t.bezierCurveTo(i.x,i.y,n.x,n.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),i}(Ah);var mh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r)).via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return Dn(i,[{key:"setOptions",value:function(t){Gu(pu(i.prototype),"setOptions",this).call(this,t);var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var i=ar(this._getCircleData(),3),n=i[0],r=i[1],o=i[2],s=2*Math.PI*(1-t);return{x:n+o*Math.sin(s),y:r+o-o*(1-Math.cos(s))}}return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToBezierEdge(t,e,i,n,r,o,this.via)}}]),i}(gh);var vh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t,e,i=this.options.smooth.roundness,n=this.options.smooth.type,r=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n){var s,a;s=a=r<=o?i*o:i*r,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a);var l=this.from.x+s,c=this.from.y+a;return"discrete"===n&&(r<=o?l=r<i*o?this.from.x:l:c=o<i*r?this.from.y:c),{x:l,y:c}}if("straightCross"===n){var u=(1-i)*r,h=(1-i)*o;return r<=o?(u=0,this.from.y<this.to.y&&(h=-h)):(this.from.x<this.to.x&&(u=-u),h=0),{x:this.to.x+u,y:this.to.y+h}}if("horizontal"===n){var d=(1-i)*r;return this.from.x<this.to.x&&(d=-d),{x:this.to.x+d,y:this.from.y}}if("vertical"===n){var A=(1-i)*o;return this.from.y<this.to.y&&(A=-A),{x:this.from.x,y:this.to.y+A}}if("curvedCW"===n){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var f=Math.sqrt(r*r+o*o),p=Math.PI,g=(Math.atan2(o,r)+(.5*i+.5)*p)%(2*p);return{x:this.from.x+(.5*i+.5)*f*Math.sin(g),y:this.from.y+(.5*i+.5)*f*Math.cos(g)}}if("curvedCCW"===n){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var m=Math.sqrt(r*r+o*o),v=Math.PI,y=(Math.atan2(o,r)+(.5*-i+.5)*v)%(2*v);return{x:this.from.x+(.5*i+.5)*m*Math.sin(y),y:this.from.y+(.5*i+.5)*m*Math.cos(y)}}t=e=r<=o?i*o:i*r,this.from.x>this.to.x&&(t=-t),this.from.y>=this.to.y&&(e=-e);var b=this.from.x+t,_=this.from.y+e;return r<=o?b=this.from.x<=this.to.x?this.to.x<b?this.to.x:b:this.to.x>b?this.to.x:b:_=this.from.y>=this.to.y?this.to.y>_?this.to.y:_:this.to.y<_?this.to.y:_,{x:b,y:_}}},{key:"_findBorderPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,n,r,o,s)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=t;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y}}}]),i}(gh);var yh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"_line",value:function(t,e,i){var n=i[0],r=i[1];this._bezierCurve(t,e,n,r)}},{key:"_getViaCoordinates",value:function(){var t,e,i,n,r=this.from.x-this.to.x,o=this.from.y-this.to.y,s=this.options.smooth.roundness;return(Math.abs(r)>Math.abs(o)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,n=this.to.y,t=this.from.x-s*r,i=this.to.x+s*r):(e=this.from.y-s*o,n=this.to.y+s*o,t=this.from.x,i=this.to.x),[{x:t,y:e},{x:i,y:n}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=ar(arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),2),a=s[0],l=s[1];return this._getDistanceToBezierEdge2(t,e,i,n,r,o,a,l)}},{key:"getPoint",value:function(t){var e=ar(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),2),i=e[0],n=e[1],r=t,o=[Math.pow(1-r,3),3*r*Math.pow(1-r,2),3*Math.pow(r,2)*(1-r),Math.pow(r,3)];return{x:o[0]*this.fromPoint.x+o[1]*i.x+o[2]*n.x+o[3]*this.toPoint.x,y:o[0]*this.fromPoint.y+o[1]*i.y+o[2]*n.y+o[3]*this.toPoint.y}}}]),i}(function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"_getDistanceToBezierEdge2",value:function(t,e,i,n,r,o,s,a){for(var l=1e9,c=t,u=e,h=[0,0,0,0],d=1;d<10;d++){var A=.1*d;h[0]=Math.pow(1-A,3),h[1]=3*A*Math.pow(1-A,2),h[2]=3*Math.pow(A,2)*(1-A),h[3]=Math.pow(A,3);var f=h[0]*t+h[1]*s.x+h[2]*a.x+h[3]*i,p=h[0]*e+h[1]*s.y+h[2]*a.y+h[3]*n;if(d>0){var g=this._getDistanceToLine(c,u,f,p,r,o);l=g<l?g:l}c=f,u=p}return l}}]),i}(gh));var bh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,n=this.from;t.id===this.from.id&&(i=this.from,n=this.to);var r=Math.atan2(i.y-n.y,i.x-n.x),o=i.x-n.x,s=i.y-n.y,a=Math.sqrt(o*o+s*s),l=(a-t.distanceToBorder(e,r))/a;return{x:(1-l)*n.x+l*i.x,y:(1-l)*n.y+l*i.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToLine(t,e,i,n,r,o)}}]),i}(Ah),_h=function(){function t(e,i,n,r,o){if(Mn(this,t),void 0===i)throw new Error("No body provided");this.options=Al(r),this.globalOptions=r,this.defaultOptions=o,this.body=i,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new nu(this.body,this.options,!0),this.setOptions(e)}return Dn(t,[{key:"setOptions",value:function(e){if(e){var i=void 0!==e.physics&&this.options.physics!==e.physics||void 0!==e.hidden&&(this.options.hidden||!1)!==(e.hidden||!1)||void 0!==e.from&&this.options.from!==e.from||void 0!==e.to&&this.options.to!==e.to;t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=jc(e.value));var n=[e,this.options,this.defaultOptions];return this.chooser=Gc("edge",n),this.updateLabelModule(e),i=this.updateEdgeType()||i,this._setInteractionWidths(),this.connect(),i}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,r={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"==typeof o?r.width=o(r.width):"number"==typeof o&&(r.width+=o),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.highlight,r.shadow=this.options.shadow.enabled}else if(this.hover){var s=this.options.hoverWidth;"function"==typeof s?r.width=s(r.width):"number"==typeof s&&(r.width+=s),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.hover,r.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(r,this.options.id,this.selected,this.hover),void 0!==r.color&&(r.inheritsColor=!1),!1===r.shadow&&(r.shadowColor===this.options.shadow.color&&r.shadowSize===this.options.shadow.size&&r.shadowX===this.options.shadow.x&&r.shadowY===this.options.shadow.y||(r.shadow=!0)));else r.shadow=this.options.shadow.enabled,r.width=Math.max(r.width,.3/this.body.view.scale);return r}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof mh&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof yh&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof vh&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof bh&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new mh(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new yh(this.options,this.body,this.labelModule):this.edgeType=new vh(this.options,this.body,this.labelModule):this.edgeType=new bh(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.width=this.options.scaling.min+n*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(n.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core),e.fromArrowSrc&&(n.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(n.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(n.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(n.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core),e.toArrowSrc&&(n.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(n.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(n.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(n.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e),e.middleArrowSrc&&(n.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(n.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(n.middle.imageHeight=e.middleArrowImageHeight)),e.fromArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,n.from),e.middleArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,n.middle),e.toArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,n.to)}}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i,n=this.from,r=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),n.id!=r.id){this.labelModule.pointToSelf=!1,i=this.edgeType.getPoint(.5,e),t.save();var o=this._getRotation(t);0!=o.angle&&(t.translate(o.x,o.y),t.rotate(o.angle)),this.labelModule.draw(t,i.x,i.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var s=qc(t,this.options.selfReference.angle,this.options.selfReference.size,n);i=this._pointOnCircle(s.x,s.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,i.x,i.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();Vc(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var n={left:t.x,top:t.y};return this.isOverlappingWith(n)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,n=this.to.x,r=this.to.y,o=t.left,s=t.top;return this.edgeType.getDistanceToEdge(e,i,n,r,o,s)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var n={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return n;if("horizontal"===this.options.font.align)return n;var r=this.from.y-this.to.y,o=this.from.x-this.to.x,s=Math.atan2(r,o);return(s<-1&&o<0||s>0&&o<0)&&(s+=Math.PI),n.angle=s,n}},{key:"_pointOnCircle",value:function(t,e,i,n){return{x:t+i*Math.cos(n),y:e-i*Math.sin(n)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Xa(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,i),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.from&&(Ic(e.endPointOffset.from)?t.endPointOffset.from=e.endPointOffset.from:(t.endPointOffset.from=void 0!==n.endPointOffset.from?n.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.to&&(Ic(e.endPointOffset.to)?t.endPointOffset.to=e.endPointOffset.to:(t.endPointOffset.to=void 0!==n.endPointOffset.to?n.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Wc(e.label)?t.label=e.label:Wc(t.label)||(t.label=void 0),fl(t,e,"smooth",n),fl(t,e,"shadow",n),fl(t,e,"background",n),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===i&&null===e.dashes&&(t.dashes=Do(n.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),fl(t.scaling,e.scaling,"label",n.scaling)):!0===i&&null===e.scaling&&(t.scaling=Do(n.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var o=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=Po(o).call(o,"to"),t.arrows.middle.enabled=-1!=Po(o).call(o,"middle"),t.arrows.from.enabled=-1!=Po(o).call(o,"from")}else{if("object"!==cr(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Uo(e.arrows));fl(t.arrows,e.arrows,"to",n.arrows),fl(t.arrows,e.arrows,"middle",n.arrows),fl(t.arrows,e.arrows,"from",n.arrows)}else!0===i&&null===e.arrows&&(t.arrows=Do(n.arrows));if(void 0!==e.color&&null!==e.color){var s=Wa(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,a=t.color;if(r)Ka(a,n.color,!1,i);else for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&delete a[l];if(Wa(a))a.color=a,a.highlight=a,a.hover=a,a.inherit=!1,void 0===s.opacity&&(a.opacity=1);else{var c=!1;void 0!==s.color&&(a.color=s.color,c=!0),void 0!==s.highlight&&(a.highlight=s.highlight,c=!0),void 0!==s.hover&&(a.hover=s.hover,c=!0),void 0!==s.inherit&&(a.inherit=s.inherit),void 0!==s.opacity&&(a.opacity=Math.min(1,Math.max(0,s.opacity))),!0===c?a.inherit=!1:void 0===a.inherit&&(a.inherit="from")}}else!0===i&&null===e.color&&(t.color=Al(n.color));!0===i&&null===e.font&&(t.font=Al(n.font)),Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}}]),t}(),wh=function(){function t(e,i,n){var r,o=this;Mn(this,t),this.body=e,this.images=i,this.groups=n,this.body.functions.createEdge=bt(r=this.create).call(r,this),this.edgesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items)},remove:function(t,e){o.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Ka(this.options,this.defaultOptions),this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t,e,i=this;this.body.emitter.on("_forceDisableDynamicCurves",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var n=!1;for(var r in i.body.edges)if(Object.prototype.hasOwnProperty.call(i.body.edges,r)){var o=i.body.edges[r],s=i.body.data.edges.get(r);if(null!=s){var a=s.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===t?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:t}}),n=!0)}}!0===e&&!0===n&&i.body.emitter.emit("_dataChanged")})),this.body.emitter.on("_dataUpdated",(function(){i.reconnectEdges()})),this.body.emitter.on("refreshEdges",bt(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",bt(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){il(i.edgesListeners,(function(t,e){i.body.data.edges&&i.body.data.edges.off(e,t)})),delete i.body.functions.createEdge,delete i.edgesListeners.add,delete i.edgesListeners.update,delete i.edgesListeners.remove,delete i.edgesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){_h.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.data.edges;if(e.isDataViewLike("id",t))this.body.data.edges=t;else if(gr(t))this.body.data.edges=new e.DataSet,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new e.DataSet}if(r&&il(this.edgesListeners,(function(t,e){r.off(e,t)})),this.body.edges={},this.body.data.edges){il(this.edgesListeners,(function(t,e){i.body.data.edges.on(e,t)}));var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.edges,n=this.body.data.edges,r=0;r<t.length;r++){var o=t[r],s=i[o];s&&s.disconnect();var a=n.get(o,{showInternalIds:!0});i[o]=this.create(a)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,n=!1,r=0;r<t.length;r++){var o=t[r],s=i.get(o),a=e[o];void 0!==a?(a.disconnect(),n=a.setOptions(s)||n,a.connect()):(this.body.edges[o]=this.create(s),n=!0)}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var i=this.body.edges;il(t,(function(t){var e=i[t];void 0!==e&&e.remove()})),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;il(this.body.edges,(function(e,i){var n=t.body.data.edges.get(i);void 0!==n&&e.setOptions(n)}))}},{key:"create",value:function(t){return new _h(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var n=i[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];il(this.body.edges,(function(i,n){var r=t.body.nodes[i.toId],o=t.body.nodes[i.fromId];void 0!==r&&!0===r.isCluster||void 0!==o&&!0===o.isCluster||void 0!==r&&void 0!==o||e.push(n)})),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(null!=t){var e=this.body.edges,i=[];Mr(t).call(t,(function(t,n){void 0===e[n]&&i.push(n)})),this.add(i,!0)}}}]),t}(),xh=function(){function t(e,i,n){Mn(this,t),this.body=e,this.physicsBody=i,this.barnesHutTree,this.setOptions(n),this._rng=Fa("BARNES HUT SOLVER")}return Dn(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,n=i.length,r=this._formBarnesHutTree(e,i);this.barnesHutTree=r;for(var o=0;o<n;o++)(t=e[i[o]]).options.mass>0&&this._getForceContributions(r.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var i=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,r=Math.sqrt(i*i+n*n);r*t.calcSize>this.thetaInversed?this._calculateForces(r,i,n,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(r,i,n,e,t)}}},{key:"_calculateForces",value:function(t,e,i,n,r){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=this.options.gravitationalConstant*r.mass*n.options.mass/Math.pow(t,3),s=e*o,a=i*o;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i,n=e.length,r=t[e[0]].x,o=t[e[0]].y,s=t[e[0]].x,a=t[e[0]].y,l=1;l<n;l++){var c=t[e[l]],u=c.x,h=c.y;c.options.mass>0&&(u<r&&(r=u),u>s&&(s=u),h<o&&(o=h),h>a&&(a=h))}var d=Math.abs(s-r)-Math.abs(a-o);d>0?(o-=.5*d,a+=.5*d):(r+=.5*d,s-=.5*d);var A=Math.max(1e-5,Math.abs(s-r)),f=.5*A,p=.5*(r+s),g=.5*(o+a),m={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:g-f,maxY:g+f},size:A,calcSize:1/A,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(m.root);for(var v=0;v<n;v++)(i=t[e[v]]).options.mass>0&&this._placeInTree(m.root,i);return m}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,n=t.mass+e.options.mass,r=1/n;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=r,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=r,t.mass=n;var o=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<o?o:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e);var n,r=t.children.NW.range;n=r.maxX>e.x?r.maxY>e.y?"NW":"SW":r.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,n)}},{key:"_placeInRegion",value:function(t,e,i){var n=t.children[i];switch(n.childrenCount){case 0:n.children.data=e,n.childrenCount=1,this._updateBranchMass(n,e);break;case 1:n.children.data.x===e.x&&n.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(n),this._placeInTree(n,e));break;case 4:this._placeInTree(n,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i,n,r,o,s=.5*t.size;switch(e){case"NW":i=t.range.minX,n=t.range.minX+s,r=t.range.minY,o=t.range.minY+s;break;case"NE":i=t.range.minX+s,n=t.range.maxX,r=t.range.minY,o=t.range.minY+s;break;case"SW":i=t.range.minX,n=t.range.minX+s,r=t.range.minY+s,o=t.range.maxY;break;case"SE":i=t.range.minX+s,n=t.range.maxX,r=t.range.minY+s,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}(),Ch=function(){function t(e,i,n){Mn(this,t),this._rng=Fa("REPULSION SOLVER"),this.body=e,this.physicsBody=i,this.setOptions(n)}return Dn(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o,s,a,l=this.body.nodes,c=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,h=this.options.nodeDistance,d=-2/3/h,A=0;A<c.length-1;A++){s=l[c[A]];for(var f=A+1;f<c.length;f++)t=(a=l[c[f]]).x-s.x,e=a.y-s.y,0===(i=Math.sqrt(t*t+e*e))&&(t=i=.1*this._rng()),i<2*h&&(o=i<.5*h?1:d*i+1.3333333333333333,n=t*(o/=i),r=e*o,u[s.id].x-=n,u[s.id].y-=r,u[a.id].x+=n,u[a.id].y+=r)}}}]),t}(),Eh=function(){function t(e,i,n){Mn(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return Dn(t,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,n=this.options.nodeDistance,r=0;r<e.length-1;r++)for(var o=t[e[r]],s=r+1;s<e.length;s++){var a=t[e[s]];if(o.level===a.level){var l=n+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(a.shape.radius||0)/2),c=a.x-o.x,u=a.y-o.y,h=Math.sqrt(c*c+u*u),d=void 0;d=h<l?-Math.pow(.05*h,2)+Math.pow(.05*l,2):0,0!==h&&(d/=h);var A=c*d,f=u*d;i[o.id].x-=A,i[o.id].y-=f,i[a.id].x+=A,i[a.id].y+=f}}}}]),t}(),kh=function(){function t(e,i,n){Mn(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return Dn(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o=this.physicsBody.physicsEdgeIndices,s=this.body.edges,a=0;a<o.length;a++)!0===(e=s[o[a]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.to,n=e.edgeType.via,r=e.from,this._calculateSpringForce(i,n,.5*t),this._calculateSpringForce(n,r,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.max(Math.sqrt(n*n+r*r),.01),s=this.options.springConstant*(i-o)/o,a=n*s,l=r*s;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=a,this.physicsBody.forces[t.id].y+=l),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=a,this.physicsBody.forces[e.id].y-=l)}}]),t}(),Th=function(){function t(e,i,n){Mn(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return Dn(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o,s,a,l,c,u=this.body.edges,h=.5,d=this.physicsBody.physicsEdgeIndices,A=this.physicsBody.physicsNodeIndices,f=this.physicsBody.forces,p=0;p<A.length;p++){var g=A[p];f[g].springFx=0,f[g].springFy=0}for(var m=0;m<d.length;m++)!0===(e=u[d[m]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,n=e.from.y-e.to.y,a=0===(a=Math.sqrt(i*i+n*n))?.01:a,r=i*(s=this.options.springConstant*(t-a)/a),o=n*s,e.to.level!=e.from.level?(void 0!==f[e.toId]&&(f[e.toId].springFx-=r,f[e.toId].springFy-=o),void 0!==f[e.fromId]&&(f[e.fromId].springFx+=r,f[e.fromId].springFy+=o)):(void 0!==f[e.toId]&&(f[e.toId].x-=h*r,f[e.toId].y-=h*o),void 0!==f[e.fromId]&&(f[e.fromId].x+=h*r,f[e.fromId].y+=h*o)));s=1;for(var v=0;v<A.length;v++){var y=A[v];l=Math.min(s,Math.max(-s,f[y].springFx)),c=Math.min(s,Math.max(-s,f[y].springFy)),f[y].x+=l,f[y].y+=c}for(var b=0,_=0,w=0;w<A.length;w++){var x=A[w];b+=f[x].x,_+=f[x].y}for(var C=b/A.length,E=_/A.length,k=0;k<A.length;k++){var T=A[k];f[T].x-=C,f[T].y-=E}}}]),t}(),Bh=function(){function t(e,i,n){Mn(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return Dn(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r=this.body.nodes,o=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<o.length;a++)t=-(n=r[o[a]]).x,e=-n.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,s,n)}},{key:"_calculateForces",value:function(t,e,i,n,r){var o=0===t?0:this.options.centralGravity/t;n[r.id].x=e*o,n[r.id].y=i*o}}]),t}();var Sh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){var o;return Mn(this,i),(o=e.call(this,t,n,r))._rng=Fa("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return Dn(i,[{key:"_calculateForces",value:function(t,e,i,n,r){0===t&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=n.edges.length+1,s=this.options.gravitationalConstant*r.mass*n.options.mass*o/Math.pow(t,2),a=e*s,l=i*s;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=l}}]),i}(xh);var Ph,Mh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r){return Mn(this,i),e.call(this,t,n,r)}return Dn(i,[{key:"_calculateForces",value:function(t,e,i,n,r){if(t>0){var o=r.edges.length+1,s=this.options.centralGravity*o*r.options.mass;n[r.id].x=e*s,n[r.id].y=i*s}}}]),i}(Bh),Ih=function(){function t(e){Mn(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},dt(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",(function(){t.initPhysics()})),this.body.emitter.on("_layoutFailed",(function(){t.layoutFailed=!0})),this.body.emitter.on("resetPhysics",(function(){t.stopSimulation(),t.ready=!1})),this.body.emitter.on("disablePhysics",(function(){t.physicsEnabled=!1,t.stopSimulation()})),this.body.emitter.on("restorePhysics",(function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()})),this.body.emitter.on("startSimulation",(function(){!0===t.ready&&t.startSimulation()})),this.body.emitter.on("stopSimulation",(function(){t.stopSimulation()})),this.body.emitter.on("destroy",(function(){t.stopSimulation(!1),t.body.emitter.off()})),this.body.emitter.on("_dataChanged",(function(){t.updatePhysicsData()}))}},{key:"setOptions",value:function(t){if(void 0!==t)if(!1===t)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===t)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Ja(["stabilization"],this.options,t),fl(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var e=this.options.wind;e&&(("number"!=typeof e.x||Sc(e.x))&&(e.x=0),("number"!=typeof e.y||Sc(e.y))&&(e.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new Sh(this.body,this.physicsBody,t),this.edgesSolver=new kh(this.body,this.physicsBody,t),this.gravitySolver=new Mh(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new Ch(this.body,this.physicsBody,t),this.edgesSolver=new kh(this.body,this.physicsBody,t),this.gravitySolver=new Bh(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new Eh(this.body,this.physicsBody,t),this.edgesSolver=new Th(this.body,this.physicsBody,t),this.gravitySolver=new Bh(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new xh(this.body,this.physicsBody,t),this.edgesSolver=new kh(this.body,this.physicsBody,t),this.gravitySolver=new Bh(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var t;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=bt(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Cr();this.physicsTick(),(Cr()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&Vo((function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&!0===e[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=xr(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var n=0;n<t.length;n++){var r=t[n];void 0!==e[r]?!0===e[r].options.physics&&(this.referenceState[r]={positions:{x:e[r].x,y:e[r].y}},i[r].x=this.previousStates[r].vx,i[r].y=this.previousStates[r].vy,e[r].x=this.previousStates[r].x,e[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var t,e,i=this.body.nodes,n=this.referenceState;for(var r in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,r)&&void 0!==i[r]&&(t=i[r].x-n[r].positions.x,e=i[r].y-n[r].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,n=0;n<t.length;n++){var r=t[n],o=this._performStep(r);e=Math.max(e,o),i+=o}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var n=this.options.maxVelocity||1e9;return Math.abs(t)>n&&(t=t>0?n:-n),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var n=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:n.x,vy:n.y},!1===e.options.fixed.x?(n.x=this.calculateComponentVelocity(n.x,i.x,e.options.mass),e.x+=n.x*this.timestep):(i.x=0,n.x=0),!1===e.options.fixed.y?(n.y=this.calculateComponentVelocity(n.y,i.y,e.options.mass),e.y+=n.y*this.timestep):(i.y=0,n.y=0),Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof e&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,Vo((function(){return t._stabilizationBatch()}),0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var n,r=0;e()&&r<this.options.stabilization.updateInterval;)this.physicsTick(),r++;i(),e()?Vo(bt(n=this._stabilizationBatch).call(n,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.physicsBody.physicsNodeIndices[e],n=this.body.nodes[i],r=this.physicsBody.forces[i],o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.x,2)),s=Math.min(Math.max(5,o),15),a=3*s,l=cl((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),c={x:n.x+20*r.x,y:n.y+20*r.y};t.lineWidth=s,t.strokeStyle=l,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(c.x,c.y),t.stroke();var u=Math.atan2(r.y,r.x);t.fillStyle=l,uh.draw(t,{type:"arrow",point:c,angle:u,length:a}),Qo(t).call(t)}}}]),t}(),Oh=new Uint8Array(16);function Dh(){if(!Ph&&!(Ph="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ph(Oh)}var Lh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Fh(t){return"string"==typeof t&&Lh.test(t)}for(var Rh=[],Nh=0;Nh<256;++Nh)Rh.push((Nh+256).toString(16).substr(1));function zh(t,e,i){var n=(t=t||{}).random||(t.rng||Dh)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var r=0;r<16;++r)e[i+r]=n[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(Rh[t[e+0]]+Rh[t[e+1]]+Rh[t[e+2]]+Rh[t[e+3]]+"-"+Rh[t[e+4]]+Rh[t[e+5]]+"-"+Rh[t[e+6]]+Rh[t[e+7]]+"-"+Rh[t[e+8]]+Rh[t[e+9]]+"-"+Rh[t[e+10]]+Rh[t[e+11]]+Rh[t[e+12]]+Rh[t[e+13]]+Rh[t[e+14]]+Rh[t[e+15]]).toLowerCase();if(!Fh(i))throw TypeError("Stringified UUID is invalid");return i}(n)}var jh=function(){function t(){Mn(this,t)}return Dn(t,null,[{key:"getRange",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,r=-1e9,o=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)o>(e=t[i[a]]).shape.boundingBox.left&&(o=e.shape.boundingBox.left),s<e.shape.boundingBox.right&&(s=e.shape.boundingBox.right),n>e.shape.boundingBox.top&&(n=e.shape.boundingBox.top),r<e.shape.boundingBox.bottom&&(r=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"getRangeCore",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,r=-1e9,o=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)o>(e=t[i[a]]).x&&(o=e.x),s<e.x&&(s=e.x),n>e.y&&(n=e.y),r<e.y&&(r=e.y);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(Ka(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Ka(i,t.options,!0),i}}]),t}();var Uh=function(t){du(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}(i);function i(t,n,r,o,s,a){var l;return Mn(this,i),(l=e.call(this,t,n,r,o,s,a)).isCluster=!0,l.containedNodes={},l.containedEdges={},l}return Dn(i,[{key:"_openChildCluster",value:function(t){var e=this,i=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!i.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],il(i.edges,(function(t){delete e.containedEdges[t.id]})),il(i.containedNodes,(function(t,i){e.containedNodes[i]=t})),i.containedNodes={},il(i.containedEdges,(function(t,i){e.containedEdges[i]=t})),i.containedEdges={},il(i.edges,(function(t){il(e.edges,(function(i){var n,r,o=Po(n=i.clusteringEdgeReplacingIds).call(n,t.id);-1!==o&&(il(t.clusteringEdgeReplacingIds,(function(t){i.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=i.id})),Gr(r=i.clusteringEdgeReplacingIds).call(r,o,1))}))})),i.edges=[]}}]),i}(zu),Zh=function(){function t(e){var i=this;Mn(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},dt(this.options,this.defaultOptions),this.body.emitter.on("_resetData",(function(){i.clusteredNodes={},i.clusteredEdges={}}))}return Dn(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===cr(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodes[this.body.nodeIndices[n]];r.edges.length>=t&&i.push(r.id)}for(var o=0;o<i.length;o++)this.clusterByConnection(i[o],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var n={},r={};il(this.body.nodes,(function(i,o){i.options&&!0===e.joinCondition(i.options)&&(n[o]=i,il(i.edges,(function(e){void 0===t.clusteredEdges[e.id]&&(r[e.id]=e)})))})),this._cluster(n,r,e,i)}},{key:"clusterByEdgeCount",value:function(t,e){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var r,o,s,a=[],l={},c=function(n){var c={},u={},h=i.body.nodeIndices[n],d=i.body.nodes[h];if(void 0===l[h]){s=0,o=[];for(var A=0;A<d.edges.length;A++)r=d.edges[A],void 0===i.clusteredEdges[r.id]&&(r.toId!==r.fromId&&s++,o.push(r));if(s===t){for(var f=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var i=jh.cloneOptions(t);return e.joinCondition(i)},p=!0,g=0;g<o.length;g++){r=o[g];var m=i._getConnectedId(r,h);if(!f(d)){p=!1;break}u[r.id]=r,c[h]=d,c[m]=i.body.nodes[m],l[h]=!0}if(xr(c).length>0&&xr(u).length>0&&!0===p){var v=function(){for(var t=0;t<a.length;++t)for(var e in c)if(void 0!==a[t].nodes[e])return a[t]}();if(void 0!==v){for(var y in c)void 0===v.nodes[y]&&(v.nodes[y]=c[y]);for(var b in u)void 0===v.edges[b]&&(v.edges[b]=u[b])}else a.push({nodes:c,edges:u})}}}},u=0;u<this.body.nodeIndices.length;u++)c(u);for(var h=0;h<a.length;h++)this._cluster(a[h].nodes,a[h].edges,e,!1);!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var r=this.body.nodes[t];void 0===(e=this._checkOptions(e,r)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=r.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=r.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=r.options.fixed.x,e.clusterNodeProperties.fixed.y=r.options.fixed.y);var o={},s={},a=r.id,l=jh.cloneOptions(r);o[a]=r;for(var c=0;c<r.edges.length;c++){var u=r.edges[c];if(void 0===this.clusteredEdges[u.id]){var h=this._getConnectedId(u,a);if(void 0===this.clusteredNodes[h])if(h!==a)if(void 0===e.joinCondition)s[u.id]=u,o[h]=this.body.nodes[h];else{var d=jh.cloneOptions(this.body.nodes[h]);!0===e.joinCondition(l,d)&&(s[u.id]=u,o[h]=this.body.nodes[h])}else s[u.id]=u}}var A=_r(i=xr(o)).call(i,(function(t){return o[t].id}));for(var f in o)if(Object.prototype.hasOwnProperty.call(o,f))for(var p=o[f],g=0;g<p.edges.length;g++){var m=p.edges[g];Po(A).call(A,this._getConnectedId(m,p.id))>-1&&(s[m.id]=m)}this._cluster(o,s,e,n)}},{key:"_createClusterEdges",value:function(t,e,i,n){for(var r,o,s,a,l,c,u=xr(t),h=[],d=0;d<u.length;d++){s=t[o=u[d]];for(var A=0;A<s.edges.length;A++)r=s.edges[A],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:r.toId==o?(a=i.id,c=l=r.fromId):(a=r.toId,l=i.id,c=a),void 0===t[c]&&h.push({edge:r,fromId:l,toId:a}))}for(var f=[],p=function(t){for(var e=0;e<f.length;e++){var i=f[e],n=t.fromId===i.fromId&&t.toId===i.toId,r=t.fromId===i.toId&&t.toId===i.fromId;if(n||r)return i}return null},g=0;g<h.length;g++){var m=h[g],v=m.edge,y=p(m);null===y?(y=this._createClusteredEdge(m.fromId,m.toId,v,n),f.push(y)):y.clusteringEdgeReplacingIds.push(v.id),this.body.edges[v.id].edgeReplacedById=y.id,this._backupEdgeOptions(v),v.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&void 0!==this.clusteredNodes[o]&&r.push(o);for(var s=0;s<r.length;++s)delete t[r[s]];if(0!=xr(t).length&&(1!=xr(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){var a=Ka({},i.clusterNodeProperties);if(void 0!==i.processProperties){var l=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var u=jh.cloneOptions(t[c]);l.push(u)}var h=[];for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)&&"clusterEdge:"!==d.substr(0,12)){var A=jh.cloneOptions(e[d],"edge");h.push(A)}if(!(a=i.processProperties(a,l,h)))throw new Error("The processProperties function does not return properties!")}void 0===a.id&&(a.id="cluster:"+zh());var f=a.id;void 0===a.label&&(a.label="cluster");var p=void 0;void 0===a.x&&(p=this._getClusterPosition(t),a.x=p.x),void 0===a.y&&(void 0===p&&(p=this._getClusterPosition(t)),a.y=p.y),a.id=f;var g=this.body.functions.createNode(a,Uh);g.containedNodes=t,g.containedEdges=e,g.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[a.id]=g,this._clusterEdges(t,e,a,i.clusterEdgeProperties),a.id=void 0,!0===n&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e,i=xr(t),n=t[i[0]].x,r=t[i[0]].x,o=t[i[0]].y,s=t[i[0]].y,a=1;a<i.length;a++)n=(e=t[i[a]]).x<n?e.x:n,r=e.x>r?e.x:r,o=e.y<o?e.y:o,s=e.y>s?e.y:s;return{x:.5*(n+r),y:.5*(o+s)}}},{key:"openCluster",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var n=this.body.nodes[t];if(void 0===n)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==n.isCluster||void 0===n.containedNodes||void 0===n.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var r=this.findNode(t),o=Po(r).call(r,t)-1;if(o>=0){var s=r[o];return this.body.nodes[s]._openChildCluster(t),delete this.body.nodes[t],void(!0===i&&this.body.emitter.emit("_dataChanged"))}var a=n.containedNodes,l=n.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var c={},u={x:n.x,y:n.y};for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h)){var d=this.body.nodes[h];c[h]={x:d.x,y:d.y}}var A=e.releaseFunction(u,c);for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)){var p=this.body.nodes[f];void 0!==A[f]&&(p.x=void 0===A[f].x?n.x:A[f].x,p.y=void 0===A[f].y?n.y:A[f].y)}}else il(a,(function(t){!1===t.options.fixed.x&&(t.x=n.x),!1===t.options.fixed.y&&(t.y=n.y)}));for(var g in a)if(Object.prototype.hasOwnProperty.call(a,g)){var m=this.body.nodes[g];m.vx=n.vx,m.vy=n.vy,m.setOptions({physics:!0}),delete this.clusteredNodes[g]}for(var v=[],y=0;y<n.edges.length;y++)v.push(n.edges[y]);for(var b=0;b<v.length;b++){for(var _=v[b],w=this._getConnectedId(_,t),x=this.clusteredNodes[w],C=0;C<_.clusteringEdgeReplacingIds.length;C++){var E=_.clusteringEdgeReplacingIds[C],k=this.body.edges[E];if(void 0!==k)if(void 0!==x){var T=this.body.nodes[x.clusterId];T.containedEdges[k.id]=k,delete l[k.id];var B=k.fromId,S=k.toId;k.toId==w?S=x.clusterId:B=x.clusterId,this._createClusteredEdge(B,S,k,T.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(k)}_.remove()}for(var P in l)Object.prototype.hasOwnProperty.call(l,P)&&this._restoreEdge(l[P]);delete this.body.nodes[t],!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e,i=[],n=0;void 0!==this.clusteredNodes[t]&&n<100;){if(void 0===(e=this.body.nodes[t]))return[];i.push(e.id),t=this.clusteredNodes[t].clusterId,n++}return void 0===(e=this.body.nodes[t])?[]:(i.push(e.id),Fr(i).call(i),i)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),n=0;n<i.length;n++)this.body.edges[i[n]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return Fr(e).call(e),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],i=[],n=[],r=0;e.length>0&&r<100;){var o=e.pop();if(void 0!==o){var s=this.body.edges[o];if(void 0!==s){r++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)n.push(o);else for(var l=0;l<a.length;++l){var c=a[l];-1===Po(e).call(e,a)&&-1===Po(i).call(i,a)&&e.push(c)}i.push(o)}}}return n}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,n=0,r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];o.edges.length>n&&(n=o.edges.length),t+=o.edges.length,e+=Math.pow(o.edges.length,2),i+=1}t/=i;var s=(e/=i)-Math.pow(t,2),a=Math.sqrt(s),l=Math.floor(t+2*a);return l>n&&(l=n),l}},{key:"_createClusteredEdge",value:function(t,e,i,n,r){var o=jh.cloneOptions(i,"edge");Ka(o,n),o.from=t,o.to=e,o.id="clusterEdge:"+zh(),void 0!==r&&Ka(o,r);var s=this.body.functions.createEdge(o);return s.clusteringEdgeReplacingIds=[i.id],s.connect(),this.body.edges[s.id]=s,s}},{key:"_clusterEdges",value:function(t,e,i,n){if(e instanceof _h){var r=e,o={};o[r.id]=r,e=o}if(t instanceof zu){var s=t,a={};a[s.id]=s,t=a}if(null==i)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===n&&(n=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,n),e)if(Object.prototype.hasOwnProperty.call(e,l)&&void 0!==this.body.edges[l]){var c=this.body.edges[l];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(this.clusteredNodes[u]={clusterId:i.id,node:this.body.nodes[u]},this.body.nodes[u].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;if(void 0!==i)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return il(t,(function(t){e(t)&&i.push(t)})),i}},{key:"_updateState",value:function(){var t,e=this,i=[],n={},r=function(t){il(e.body.nodes,(function(e){!0===e.isCluster&&t(e)}))};for(t in this.clusteredNodes)Object.prototype.hasOwnProperty.call(this.clusteredNodes,t)&&void 0===this.body.nodes[t]&&i.push(t);r((function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]}));for(var o=0;o<i.length;o++)delete this.clusteredNodes[i[o]];il(this.clusteredEdges,(function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()||(n[t]=t)})),r((function(t){il(t.containedEdges,(function(t,e){t.endPointsValid()||n[e]||(n[e]=e)}))})),il(this.body.edges,(function(t,i){var r=!0,o=t.clusteringEdgeReplacingIds;if(void 0!==o){var s=0;il(o,(function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()&&(s+=1)})),r=s>0}t.endPointsValid()&&r||(n[i]=i)})),r((function(t){il(n,(function(i){delete t.containedEdges[i],il(t.edges,(function(r,o){r.id!==i?r.clusteringEdgeReplacingIds=e._filter(r.clusteringEdgeReplacingIds,(function(t){return!n[t]})):t.edges[o]=null})),t.edges=e._filter(t.edges,(function(t){return null!==t}))}))})),il(n,(function(t){delete e.clusteredEdges[t]})),il(n,(function(t){delete e.body.edges[t]})),il(xr(this.body.edges),(function(t){var i=e.body.edges[t],n=e._isClusteredNode(i.fromId)||e._isClusteredNode(i.toId);if(n!==e._isClusteredEdge(i.id))if(n){var r=e._getClusterNodeForNode(i.fromId);void 0!==r&&e._clusterEdges(e.body.nodes[i.fromId],i,r);var o=e._getClusterNodeForNode(i.toId);void 0!==o&&e._clusterEdges(e.body.nodes[i.toId],i,o)}else delete e._clusterEdges[t],e._restoreEdge(i)}));for(var s=!1,a=!0,l=function(){var t=[];r((function(e){var i=xr(e.containedNodes).length,n=!0===e.options.allowSingleNodeCluster;(n&&i<1||!n&&i<2)&&t.push(e.id)}));for(var i=0;i<t.length;++i)e.openCluster(t[i],{},!1);a=t.length>0,s=s||a};a;)l();s&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}();function Hh(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Gh(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gh(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Gh(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Vh=function(){function t(e,i){var n;Mn(this,t),void 0!==window&&(n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===n?function(t){t()}:n,this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},dt(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.on("dragStart",(function(){e.dragging=!0})),this.body.emitter.on("dragEnd",(function(){e.dragging=!1})),this.body.emitter.on("zoom",(function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=Vo((function(){var t;e.zooming=!1,bt(t=e._requestRedraw).call(t,e)()}),250)})),this.body.emitter.on("_resizeNodes",(function(){e._resizeNodes()})),this.body.emitter.on("_redraw",(function(){!1===e.renderingActive&&e._redraw()})),this.body.emitter.on("_blockRedraw",(function(){e.allowRedraw=!1})),this.body.emitter.on("_allowRedraw",(function(){e.allowRedraw=!0,e.redrawRequested=!1})),this.body.emitter.on("_requestRedraw",bt(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",(function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()})),this.body.emitter.on("_stopRendering",(function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0})),this.body.emitter.on("destroy",(function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,!0===e.requiresTimeout?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()}))}},{key:"setOptions",value:function(t){void 0!==t&&Xa(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var i,n=window;return!0===this.requiresTimeout?i=Vo(t,e):n.requestAnimationFrame&&(i=n.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){var t;!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(bt(t=this._renderStep).call(t,this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame((function(){t._redraw(!1)}),0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var e={drawExternalLabels:null};0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),n=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,n,r),0===this.canvas.frame.clientWidth)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(i),!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag){var o=this._drawNodes(i,t).drawExternalLabels;e.drawExternalLabels=o}!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(i),null!=e.drawExternalLabels&&e.drawExternalLabels(),!1===t&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),!0===t&&i.clearRect(0,0,n,r)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,i=this.body.nodes;for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&((e=i[n]).resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.nodes,o=this.body.nodeIndices,s=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),u=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:u.y,right:u.x},d=[],A=0;A<o.length;A++)if((e=r[o[A]]).hover)a.push(o[A]);else if(e.isSelected())s.push(o[A]);else if(!0===n){var f=e.draw(t);null!=f.drawExternalLabel&&d.push(f.drawExternalLabel)}else if(!0===e.isBoundingBoxOverlappingWith(h)){var p=e.draw(t);null!=p.drawExternalLabel&&d.push(p.drawExternalLabel)}else e.updateBoundingBox(t,e.selected);var g=s.length,m=a.length;for(i=0;i<g;i++){var v=(e=r[s[i]]).draw(t);null!=v.drawExternalLabel&&d.push(v.drawExternalLabel)}for(i=0;i<m;i++){var y=(e=r[a[i]]).draw(t);null!=y.drawExternalLabel&&d.push(y.drawExternalLabel)}return{drawExternalLabels:function(){var t,e=Hh(d);try{for(e.s();!(t=e.n()).done;)(0,t.value)()}catch(t){e.e(t)}finally{e.f()}}}}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,n=0;n<i.length;n++){var r=e[i[n]];!0===r.connected&&r.draw(t)}}},{key:"_drawArrows",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,n=0;n<i.length;n++){var r=e[i[n]];!0===r.connected&&r.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=Po(t).call(t,"msie 9.0")||-1!=Po(t).call(t,"safari")&&Po(t).call(t,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),t}(),Wh=F.setInterval;function qh(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)}function Qh(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)}var Yh=function(){function t(e){Mn(this,t),this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},dt(this.options,this.defaultOptions),this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.once("resize",(function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)})),this.body.emitter.on("setSize",bt(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",(function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()}))}},{key:"setOptions",value:function(t){var e,i,n,r,o,s=this;if(void 0!==t&&Xa(["width","height","autoResize"],this.options,t),this._cleanUp(),!0===this.options.autoResize){var a;if(window.ResizeObserver){var l=new ResizeObserver((function(){!0===s.setSize()&&s.body.emitter.emit("_requestRedraw")})),c=this.frame;l.observe(c),this._cleanupCallbacks.push((function(){l.unobserve(c)}))}else{var u=Wh((function(){!0===s.setSize()&&s.body.emitter.emit("_requestRedraw")}),1e3);this._cleanupCallbacks.push((function(){clearInterval(u)}))}var h=bt(a=this._onResize).call(a,this);e=window,i="resize",n=h,e.addEventListener?(void 0===r&&(r=!1),"mousewheel"===i&&$r(o=navigator.userAgent).call(o,"Firefox")&&(i="DOMMouseScroll"),e.addEventListener(i,n,r)):e.attachEvent("on"+i,n),this._cleanupCallbacks.push((function(){!function(t,e,i,n){var r;t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&$r(r=navigator.userAgent).call(r,"Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)}(window,"resize",h)}))}}},{key:"_cleanUp",value:function(){var t,e,i;Mr(t=Fr(e=Gr(i=this._cleanupCallbacks).call(i,0)).call(e)).call(t,(function(t){try{t()}catch(t){console.error(t)}}))}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale,this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==Po(t).call(t,"%")||-1!==Po(t).call(t,"px"))return t;if(-1===Po(t).call(t,"%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new El(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:El.DIRECTION_ALL}),qh(this.hammer,(function(e){t.body.eventListeners.onTouch(e)})),this.hammer.on("tap",(function(e){t.body.eventListeners.onTap(e)})),this.hammer.on("doubletap",(function(e){t.body.eventListeners.onDoubleTap(e)})),this.hammer.on("press",(function(e){t.body.eventListeners.onHold(e)})),this.hammer.on("panstart",(function(e){t.body.eventListeners.onDragStart(e)})),this.hammer.on("panmove",(function(e){t.body.eventListeners.onDrag(e)})),this.hammer.on("panend",(function(e){t.body.eventListeners.onDragEnd(e)})),this.hammer.on("pinch",(function(e){t.body.eventListeners.onPinch(e)})),this.frame.canvas.addEventListener("wheel",(function(e){t.body.eventListeners.onMouseWheel(e)})),this.frame.canvas.addEventListener("mousemove",(function(e){t.body.eventListeners.onMouseMove(e)})),this.frame.canvas.addEventListener("contextmenu",(function(e){t.body.eventListeners.onContext(e)})),this.hammerFrame=new El(this.frame),Qh(this.hammerFrame,(function(e){t.body.eventListeners.onRelease(e)}))}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var i=!1,n=this.frame.canvas.width,r=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(o),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var s=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),a=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===s&&this.frame.canvas.height===a||this._getCameraState(o),this.frame.canvas.width!==s&&(this.frame.canvas.width=s,i=!0),this.frame.canvas.height!==a&&(this.frame.canvas.height=a,i=!0)}return!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(n/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}();function Xh(t,e){var i=dt({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!=t?t:{});if(!gr(i.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===i.nodes.length&&(i.nodes=e),!("number"==typeof i.minZoomLevel&&i.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"==typeof i.maxZoomLevel&&i.minZoomLevel<=i.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return i}var Jh=function(){function t(e,i){var n,r,o=this;Mn(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",bt(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",(function(){o.body.emitter.emit("_stopRendering")})),this.body.emitter.on("unlockNode",bt(r=this.releaseNode).call(r,this))}return Dn(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=Xh(t,this.body.nodeIndices);var i,n,r=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(0===r||0===o)n=1,i=jh.getRange(this.body.nodes,t.nodes);else if(!0===e){var s=0;for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&!0===this.body.nodes[a].predefinedPosition&&(s+=1);if(s>.5*this.body.nodeIndices.length)return void this.fit(t,!1);i=jh.getRange(this.body.nodes,t.nodes),n=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,n*=Math.min(r/600,o/600)}else{this.body.emitter.emit("_resizeNodes"),i=jh.getRange(this.body.nodes,t.nodes);var l=r/(1.1*Math.abs(i.maxX-i.minX)),c=o/(1.1*Math.abs(i.maxY-i.minY));n=l<=c?l:c}n>t.maxZoomLevel?n=t.maxZoomLevel:n<t.minZoomLevel&&(n=t.minZoomLevel);var u={position:jh.findCenter(i),scale:n,animation:t.animation};this.moveTo(u)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0!==t){if(null!=t.offset){if(null!=t.offset.x){if(t.offset.x=+t.offset.x,!Ic(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(null!=t.offset.y){if(t.offset.y=+t.offset.y,!Ic(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(null!=t.position){if(null!=t.position.x){if(t.position.x=+t.position.x,!Ic(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(null!=t.position.y){if(t.position.y=+t.position.y,!Ic(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(null!=t.scale){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e,i,n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),r=n.x-t.position.x,o=n.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+r*this.targetScale+t.offset.x,y:this.sourceTranslation.y+o*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=bt(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=bt(i=this._transitionRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=i.x-t,r=i.y-e,o=this.body.view.translation,s={x:o.x+n*this.body.view.scale+this.lockedOnNodeOffset.x,y:o.y+r*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e,i=pl[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*i,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*i,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*i},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=bt(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();function Kh(t){var e,i=t&&t.preventDefault||!1,n=t&&t.container||window,r={},o={keydown:{},keyup:{}},s={};for(e=97;e<=122;e++)s[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)s[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(t){c(t,"keydown")},l=function(t){c(t,"keyup")},c=function(t,e){if(void 0!==o[e][t.keyCode]){for(var n=o[e][t.keyCode],r=0;r<n.length;r++)(void 0===n[r].shift||1==n[r].shift&&1==t.shiftKey||0==n[r].shift&&0==t.shiftKey)&&n[r].fn(t);1==i&&t.preventDefault()}};return r.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===o[i][s[t].code]&&(o[i][s[t].code]=[]),o[i][s[t].code].push({fn:e,shift:s[t].shift})},r.bindAll=function(t,e){for(var i in void 0===e&&(e="keydown"),s)s.hasOwnProperty(i)&&r.bind(i,t,e)},r.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},r.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],r=o[i][s[t].code];if(void 0!==r)for(var a=0;a<r.length;a++)r[a].fn==e&&r[a].shift==s[t].shift||n.push(o[i][s[t].code][a]);o[i][s[t].code]=n}else o[i][s[t].code]=[]},r.reset=function(){o={keydown:{},keyup:{}}},r.destroy=function(){o={keydown:{},keyup:{}},n.removeEventListener("keydown",a,!0),n.removeEventListener("keyup",l,!0)},n.addEventListener("keydown",a,!0),n.addEventListener("keyup",l,!0),r}var $h=function(){function t(e,i){var n=this;Mn(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",(function(){n.activated=!0,n.configureKeyboardBindings()})),this.body.emitter.on("deactivate",(function(){n.activated=!1,n.configureKeyboardBindings()})),this.body.emitter.on("destroy",(function(){void 0!==n.keycharm&&n.keycharm.destroy()})),this.options={}}return Dn(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var r,o,s=new El(this.navigationDOM[e[n]]);qh(s,"_fit"===i[n]?bt(r=this._fit).call(r,this):bt(o=this.bindToRedraw).call(o,this,i[n])),this.navigationHammers.push(s)}var a=new El(this.canvas.frame);Qh(a,(function(){t._stopMovement()})),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){var e;void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=bt(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,r=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,r=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t,e,i,n,r,o,s,a,l,c,u,h,d,A,f,p,g,m,v,y,b,_,w,x,C=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=Kh({container:window,preventDefault:!0}):this.keycharm=Kh({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(bt(t=this.keycharm).call(t,"up",(function(){C.bindToRedraw("_moveUp")}),"keydown"),bt(e=this.keycharm).call(e,"down",(function(){C.bindToRedraw("_moveDown")}),"keydown"),bt(i=this.keycharm).call(i,"left",(function(){C.bindToRedraw("_moveLeft")}),"keydown"),bt(n=this.keycharm).call(n,"right",(function(){C.bindToRedraw("_moveRight")}),"keydown"),bt(r=this.keycharm).call(r,"=",(function(){C.bindToRedraw("_zoomIn")}),"keydown"),bt(o=this.keycharm).call(o,"num+",(function(){C.bindToRedraw("_zoomIn")}),"keydown"),bt(s=this.keycharm).call(s,"num-",(function(){C.bindToRedraw("_zoomOut")}),"keydown"),bt(a=this.keycharm).call(a,"-",(function(){C.bindToRedraw("_zoomOut")}),"keydown"),bt(l=this.keycharm).call(l,"[",(function(){C.bindToRedraw("_zoomOut")}),"keydown"),bt(c=this.keycharm).call(c,"]",(function(){C.bindToRedraw("_zoomIn")}),"keydown"),bt(u=this.keycharm).call(u,"pageup",(function(){C.bindToRedraw("_zoomIn")}),"keydown"),bt(h=this.keycharm).call(h,"pagedown",(function(){C.bindToRedraw("_zoomOut")}),"keydown"),bt(d=this.keycharm).call(d,"up",(function(){C.unbindFromRedraw("_moveUp")}),"keyup"),bt(A=this.keycharm).call(A,"down",(function(){C.unbindFromRedraw("_moveDown")}),"keyup"),bt(f=this.keycharm).call(f,"left",(function(){C.unbindFromRedraw("_moveLeft")}),"keyup"),bt(p=this.keycharm).call(p,"right",(function(){C.unbindFromRedraw("_moveRight")}),"keyup"),bt(g=this.keycharm).call(g,"=",(function(){C.unbindFromRedraw("_zoomIn")}),"keyup"),bt(m=this.keycharm).call(m,"num+",(function(){C.unbindFromRedraw("_zoomIn")}),"keyup"),bt(v=this.keycharm).call(v,"num-",(function(){C.unbindFromRedraw("_zoomOut")}),"keyup"),bt(y=this.keycharm).call(y,"-",(function(){C.unbindFromRedraw("_zoomOut")}),"keyup"),bt(b=this.keycharm).call(b,"[",(function(){C.unbindFromRedraw("_zoomOut")}),"keyup"),bt(_=this.keycharm).call(_,"]",(function(){C.unbindFromRedraw("_zoomIn")}),"keyup"),bt(w=this.keycharm).call(w,"pageup",(function(){C.unbindFromRedraw("_zoomIn")}),"keyup"),bt(x=this.keycharm).call(x,"pagedown",(function(){C.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),t}();function td(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ed=function(){function t(e,i,n){var r,o,s,a,l,c,u,h,d,A,f,p,g;Mn(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.navigationHandler=new $h(e,i),this.body.eventListeners.onTap=bt(r=this.onTap).call(r,this),this.body.eventListeners.onTouch=bt(o=this.onTouch).call(o,this),this.body.eventListeners.onDoubleTap=bt(s=this.onDoubleTap).call(s,this),this.body.eventListeners.onHold=bt(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=bt(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=bt(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=bt(u=this.onDragEnd).call(u,this),this.body.eventListeners.onMouseWheel=bt(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=bt(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=bt(A=this.onMouseMove).call(A,this),this.body.eventListeners.onRelease=bt(f=this.onRelease).call(f,this),this.body.eventListeners.onContext=bt(p=this.onContext).call(p,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=bt(g=this.getPointer).call(g,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},dt(this.options,this.defaultOptions),this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",(function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer}))}},{key:"setOptions",value:function(t){void 0!==t&&(Ja(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),fl(this.options,t,"keyboard"),t.tooltip&&(dt(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=sl(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-(e=this.canvas.frame.canvas,e.getBoundingClientRect().left),y:t.y-el(this.canvas.frame.canvas)};var e}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e),this.selectionHandler.generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,e){var i=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];-1===Po(e).call(e,r)&&i.push(r)}return i};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=dt({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}if(void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var n,r=function(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return td(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?td(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(this.selectionHandler.getSelectedNodes());try{for(r.s();!(n=r.n()).done;){var o=n.value,s={id:o.id,node:o,x:o.x,y:o.y,xFixed:o.options.fixed.x,yFixed:o.options.fixed.y};o.options.fixed.x=!0,o.options.fixed.y=!0,this.drag.selection.push(s)}}catch(t){r.e(t)}finally{r.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler.generateClickEvent("dragging",t,i);var r=i.x-this.drag.pointer.x,o=i.y-this.drag.pointer.y;Mr(n).call(n,(function(t){var i=t.node;!1===t.xFixed&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+r)),!1===t.yFixed&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+o))})),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var s=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var e=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var n=this.body.selectionBox.position,r={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},o=ao(i=this.body.nodeIndices).call(i,(function(t){var i=e.body.nodes[t];return i.x>=r.minX&&i.x<=r.maxX&&i.y>=r.minY&&i.y<=r.maxY}));Mr(o).call(o,(function(t){return e.selectionHandler.selectObject(e.body.nodes[t])}));var s=this.getPointer(t.center);this.selectionHandler.commitAndEmit(s,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var a=this.drag.selection;a&&a.length?(Mr(a).call(a,(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed})),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var n=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=t/i,s=(1-o)*e.x+r.x*o,a=(1-o)*e.y+r.y*o;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},null!=n){var l=this.canvas.canvasToDOM(n);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){if(0!==t.deltaY){var e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Vo((function(){return e._checkShowPopup(i)}),this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:i,right:e,bottom:i},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,s="node";if(void 0===this.popupObj){for(var a,l=this.body.nodeIndices,c=this.body.nodes,u=[],h=0;h<l.length;h++)!0===(a=c[l[h]]).isOverlappingWith(n)&&(o=!0,void 0!==a.getTitle()&&u.push(l[h]));u.length>0&&(this.popupObj=c[u[u.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var d,A=this.body.edgeIndices,f=this.body.edges,p=[],g=0;g<A.length;g++)!0===(d=f[A[g]]).isOverlappingWith(n)&&!0===d.connected&&void 0!==d.getTitle()&&p.push(A[g]);p.length>0&&(this.popupObj=f[p[p.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new kl(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var n=this.selectionHandler.getNodeAt(t);i=void 0!==n&&n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}();yc("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),kc);var id=F.Set,nd=hc.getWeakData,rd=$t.set,od=$t.getterFor,sd=Hi.find,ad=Hi.findIndex,ld=0,cd=function(t){return t.frozen||(t.frozen=new ud)},ud=function(){this.entries=[]},hd=function(t,e){return sd(t.entries,(function(t){return t[0]===e}))};ud.prototype={get:function(t){var e=hd(this,t);if(e)return e[1]},has:function(t){return!!hd(this,t)},set:function(t,e){var i=hd(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=ad(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}};var dd={getConstructor:function(t,e,i,n){var r=t((function(t,o){fc(t,r,e),rd(t,{type:e,id:ld++,frozen:void 0}),null!=o&&Ac(o,t[n],{that:t,AS_ENTRIES:i})})),o=od(e),s=function(t,e,i){var n=o(t),r=nd(z(e),!0);return!0===r?cd(n).set(e,i):r[n.id]=i,t};return bc(r.prototype,{delete:function(t){var e=o(this);if(!y(t))return!1;var i=nd(t);return!0===i?cd(e).delete(t):i&&w(i,e.id)&&delete i[e.id]},has:function(t){var e=o(this);if(!y(t))return!1;var i=nd(t);return!0===i?cd(e).has(t):i&&w(i,e.id)}}),bc(r.prototype,i?{get:function(t){var e=o(this);if(y(t)){var i=nd(t);return!0===i?cd(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),r}};r((function(t){var e,i=$t.enforce,n=!s.ActiveXObject&&"ActiveXObject"in s,r=Object.isExtensible,o=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},a=t.exports=yc("WeakMap",o,dd);if(Nt&&n){e=dd.getConstructor(o,"WeakMap",!0),hc.REQUIRED=!0;var l=a.prototype,c=l.delete,u=l.has,h=l.get,d=l.set;bc(l,{delete:function(t){if(y(t)&&!r(t)){var n=i(this);return n.frozen||(n.frozen=new e),c.call(this,t)||n.frozen.delete(t)}return c.call(this,t)},has:function(t){if(y(t)&&!r(t)){var n=i(this);return n.frozen||(n.frozen=new e),u.call(this,t)||n.frozen.has(t)}return u.call(this,t)},get:function(t){if(y(t)&&!r(t)){var n=i(this);return n.frozen||(n.frozen=new e),u.call(this,t)?h.call(this,t):n.frozen.get(t)}return h.call(this,t)},set:function(t,n){if(y(t)&&!r(t)){var o=i(this);o.frozen||(o.frozen=new e),u.call(this,t)?d.call(this,t,n):o.frozen.set(t,n)}else d.call(this,t,n);return this}})}}));var Ad,fd,pd,gd,md,vd=F.WeakMap;function yd(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function bd(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i}function _d(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return wd(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wd(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function wd(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function xd(t,e){var i,n=new id,r=_d(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;t.has(o)||n.add(o)}}catch(t){r.e(t)}finally{r.f()}return n}var Cd=function(){function t(){Mn(this,t),Ad.set(this,new id),fd.set(this,new id)}return Dn(t,[{key:"size",get:function(){return yd(this,fd).size}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0,r=e;n<r.length;n++){var o=r[n];yd(this,fd).add(o)}}},{key:"delete",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0,r=e;n<r.length;n++){var o=r[n];yd(this,fd).delete(o)}}},{key:"clear",value:function(){yd(this,fd).clear()}},{key:"getSelection",value:function(){return ur(yd(this,fd))}},{key:"getChanges",value:function(){return{added:ur(xd(yd(this,Ad),yd(this,fd))),deleted:ur(xd(yd(this,fd),yd(this,Ad))),previous:ur(new id(yd(this,Ad))),current:ur(new id(yd(this,fd)))}}},{key:"commit",value:function(){var t=this.getChanges();bd(this,Ad,yd(this,fd)),bd(this,fd,new id(yd(this,Ad)));var e,i=_d(t.added);try{for(i.s();!(e=i.n()).done;)e.value.select()}catch(t){i.e(t)}finally{i.f()}var n,r=_d(t.deleted);try{for(r.s();!(n=r.n()).done;)n.value.unselect()}catch(t){r.e(t)}finally{r.f()}return t}}]),t}();Ad=new vd,fd=new vd;var Ed=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};Mn(this,t),pd.set(this,new Cd),gd.set(this,new Cd),md.set(this,void 0),bd(this,md,e)}return Dn(t,[{key:"sizeNodes",get:function(){return yd(this,pd).size}},{key:"sizeEdges",get:function(){return yd(this,gd).size}},{key:"getNodes",value:function(){return yd(this,pd).getSelection()}},{key:"getEdges",value:function(){return yd(this,gd).getSelection()}},{key:"addNodes",value:function(){var t;(t=yd(this,pd)).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=yd(this,gd)).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){yd(this,pd).delete(t)}},{key:"deleteEdges",value:function(t){yd(this,gd).delete(t)}},{key:"clear",value:function(){yd(this,pd).clear(),yd(this,gd).clear()}},{key:"commit",value:function(){for(var t,e,i={nodes:yd(this,pd).commit(),edges:yd(this,gd).commit()},n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=yd(this,md)).call.apply(t,fr(e=[this,i]).call(e,r)),i}}]),t}();function kd(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Td(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Td(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function Td(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}pd=new vd,gd=new vd,md=new vd;var Bd=function(){function t(e,i){var n=this;Mn(this,t),this.body=e,this.canvas=i,this._selectionAccumulator=new Ed,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},dt(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",(function(){n.updateSelection()}))}return Dn(t,[{key:"setOptions",value:function(t){void 0!==t&&Xa(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}},{key:"generateClickEvent",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(e,i);if(!0===r)o.nodes=[],o.edges=[];else{var s=this.getSelection();o.nodes=s.nodes,o.edges=s.edges}void 0!==n&&(o.previousSelection=n),"click"==t&&(o.items=this.getClickedItems(i)),void 0!==e.controlEdge&&(o.controlEdge=e.controlEdge),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof zu?(!0===i&&(e=this._selectionAccumulator).addEdges.apply(e,ur(t.edges)),this._selectionAccumulator.addNodes(t)):this._selectionAccumulator.addEdges(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodeIndices[n];i[r].isOverlappingWith(t)&&e.push(r)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._pointerToPositionObject(t),n=this._getAllNodesOverlappingWith(i);return n.length>0?!0===e?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var r=this.body.edgeIndices[n];i[r].isOverlappingWith(t)&&e.push(r)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.canvas.DOMtoCanvas(t),n=10,r=null,o=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var a=this.body.edgeIndices[s],l=o[a];if(l.connected){var c=l.from.x,u=l.from.y,h=l.to.x,d=l.to.y,A=l.edgeType.getDistanceToEdge(c,u,h,d,i.x,i.y);A<n&&(r=a,n=A)}}return null!==r?!0===e?this.body.edges[r]:r:void 0}},{key:"_addToHover",value:function(t){t instanceof zu?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){var e;t instanceof zu?(this._selectionAccumulator.deleteNodes(t),(e=this._selectionAccumulator).deleteEdges.apply(e,ur(t.edges))):this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof zu?(n.node=i.id,this.body.emitter.emit("blurNode",n)):(n.edge=i.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e),r=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),r=!0,i instanceof zu?(n.node=i.id,this.body.emitter.emit("hoverNode",n)):(n.edge=i.id,this.body.emitter.emit("hoverEdge",n))),r}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var n=!1;for(var r in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,r)&&(void 0===i||i instanceof zu&&i.id!=r||i instanceof _h)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[r]),delete this.hoverObj.nodes[r],n=!0);for(var o in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,o)&&(!0===n?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===i||i instanceof _h&&i.id!=o||i instanceof zu&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],n=!0));if(void 0!==i){var s=xr(this.hoverObj.edges).length,a=xr(this.hoverObj.nodes).length;(n||i instanceof _h&&0===s&&0===a||i instanceof zu&&0===s&&0===a)&&(n=this.emitHoverEvent(t,e,i)),i instanceof zu&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)}!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,e){var i=!1,n=this._selectionAccumulator.commit(),r={nodes:n.nodes.previous,edges:n.edges.previous};n.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",e,t,r),i=!0),n.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",e,t,r),i=!0),n.nodes.added.length>0&&(this.generateClickEvent("selectNode",e,t),i=!0),n.edges.added.length>0&&(this.generateClickEvent("selectEdge",e,t),i=!0),!0===i&&this.generateClickEvent("select",e,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return _r(t=this._selectionAccumulator.getNodes()).call(t,(function(t){return t.id}))}},{key:"getSelectedEdgeIds",value:function(){var t;return _r(t=this._selectionAccumulator.getEdges()).call(t,(function(t){return t.id}))}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes){var i,n=kd(t.nodes);try{for(n.s();!(i=n.n()).done;){var r=i.value,o=this.body.nodes[r];if(!o)throw new RangeError('Node with id "'+r+'" not found');this.selectObject(o,e.highlightEdges)}}catch(t){n.e(t)}finally{n.f()}}if(t.edges){var s,a=kd(t.edges);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=this.body.edges[l];if(!c)throw new RangeError('Edge with id "'+l+'" not found');this.selectObject(c)}}catch(t){a.e(t)}finally{a.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],n=this.body.nodeIndices,r=this.body.nodes,o=n.length-1;o>=0;o--){var s=r[n[o]].getItemsOnPoint(e);i.push.apply(i,s)}for(var a=this.body.edgeIndices,l=this.body.edges,c=a.length-1;c>=0;c--){var u=l[a[c]].getItemsOnPoint(e);i.push.apply(i,u)}return i}}]),t}(),Sd=[],Pd=Sd.sort,Md=a((function(){Sd.sort(void 0)})),Id=a((function(){Sd.sort(null)})),Od=Er("sort");V({target:"Array",proto:!0,forced:Md||!Id||!Od},{sort:function(t){return void 0===t?Pd.call(lt(this)):Pd.call(lt(this),R(t))}});var Dd=mt("Array").sort,Ld=Array.prototype,Fd=function(t){var e=t.sort;return t===Ld||t instanceof Array&&e===Ld.sort?Dd:e},Rd=function(t){return function(e,i,n,r){R(i);var o=lt(e),s=g(o),a=X(o.length),l=t?a-1:0,c=t?-1:1;if(n<2)for(;;){if(l in s){r=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(r=i(r,s[l],l,o));return r}},Nd=[Rd(!1),Rd(!0)][0],zd=Er("reduce");V({target:"Array",proto:!0,forced:!zd||!re&&fe>79&&fe<83},{reduce:function(t){return Nd(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var jd=mt("Array").reduce,Ud=Array.prototype,Zd=function(t){var e=t.reduce;return t===Ud||t instanceof Array&&e===Ud.reduce?jd:e},Hd=r((function(t,e){!function(t){t.__esModule=!0,t.sort=function(t,e,i,s){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");e?"function"!=typeof e&&(s=i,i=e,e=n):e=n,i||(i=0),s||(s=t.length);var a=s-i;if(!(a<2)){var c=0;if(a<32)o(t,i,s,i+(c=r(t,i,s,e)),e);else{var u=new l(t,e),h=function(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}(a);do{if((c=r(t,i,s,e))<h){var d=a;d>h&&(d=h),o(t,i,i+d,i+c,e),c=d}u.pushRun(i,c),u.mergeRuns(),a-=c,i+=c}while(0!==a);u.forceMergeRuns()}}};var e=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function i(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function n(t,n){if(t===n)return 0;if(~~t===t&&~~n===n){if(0===t||0===n)return t<n?-1:1;if(t<0||n<0){if(n>=0)return-1;if(t>=0)return 1;t=-t,n=-n}var r=i(t),o=i(n),s=0;return r<o?(t*=e[o-r-1],n/=10,s=-1):r>o&&(n*=e[r-o-1],t/=10,s=1),t===n?s:t<n?-1:1}var a=String(t),l=String(n);return a===l?0:a<l?-1:1}function r(t,e,i,n){var r=e+1;if(r===i)return 1;if(n(t[r++],t[e])<0){for(;r<i&&n(t[r],t[r-1])<0;)r++;!function(t,e,i){for(i--;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}(t,e,r)}else for(;r<i&&n(t[r],t[r-1])>=0;)r++;return r-e}function o(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o=t[n],s=e,a=n;s<a;){var l=s+a>>>1;r(o,t[l])<0?a=l:s=l+1}var c=n-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;c>0;)t[s+c]=t[s+c-1],c--}t[s]=o}}function s(t,e,i,n,r,o){var s=0,a=0,l=1;if(o(t,e[i+r])>0){for(a=n-r;l<a&&o(t,e[i+r+l])>0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a),s+=r,l+=r}else{for(a=r+1;l<a&&o(t,e[i+r-l])<=0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a);var c=s;s=r-l,l=r-c}for(s++;s<l;){var u=s+(l-s>>>1);o(t,e[i+u])>0?s=u+1:l=u}return l}function a(t,e,i,n,r,o){var s=0,a=0,l=1;if(o(t,e[i+r])<0){for(a=r+1;l<a&&o(t,e[i+r-l])<0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a);var c=s;s=r-l,l=r-c}else{for(a=n-r;l<a&&o(t,e[i+r+l])>=0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a),s+=r,l+=r}for(s++;s<l;){var u=s+(l-s>>>1);o(t,e[i+u])<0?l=u:s=u+1}return l}var l=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=e,this.compare=i,this.length=e.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return t.prototype.pushRun=function(t,e){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=e,this.stackSize+=1},t.prototype.mergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;if(t>=1&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||t>=2&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},t.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;t>0&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},t.prototype.mergeAt=function(t){var e=this.compare,i=this.array,n=this.runStart[t],r=this.runLength[t],o=this.runStart[t+1],l=this.runLength[t+1];this.runLength[t]=r+l,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var c=a(i[o],i,n,r,0,e);n+=c,0!=(r-=c)&&0!==(l=s(i[n+r-1],i,o,l,l-1,e))&&(r<=l?this.mergeLow(n,r,o,l):this.mergeHigh(n,r,o,l))},t.prototype.mergeLow=function(t,e,i,n){var r=this.compare,o=this.array,l=this.tmp,c=0;for(c=0;c<e;c++)l[c]=o[t+c];var u=0,h=i,d=t;if(o[d++]=o[h++],0!=--n)if(1!==e){for(var A=this.minGallop;;){var f=0,p=0,g=!1;do{if(r(o[h],l[u])<0){if(o[d++]=o[h++],p++,f=0,0==--n){g=!0;break}}else if(o[d++]=l[u++],f++,p=0,1==--e){g=!0;break}}while((f|p)<A);if(g)break;do{if(0!==(f=a(o[h],l,u,e,0,r))){for(c=0;c<f;c++)o[d+c]=l[u+c];if(d+=f,u+=f,(e-=f)<=1){g=!0;break}}if(o[d++]=o[h++],0==--n){g=!0;break}if(0!==(p=s(l[u],o,h,n,0,r))){for(c=0;c<p;c++)o[d+c]=o[h+c];if(d+=p,h+=p,0==(n-=p)){g=!0;break}}if(o[d++]=l[u++],1==--e){g=!0;break}A--}while(f>=7||p>=7);if(g)break;A<0&&(A=0),A+=2}if(this.minGallop=A,A<1&&(this.minGallop=1),1===e){for(c=0;c<n;c++)o[d+c]=o[h+c];o[d+n]=l[u]}else{if(0===e)throw new Error("mergeLow preconditions were not respected");for(c=0;c<e;c++)o[d+c]=l[u+c]}}else{for(c=0;c<n;c++)o[d+c]=o[h+c];o[d+n]=l[u]}else for(c=0;c<e;c++)o[d+c]=l[u+c]},t.prototype.mergeHigh=function(t,e,i,n){var r=this.compare,o=this.array,l=this.tmp,c=0;for(c=0;c<n;c++)l[c]=o[i+c];var u=t+e-1,h=n-1,d=i+n-1,A=0,f=0;if(o[d--]=o[u--],0!=--e)if(1!==n){for(var p=this.minGallop;;){var g=0,m=0,v=!1;do{if(r(l[h],o[u])<0){if(o[d--]=o[u--],g++,m=0,0==--e){v=!0;break}}else if(o[d--]=l[h--],m++,g=0,1==--n){v=!0;break}}while((g|m)<p);if(v)break;do{if(0!=(g=e-a(l[h],o,t,e,e-1,r))){for(e-=g,f=1+(d-=g),A=1+(u-=g),c=g-1;c>=0;c--)o[f+c]=o[A+c];if(0===e){v=!0;break}}if(o[d--]=l[h--],1==--n){v=!0;break}if(0!=(m=n-s(o[u],l,0,n,n-1,r))){for(n-=m,f=1+(d-=m),A=1+(h-=m),c=0;c<m;c++)o[f+c]=l[A+c];if(n<=1){v=!0;break}}if(o[d--]=o[u--],0==--e){v=!0;break}p--}while(g>=7||m>=7);if(v)break;p<0&&(p=0),p+=2}if(this.minGallop=p,p<1&&(this.minGallop=1),1===n){for(f=1+(d-=e),A=1+(u-=e),c=e-1;c>=0;c--)o[f+c]=o[A+c];o[d]=l[h]}else{if(0===n)throw new Error("mergeHigh preconditions were not respected");for(A=d-(n-1),c=0;c<n;c++)o[A+c]=l[c]}}else{for(f=1+(d-=e),A=1+(u-=e),c=e-1;c>=0;c--)o[f+c]=o[A+c];o[d]=l[h]}else for(A=d-(n-1),c=0;c<n;c++)o[A+c]=l[c]},t}()}(e)}));function Gd(t){var e=function(){if("undefined"==typeof Reflect||!lu)return!1;if(lu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(lu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pu(t);if(e){var r=pu(this).constructor;i=lu(n,arguments,r)}else i=n.apply(this,arguments);return Au(this,i)}}var Vd=function(){function t(){Mn(this,t)}return Dn(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),Wd=function(t){du(i,t);var e=Gd(i);function i(t){var n;return Mn(this,i),(n=e.call(this)).layout=t,n}return Dn(i,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){Hd.sort(t,(function(t,e){return t.x-e.x}))}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),i}(Vd),qd=function(t){du(i,t);var e=Gd(i);function i(t){var n;return Mn(this,i),(n=e.call(this)).layout=t,n}return Dn(i,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){Hd.sort(t,(function(t,e){return t.y-e.y}))}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),i}(Vd),Qd=Hi.every,Yd=Er("every");V({target:"Array",proto:!0,forced:!Yd},{every:function(t){return Qd(this,t,arguments.length>1?arguments[1]:void 0)}});var Xd=mt("Array").every,Jd=Array.prototype,Kd=function(t){var e=t.every;return t===Jd||t instanceof Array&&e===Jd.every?Xd:e};function $d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function tA(t,e){var i=new id;return Mr(t).call(t,(function(t){var e;Mr(e=t.edges).call(e,(function(t){t.connected&&i.add(t)}))})),Mr(i).call(i,(function(t){var i=t.from.id,n=t.to.id;null==e[i]&&(e[i]=0),(null==e[n]||e[i]>=e[n])&&(e[n]=e[i]+1)})),e}function eA(t,e,i,n){var r,o,s=Do(null),a=Zd(r=ur(Jc(n).call(n))).call(r,(function(t,e){return t+1+e.edges.length}),0),l=i+"Id",c="to"===i?1:-1,u=function(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return $d(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(n);try{var h=function(){var r=ar(o.value,2),u=r[0],h=r[1];if(!n.has(u)||!t(h))return"continue";s[u]=0;for(var d=[h],A=0,f=void 0,p=function(){var t,r;if(!n.has(u))return"continue";var o=s[f.id]+c;if(Mr(t=ao(r=f.edges).call(r,(function(t){return t.connected&&t.to!==t.from&&t[i]!==f&&n.has(t.toId)&&n.has(t.fromId)}))).call(t,(function(t){var n=t[l],r=s[n];(null==r||e(o,r))&&(s[n]=o,d.push(t[i]))})),A>a)return{v:{v:tA(n,s)}};++A};f=d.pop();){var g=p();if("continue"!==g&&"object"===cr(g))return g.v}};for(u.s();!(o=u.n()).done;){var d=h();if("continue"!==d&&"object"===cr(d))return d.v}}catch(t){u.e(t)}finally{u.f()}return s}var iA=function(){function t(){Mn(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return Dn(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,i={};return function t(n){if(void 0!==i[n])return i[n];var r=e.levels[n];if(e.childrenReference[n]){var o=e.childrenReference[n];if(o.length>0)for(var s=0;s<o.length;s++)r=Math.max(r,t(o[s]))}return i[n]=r,r}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&void 0!==this.levels[i]&&(e=Math.min(this.levels[i],e));for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0!==this.levels[n]&&(this.levels[n]-=e)}},{key:"getTreeSize",value:function(t,e){var i=1e9,n=-1e9,r=1e9,o=-1e9;for(var s in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,s)&&this.trees[s]===e){var a=t[s];i=Math.min(a.x,i),n=Math.max(a.x,n),r=Math.min(a.y,r),o=Math.max(a.y,o)}return{min_x:i,max_x:n,min_y:r,max_y:o}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],n=this.parentReference[e.id];if(void 0===i||void 0===n)return!1;for(var r=0;r<i.length;r++)for(var o=0;o<n.length;o++)if(i[r]==n[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return xr(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,n=this.distributionOrdering[e];for(var r in n)if(n[r]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),nA=function(){function t(e){Mn(this,t),this.body=e,this._resetRNG(Math.random()+":"+Cr()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},dt(this.options,this.defaultOptions),this.bindEventListeners()}return Dn(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_dataLoaded",(function(){t.layoutNetwork()})),this.body.emitter.on("_resetHierarchicalLayout",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}}))}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,n=i.enabled;if(Xa(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),fl(this.options,t,"hierarchical"),void 0!==t.randomSeed&&this._resetRNG(t.randomSeed),!0===i.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===n)return this.body.emitter.emit("refresh"),Ka(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Fa(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===cr(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var n=t.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(i=n.type),this.optionsBackup.edges={smooth:{enabled:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}},t.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:i,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=t.length+50,i=0;i<t.length;i++){var n=t[i],r=2*Math.PI*this._rng();void 0===n.x&&(n.x=e*Math.cos(r)),void 0===n.y&&(n.y=e*Math.sin(r))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,i=0;i<t.length;i++)!0===this.body.nodes[t[i]].predefinedPosition&&(e+=1);if(e<.5*t.length){var n=0,r=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>r){for(var s=t.length;t.length>r&&n<=10;){n+=1;var a=t.length;if(n%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),a==t.length&&n%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*s)})}n>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var l=0;l<t.length;l++){var c=this.body.nodes[t[l]];!1===c.predefinedPosition&&(c.x+=70*(.5-this._rng()),c.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=jh.getRangeCore(this.body.nodes,this.body.nodeIndices),e=jh.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var n=this.body.nodes[this.body.nodeIndices[i]];n.x-=e.x,n.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t,e,i=!1,n=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new iA,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&(void 0!==(t=this.body.nodes[e]).options.level?(i=!0,this.hierarchical.levels[e]=t.options.level):n=!0);if(!0===n&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var r=this.options.hierarchical.sortMethod;"hubsize"===r?this._determineLevelsByHubsize():"directed"===r?this._determineLevelsDirected():"custom"===r&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},n=function(e,i){var n=t.hierarchical.trees;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&n[r]===e&&t.direction.shift(r,i)},r=function e(i,n){if(!n[i.id]&&(n[i.id]=!0,t.hierarchical.childrenReference[i.id])){var r=t.hierarchical.childrenReference[i.id];if(r.length>0)for(var o=0;o<r.length;o++)e(t.body.nodes[r[o]],n)}},o=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,n=1e9,r=1e9,o=1e9,s=-1e9;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=t.body.nodes[a],c=t.hierarchical.levels[l.id],u=t.direction.getPosition(l),h=ar(t._getSpaceAroundNode(l,e),2),d=h[0],A=h[1];n=Math.min(d,n),r=Math.min(A,r),c<=i&&(o=Math.min(u,o),s=Math.max(u,s))}return[o,s,n,r]},s=function(e,i){var n=t.hierarchical.getMaxLevel(e.id),r=t.hierarchical.getMaxLevel(i.id);return Math.min(n,r)},a=function(e,i,n){for(var r=t.hierarchical,o=0;o<i.length;o++){var s=i[o],a=r.distributionOrdering[s];if(a.length>1)for(var l=0;l<a.length-1;l++){var c=a[l],u=a[l+1];r.hasSameParent(c,u)&&r.inSameSubNetwork(c,u)&&e(c,u,n)}}},l=function(i,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=t.direction.getPosition(i),c=t.direction.getPosition(n),u=Math.abs(c-l),h=t.options.hierarchical.nodeSpacing;if(u>h){var d={},A={};r(i,d),r(n,A);var f=s(i,n),p=o(d,f),g=o(A,f),m=p[1],v=g[0],y=g[2];if(Math.abs(m-v)>h){var b=m-v+h;b<-y+h&&(b=-y+h),b<0&&(t._shiftBlock(n.id,b),e=!0,!0===a&&t._centerParent(n))}}},c=function(n,s){for(var a=s.id,l=s.edges,c=t.hierarchical.levels[s.id],u=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,h={},d=[],A=0;A<l.length;A++){var f=l[A];if(f.toId!=f.fromId){var p=f.toId==a?f.from:f.to;h[l[A].id]=p,t.hierarchical.levels[p.id]<c&&d.push(f)}}var g=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==h[i[r].id]){var o=t.direction.getPosition(h[i[r].id])-e;n+=o/Math.sqrt(o*o+u)}return n},m=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==h[i[r].id]){var o=t.direction.getPosition(h[i[r].id])-e;n-=u*Math.pow(o*o+u,-1.5)}return n},v=function(e,i){for(var n=t.direction.getPosition(s),r={},o=0;o<e;o++){var a=g(n,i),l=m(n,i);if(void 0!==r[n-=Math.max(-40,Math.min(40,Math.round(a/l)))])break;r[n]=o}return n},y=v(n,d);!function(n){var a=t.direction.getPosition(s);if(void 0===i[s.id]){var l={};r(s,l),i[s.id]=l}var c=o(i[s.id]),u=c[2],h=c[3],d=n-a,A=0;d>0?A=Math.min(d,h-t.options.hierarchical.nodeSpacing):d<0&&(A=-Math.min(-d,u-t.options.hierarchical.nodeSpacing)),0!=A&&(t._shiftBlock(s.id,A),e=!0)}(y),function(i){var n=t.direction.getPosition(s),r=ar(t._getSpaceAroundNode(s),2),o=r[0],a=r[1],l=i-n,c=n;l>0?c=Math.min(n+(a-t.options.hierarchical.nodeSpacing),i):l<0&&(c=Math.max(n-(o-t.options.hierarchical.nodeSpacing),i)),c!==n&&(t.direction.setPosition(s,c),e=!0)}(y=v(n,l))};!0===this.options.hierarchical.blockShifting&&(function(i){var n=t.hierarchical.getLevels();n=Fr(n).call(n);for(var r=0;r<5&&(e=!1,a(l,n,!0),!0===e);r++);}(),function(){for(var e in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(i){var n=t.hierarchical.getLevels();n=Fr(n).call(n);for(var r=0;r<20;r++){e=!1;for(var o=0;o<n.length;o++)for(var s=n[o],a=t.hierarchical.distributionOrdering[s],l=0;l<a.length;l++)c(1e3,a[l]);if(!0!==e)break}}(),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=Fr(e).call(e);for(var i=0;i<e.length;i++)for(var n=e[i],r=t.hierarchical.distributionOrdering[n],o=0;o<r.length;o++)t._centerParent(r[o])}(),function(){for(var e=function(){for(var e=[],i=0;i<t.hierarchical.numTrees();i++)e.push(t.direction.getTreeSize(i));return e}(),i=0,r=0;r<e.length-1;r++)i+=e[r].max-e[r+1].min+t.options.hierarchical.treeSpacing,n(r+1,i)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var n=this.hierarchical.levels[t.id];if(void 0!==n){var r=this.hierarchical.distributionIndex[t.id],o=this.direction.getPosition(t),s=this.hierarchical.distributionOrdering[n],a=1e9,l=1e9;if(0!==r){var c=s[r-1];(!0===i&&void 0===e[c.id]||!1===i)&&(a=o-this.direction.getPosition(c))}if(r!=s.length-1){var u=s[r+1];if(!0===i&&void 0===e[u.id]||!1===i){var h=this.direction.getPosition(u);l=Math.min(l,h-o)}}return[a,l]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var n=e[i],r=this.body.nodes[n],o=this.hierarchical.childrenReference[n];if(void 0!==o){var s=this._getCenterPosition(o),a=this.direction.getPosition(r),l=ar(this._getSpaceAroundNode(r),2),c=l[0],u=l[1],h=a-s;(h<0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,s)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(Object.prototype.hasOwnProperty.call(t,e)){var i,n=xr(t[e]);n=this._indexArrayToNodes(n),Fd(i=this.direction).call(i,n);for(var r=0,o=0;o<n.length;o++){var s=n[o];if(void 0===this.positionedNodes[s.id]){var a=this.options.hierarchical.nodeSpacing,l=a*r;r>0&&(l=this.direction.getPosition(n[o-1])+a),this.direction.setPosition(s,l,e),this._validatePositionAndContinue(s,e,l),r++}}}}},{key:"_placeBranchNodes",value:function(t,e){var i,n=this.hierarchical.childrenReference[t];if(void 0!==n){for(var r=[],o=0;o<n.length;o++)r.push(this.body.nodes[n[o]]);Fd(i=this.direction).call(i,r);for(var s=0;s<r.length;s++){var a=r[s],l=this.hierarchical.levels[a.id];if(!(l>e&&void 0===this.positionedNodes[a.id]))return;var c,u=this.options.hierarchical.nodeSpacing;c=0===s?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(r[s-1])+u,this.direction.setPosition(a,c,l),this._validatePositionAndContinue(a,l,c)}var h=this._getCenterPosition(r);this.direction.setPosition(this.body.nodes[t],h,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-n<this.options.hierarchical.nodeSpacing){var r=n+this.options.hierarchical.nodeSpacing-i,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t,e,i={};for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){e=this.body.nodes[t];var n=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,n),void 0===i[n]&&(i[n]={}),i[n][t]=e}return i}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return il(t.edges,(function(t){var n;-1!==Po(n=e.body.edgeIndices).call(n,t.id)&&i.push(t)})),i}},{key:"_getHubSizes",value:function(){var t=this,e={};il(this.body.nodeIndices,(function(i){var n=t.body.nodes[i],r=t._getActiveEdges(n).length;e[r]=!0}));var i=[];return il(e,(function(t){i.push(Number(t))})),Fd(Hd).call(Hd,i,(function(t,e){return e-t})),i}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,i){t.hierarchical.levelDownstream(e,i)},i=this._getHubSizes(),n=function(n){var r=i[n];if(0===r)return"break";il(t.body.nodeIndices,(function(i){var n=t.body.nodes[i];r===t._getActiveEdges(n).length&&t._crawlNetwork(e,i)}))},r=0;r<i.length&&"break"!==n(r);++r);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork((function(e,i,n){var r=t.hierarchical.levels[e.id];void 0===r&&(r=t.hierarchical.levels[e.id]=1e5);var o=(jh.cloneOptions(e,"node"),jh.cloneOptions(i,"node"),void jh.cloneOptions(n,"edge"));t.hierarchical.levels[i.id]=r+o})),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,e=this,i=Zd(t=this.body.nodeIndices).call(t,(function(t,i){return t.set(i,e.body.nodes[i]),t}),new Tc);"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(t){return eA((function(e){var i,n;return Kd(i=ao(n=e.edges).call(n,(function(e){return t.has(e.toId)}))).call(i,(function(t){return t.from===e}))}),(function(t,e){return e<t}),"to",t)}(i):this.hierarchical.levels=function(t){return eA((function(e){var i,n;return Kd(i=ao(n=e.edges).call(n,(function(e){return t.has(e.toId)}))).call(i,(function(t){return t.to===e}))}),(function(t,e){return e>t}),"from",t)}(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork((function(e,i){t.hierarchical.levels[i.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,i.id)})),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,n={},r=function i(r,o){if(void 0===n[r.id]){var s;t.hierarchical.setTreeIndex(r,o),n[r.id]=!0;for(var a=t._getActiveEdges(r),l=0;l<a.length;l++){var c=a[l];!0===c.connected&&(s=c.toId==r.id?c.from:c.to,r.id!=s.id&&(e(r,s,c),i(s,o)))}}};if(void 0===i)for(var o=0,s=0;s<this.body.nodeIndices.length;s++){var a=this.body.nodeIndices[s];void 0===n[a]&&(r(this.body.nodes[a],o),o+=1)}else{var l=this.body.nodes[i];if(void 0===l)return void console.error("Node not found:",i);r(l)}}},{key:"_shiftBlock",value:function(t,e){var i=this,n={};!function t(r){if(!n[r]){n[r]=!0,i.direction.shift(r,e);var o=i.hierarchical.childrenReference[r];if(void 0!==o)for(var s=0;s<o.length;s++)t(o[s])}}(t)}},{key:"_findCommonParent",value:function(t,e){var i=this,n={};return function t(e,n){var r=i.hierarchical.parentReference[n];if(void 0!==r)for(var o=0;o<r.length;o++){var s=r[o];e[s]=!0,t(e,s)}}(n,t),function t(e,n){var r=i.hierarchical.parentReference[n];if(void 0!==r)for(var o=0;o<r.length;o++){var s=r[o];if(void 0!==e[s])return{foundParent:s,withChild:n};var a=t(e,s);if(null!==a.foundParent)return a}return{foundParent:null,withChild:n}}(n,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new Wd(this):new qd(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,i=-1e9,n=0;n<t.length;n++){var r=void 0;if(void 0!==t[n].id)r=t[n];else{var o=t[n];r=this.body.nodes[o]}var s=this.direction.getPosition(r);e=Math.min(e,s),i=Math.max(i,s)}return.5*(e+i)}}]),t}();function rA(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var oA=function(){function t(e,i,n,r){var o,s,a=this;Mn(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.interactionHandler=r,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},dt(this.options,this.defaultOptions),this.body.emitter.on("destroy",(function(){a._clean()})),this.body.emitter.on("_dataChanged",bt(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",bt(s=this._restore).call(s,this))}return Dn(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,Ka(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),n=this.selectionHandler.getSelectedEdgeCount(),r=i+n,o=this.options.locales[this.options.locale],s=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),s=!0),!1!==this.options.addEdge&&(!0===s?this._createSeperator(1):s=!0,this._createAddEdgeButton(o)),1===i&&"function"==typeof this.options.editNode?(!0===s?this._createSeperator(2):s=!0,this._createEditNodeButton(o)):1===n&&0===i&&!1!==this.options.editEdge&&(!0===s?this._createSeperator(3):s=!0,this._createEditEdgeButton(o)),0!==r&&(i>0&&!1!==this.options.deleteNode||0===i&&!1!==this.options.deleteEdge)&&(!0===s&&this._createSeperator(4),this._createDeleteButton(o)),this._bindElementEvents(this.closeDiv,bt(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",bt(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,bt(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",bt(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler.getSelectedNodes()[0];if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=Ka({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,(function(e){null!=e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()}))}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,e,i,n,r;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var o,s=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(s),this._createSeperator(),this._createDescription(s.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,bt(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",bt(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",bt(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",bt(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",bt(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDragStart",bt(r=this._dragStartEdge).call(r,this)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==cr(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t,e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,bt(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0!==this.edgeBeingEditedId){var i,n,r,o,s=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(s.from.x,s.from.y),l=this._getNewTargetNode(s.to.x,s.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",bt(i=this._controlNodeTouch).call(i,this)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",bt(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",bt(r=this._controlNodeDrag).call(r,this)),this._temporaryBindUI("onDragEnd",bt(o=this._controlNodeDragEnd).call(o,this)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(t){var e=s.edgeType.findBorderPositions(t);!1===a.selected&&(a.x=e.from.x,a.y=e.from.y),!1===l.selected&&(l.x=e.to.x,l.y=e.to.y)})),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var c=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(c.from.id,c.to.id)}}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),n=void 0;if(e.length>0){for(var r=0;r<e.length;r++)if(!0===this.body.nodes[e[r]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){var o={nodes:e,edges:i};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(o,(function(e){null!=e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){var t,e;void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",null!==(t=null===(e=this.options.locales[this.options.locale])||void 0===e?void 0:e.close)&&void 0!==t?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=Ka({},this.options.controlNodeStyle);i.id="targetNode"+zh(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var n=this.body.functions.createNode(i);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},Va(this.editModeDiv);var e=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,bt(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(Va(this.editModeDiv),Va(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,e,i=function(t,e){var i;if(void 0===hr||null==Ti(t)){if(gr(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return rA(t,e);var n=pr(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?yi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rA(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=Bi(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(Gr(t=this._domEventListenerCleanupQueue).call(t,0));try{for(i.s();!(e=i.n()).done;)(0,e.value)()}catch(t){i.e(t)}finally{i.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),Va(this.manipulationDiv),Va(this.editModeDiv),Va(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,bt(e=this.addNodeMode).call(e,this))}},{key:"_createAddEdgeButton",value:function(t){var e,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,bt(e=this.addEdgeMode).call(e,this))}},{key:"_createEditNodeButton",value:function(t){var e,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,bt(e=this.editNode).call(e,this))}},{key:"_createEditEdgeButton",value:function(t){var e,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,bt(e=this.editEdgeMode).call(e,this))}},{key:"_createDeleteButton",value:function(t){var e,i;i=this.options.rtl?"vis-delete-rtl":"vis-delete";var n=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,bt(e=this.deleteSelected).call(e,this))}},{key:"_createBackButton",value:function(t){var e,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,bt(e=this.showManipulatorToolbar).call(e,this))}},{key:"_createButton",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=n,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Uo(xr(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,e){var i=new El(t,{});qh(i,e),this._domEventListenerCleanupQueue.push((function(){i.destroy()}));var n=function(t){var i=t.keyCode,n=t.key;"Enter"!==n&&" "!==n&&13!==i&&32!==i||e()};t.addEventListener("keyup",n,!1),this._domEventListenerCleanupQueue.push((function(){t.removeEventListener("keyup",n,!1)}))}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var e;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i,n=Po(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[t]);-1!==n&&Gr(i=this.body.edgeIndices).call(i,n,1)}for(var r=0;r<this.temporaryIds.nodes.length;r++){var o;delete this.body.nodes[this.temporaryIds.nodes[r]];var s,a=Po(o=this.body.nodeIndices).call(o,this.temporaryIds.nodes[r]);-1!==a&&Gr(s=this.body.nodeIndices).call(s,a,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=dt({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],r=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var o=i.isOverlappingWith(e),s=n.isOverlappingWith(e);!0===o?(this.selectedControlNode=i,r.edgeType.from=i):!0===s&&(this.selectedControlNode=n,r.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);void 0!==this.selectedControlNode?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--)if(r[s]!==this.selectedControlNode.id){o=this.body.nodes[r[s]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,n.to.id):this._performEditEdge(n.from.id,o.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=dt({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(i.x,i.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var r=this.body.functions.createEdge({id:"connectionEdge"+zh(),from:i.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--){var a;if(-1===Po(a=this.temporaryIds.nodes).call(a,r[s])){o=this.body.nodes[r[s]];break}}if(t.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(e.x),l.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--){var a;if(-1===Po(a=this.temporaryIds.nodes).call(a,r[s])){o=this.body.nodes[r[s]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(n,o.id)),t.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:zh(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,(function(t){null!=t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()}))}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,n={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,(function(t){null!=t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,n={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label},r=this.options.editEdge;if("object"===cr(r)&&(r=r.editWithoutDrag),"function"==typeof r){if(2!==r.length)throw new Error("The function for edit does not support two arguments (data, callback)");r(n,(function(t){null==t||"editEdge"!==i.inMode?(i.body.edges[n.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}(),sA="string",aA="boolean",lA="number",cA="array",uA="object",hA=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],dA={borderWidth:{number:lA},borderWidthSelected:{number:lA,undefined:"undefined"},brokenImage:{string:sA,undefined:"undefined"},chosen:{label:{boolean:aA,function:"function"},node:{boolean:aA,function:"function"},__type__:{object:uA,boolean:aA}},color:{border:{string:sA},background:{string:sA},highlight:{border:{string:sA},background:{string:sA},__type__:{object:uA,string:sA}},hover:{border:{string:sA},background:{string:sA},__type__:{object:uA,string:sA}},__type__:{object:uA,string:sA}},opacity:{number:lA,undefined:"undefined"},fixed:{x:{boolean:aA},y:{boolean:aA},__type__:{object:uA,boolean:aA}},font:{align:{string:sA},color:{string:sA},size:{number:lA},face:{string:sA},background:{string:sA},strokeWidth:{number:lA},strokeColor:{string:sA},vadjust:{number:lA},multi:{boolean:aA,string:sA},bold:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},boldital:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},ital:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},mono:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},__type__:{object:uA,string:sA}},group:{string:sA,number:lA,undefined:"undefined"},heightConstraint:{minimum:{number:lA},valign:{string:sA},__type__:{object:uA,boolean:aA,number:lA}},hidden:{boolean:aA},icon:{face:{string:sA},code:{string:sA},size:{number:lA},color:{string:sA},weight:{string:sA,number:lA},__type__:{object:uA}},id:{string:sA,number:lA},image:{selected:{string:sA,undefined:"undefined"},unselected:{string:sA,undefined:"undefined"},__type__:{object:uA,string:sA}},imagePadding:{top:{number:lA},right:{number:lA},bottom:{number:lA},left:{number:lA},__type__:{object:uA,number:lA}},label:{string:sA,undefined:"undefined"},labelHighlightBold:{boolean:aA},level:{number:lA,undefined:"undefined"},margin:{top:{number:lA},right:{number:lA},bottom:{number:lA},left:{number:lA},__type__:{object:uA,number:lA}},mass:{number:lA},physics:{boolean:aA},scaling:{min:{number:lA},max:{number:lA},label:{enabled:{boolean:aA},min:{number:lA},max:{number:lA},maxVisible:{number:lA},drawThreshold:{number:lA},__type__:{object:uA,boolean:aA}},customScalingFunction:{function:"function"},__type__:{object:uA}},shadow:{enabled:{boolean:aA},color:{string:sA},size:{number:lA},x:{number:lA},y:{number:lA},__type__:{object:uA,boolean:aA}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:aA,array:cA},borderRadius:{number:lA},interpolation:{boolean:aA},useImageSize:{boolean:aA},useBorderWithImage:{boolean:aA},coordinateOrigin:{string:["center","top-left"]},__type__:{object:uA}},size:{number:lA},title:{string:sA,dom:"dom",undefined:"undefined"},value:{number:lA,undefined:"undefined"},widthConstraint:{minimum:{number:lA},maximum:{number:lA},__type__:{object:uA,boolean:aA,number:lA}},x:{number:lA},y:{number:lA},__type__:{object:uA}},AA={configure:{enabled:{boolean:aA},filter:{boolean:aA,string:sA,array:cA,function:"function"},container:{dom:"dom"},showButton:{boolean:aA},__type__:{object:uA,boolean:aA,string:sA,array:cA,function:"function"}},edges:{arrows:{to:{enabled:{boolean:aA},scaleFactor:{number:lA},type:{string:hA},imageHeight:{number:lA},imageWidth:{number:lA},src:{string:sA},__type__:{object:uA,boolean:aA}},middle:{enabled:{boolean:aA},scaleFactor:{number:lA},type:{string:hA},imageWidth:{number:lA},imageHeight:{number:lA},src:{string:sA},__type__:{object:uA,boolean:aA}},from:{enabled:{boolean:aA},scaleFactor:{number:lA},type:{string:hA},imageWidth:{number:lA},imageHeight:{number:lA},src:{string:sA},__type__:{object:uA,boolean:aA}},__type__:{string:["from","to","middle"],object:uA}},endPointOffset:{from:{number:lA},to:{number:lA},__type__:{object:uA,number:lA}},arrowStrikethrough:{boolean:aA},background:{enabled:{boolean:aA},color:{string:sA},size:{number:lA},dashes:{boolean:aA,array:cA},__type__:{object:uA,boolean:aA}},chosen:{label:{boolean:aA,function:"function"},edge:{boolean:aA,function:"function"},__type__:{object:uA,boolean:aA}},color:{color:{string:sA},highlight:{string:sA},hover:{string:sA},inherit:{string:["from","to","both"],boolean:aA},opacity:{number:lA},__type__:{object:uA,string:sA}},dashes:{boolean:aA,array:cA},font:{color:{string:sA},size:{number:lA},face:{string:sA},background:{string:sA},strokeWidth:{number:lA},strokeColor:{string:sA},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:lA},multi:{boolean:aA,string:sA},bold:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},boldital:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},ital:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},mono:{color:{string:sA},size:{number:lA},face:{string:sA},mod:{string:sA},vadjust:{number:lA},__type__:{object:uA,string:sA}},__type__:{object:uA,string:sA}},hidden:{boolean:aA},hoverWidth:{function:"function",number:lA},label:{string:sA,undefined:"undefined"},labelHighlightBold:{boolean:aA},length:{number:lA,undefined:"undefined"},physics:{boolean:aA},scaling:{min:{number:lA},max:{number:lA},label:{enabled:{boolean:aA},min:{number:lA},max:{number:lA},maxVisible:{number:lA},drawThreshold:{number:lA},__type__:{object:uA,boolean:aA}},customScalingFunction:{function:"function"},__type__:{object:uA}},selectionWidth:{function:"function",number:lA},selfReferenceSize:{number:lA},selfReference:{size:{number:lA},angle:{number:lA},renderBehindTheNode:{boolean:aA},__type__:{object:uA}},shadow:{enabled:{boolean:aA},color:{string:sA},size:{number:lA},x:{number:lA},y:{number:lA},__type__:{object:uA,boolean:aA}},smooth:{enabled:{boolean:aA},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:lA},forceDirection:{string:["horizontal","vertical","none"],boolean:aA},__type__:{object:uA,boolean:aA}},title:{string:sA,undefined:"undefined"},width:{number:lA},widthConstraint:{maximum:{number:lA},__type__:{object:uA,boolean:aA,number:lA}},value:{number:lA,undefined:"undefined"},__type__:{object:uA}},groups:{useDefaultGroups:{boolean:aA},__any__:dA,__type__:{object:uA}},interaction:{dragNodes:{boolean:aA},dragView:{boolean:aA},hideEdgesOnDrag:{boolean:aA},hideEdgesOnZoom:{boolean:aA},hideNodesOnDrag:{boolean:aA},hover:{boolean:aA},keyboard:{enabled:{boolean:aA},speed:{x:{number:lA},y:{number:lA},zoom:{number:lA},__type__:{object:uA}},bindToWindow:{boolean:aA},__type__:{object:uA,boolean:aA}},multiselect:{boolean:aA},navigationButtons:{boolean:aA},selectable:{boolean:aA},selectConnectedEdges:{boolean:aA},hoverConnectedEdges:{boolean:aA},tooltipDelay:{number:lA},zoomView:{boolean:aA},zoomSpeed:{number:lA},__type__:{object:uA}},layout:{randomSeed:{undefined:"undefined",number:lA,string:sA},improvedLayout:{boolean:aA},clusterThreshold:{number:lA},hierarchical:{enabled:{boolean:aA},levelSeparation:{number:lA},nodeSpacing:{number:lA},treeSpacing:{number:lA},blockShifting:{boolean:aA},edgeMinimization:{boolean:aA},parentCentralization:{boolean:aA},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:uA,boolean:aA}},__type__:{object:uA}},manipulation:{enabled:{boolean:aA},initiallyActive:{boolean:aA},addNode:{boolean:aA,function:"function"},addEdge:{boolean:aA,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:uA,boolean:aA,function:"function"}},deleteNode:{boolean:aA,function:"function"},deleteEdge:{boolean:aA,function:"function"},controlNodeStyle:dA,__type__:{object:uA,boolean:aA}},nodes:dA,physics:{enabled:{boolean:aA},barnesHut:{theta:{number:lA},gravitationalConstant:{number:lA},centralGravity:{number:lA},springLength:{number:lA},springConstant:{number:lA},damping:{number:lA},avoidOverlap:{number:lA},__type__:{object:uA}},forceAtlas2Based:{theta:{number:lA},gravitationalConstant:{number:lA},centralGravity:{number:lA},springLength:{number:lA},springConstant:{number:lA},damping:{number:lA},avoidOverlap:{number:lA},__type__:{object:uA}},repulsion:{centralGravity:{number:lA},springLength:{number:lA},springConstant:{number:lA},nodeDistance:{number:lA},damping:{number:lA},__type__:{object:uA}},hierarchicalRepulsion:{centralGravity:{number:lA},springLength:{number:lA},springConstant:{number:lA},nodeDistance:{number:lA},damping:{number:lA},avoidOverlap:{number:lA},__type__:{object:uA}},maxVelocity:{number:lA},minVelocity:{number:lA},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:aA},iterations:{number:lA},updateInterval:{number:lA},onlyDynamicEdges:{boolean:aA},fit:{boolean:aA},__type__:{object:uA,boolean:aA}},timestep:{number:lA},adaptiveTimestep:{boolean:aA},wind:{x:{number:lA},y:{number:lA},__type__:{object:uA}},__type__:{object:uA,boolean:aA}},autoResize:{boolean:aA},clickToUse:{boolean:aA},locale:{string:sA},locales:{__any__:{any:"any"},__type__:{object:uA}},height:{string:sA},width:{string:sA},__type__:{object:uA}},fA={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},pA=function(t,e,i){var n;return!(!$r(t).call(t,"physics")||!$r(n=fA.physics.solver).call(n,e)||i.physics.solver===e||"wind"===e)},gA=Object.freeze({__proto__:null,configuratorHideOption:pA,allOptions:AA,configureOptions:fA}),mA=function(){function t(){Mn(this,t)}return Dn(t,[{key:"getDistances",value:function(t,e,i){for(var n={},r=t.edges,o=0;o<e.length;o++){var s={};n[e[o]]=s;for(var a=0;a<e.length;a++)s[e[a]]=o==a?0:1e9}for(var l=0;l<i.length;l++){var c=r[i[l]];!0===c.connected&&void 0!==n[c.fromId]&&void 0!==n[c.toId]&&(n[c.fromId][c.toId]=1,n[c.toId][c.fromId]=1)}for(var u=e.length,h=0;h<u;h++)for(var d=e[h],A=n[d],f=0;f<u-1;f++)for(var p=e[f],g=n[p],m=f+1;m<u;m++){var v=e[m],y=n[v],b=Math.min(g[v],g[d]+A[v]);g[v]=b,y[p]=b}return n}}]),t}(),vA=function(){function t(e,i,n){Mn(this,t),this.body=e,this.springLength=i,this.springConstant=n,this.distanceSolver=new mA}return Dn(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(n),this._createK_matrix(n),this._createE_matrix();for(var r=.01,o=1,s=0,a=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),l=5,c=1e9,u=0,h=0,d=0,A=0,f=0;c>r&&s<a;){s+=1;var p=ar(this._getHighestEnergyNode(i),4);for(u=p[0],c=p[1],h=p[2],d=p[3],A=c,f=0;A>o&&f<l;){f+=1,this._moveNode(u,h,d);var g=ar(this._getEnergy(u),3);A=g[0],h=g[1],d=g[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=0,r=e[0],o=0,s=0,a=0;a<e.length;a++){var l=e[a];if(!0!==i[l].predefinedPosition||!0===i[l].isCluster&&!0===t||!0!==i[l].options.fixed.x||!0!==i[l].options.fixed.y){var c=ar(this._getEnergy(l),3),u=c[0],h=c[1],d=c[2];n<u&&(n=u,r=l,o=h,s=d)}}return[r,n,o,s]}},{key:"_getEnergy",value:function(t){var e=ar(this.E_sums[t],2),i=e[0],n=e[1];return[Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),i,n]}},{key:"_moveNode",value:function(t,e,i){for(var n=this.body.nodeIndices,r=this.body.nodes,o=0,s=0,a=0,l=r[t].x,c=r[t].y,u=this.K_matrix[t],h=this.L_matrix[t],d=0;d<n.length;d++){var A=n[d];if(A!==t){var f=r[A].x,p=r[A].y,g=u[A],m=h[A],v=1/Math.pow(Math.pow(l-f,2)+Math.pow(c-p,2),1.5);o+=g*(1-m*Math.pow(c-p,2)*v),s+=g*(m*(l-f)*(c-p)*v),a+=g*(1-m*Math.pow(l-f,2)*v)}}var y=(e/o+i/s)/(s/o-a/s),b=-(s*y+e)/o;r[t].x+=b,r[t].y+=y,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.L_matrix[e[n]][e[r]]=i*t[e[n]][e[r]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var n=0;n<e.length;n++){this.K_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.K_matrix[e[n]][e[r]]=i*Math.pow(t[e[n]][e[r]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var n=0;n<t.length;n++){for(var r=t[n],o=e[r].x,s=e[r].y,a=0,l=0,c=n;c<t.length;c++){var u=t[c];if(u!==r){var h=e[u].x,d=e[u].y,A=1/Math.sqrt(Math.pow(o-h,2)+Math.pow(s-d,2));this.E_matrix[r][c]=[this.K_matrix[r][u]*(o-h-this.L_matrix[r][u]*(o-h)*A),this.K_matrix[r][u]*(s-d-this.L_matrix[r][u]*(s-d)*A)],this.E_matrix[u][n]=this.E_matrix[r][c],a+=this.E_matrix[r][c][0],l+=this.E_matrix[r][c][1]}}this.E_sums[r]=[a,l]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=this.E_matrix[t],r=this.K_matrix[t],o=this.L_matrix[t],s=i[t].x,a=i[t].y,l=0,c=0,u=0;u<e.length;u++){var h=e[u];if(h!==t){var d=n[u],A=d[0],f=d[1],p=i[h].x,g=i[h].y,m=1/Math.sqrt(Math.pow(s-p,2)+Math.pow(a-g,2)),v=r[h]*(s-p-o[h]*(s-p)*m),y=r[h]*(a-g-o[h]*(a-g)*m);n[u]=[v,y],l+=v,c+=y;var b=this.E_sums[h];b[0]+=v-A,b[1]+=y-f}}this.E_sums[t]=[l,c]}}]),t}();function yA(t,e,i){var n,r,o,s,a=this;if(!(this instanceof yA))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:ac,clickToUse:!1},dt(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:bt(n=this.on).call(n,this),off:bt(r=this.off).call(r,this),emit:bt(o=this.emit).call(o,this),once:bt(s=this.once).call(s,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new cc((function(){return a.body.emitter.emit("_requestRedraw")})),this.groups=new Bc,this.canvas=new Yh(this.body),this.selectionHandler=new Bd(this.body,this.canvas),this.interactionHandler=new ed(this.body,this.canvas,this.selectionHandler),this.view=new Jh(this.body,this.canvas),this.renderer=new Vh(this.body,this.canvas),this.physics=new Ih(this.body),this.layoutEngine=new nA(this.body),this.clustering=new Zh(this.body),this.manipulation=new oA(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Uu(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new wh(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new vA(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}Tt(yA.prototype),yA.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){if(!0===Bl.validate(t,AA)&&console.error("%cErrors have been found in the supplied options object.",Tl),Xa(["locale","locales","clickToUse"],this.options,t),void 0!==t.locale&&(t.locale=function(t,e){try{var i=ar(e.split(/[-_ /]/,2),2),n=i[0],r=i[1],o=null!=n?n.toLowerCase():null,s=null!=r?r.toUpperCase():null;if(o&&s){var a,l=o+"-"+s;if(Object.prototype.hasOwnProperty.call(t,l))return l;console.warn(fr(a="Unknown variant ".concat(s," of language ")).call(a,o,"."))}if(o){var c=o;if(Object.prototype.hasOwnProperty.call(t,c))return c;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(t){return console.error(t),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new Cl(this,this.body.container,fA,this.canvas.pixelRatio,pA)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Ka(i.nodes,this.nodesHandler.options),Ka(i.edges,this.edgesHandler.options),Ka(i.layout,this.layoutEngine.options),Ka(i.interaction,this.selectionHandler.options),Ka(i.interaction,this.renderer.options),Ka(i.interaction,this.interactionHandler.options),Ka(i.manipulation,this.manipulation.options),Ka(i.physics,this.physics.options),Ka(i.global,this.canvas.options),Ka(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new xl(this.canvas.frame),this.activator.on("change",(function(){e.body.emitter.emit("activate")}))):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},yA.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)Object.prototype.hasOwnProperty.call(t,i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n],o=t[r.fromId],s=t[r.toId],a=void 0!==o&&void 0!==s;!this.clustering._isClusteredEdge(n)&&!1===r.options.hidden&&a&&!1===o.options.hidden&&!1===s.options.hidden&&this.body.edgeIndices.push(r.id)}},yA.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")})),this.body.emitter.on("_dataUpdated",(function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")}))},yA.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=nc(t.dot);this.setData(e)}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=oc(t.gephi);this.setData(i)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},yA.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(var e in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,e)&&delete this.body.edges[e];Va(this.body.container)},yA.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0,r=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var o=t[e].getValue();void 0!==o&&(i=void 0===i?o:Math.min(o,i),n=void 0===n?o:Math.max(o,n),r+=o)}if(void 0!==i&&void 0!==n)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(i,n,r)},yA.prototype.isActive=function(){return!this.activator||this.activator.active},yA.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},yA.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},yA.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},yA.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},yA.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},yA.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},yA.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},yA.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},yA.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},yA.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},yA.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},yA.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},yA.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},yA.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},yA.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},yA.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},yA.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},yA.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},yA.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},yA.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},yA.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},yA.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},yA.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},yA.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},yA.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},yA.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},yA.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},yA.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},yA.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},yA.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},yA.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},yA.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},yA.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},yA.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},yA.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},yA.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},yA.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},yA.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},yA.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},yA.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},yA.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},yA.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},yA.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},yA.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()},yA.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},yA.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},yA.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},yA.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},yA.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},yA.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},yA.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},yA.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};var bA=nc;t.Network=yA,t.NetworkImages=cc,t.networkDOTParser=rc,t.networkGephiParser=sc,t.networkOptions=gA,t.parseDOTNetwork=bA,t.parseGephiNetwork=oc,Object.defineProperty(t,"__esModule",{value:!0})}(e,i(801))},1870:t=>{t.exports=class{constructor({target:t=null,menuItems:e=[],mode:i="dark"}){this.targetNode=t,this.menuItems=e,this.mode=i,this.isOpened=!1,this.menuContainer=document.createElement("UL"),this.menuContainer.classList.add("contextMenu"),this.menuContainer.setAttribute("data-theme",this.mode),this.setMenuItems(e)}setMenuItems(t){!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(this.menuContainer),this.menuItemsNode=[],t||console.error("getMenuItemsNode :: Please enter menu items"),t.forEach(((t,e)=>{const i=this.createItemMarkup(t);i.firstChild.setAttribute("style",`animation-delay: ${.08*e}s`),this.menuItemsNode.push(i)})),this.menuItemsNode.forEach((t=>this.menuContainer.appendChild(t)))}createItemMarkup(t){const e=document.createElement("BUTTON"),i=document.createElement("LI");return e.innerHTML=t.label,e.classList.add("contextMenu-button"),i.classList.add("contextMenu-item"),t.divider&&i.setAttribute("data-divider",t.divider),i.appendChild(e),t.events&&0!==t.events.length&&Object.entries(t.events).forEach((t=>{const[i,n]=t;e.addEventListener(i,n)})),i}closeMenu(t){this.isOpened&&(this.isOpened=!1,t.remove())}init(){document.addEventListener("click",(()=>this.closeMenu(this.menuContainer))),window.addEventListener("blur",(()=>this.closeMenu(this.menuContainer))),document.addEventListener("contextmenu",(t=>{t.target.contains(this.targetNode)||this.closeMenu(this.menuContainer)})),this.targetNode.addEventListener("contextmenu",(t=>{t.preventDefault()}))}openMenu(t){let e=this.menuContainer;this.isOpened=!0;const{clientX:i,clientY:n}=t;document.body.appendChild(e);const r=n+e.scrollHeight>=window.innerHeight?window.innerHeight-e.scrollHeight-20:n,o=i+e.scrollWidth>=window.innerWidth?window.innerWidth-e.scrollWidth-20:i;e.setAttribute("style",`--width: ${e.scrollWidth}px;\n          --height: ${e.scrollHeight}px;\n          --top: ${r}px;\n          --left: ${o}px;`)}}},5965:(t,e,i)=>{const n=i(5028),r={id:null,labels:[],properties:{}},o={from:null,to:null,direction:"->",labels:[],properties:{}};t.exports={hasNode:function(t){return!!this.nodeMap[t]},hasEdge:function(t,e,i=null){for(let n of this.graph.edges)if(n.from===t&&n.to===e&&(!i||n.labels.includes(i)))return!0;return!1},getAllNodes:function(t=null){return t?this.graph.nodes.filter((e=>e.labels.includes(t))).map((t=>this.getNode(t.id))):this.graph.nodes.map((t=>this.getNode(t.id)))},getNode:function(t){return new Proxy(this.nodeMap[t],this.blitzProxy)},getEdge:function(t){return new Proxy(this.edgeMap[t],this.blitzProxy)},includesNode:function(t){return this.graph.nodes?.filter((e=>e.id===t.id)).length>0},addNode:function(t,e=!0){this.addNodes([t],e)},addNodes:function(t,e=!0){let i;i="string"==typeof t||t instanceof String?this.tryPgParse(t).nodes:t,i=i.filter((t=>!this.includesNode(t))).map((t=>{let e=this.deepMerge(r,t);return++this.maxLine,e.location={start:{line:this.maxLine,column:0},end:{line:this.maxLine+1,column:0}},e})),this.graph.nodes=this.graph.nodes.concat(i);for(let t of this.onNodeAdded)t(i);e&&this.update()},addEdge:function(t,e=!0){this.addEdges([t],e)},highlightNodePath:function(t){let e=t;t.length>0&&"string"!=typeof t[0]&&(e=t.map((t=>t.id)));let i=[];for(let t=0;t<e.length-1;++t)i.push(`${e[t]}${Blitzboard.edgeDelimiter}${e[t+1]}`);this.network.selectEdges(i)},addEdges:function(t,e=!0){let i;i="string"==typeof t||t instanceof String?this.tryPgParse(t).edges:t,i=i.map((t=>{let e=this.deepMerge(o,t);return++this.maxLine,e.location={start:{line:this.maxLine,column:0},end:{line:this.maxLine+1,column:0}},e})),this.graph.edges=this.graph.edges.concat(i);for(let t of this.onEdgeAdded)t(i);e&&this.update()},tryPgParse:function(t){for(let t of this.beforeParse)t();try{return pgParser.parse(t)}catch(t){for(let e of this.onParseError)e(t);return console.log(t),null}},fit:function(){this.network.setProps({initialViewState:{target:[0,0],zoom:3}}),this.network.setProps({initialViewState:this.createInitialViewState()})},clearGraph:function(t=!0){this.graph=this.tryPgParse("");for(let t of this.onClear)t();t&&this.update()},setGraph:function(t,e=!0,i=null){let n;if(this.nodeColorMap={},this.edgeColorMap={},this.dragging=!1,t)if("string"==typeof t||t instanceof String)try{n=JSON.parse(t)}catch(e){if(!(e instanceof SyntaxError))throw e;n=this.tryPgParse(t),n=this.tryPgParse(t)}else n=t;else n=this.tryPgParse("");null!=n&&(this.graph=n,e&&this.update(!0,i))},setConfig:function(t,e=!0,i=null){if(this.config=this.deepMerge(Blitzboard.defaultConfig,t),this.config.configChoices?.configs){this.configChoice=this.config.configChoices?.default;let t="";for(let e of Object.keys(this.config.configChoices.configs))t+=`<option ${e===this.configChoice?"selected":""}>${e}</option>`;this.configChoiceDropdown.innerHTML=t,this.configChoiceLabel.innerText=this.config.configChoices.label?this.config.configChoices.label+": ":"",this.configChoiceDiv.style.display="block"}else this.configChoiceDiv.style.display="none";this.searchBarDiv.style.display=this.config.onSearchInput?"block":"none","hierarchical"===t.layout&&(this.config.layoutSettings=t.layoutSettings),this.baseConfig=this.deepMerge({},this.config),Blitzboard.loadedIcons={},e&&this.update(!1,i)},getUpstreamNodes:function(t){const e=this.graph.edges,i=new Set,n=[t];for(;n.length>0;){const t=n.pop();i.add(t);for(let r of e)r.to!==t||i.has(r.from)||(i.add(r.from),n.push(r.from))}return i},getDownstreamNodes:function(t){const e=this.graph.edges,i=new Set,n=[t];for(;n.length>0;){const t=n.pop();i.add(t);for(let r of e)r.from!==t||i.has(r.to)||(i.add(r.to),n.push(r.to))}return i},selectNode:function(t){this.selectedNodes.clear(),this.selectedEdges.clear(),this.selectedNodes.add(t.id),this.updateHighlightState()},selectEdge:function(t){this.selectedNodes.clear(),this.selectedEdges.clear(),this.selectedEdges.add(t.id),this.updateHighlightState()},scrollNodeIntoView:function(t,e=!0){if(this.nodeDataSet&&(t="string"==typeof t?this.nodeDataSet[t]:this.nodeDataSet[t.id])){e&&this.selectNode(t),this.scrollNetworkToPosition(t);for(let e of this.onNodeFocused)e(t)}},scrollNetworkToPosition:function(t){if("map"===this.config.layout){let e=t.y,i=t.x,r=Math.sqrt(Math.pow(blitzboard.viewState.latitude-e,2),Math.pow(blitzboard.viewState.longitude-i,2));duration=Math.max(100,Math.min(1e3,1e3*r)),this.network.setProps({initialViewState:{latitude:t.y,longitude:t.x,zoom:13,transitionDuration:duration,transitionInterpolator:new n.FlyToInterpolator}})}else this.network.setProps({initialViewState:{target:[t.x,t.y],zoom:4,transitionDuration:500}})},scrollEdgeIntoView:function(t,e=!0){"string"==typeof t&&(t=this.edgeMap[t]);const i=this.nodeLayout[t.from],n=this.nodeLayout[t.to];this.scrollNetworkToPosition({x:(i.x+n.x)/2,y:(i.y+n.y)/2}),e&&this.selectEdge(t);for(let e of this.onEdgeFocused)e(t)},showLoader:function(){this.screen.style.display="flex",this.screenText.style.display="block"},hideLoader:function(){this.screen.style.display="none"},blitzProxy:{get:function(t,e,i){return"label"===e?t.labels[0]:!(e in t)&&e in t.properties?t.properties[e][0]:Reflect.get(t,e,i)}}}},8561:(t,e,i)=>{i(5771),i(6633),i(8166);const n=i(5028);i(8793),i(449),i(1638);const r=i(4891),o=i(9949),s=i(814),a=i(5965),l=i(8281);i(9755),i(2555),i(7468);class c{static selectedNodeColor=[33,86,238];static zoomLevelToLoadImage=2;static minNodeSizeInPixels=10;static minImageSizeInPixels=80;static defaultConfig={doubleClickWait:200,node:{caption:["id"],autoIcon:!0,thumbnail:"thumbnail",saturation:"100%",brightness:"37%",limit:4e3},edge:{caption:["label"],saturation:"0%",brightness:"62%",limit:5e4,width:1,visibilityMode:"always",canFocus:!1,animationDuration:1e3,minWidthInPixels:8},zoom:{max:3,min:.25},layoutSettings:{time_from:"from",time_to:"to",lng:"lng",lat:"lat",x:"x",y:"y"},zoomLevelForText:1.5,dimensions:2,style:"background: white;",extraOptions:{}};static iconPrefixes=["fa-solid:","ion:","bx:bx-","gridicons:","akar-icons:"];static edgeDelimiter="-";static loadedIcons={};constructor(t){this.container=t,this.nodeColorMap={},this.nodeMap={},this.config=c.defaultConfig,this.baseConfig=this.config,this.edgeMap={},this.warnings=[],this.sccMode="cluster",this.configChoice=null,this.nodeLayout={},this.hoveredNode=null,this.hoveredEdges=new Set,this.selectedNodes=new Set,this.selectedEdges=new Set,this.clientIsMacLike=/(Mac|iPhone|iPod|iPad)/i.test(navigator.userAgentData?.platform||""),this.container.style.position="absolute",this.networkOriginalStyle="\n      height: 100%;\n      width: 100%;\n      top: 0;\n      left: 0;\n      position: absolute;\n      z-index: 0;\n    ",this.timeScale=1e3,this.dragging=!1,this.onNodeAdded=[],this.onEdgeAdded=[],this.onNodeFocused=[],this.onEdgeFocused=[],this.onVisibleBoundsChanged=[],this.onUpdated=[],this.onClear=[],this.beforeParse=[],this.onParseError=[],this.maxLine=0,this.doubleClickTimer=null;let e=this;this.network=new n.Deck({parent:this.container,controller:{doubleClickZoom:!1},getTooltip:t=>e.contextMenu.isOpened||!t?.object||!e.config.edge.canFocus&&"edge"===t.object.objectType?null:{html:t.object._title},onViewStateChange:t=>this.onViewStateChange(t.viewState),onClick:(t,i)=>e.onLayerClick(t,i),initialViewState:{target:[0,0],zoom:1},getCursor:()=>"default",views:[new n.OrthographicView],layers:[]}),this.initializeUI()}isFilteredOutNode(t){return!!this.config.node.filter&&!this.config.node.filter(new Proxy(t,this.blitzProxy))}isFilteredOutEdge(t){return!!this.config.edge.filter&&!this.config.edge.filter(new Proxy(t,this.blitzProxy))}update(t=!0,e=null){if(this.shouldAbortLayout=!0,this.baseConfig.configChoices?.configs){let t;t=this.configChoice?this.baseConfig.configChoices.configs[this.configChoice]:Object.values(this.baseConfig.configChoices.configs)[0],t&&(this.config=this.deepMerge(this.baseConfig,t))}let i=this;this.graph.nodes.forEach((t=>{this.nodeMap[t.id]=t})),this.filteredGraph={},this.filteredGraph.nodes=this.graph.nodes.filter((t=>!i.isFilteredOutNode(t))),this.filteredGraph.edges=this.graph.edges.filter((t=>!i.isFilteredOutEdge(t)&&!i.isFilteredOutNode(this.nodeMap[t.from])&&!i.isFilteredOutNode(this.nodeMap[t.to]))),this.updateSearchInput(),this.updateSideBarVisibility(),this.validateGraph(),this.determineLayout(e)}resetView(t=null){this.nodeDataSet={},this.minX=Number.MAX_VALUE,this.maxX=-Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.groupedGraph.nodes.forEach((t=>{let e=this.toVisNode(t);this.nodeDataSet[t.id]=e;let i=this.nodeLayout[t.id];return this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y),this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),e}));this.maxX-this.minX<10&&(this.maxX=this.minX+5,this.minX-=5),this.maxY-this.minY<10&&(this.maxY=this.minY+5,this.minX-=5),this.edgeMap={},this.nodesToEdges={},this.edgeDataSet=this.groupedGraph.edges.map((t=>{let e=`${t.from}${c.edgeDelimiter}${t.to}`;for(;this.edgeMap[e];)e+="_";t.id=e;let i=this.toVisEdge(t,e);return this.edgeMap[i.id]=i,this.nodesToEdges[t.from]=this.nodesToEdges[t.from]||[],this.nodesToEdges[t.from].push(t),this.nodesToEdges[t.to]=this.nodesToEdges[t.to]||[],this.nodesToEdges[t.to].push(t),i})),this.edgeDataSet=this.edgeDataSet.filter((t=>null!==t)),this.network.setProps({layers:[]}),this.nodeData=Object.values(this.nodeDataSet),this.updateLayers(),this.updateViews(),t&&t();for(let t of this.onUpdated)t()}}for(let t of[r,o,s,a,l])for(let[e,i]of Object.entries(t))c.prototype[e]=i;t.exports=c,t.exports.DuplicateNodeError=r.DuplicateNodeError},814:(t,e,i)=>{const n=i(404),r=i(1054),o=i(3463),s=i(4736),a=i(6505);function l(t){for(let e of Object.values(t))e.x/=8,e.y/=8}t.exports={computeHierarchicalPositions:function(){let t=new n.DataSet(this.graph.nodes),e=new n.DataSet(this.graph.edges),i={layout:{hierarchical:this.config.layoutSettings}},o=new r.Network(document.createElement("div"),{nodes:t,edges:e},i);for(let t of this.graph.nodes)this.nodeLayout[t.id]=o.getPosition(t.id);l(this.nodeLayout)},calcNodePosition:function(t){let e,i,n,r;if("timeline"===this.config.layout&&this.timeInterval>0){e=null,n=!1;let i=this.config.layoutSettings.time_from,o=this.config.layoutSettings.time_to,s=this.maxTime,a=this.minTime;for(let e of Object.keys(t.properties))e!==i&&e!==o||(s=new Date(Math.min(s,new Date(t.properties[e][0]))),a=new Date(Math.max(a,new Date(t.properties[e][0]))));if(s<=a){n=!0;let t=this.timeScale*(s.getTime()-this.minTime.getTime())*1/this.timeInterval-.5*this.timeScale,i=this.timeScale*(a.getTime()-this.minTime.getTime())*1/this.timeInterval-.5*this.timeScale;e=(t+i)/2,r=s===a?t-i:25}else e=0}else e=null,i=null,n="hierarchical"===this.config.layout,r=null;return{x:e,y:i,fixed:n,width:r}},hideExceptSCC(){this.expandSCC();let t=[];for(let e of this.nodeDataSet._data.values())e.clusterId>=0&&t.push({id:e.id,hidden:!0});this.nodeDataSet.update(t)},determineLayout(t=null){if("hierarchical"===this.config.layout)this.computeHierarchicalPositions(),this.groupedGraph=this.filteredGraph,this.resetView(t);else if("hierarchical-scc"===this.config.layout){let e=stronglyConnectedComponents(this.filteredGraph.edges);this.nodeLayout={};let i=this.graph.nodes.filter((t=>{for(let i of e)if(i.has(t.id))return!1;return!0})),o=e.map((t=>Array.from(t)));this.sccMap={};let s={};for(let t of o){let e=t.join("\n");for(let i of t)this.sccMap[i]=e,s[e]=t}for(let t of new Set(Object.values(this.sccMap)))i.push({id:t,labels:[],properties:[],clusterId:t,location:{start:{line:0,column:0},end:{line:0,column:0}}});let a=JSON.parse(JSON.stringify(this.filteredGraph.edges));for(let t of a)t.from=this.sccMap[t.from]||t.from,t.to=this.sccMap[t.to]||t.to;let c=new n.DataSet(i),u=new n.DataSet(a),h={layout:{hierarchical:{enabled:!0,levelSeparation:250,nodeSpacing:150,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"LR",sortMethod:"directed",shakeTowards:"leaves"}}},d=new r.Network(document.createElement("div"),{nodes:c,edges:u},h);for(let t of i){let e=d.getPosition(t.id);if(void 0!==s[t.id]){this.nodeLayout[t.id]=e;let i=0;for(let n of s[t.id])this.nodeLayout[n]={x:e.x,y:e.y+100*i},i+=1}else this.nodeLayout[t.id]=e}if(l(this.nodeLayout),"longest-only"===this.config.sccMode){let t={},e={};for(let i of a)e[i.from]=e[i.from]||{},t[i.from]=t[i.from]||{},i.from!==i.to&&(t[i.from][i.to]=-1);for(let n of i){let r=getLongest(n,i,t);for(let[t,i]of Object.entries(r))i&&t&&(e[i][t]=!0)}a=a.filter((t=>e[t.from][t.to]))}if("cluster"===this.config.sccMode||"longest-only"===this.config.sccMode)this.groupedGraph={nodes:i,edges:a};else{this.groupedGraph=this.filteredGraph,"only-scc"===this.config.sccMode&&(this.groupedGraph={nodes:this.groupedGraph.nodes.filter((t=>this.sccMap[t.id])),edges:this.groupedGraph.edges.filter((t=>this.sccMap[t.from]&&this.sccMap[t.to]))});for(let t of this.groupedGraph.nodes)void 0===this.sccMap[t.id]?delete t.clusterId:t.clusterId=this.sccMap[t.id]}this.resetView(t)}else if(this.groupedGraph=this.filteredGraph,"map"===this.config.layout){let e=this.config.layoutSettings.lng,i=this.config.layoutSettings.lat;this.nodeLayout={},this.graph.nodes.forEach((t=>{if(t.properties[i]&&t.properties[e]){let n=t.properties[i][0],r=t.properties[e][0];"string"==typeof n&&(n=parseFloat(n)),"string"==typeof r&&(r=parseFloat(r)),this.nodeLayout[t.id]={x:r,y:n,z:0}}})),this.resetView(t)}else if("custom"===this.config.layout){this.nodeLayout={};for(const t of this.graph.nodes){let e,i;t.properties[this.config.layoutSettings.x]||t.properties[this.config.layoutSettings.y]?(e=10*parseFloat(t.properties[this.config.layoutSettings.x][0]),i=10*parseFloat(t.properties[this.config.layoutSettings.y][0])):e=i=0,this.nodeLayout[t.id]={x:e,y:i,z:0}}this.resetView(t)}else this.layoutNodesByNGraph(t)},layoutNodesByNGraph(t){let e=s();this.groupedGraph.nodes.forEach((t=>{e.addNode(t.id)})),this.groupedGraph.edges.forEach((t=>{e.addLink(t.from,t.to)}));let i=a(e,{dimensions:2,springCoefficient:.7});this.layoutNodes((t=>{for(let e=0;e<t;e++)i.step()}),(()=>{for(let t of this.groupedGraph.nodes){let e=i.getNodePosition(t.id);this.nodeLayout[t.id]={x:e.x,y:e.y,z:0}}!function(t){for(let e of Object.values(t))e.x*=3,e.y*=3}(this.nodeLayout),this.resetView(t)}),1e3)},layoutNodesByD3(t){let e={};const i=this.graph.nodes.map((t=>({id:t.id}))),n=this.graph.edges.filter((t=>this.nodeMap[t.from]&&this.nodeMap[t.to])).map((t=>(e[t.from]=(e[t.from]||0)+1,e[t.to]=(e[t.to]||0)+1,{source:t.from,target:t.to})));this.d3Simulation=o.forceSimulation(i).force("charge",o.forceManyBody().strength((t=>-30*Math.sqrt(e[t.id]||1)))).force("link",o.forceLink(n).id((t=>t.id)).distance((t=>15*Math.min(e[t.source.id],e[t.target.id])))).force("centralGravityX",o.forceX().strength(.5)).force("centralGravityY",o.forceY().strength(.5)),this.layoutNodes((t=>{this.d3Simulation.tick(t)}),(()=>{this.nodeLayout={};for(const t of i)this.nodeLayout[t.id]={x:t.x,y:t.y,z:0};this.resetView(t)}),1e3)},layoutNodes(t,e,i){this.shouldAbortLayout=!1,this.layoutNodesRecursive(t,e,i,0)},layoutNodesRecursive(t,e,i,n){this.shouldAbortLayout||(n+10>=i?e():(t(10),setTimeout((()=>this.layoutNodesRecursive(t,e,i,n+10)),0)))}}},6633:()=>{!function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,(function(t){return r(e[s][1][t]||t)}),c,c.exports,t,e,i,n)}return i[s].exports}for(var o=void 0,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";function n(t,e,i,r){this.message=t,this.expected=e,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}(n,Error),n.buildMessage=function(t,e){var i={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){var e,i="";for(e=0;e<t.parts.length;e++)i+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+i+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var e,n,r,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=(r=t[e],i[r.type](r));if(o.sort(),o.length>0){for(e=1,n=1;e<o.length;e++)o[e-1]!==o[e]&&(o[n]=o[e],n++);o.length=n}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+r(t)+'"':"end of input"}(e)+" found."},e.exports={SyntaxError:n,parse:function(t,e){e=void 0!==e?e:{};var i,r={},o={PG:it},s=it,a=":",l=J(":",!1),c=J("--",!1),u=J("->",!1),h=J("-",!1),d=J(".",!1),A=/^[0-9]/,f=K([["0","9"]],!1,!1),p=J("0",!1),g=/^[1-9]/,m=K([["1","9"]],!1,!1),v=/^[eE]/,y=K(["e","E"],!1,!1),b=J("+",!1),_="'",w=J("'",!1),x='"',C=J('"',!1),E="\\",k=J("\\",!1),T=J("b",!1),B=J("f",!1),S=J("n",!1),P=J("r",!1),M=J("t",!1),I=J("v",!1),O={type:"any"},D=function(t){return t.join("")},L=function(t){return t.join("")},F=/^[ \t]/,R=K([" ","\t"],!1,!1),N=/^[: \t\r\n]/,z=K([":"," ","\t","\r","\n"],!1,!1),j=/^[^: \t\r\n]/,U=K([":"," ","\t","\r","\n"],!0,!1),Z=/^[\r\n]/,H=K(["\r","\n"],!1,!1),G=(K(["\r","\n"],!0,!1),0),V=0,W=[{line:1,column:1}],q=0,Q=[],Y=0;if("startRule"in e){if(!(e.startRule in o))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=o[e.startRule]}function X(){return tt(V,G)}function J(t,e){return{type:"literal",text:t,ignoreCase:e}}function K(t,e,i){return{type:"class",parts:t,inverted:e,ignoreCase:i}}function $(e){var i,n=W[e];if(n)return n;for(i=e-1;!W[i];)i--;for(n={line:(n=W[i]).line,column:n.column};i<e;)10===t.charCodeAt(i)?(n.line++,n.column=1):n.column++,i++;return W[e]=n,n}function tt(t,e){var i=$(t),n=$(e);return{start:{offset:t,line:i.line,column:i.column},end:{offset:e,line:n.line,column:n.column}}}function et(t){G<q||(G>q&&(q=G,Q=[]),Q.push(t))}function it(){var t,e,i,n;for(t=G,e=[],i=nt();i!==r;)e.push(i),i=nt();return e!==r&&(i=At())!==r?(V=t,t=e={nodes:(n=e).map((t=>t.node)).filter((t=>t)),edges:n.map((t=>t.edge)).filter((t=>t)),nodeCount:gt,edgeCount:mt,nodeLabels:vt,edgeLabels:yt,nodeProperties:bt,edgeProperties:_t}):(G=t,t=r),t}function nt(){var e,i;return e=G,i=function(){var t,e,i,n,o,s;if(t=G,(e=ct())!==r){for(i=[],n=rt();n!==r;)i.push(n),n=rt();if(i!==r){for(n=[],o=ot();o!==r;)n.push(o),o=ot();if(n!==r){for(o=[],s=ut();s!==r;)o.push(s),s=ut();o!==r&&(s=ft())!==r?(V=t,t=e=function(t,e,i){let n={};return i.forEach((t=>{n[t.key]?n[t.key].push(t.value):n[t.key]=[t.value],bt[t.key]?bt[t.key]++:bt[t.key]=1})),gt++,e.forEach((t=>{vt[t]?vt[t]++:vt[t]=1})),{id:t,location:X(),labels:e,properties:n}}(e,i,n)):(G=t,t=r)}else G=t,t=r}else G=t,t=r}else G=t,t=r;return t}(),i!==r&&(V=e,i={node:i}),(e=i)===r&&(e=G,i=function(){var e,i,n,o,s,a,l,h,d,A;if(e=G,(i=ct())!==r){if(n=[],(o=ut())!==r)for(;o!==r;)n.push(o),o=ut();else n=r;if(n!==r)if(o=function(){var e;return"--"===t.substr(G,2)?(e="--",G+=2):(e=r,0===Y&&et(c)),e===r&&("->"===t.substr(G,2)?(e="->",G+=2):(e=r,0===Y&&et(u))),e}(),o!==r){if(s=[],(a=ut())!==r)for(;a!==r;)s.push(a),a=ut();else s=r;if(s!==r)if((a=ct())!==r){for(l=[],h=rt();h!==r;)l.push(h),h=rt();if(l!==r){for(h=[],d=ot();d!==r;)h.push(d),d=ot();if(h!==r){for(d=[],A=ut();A!==r;)d.push(A),A=ut();d!==r&&(A=ft())!==r?(V=e,e=i=function(t,e,i,n,r){let o={};return r.forEach((t=>{o[t.key]?o[t.key].push(t.value):o[t.key]=[t.value],_t[t.key]?_t[t.key]++:_t[t.key]=1})),mt++,n.forEach((t=>{yt[t]?yt[t]++:yt[t]=1})),{from:t,to:i,location:X(),direction:e,labels:n,properties:o}}(i,o,a,l,h)):(G=e,e=r)}else G=e,e=r}else G=e,e=r}else G=e,e=r;else G=e,e=r}else G=e,e=r;else G=e,e=r}else G=e,e=r;return e}(),i!==r&&(V=e,i={edge:i}),(e=i)===r&&(e=function(){var t,e,i;if(t=G,e=[],(i=ut())!==r)for(;i!==r;)e.push(i),i=ut();else e=r;if(e!==r&&(i=At())!==r?t=e=[e,i]:(G=t,t=r),t===r){for(t=G,e=[],i=ut();i!==r;)e.push(i),i=ut();e!==r&&(i=dt())!==r?t=e=[e,i]:(G=t,t=r)}return t}())),e}function rt(){var e,i,n,o,s;if(e=G,i=[],(n=pt())!==r)for(;n!==r;)i.push(n),n=pt();else i=r;if(i!==r)if(58===t.charCodeAt(G)?(n=a,G++):(n=r,0===Y&&et(l)),n!==r){for(o=[],s=ut();s!==r;)o.push(s),s=ut();o!==r&&(s=ct())!==r?(V=e,e=i=s):(G=e,e=r)}else G=e,e=r;else G=e,e=r;return e}function ot(){var e,i,n,o,s,c,u;if(e=G,i=[],(n=pt())!==r)for(;n!==r;)i.push(n),n=pt();else i=r;if(i!==r)if((n=ct())!==r){for(o=[],s=ut();s!==r;)o.push(s),s=ut();if(o!==r)if(58===t.charCodeAt(G)?(s=a,G++):(s=r,0===Y&&et(l)),s!==r){for(c=[],u=ut();u!==r;)c.push(u),u=ut();c!==r?(u=function(){var e,i,n,o;if(e=G,34===t.charCodeAt(G)?(i=x,G++):(i=r,0===Y&&et(C)),i!==r){for(n=[],o=at();o!==r;)n.push(o),o=at();n!==r?(34===t.charCodeAt(G)?(o=x,G++):(o=r,0===Y&&et(C)),o!==r?(V=e,e=i=D(n)):(G=e,e=r)):(G=e,e=r)}else G=e,e=r;if(e===r){if(e=G,39===t.charCodeAt(G)?(i=_,G++):(i=r,0===Y&&et(w)),i!==r){for(n=[],o=lt();o!==r;)n.push(o),o=lt();n!==r?(39===t.charCodeAt(G)?(o=_,G++):(o=r,0===Y&&et(w)),o!==r?(V=e,e=i=L(n)):(G=e,e=r)):(G=e,e=r)}else G=e,e=r;if(e===r){if(e=G,i=[],(n=ht())===r&&(58===t.charCodeAt(G)?(n=a,G++):(n=r,0===Y&&et(l))),n!==r)for(;n!==r;)i.push(n),(n=ht())===r&&(58===t.charCodeAt(G)?(n=a,G++):(n=r,0===Y&&et(l)));else i=r;i!==r&&(V=e,i=D(i)),e=i}}return e}(),u!==r?(V=e,e=i={key:n,value:u}):(G=e,e=r)):(G=e,e=r)}else G=e,e=r;else G=e,e=r}else G=e,e=r;else G=e,e=r;return e}function st(){var e,i;return 39===t.charCodeAt(G)?(e=_,G++):(e=r,0===Y&&et(w)),e===r&&(34===t.charCodeAt(G)?(e=x,G++):(e=r,0===Y&&et(C)),e===r&&(92===t.charCodeAt(G)?(e=E,G++):(e=r,0===Y&&et(k)),e===r&&(e=G,98===t.charCodeAt(G)?(i="b",G++):(i=r,0===Y&&et(T)),i!==r&&(V=e,i="\b"),(e=i)===r&&(e=G,102===t.charCodeAt(G)?(i="f",G++):(i=r,0===Y&&et(B)),i!==r&&(V=e,i="\f"),(e=i)===r&&(e=G,110===t.charCodeAt(G)?(i="n",G++):(i=r,0===Y&&et(S)),i!==r&&(V=e,i="\n"),(e=i)===r&&(e=G,114===t.charCodeAt(G)?(i="r",G++):(i=r,0===Y&&et(P)),i!==r&&(V=e,i="\r"),(e=i)===r&&(e=G,116===t.charCodeAt(G)?(i="t",G++):(i=r,0===Y&&et(M)),i!==r&&(V=e,i="\t"),(e=i)===r&&(e=G,118===t.charCodeAt(G)?(i="v",G++):(i=r,0===Y&&et(I)),i!==r&&(V=e,i="\v"),e=i)))))))),e}function at(){var e,i,n;return e=G,i=G,Y++,34===t.charCodeAt(G)?(n=x,G++):(n=r,0===Y&&et(C)),n===r&&(92===t.charCodeAt(G)?(n=E,G++):(n=r,0===Y&&et(k))),Y--,n===r?i=void 0:(G=i,i=r),i!==r?(t.length>G?(n=t.charAt(G),G++):(n=r,0===Y&&et(O)),n!==r?(V=e,e=i=n):(G=e,e=r)):(G=e,e=r),e===r&&(e=G,92===t.charCodeAt(G)?(i=E,G++):(i=r,0===Y&&et(k)),i!==r&&(n=st())!==r?(V=e,e=i=n):(G=e,e=r)),e}function lt(){var e,i,n;return e=G,i=G,Y++,39===t.charCodeAt(G)?(n=_,G++):(n=r,0===Y&&et(w)),n===r&&(92===t.charCodeAt(G)?(n=E,G++):(n=r,0===Y&&et(k))),Y--,n===r?i=void 0:(G=i,i=r),i!==r?(t.length>G?(n=t.charAt(G),G++):(n=r,0===Y&&et(O)),n!==r?(V=e,e=i=n):(G=e,e=r)):(G=e,e=r),e===r&&(e=G,92===t.charCodeAt(G)?(i=E,G++):(i=r,0===Y&&et(k)),i!==r&&(n=st())!==r?(V=e,e=i=n):(G=e,e=r)),e}function ct(){var e,i,n,o;if(e=G,(i=function(){var e,i,n,o,s,a,l;if(e=G,45===t.charCodeAt(G)?(i="-",G++):(i=r,0===Y&&et(h)),i===r&&(i=null),i!==r)if(n=function(){var e,i,n,o;if(48===t.charCodeAt(G)?(e="0",G++):(e=r,0===Y&&et(p)),e===r)if(e=G,g.test(t.charAt(G))?(i=t.charAt(G),G++):(i=r,0===Y&&et(m)),i!==r){for(n=[],A.test(t.charAt(G))?(o=t.charAt(G),G++):(o=r,0===Y&&et(f));o!==r;)n.push(o),A.test(t.charAt(G))?(o=t.charAt(G),G++):(o=r,0===Y&&et(f));n!==r?e=i=[i,n]:(G=e,e=r)}else G=e,e=r;return e}(),n!==r){if(o=G,46===t.charCodeAt(G)?(s=".",G++):(s=r,0===Y&&et(d)),s!==r){if(a=[],A.test(t.charAt(G))?(l=t.charAt(G),G++):(l=r,0===Y&&et(f)),l!==r)for(;l!==r;)a.push(l),A.test(t.charAt(G))?(l=t.charAt(G),G++):(l=r,0===Y&&et(f));else a=r;a!==r?o=s=[s,a]:(G=o,o=r)}else G=o,o=r;o===r&&(o=null),o!==r?(s=function(){var e,i,n,o,s;if(e=G,v.test(t.charAt(G))?(i=t.charAt(G),G++):(i=r,0===Y&&et(y)),i!==r)if(45===t.charCodeAt(G)?(n="-",G++):(n=r,0===Y&&et(h)),n===r&&(43===t.charCodeAt(G)?(n="+",G++):(n=r,0===Y&&et(b))),n===r&&(n=null),n!==r){if(o=[],A.test(t.charAt(G))?(s=t.charAt(G),G++):(s=r,0===Y&&et(f)),s!==r)for(;s!==r;)o.push(s),A.test(t.charAt(G))?(s=t.charAt(G),G++):(s=r,0===Y&&et(f));else o=r;o!==r?e=i=[i,n,o]:(G=e,e=r)}else G=e,e=r;else G=e,e=r;return e}(),s===r&&(s=null),s!==r?e=i=[i,n,o,s]:(G=e,e=r)):(G=e,e=r)}else G=e,e=r;else G=e,e=r;return e}())!==r?(n=G,Y++,o=function(){var e;return N.test(t.charAt(G))?(e=t.charAt(G),G++):(e=r,0===Y&&et(z)),e}(),Y--,o!==r?(G=n,n=void 0):n=r,n!==r?(V=e,e=i=t.substring(V,G)):(G=e,e=r)):(G=e,e=r),e===r){if(e=G,34===t.charCodeAt(G)?(i=x,G++):(i=r,0===Y&&et(C)),i!==r){for(n=[],o=at();o!==r;)n.push(o),o=at();n!==r?(34===t.charCodeAt(G)?(o=x,G++):(o=r,0===Y&&et(C)),o!==r?(V=e,e=i=D(n)):(G=e,e=r)):(G=e,e=r)}else G=e,e=r;if(e===r){if(e=G,39===t.charCodeAt(G)?(i=_,G++):(i=r,0===Y&&et(w)),i!==r){for(n=[],o=lt();o!==r;)n.push(o),o=lt();n!==r?(39===t.charCodeAt(G)?(o=_,G++):(o=r,0===Y&&et(w)),o!==r?(V=e,e=i=L(n)):(G=e,e=r)):(G=e,e=r)}else G=e,e=r;if(e===r){if(e=G,i=[],(n=ht())!==r)for(;n!==r;)i.push(n),n=ht();else i=r;i!==r&&(V=e,i=D(i)),e=i}}}return e}function ut(){var e;return F.test(t.charAt(G))?(e=t.charAt(G),G++):(e=r,0===Y&&et(R)),e}function ht(){var e;return j.test(t.charAt(G))?(e=t.charAt(G),G++):(e=r,0===Y&&et(U)),e}function dt(){var e;return Z.test(t.charAt(G))?(e=t.charAt(G),G++):(e=r,0===Y&&et(H)),e}function At(){var e,i;return e=G,Y++,t.length>G?(i=t.charAt(G),G++):(i=r,0===Y&&et(O)),Y--,i===r?e=void 0:(G=e,e=r),e}function ft(){var t;return(t=At())===r&&(t=dt()),t}function pt(){var t,e,i,n,o;for(t=G,e=[],i=ut();i!==r;)e.push(i),i=ut();if(e!==r)if((i=dt())!==r){if(n=[],(o=ut())!==r)for(;o!==r;)n.push(o),o=ut();else n=r;n!==r?t=e=[e,i,n]:(G=t,t=r)}else G=t,t=r;else G=t,t=r;if(t===r)if(t=[],(e=ut())!==r)for(;e!==r;)t.push(e),e=ut();else t=r;return t}let gt=0,mt=0,vt={},yt={},bt={},_t={};if((i=s())!==r&&G===t.length)return i;throw i!==r&&G<t.length&&et({type:"end"}),function(t,e,i){return new n(n.buildMessage(t,e),t,e,i)}(Q,q<t.length?t.charAt(q):null,q<t.length?tt(q,q+1):tt(q,q))}}},{}],2:[function(t,e,i){pgParser=t("./pg_parser.js");let n=pgParser.parse;pgParser.parse=t=>n(function(t){let e="",i=0,n=0,r=!1,o=null;for(;n<t.length;++n){let s=t[n];r?(i=n,"\n"===s&&(r=!1)):o===s?o=null:('"'!==s&&"'"!==s||(o=s),o||"#"!==s||(e+=t.substring(i,n),r=!0),o&&"\\"===s&&++n)}return r||(e+=t.substring(i,n)),e}(t))},{"./pg_parser.js":1}]},{},[2])},9949:(t,e,i)=>{const n=i(5028),r=i(8793),o=i(7689),s=i(6569),{getRandomColor:a,getHexColors:l,createLabelText:c,createTitle:u,retrieveHttpUrl:h,getColorFromText:d}=i(4891),A=1e3;t.exports={startEdgeAnimation(){this.animationTimerId||this.config.edge.animationDuration<=0||(this.currentTime=0,this.animationTimerId=setInterval((()=>{(0===this.highlightedTripsLayer.props.data.length||this.currentTime>=A)&&(clearInterval(this.animationTimerId),this.animationTimerId=null),this.currentTime+=2e4/this.config.edge.animationDuration,this.highlightedTripsLayer=this.highlightedTripsLayer.clone({currentTime:this.currentTime}),this.determineLayersToShow()}),20))},updateLayers(){const t="map"===this.config.layout?n.COORDINATE_SYSTEM.LNGLAT:n.COORDINATE_SYSTEM.CARTESIAN,e="map"===this.config.layout?"meters":"common",i=.2;let s=this,a=this.nodeDataSet;a=Object.values(a),this.allEdgesToDraw=JSON.parse(JSON.stringify(this.edgeDataSet));let l="onFocus"===this.config.edge.visibilityMode?[]:this.allEdgesToDraw;function c(t){let e=[...t.color];return(s.hoveredNode===t.from||s.selectedNodes.has(t.from))&&(e=s.nodeDataSet[t.from].color),(s.hoveredNode===t.to||s.selectedNodes.has(t.to))&&(e=s.nodeDataSet[t.to].color),[e[0],e[1],e[2],255]}this.nodeLayer=new r.ScatterplotLayer({id:"scatterplot-layer",data:a,pickable:!0,opacity:1,stroked:!1,filled:!0,billboard:"map"!==this.config.layout,coordinateSystem:t,getPosition:t=>[t.x,t.y,t.z+("map"===this.config.layout?20:0)],getRadius:t=>t._size*("map"===this.config.layout?100:1),radiusMinPixels:Blitzboard.minNodeSizeInPixels,radiusScale:i,getFillColor:t=>t.color,onHover:t=>this.onNodeHover(t),radiusUnits:e}),this.edgeLayer=new r.LineLayer({id:"line-layer",pickable:!0,coordinateSystem:t,billboard:"map"!==this.config.layout,data:l,getWidth:t=>this.hoveredNode===t.from||this.selectedNodes.has(t.from)||this.hoveredNode===t.to||this.selectedNodes.has(t.to)?2*parseFloat(t.width):t.width,getSourcePosition:t=>{let{x:e,y:i,z:n}=this.nodeDataSet[t.from];return[e,i,n]},getTargetPosition:t=>{let{x:e,y:i,z:n}=this.nodeDataSet[t.to];return[e,i,n]},getColor:c,updateTriggers:{getColor:[Array.from(new Set([this.hoveredNode,...this.selectedNodes])),this.selectedEdges,this.hoveredEdges]},onHover:t=>this.onEdgeHover(t),widthUnits:"common",widthScale:.1*("map"===this.config.layout?.01:1),widthMinPixels:1}),this.highlightedEdgeLayer=this.edgeLayer.clone({id:"highlighted-edge-layer",getWidth:t=>2*parseFloat(t.width)}),this.tripsLayer=new o.TripsLayer({id:"trips-layer",pickable:!0,coordinateSystem:t,data:l,getWidth:t=>t.width,getPath:t=>{let{x:e,y:i}=this.nodeDataSet[t.from],{x:n,y:r}=this.nodeDataSet[t.to],o=[];for(let t=0;t<20;++t){let s=e+(n-e)*t/19,a=i+(r-i)*t/19;o.push([s,a])}return o},getTimestamps:t=>{let e=[];for(let t=0;t<20;++t)e.push(t*A/20);return e},rounded:!0,fadeTrail:!0,trailLength:1500,currentTime:A,widthMinPixels:4,getColor:t=>[t.color[0],t.color[1],t.color[2],192],updateTriggers:{getColor:[Array.from(new Set([this.hoveredNode,...this.selectedNodes])),this.selectedEdges,this.hoveredEdges]},onHover:t=>this.onEdgeHover(t),widthUnits:"common",widthScale:.02*("map"===this.config.layout?.01:1)}),this.highlightedTripsLayer=this.tripsLayer.clone({id:"highlighted-trips-layer",data:[]}),this.edgeArrowLayer=new r.IconLayer({id:"edge-arrow-layer",data:l.filter((t=>!t.undirected||"->"===t.direction)),coordinateSystem:t,getIcon:t=>({url:this.svgToURL('<svg xmlns="http://www.w3.org/2000/svg" width="240" height="240" preserveAspectRatio="xMidYMid meet" viewBox="0 0 15 15"><path fill="currentColor" d="M7.932 1.248a.5.5 0 0 0-.864 0l-7 12A.5.5 0 0 0 .5 14h14a.5.5 0 0 0 .432-.752l-7-12Z"/></svg>'),width:240,height:240,mask:!0}),sizeScale:.1,getPosition:t=>{let{x:e,y:n,z:r}=this.nodeDataSet[t.from],{x:o,y:s,z:a}=this.nodeDataSet[t.to],l=Math.atan2(n-s,e-o),c=this.nodeDataSet[t.to]._size;return[o+Math.cos(l)*(c*i+.2),s+Math.sin(l)*(c*i+.2),(r+a)/2]},getAngle:t=>{let{x:e,y:i,z:n}=this.nodeDataSet[t.from],{x:r,y:o,z:s}=this.nodeDataSet[t.to];return 180*Math.atan2(-(i-o),e-r)/Math.PI+90},getSize:t=>{let e=5*("map"===this.config.layout?100:1);return(this.hoveredNode===t.from||this.selectedNodes.has(t.from)||this.hoveredNode===t.to||this.selectedNodes.has(t.to))&&(e*=2),e},sizeUnits:e,sizeMinPixels:Blitzboard.minNodeSizeInPixels,getColor:c}),this.iconLayer=this.createIconLayer(a,i,e,t),this.updateThumbnailLayer(a,i,e,t),this.updateTextLayers(),"map"===this.config.layout&&(this.tileLayer=new o.TileLayer({id:"TileLayer",data:"https://cyberjapandata.gsi.go.jp/xyz/blank/{z}/{x}/{y}.png",maxZoom:19,minZoom:0,tileSize:256,renderSubLayers:t=>{const{bbox:{west:e,south:i,east:n,north:o}}=t.tile;return new r.BitmapLayer(t,{data:null,image:t.data,bounds:[e,i,n,o]})},pickable:!0})),this.determineLayersToShow()},updateThumbnailLayer(t,e,i,n){this.thumbnailLayer=new r.IconLayer({id:"thumbnail-layer",data:t.filter((t=>t.imageURL)),getPosition:t=>[t.x,t.y],getIcon:t=>({url:t.imageURL,width:100,height:100}),getSize:t=>t._size/5*10*("map"===this.config.layout?100:1),sizeScale:e,sizeUnits:i,pickable:!0,getCollisionPriority:t=>t._size,collisionGroup:"thumbnail",collisionTestProps:{sizeScale:15,sizeUnits:"pixels",getSize:2*Blitzboard.minImageSizeInPixels},onHover:t=>this.onNodeHover(t),sizeMinPixels:Blitzboard.minImageSizeInPixels,extensions:[new s.CollisionFilterExtension]})},refreshIconLayer(){if(!this.iconLayer)return;Blitzboard.loadedIcons={...Blitzboard.loadedIcons};let t=this.iconLayer;this.iconLayer=this.createIconLayer(this.nodeData,this.iconLayer.props.sizeScale,this.iconLayer.props.sizeUnits,this.iconLayer.props.coordinateSystem);for(let e=0;e<this.layers.length;++e)if(this.layers[e]===t){this.layers[e]=this.iconLayer;break}this.network.setProps({layers:[...this.layers]})},iconRegisterer:t=>e=>{if("retrieving"===Blitzboard.loadedIcons[t]&&e.length>0){let i=null;i=function(t){for(let e of Blitzboard.iconPrefixes)for(let i of t)if(`${i.prefix}:${i.name}`.startsWith(e))return i;return t[0]}(e),i=i||e[0];let n=1e3,r=Iconify.renderSVG(`${i.prefix}:${i.name}`,{width:n,height:n,color:"rgba(255, 255, 255, 0.8)"}),o=new Image;o.src=blitzboard.svgToURL(r.outerHTML),Blitzboard.loadedIcons[t]=o.src,blitzboard.refreshIconLayer()}},updateNodeLocationOnTimeLine(){let t=[];this.graph.nodes.forEach((e=>{let i,n,r,o;({x:i,y:n,fixed:r,width:o}=this.calcNodePosition(e)),t.push({id:e.id,x:i,y:n})}))},svgToURL:t=>"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t),shouldHighlight(t){return t.from?!(!this.config.edge.canFocus||!this.hoveredEdges.has(t.id))||this.hoveredNode===t.from||this.hoveredNode===t.to||this.selectedNodes.has(t.from)||this.selectedNodes.has(t.to):this.hoveredNode===t.id||this.selectedNodes.has(t.id)},updateTextLayers(){const t="map"===this.config.layout?n.COORDINATE_SYSTEM.LNGLAT:n.COORDINATE_SYSTEM.CARTESIAN,e="map"===this.config.layout?"meters":"common";let i=new Set([this.hoveredNode,...this.selectedNodes]),o=this.nodeDataSet;o=Object.values(o),tmpEdgeData=JSON.parse(JSON.stringify(this.edgeDataSet));let s=new Set;o.forEach((t=>{t.label.split("").forEach((t=>s.add(t)))}));let a={id:"node-text-layer",pickable:!0,getPosition:t=>[t.x,t.y+1.2*("map"===this.config.layout?-.001*t._size/5:.2*t._size),t.z],getText:t=>t.label,getSize:t=>t._size/5*3*("map"===this.config.layout?100:1),sizeMaxPixels:30,sizeMinPixels:10,billboard:"map"!==this.config.layout,getAngle:0,getTextAnchor:"middle",getColor:t=>[51,51,51,255],getAlignmentBaseline:"top",coordinateSystem:t,sizeUnits:e,sizeScale:.2,visible:this.viewState?.zoom>this.config.zoomLevelForText,outlineWidth:8,lineHeight:1.2,outlineColor:[255,255,255,192],fontSettings:{sdf:!0,radius:16,smoothing:.2}};a.data=o,this.nodeTextLayer=new r.TextLayer(a),this.highlightedNodeTextLayer=this.nodeTextLayer.clone({id:"hilighted-node-text-layer",data:Array.from(i).map((t=>this.nodeDataSet[t])).filter((t=>t)),fontWeight:900}),this.edgeTextLayer=new r.TextLayer({id:"edge-text-layer",data:tmpEdgeData,pickable:!0,getPosition:t=>{let{x:e,y:i,z:n}=this.nodeDataSet[t.from],{x:r,y:o,z:s}=this.nodeDataSet[t.to];return[(e+r)/2,(i+o)/2,(n+s)/2]},getText:t=>t.label,getSize:3*("map"===this.config.layout?100:1),sizeMaxPixels:30,sizeMinPixels:12,sizeScale:.2,getColor:function(t){let e=[...t.color];return e=blitzboard.hoveredNode===t.from||blitzboard.selectedNodes.has(t.from)?blitzboard.nodeDataSet[t.from].color:blitzboard.hoveredNode===t.to||blitzboard.selectedNodes.has(t.to)?blitzboard.nodeDataSet[t.to].color:[e[0]-20,e[1]-20,e[2]-20],[e[0],e[1],e[2],255]},billboard:"map"!==this.config.layout,getAngle:0,getTextAnchor:"middle",lineHeight:1.2,getAlignmentBaseline:"top",coordinateSystem:t,sizeUnits:e,outlineWidth:1,outlineColor:[255,255,255,255],onHover:t=>this.onEdgeHover(t),characterSet:"auto"})},toClusterNode(t,e,i=null){let n=t.map((t=>this.nodeMap[t])),r=Blitzboard.SCCColor,o=l(r);return{objectType:"node",id:n[0].id,color:o,label:n.map((t=>c(t,e))).join("\n"),shape:"dot",_size:n[0].size,_title:n.map((t=>u(t))).join("\n"),borderWidth:1,x,y,z}},toVisNode(t,e=null){const i=[...t.labels].sort().join("_");this.nodeColorMap[i]||(this.nodeColorMap[i]=d(i));let n,r,o,s,a,A=this.config.node.caption;s=!0;try{({x:n,y:r,z:o=0}=this.nodeLayout[t.id])}catch{this.nodeLayout[t.id]={x:0,y:0,z:0},({x:n,y:r,z:o=0}=this.nodeLayout[t.id])}a=null;let f=h(t),p=this.retrieveThumbnailUrl(t),g=this.retrieveConfigProp(t,"node","color"),m=parseFloat(this.retrieveConfigProp(t,"node","opacity")),v=parseFloat(this.retrieveConfigProp(t,"node","size")),y=this.retrieveConfigProp(t,"node","title");g=g||this.nodeColorMap[i],t.clusterId&&(g=d("yellow"));let b=l(g),_={objectType:"node",id:t.id,_size:v||5,color:b,opacity:m,label:c(t,A),shape:"dot",_title:null!=y?y:u(t),borderWidth:f?3:1,url:f,x:n,y:r,z:o,chosen:this.retrieveConfigProp(t,"node","chosen"),font:{color:f?"blue":"black",strokeWidth:2},fixedByTime:!0};"map"!==this.config.layout&&(_.size=_._size);let w=this.retrieveConfigPropAll(t,"node",["color","size","opacity","title","thumbnail"]);for(let t of Object.keys(w))_[t]=w[t]||_[t];let x=this;function C(t,e){let i=e.toLowerCase();Blitzboard.loadedIcons[i]||(Blitzboard.loadedIcons[i]="retrieving",setTimeout((()=>Iconify.loadIcons(t,x.iconRegisterer(i))),1e3)),_.iconLabel=i}for(let e of t.labels){let t;if(t=this.config.node.icon?.[e]){C([t],e);break}}if(!_.iconLabel&&this.config.node.icon?._default&&C(this.config.node.icon._default,t.labels.length>0?t.labels[0]:"_default"),!_.iconLabel&&(this.config.node.defaultIcon||this.config.node.autoIcon)&&t.labels.length>0){let e=t.labels[0].toLowerCase();C(Blitzboard.iconPrefixes.map((t=>t+e)),e)}return p&&(_.imageURL=p),_=Object.assign(_,e),_},retrieveProp(t,e,i=!0){return"function"==typeof e&&i?e(new Proxy(t,this.blitzProxy)):"string"==typeof e&&e.startsWith("@")?t.properties[e.substr(1)]?.[0]:e},retrieveConfigProp(t,e,i,n=!0){const r=t.labels.join("_");let o=this.config?.[e][i];return"object"==typeof o?this.retrieveProp(t,o[r],n):this.retrieveProp(t,o,n)},retrieveConfigPropAll(t,e,i){let n=Object.keys(this.config?.[e]),r={};for(let o of n)i.includes(o)||(r[o]=this.retrieveConfigProp(t,e,o,!1));return r},toVisEdge(t,e){let i=this.config.edge.caption;t.labels.join("_");let n=this.retrieveConfigProp(t,"edge","color"),r=(parseFloat(this.retrieveConfigProp(t,"edge","opacity")),parseFloat(this.retrieveConfigProp(t,"edge","width"))),o=this.retrieveConfigProp(t,"edge","title"),s=n?l(n):"map"===this.config.layout?[32,64,255]:[204,204,204],a="map"!==this.config.layout&&"hierarchical-scc"!==this.config.layout&&{roundness:1},h={objectType:"edge",id:e,from:t.from,to:t.to,color:s,label:c(t,i),_title:null!=o?o:u(t),remoteId:e,width:r||1,hoverWidth:.5,dashes:!1,smooth:a,chosen:this.retrieveConfigProp(t,"edge","chosen"),arrows:{to:{enabled:"->"==t.direction||"false"===t.undirected||!1===t.undirected}}},d=this.retrieveConfigPropAll(t,"edge",["color","opacity","width","title"]);for(let t of Object.keys(d))h[t]=d[t]||h[t];return h},createIconLayer(t,e,i,n){return new r.IconLayer({id:"icon-layer",data:t,pickable:!1,coordinateSystem:n,billboard:"map"!==this.config.layout,getIcon:t=>t.iconLabel&&Blitzboard.loadedIcons[t.iconLabel]?{url:Blitzboard.loadedIcons[t.iconLabel],width:240,height:240,mask:!0}:{url:"data:image/svg+xml;charset=utf-8,dummy",width:24,height:24,mask:!0},sizeScale:e,getPosition:t=>[t.x,t.y,t.z+("map"===this.config.layout?20:0)],getSize:t=>t._size/5*6*("map"===this.config.layout?100:1),sizeUnits:i,getColor:[255,255,255,232],sizeMinPixels:1.2*Blitzboard.minNodeSizeInPixels})},createInitialViewState(){if("map"===this.config.layout)return{latitude:(this.minY+this.maxY)/2,longitude:(this.minX+this.maxX)/2,zoom:3};{let t=.9*Math.min(this.container.clientWidth/(this.maxX-this.minX),this.container.clientHeight/(this.maxY-this.minY));return{target:[(this.minX+this.maxX)/2,(this.minY+this.maxY)/2],zoom:Math.log(t)/Math.log(2)}}},onViewStateChange(t){this.viewState=t;let e=this.viewState?.zoom>("map"===this.config.layout?12:this.config.zoomLevelForText);this.nodeTextLayer=this.nodeTextLayer.clone({visible:e}),this.edgeTextLayer=this.edgeTextLayer.clone({visible:e}),this.determineLayersToShow()},updateHighlightState(){let t=[this.hoveredNode].concat(Array.from(this.selectedNodes));this.nodeLayer=this.nodeLayer.clone({updateTriggers:{getRadius:t,getFillColor:t}});let e=new Set(Array.from(this.hoveredEdges).concat(Array.from(this.selectedEdges)));for(let i of t){let t=this.nodesToEdges[i]||[];for(let i of t)e.add(i.id)}if(e=Array.from(e).map((t=>this.edgeMap[t])),"always"!==this.config.edge.visibilityMode){let t;t=0===e.length&&"noOtherFocused"===this.config.edge.visibilityMode?this.allEdgesToDraw:e,this.edgeLayer=this.edgeLayer.clone({data:t}),this.edgeArrowLayer=this.edgeArrowLayer.clone({data:t}),this.edgeTextLayer=this.edgeTextLayer.clone({data:t})}else{let t=[this.hoveredNode].concat(Array.from(this.hoveredEdges)).concat(Array.from(this.selectedNodes)).concat(Array.from(this.selectedEdges));this.edgeArrowLayer=this.edgeArrowLayer.clone({updateTriggers:{getColor:t,getSize:t}}),this.edgeTextLayer=this.edgeTextLayer.clone({updateTriggers:{getColor:t}})}this.highlightedTripsLayer=this.highlightedTripsLayer.clone({data:e.filter((t=>t&&"--"!==t.direction))}),this.highlightedEdgeLayer=this.highlightedEdgeLayer.clone({widthMinPixels:this.config.edge.minWidthInPixels,data:e}),e.length>0&&this.startEdgeAnimation(),this.determineLayersToShow()},determineLayersToShow(){"map"===this.config.layout?this.layers=[this.tileLayer,this.tripsLayer,this.highlightedTripsLayer,this.edgeTextLayer,this.nodeTextLayer,this.nodeLayer,this.highlightedNodeTextLayer,this.iconLayer,this.thumbnailLayer]:this.layers=[this.edgeLayer,this.edgeTextLayer,this.highlightedEdgeLayer,this.nodeTextLayer,this.edgeArrowLayer,this.nodeLayer,this.highlightedNodeTextLayer,this.iconLayer,this.thumbnailLayer],this.network.setProps({layers:this.layers})},updateViews(){if("map"===this.config.layout){this.viewState=this.createInitialViewState();let t=new n.MapView({});this.network.setProps({initialViewState:this.viewState}),setTimeout((()=>{this.network.setProps({views:[t]}),this.onViewStateChange(this.viewState)}),200)}else{this.config.style&&(document.getElementById("deckgl-overlay").style=this.networkOriginalStyle+" "+this.config.style);const t=2===this.config.dimensions?new n.OrthographicView({}):new n.OrbitView({});this.viewState=this.createInitialViewState(),this.network.setProps({initialViewState:this.viewState,views:[t]}),this.onViewStateChange(this.viewState)}},retrieveThumbnailUrl(t){return this.config.node.thumbnail?t.properties[this.config.node.thumbnail]?.[0]:null}}},8166:()=>{},8281:(t,e,i)=>{const n=i(9755),r=i(1870);function o(t,e,i){clearTimeout(t.doubleClickTimer),t.doubleClickTimer=null;let n=t.selectedNodes.size>0||t.selectedEdges.size>0;if(t.selectedNodes.clear(),t.selectedEdges.clear(),i.rightButton&&t.contextMenu.openMenu(i.srcEvent),e.picked){let i=e.object;"node"===i?.objectType?(t.config.node.onClick&&t.config.node.onClick(t.getNode(i.id)),t.selectedNodes.add(i.id),n=!0):"edge"===i?.objectType&&t.config.edge.onClick&&(t.config.edge.onClick(t.getEdge(i.id)),t.selectedEdges.add(i.id),n=!0)}n&&t.updateHighlightState()}t.exports={initializeUI:function(){let t=this;this.addSideBar(),this.screen=document.createElement("div"),this.screenText=document.createElement("div"),this.screenText.classList.add("blitzboard-loader"),this.screen.appendChild(this.screenText),this.screenText.innerText="Now loading...",this.screen.style="\n      background-color: rgba(0, 0, 0, 0.3);\n      z-index: 3;\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      display: none;\n      justify-content: center;\n      align-items: center;\n      font-size: 2rem;\n    ",this.configChoiceDiv=document.createElement("div"),this.configChoiceDiv.id="blitzboard-config-choice-div",this.configChoiceDiv.style="\n      max-width: 400px;\n      top: 50px;\n      right: 30px;\n      position: absolute;\n      z-index: 2000;\n      display: none;\n    ",this.configChoiceLabel=document.createElement("label"),this.configChoiceLabel.id="blitzboard-config-choice-label",this.configChoiceLabel.style="\n      max-width: 200px;\n      display: inline;\n    ",this.configChoiceDropdown=document.createElement("select"),this.configChoiceDropdown.id="blitzboard-config-choice-dropdown",this.configChoiceDropdown.style="\n      max-width: 200px;\n      display: inline;\n    ",this.searchBarDiv=document.createElement("div"),this.searchBarDiv.id="blitzboard-search-bar-div",this.searchBarDiv.style="\n      width: 280px;\n      top: 100px;\n      right: 30px;\n      height: 30px;\n      position: absolute;\n      z-index: 2000;\n    ",this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.id="blitzboard-search-input",this.searchInput.type="search",this.searchButton=document.createElement("label"),this.searchButton.id="blitzboard-search-button",this.searchButton.setAttribute("for","blitzboard-search-input"),this.container.appendChild(this.screen),this.sideBar.appendChild(this.searchBarDiv),this.sideBar.appendChild(this.configChoiceDiv),this.configChoiceDiv.appendChild(this.configChoiceLabel),this.configChoiceDiv.appendChild(this.configChoiceDropdown),this.searchBarDiv.appendChild(this.searchButton),this.searchBarDiv.appendChild(this.searchInput);let e=document.createElement("button");e.id="blitzboard-zoom-fit-btn",e.classList="material-symbols-outlined",e.innerText="fit_screen",e.onclick=()=>this.fit(),this.container.appendChild(e),this.zoomFitButton=e,this.configChoiceDropdown.addEventListener("change",(t=>{this.configChoice=t.target.value,this.showLoader(),setTimeout((()=>{this.update(!1),this.hideLoader()}),100)})),this.searchInput.addEventListener("focus",(t=>{this.searchInput.clientWidth>0&&n(this.searchInput).autocomplete("instance")&&n(this.searchInput).autocomplete("search",this.searchInput.value)})),this.searchInput.addEventListener("keydown",(e=>{"Enter"===e.code&&t.config.onSearchInput&&t.config.onSearchInput(t.searchInput.value)})),this.container.addEventListener("mouseout",(e=>{t.dragging=!1}),!0),this.container.addEventListener("mouseup",(e=>{t.dragging=!1}),!0),this.container.addEventListener("mousedown",(e=>{t.dragging=!0}),!0),this.contextMenu=new r({target:this.network.canvas,mode:"dark"}),this.container.addEventListener("keydown",(e=>{"Digit0"===e.code?(t.fit(),e.preventDefault()):(e.ctrlKey&&!this.clientIsMacLike||e.metaKey&&this.clientIsMacLike)&&"KeyF"===e.code&&(e.preventDefault(),this.searchButton.click(),this.searchInput.focus(),this.searchInput.setSelectionRange(0,this.searchInput.value.length))})),this.contextMenu.init()},addSideBar:function(){let t=document.createElement("div");t.id="blitzboard-sidebar",t.style="\n    position: absolute;\n    right: 0;\n    top: 0;\n    height: 100%;\n    width: 0;\n    background-color: #151515;\n    color: white;\n    z-index: 100;\n    overflow-x: hidden;\n    transition: 0.3s;\n  ",this.container.appendChild(t),this.sideBar=t;let e=document.createElement("button");e.id="blitzboard-toggle-sidebar-button",e.classList="material-symbols-outlined",e.innerText="menu",e.onclick=()=>this.toggleSideBar(),this.container.appendChild(e),this.toggleSideBarButton=e},toggleSideBar:function(){let t=document.getElementById("blitzboard-sidebar");"0px"==t.style.width?(t.style.width="400px",this.toggleSideBarButton.innerText="close",this.toggleSideBarButton.style.color="white"):(t.style.width="0px",this.toggleSideBarButton.innerText="menu",this.toggleSideBarButton.style.color="")},updateSideBarVisibility(){this.config.editor?.showFilterUI||"block"===this.configChoiceDiv.style.display||this.config.onSearchInput?this.toggleSideBarButton.style.display="block":this.toggleSideBarButton.style.display="none"},updateSearchInput(){if(n(this.searchInput).autocomplete("instance")&&n(this.searchInput).autocomplete("destroy"),this.config.searchCandidates)if(Array.isArray(this.config.searchCandidates)||"object"!=typeof this.config.searchCandidates)n(this.searchInput).autocomplete({select:(t,e)=>{blitzboard.config.onSearchInput(e.item.value)},source:this.config.searchCandidates,minLength:0});else{let t=new Set;this.config.searchCandidates.node&&[this.config.searchCandidates.node].flat(2).forEach((e=>{this.graph.nodes.map((t=>t[e]||t.properties[e])).flat().filter((t=>t)).forEach((e=>t.add(e)))})),this.config.searchCandidates.edge&&[this.config.searchCandidates.edge].flat(2).forEach((e=>{this.graph.edges.map((t=>t[e]||t.properties[e])).flat().filter((t=>t)).forEach((e=>t.add(e)))})),t=Array.from(t);const e=20;n(this.searchInput).autocomplete({select:(t,e)=>{blitzboard.config.onSearchInput(e.item.value)},source:(i,n)=>{let r;r=i.term?t.filter((t=>t.toLowerCase().startsWith(i.term.toLowerCase()))):t,r=r.slice(0,e),n(r)},minLength:0})}},onNodeHover(t){t.object&&this.hoveredNode===t.object.id||!t.object&&null===this.hoveredNode||(this.hoveredNode=t.object?.id,this.updateHighlightState(),this.config.node.onHover&&this.config.node.onHover(this.getNode(t.object.id)))},onEdgeHover(t){this.hoveredEdges=new Set,t.object&&this.hoveredEdges.add(t.object.id),this.config.edge.canFocus&&this.updateHighlightState(),this.config.edge.onHover&&this.config.edge.onHover(this.getEdge(t.object.id))},onLayerClick(t,e){if(e.rightButton){let i=[];if(this.config.contextMenuItems&&(i=i.concat(this.config.contextMenuItems.map((t=>({label:"function"==typeof t.label?t.label(object):t.label,events:{click:()=>t.onClick(this)}}))))),t.picked){let e=t.object;"node"===e?.objectType&&this.config.node.contextMenuItems?i=i.concat(this.config.node.contextMenuItems.map((t=>({label:"function"==typeof t.label?t.label(e):t.label,events:{click:()=>t.onClick(e,this)}})))):"edge"===e?.objectType&&this.config.edge.contextMenuItems&&(i=i.concat(this.config.edge.contextMenuItems.map((t=>({label:"function"==typeof t.label?t.label(e):t.label,events:{click:()=>t.onClick(e,this)}})))))}i.length>0&&(this.contextMenu.setMenuItems(i),this.contextMenu.openMenu(e.srcEvent))}else if(this.doubleClickTimer)if(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=null,t.picked){let e=t.object;"node"===e.objectType&&this.config.node.onDoubleClick?this.config.node.onDoubleClick(this.getNode(e.id)):"edge"===e.objectType&&this.config.edge.onDoubleClick&&this.config.edge.onDoubleClick(this.getEdge(e.id))}else e.target===this.network.canvas&&this.fit();else this.config.doubleClickWait<=0?o(this,t,e):this.doubleClickTimer=setTimeout((()=>o(this,t,e)),this.config.doubleClickWait)}}},4891:t=>{class e extends Error{constructor(t){super(`Duplicate node: ${t.map((t=>t.id)).join(", ")}`),this.name="NodeDuplicationError",this.nodes=t}}let i=["#C7243A","#DA6272","#E38692","#DA5019","#E06A3B","#E6855E","#EDAD0B","#F8D32F","#D8E212","#A4C520","#3EBA2B","#1BA466","#40BFB0","#009F8C","#42AAC7","#1F91BE","#4B75B9","#6A8CC7","#8858AA","#B492CC","#B75C9D","#B43C88"],n={};function r(t,e){if(!t)return t;Array.isArray(t)&&(t=t[0]);let i=e?"<br>":"\n",n="";for(;t.length>40;)n+=t.slice(0,40)+i,t=t.slice(40);return n+t}t.exports={deepMerge:function t(e,i){const n=t=>t&&"object"==typeof t&&!Array.isArray(t);let r=Object.assign({},e);if(n(e)&&n(i))for(const[o,s]of Object.entries(i)){const i=e[o];n(s)&&e.hasOwnProperty(o)?r[o]=t(i,s):Object.assign(r,{[o]:s})}return r},getColorFromText:function(t){let e=0;for(let i=0;i<t.length;i++)e=t.charCodeAt(i)+((e<<5)-e),e&=e;return e=Math.abs(e),i[e%i.length]},getRandomColor:function(t,e,i){let n=0;for(let e=0;e<t.length;e++)n=t.charCodeAt(e)+((n<<5)-n),n&=n;return"hsl("+n%360+`, ${e}, ${i})`},getHexColors:function(t){let e=n[t];if(e)return e;let i=document.createElement("div");i.style.color=t;let r=window.getComputedStyle(document.body.appendChild(i)).color.match(/\d+/g).map((function(t){return parseInt(t,10)}));return r.push(255),document.body.removeChild(i),n[t]=r,r},createTitle:function(t){let e=Object.entries(t.properties).reduce(((t,e)=>{return t.concat(`<tr valign="top"><td>${e[0]}</td><td> ${i=e[1],i?(Array.isArray(i)&&(i=i[0]),"string"!=typeof i?"":i.startsWith("http://")||i.startsWith("https://")?`<a target="_blank" href="${i}">${r(i)}</a>`:r(i)):i}</td></tr>`);var i}),[]);if(t.from){let i=`<tr><td><b>${t.from} - ${t.to}</b></td><td><b>${r(t.labels.map((t=>":"+t)).join(" "),!0)} </b></td></tr>`;e.splice(0,0,i)}else{let i=`<tr><td><b>${t.id}</b></td></tr><tr><td> <b>${r(t.labels.join(" "),!0)}</b></td></tr>`;e.splice(0,0,i)}return 0===e.length?null:`<table style='fixed'>${e.join("")}</table>`},createLabelText:function(t,e=null){if(null!=e)return e.length?e.map((e=>"id"===e?t.id:"label"===e?t.labels:r(t.properties[e]))).filter((t=>t)).join("\n"):" "},retrieveHttpUrl:function(t){let e=[];for(let i of Object.entries(t.properties))for(let t of i[1])if("string"==typeof t&&(t.startsWith("https://")||t.startsWith("http://"))){if("url"==i[0].toLowerCase())return t;e.push([i[0],t])}return e[0]},DuplicateNodeError:e,validateGraph:function(){this.warnings=[];let t=function(t){let e=new Set,i={};for(let n of t)i[n.id]&&(e.add(i[n.id]),e.add(n)),i[n.id]=n;return[...e]}(this.graph.nodes);if(t.length>0)throw new e(t);if(this.graph.nodes.length>=this.config.node.limit)throw new Error(`The number of nodes exceeds the current limit: ${this.config.node.limit}. You can change it via node.limit in your config.`);if(this.graph.edges.length>=this.config.edge.limit)throw new Error(`The number of edges exceeds the current limit: ${this.config.edge.limit}. You can change it via edge.limit in your config.`);for(let t of this.graph.edges)this.nodeMap[t.from]||this.warnings.push({type:"UndefinedNode",edge:t,node:t.from,location:t.location,message:`Source node is undefined: ${t.from}`}),this.nodeMap[t.to]||this.warnings.push({type:"UndefinedNode",edge:t,node:t.to,location:t.location,message:`Target node is undefined: ${t.to}`})}}},8811:t=>{"use strict";t.exports="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},7373:t=>{"use strict";t.exports="data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw=="},238:(t,e,i)=>{"use strict";t.exports=i.p+"3580b1faf02c1cd7994c.png"},6223:(t,e,i)=>{"use strict";t.exports=i.p+"c58c5719d8be44d69fc2.png"},3254:(t,e,i)=>{"use strict";t.exports=i.p+"e73f5131bb90fcc736a6.png"},6247:(t,e,i)=>{"use strict";t.exports=i.p+"f0ad30c87d846b34a0a6.png"},5020:(t,e,i)=>{"use strict";t.exports=i.p+"bb549ea947a7a69e5c0c.png"},2303:(t,e,i)=>{"use strict";t.exports=i.p+"df59c902592bb5f10f8b.png"},479:()=>{},9125:()=>{},2249:()=>{},4942:(t,e,i)=>{"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Z:()=>n})},3463:(t,e,i)=>{"use strict";function n(t,e){var i,n=1;function r(){var r,o,s=i.length,a=0,l=0;for(r=0;r<s;++r)a+=(o=i[r]).x,l+=o.y;for(a=(a/s-t)*n,l=(l/s-e)*n,r=0;r<s;++r)(o=i[r]).x-=a,o.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){i=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(n=+t,r):n},r}function r(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var r,o,s,a,l,c,u,h,d,A=t._root,f={data:n},p=t._x0,g=t._y0,m=t._x1,v=t._y1;if(!A)return t._root=f,t;for(;A.length;)if((c=e>=(o=(p+m)/2))?p=o:m=o,(u=i>=(s=(g+v)/2))?g=s:v=s,r=A,!(A=A[h=u<<1|c]))return r[h]=f,t;if(a=+t._x.call(null,A.data),l=+t._y.call(null,A.data),e===a&&i===l)return f.next=A,r?r[h]=f:t._root=f,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(p+m)/2))?p=o:m=o,(u=i>=(s=(g+v)/2))?g=s:v=s}while((h=u<<1|c)==(d=(l>=s)<<1|a>=o));return r[d]=A,r[h]=f,t}function o(t,e,i,n,r){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=r}function s(t){return t[0]}function a(t){return t[1]}function l(t,e,i){var n=new c(null==e?s:e,null==i?a:i,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function c(t,e,i,n,r,o){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=r,this._y1=o,this._root=void 0}function u(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}i.r(e),i.d(e,{forceCenter:()=>n,forceCollide:()=>g,forceLink:()=>y,forceManyBody:()=>Y,forceRadial:()=>X,forceSimulation:()=>Q,forceX:()=>J,forceY:()=>K});var h=l.prototype=c.prototype;function d(t){return function(){return t}}function A(t){return 1e-6*(t()-.5)}function f(t){return t.x+t.vx}function p(t){return t.y+t.vy}function g(t){var e,i,n,r=1,o=1;function s(){for(var t,s,c,u,h,d,g,m=e.length,v=0;v<o;++v)for(s=l(e,f,p).visitAfter(a),t=0;t<m;++t)c=e[t],d=i[c.index],g=d*d,u=c.x+c.vx,h=c.y+c.vy,s.visit(y);function y(t,e,i,o,s){var a=t.data,l=t.r,f=d+l;if(!a)return e>u+f||o<u-f||i>h+f||s<h-f;if(a.index>c.index){var p=u-a.x-a.vx,m=h-a.y-a.vy,v=p*p+m*m;v<f*f&&(0===p&&(v+=(p=A(n))*p),0===m&&(v+=(m=A(n))*m),v=(f-(v=Math.sqrt(v)))/v*r,c.vx+=(p*=v)*(f=(l*=l)/(g+l)),c.vy+=(m*=v)*f,a.vx-=p*(f=1-f),a.vy-=m*f)}}}function a(t){if(t.data)return t.r=i[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(e){var n,r,o=e.length;for(i=new Array(o),n=0;n<o;++n)r=e[n],i[r.index]=+t(r,n,e)}}return"function"!=typeof t&&(t=d(null==t?1:+t)),s.initialize=function(t,i){e=t,n=i,c()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(r=+t,s):r},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),c(),s):t},s}function m(t){return t.index}function v(t,e){var i=t.get(e);if(!i)throw new Error("node not found: "+e);return i}function y(t){var e,i,n,r,o,s,a=m,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},c=d(30),u=1;function h(n){for(var r=0,a=t.length;r<u;++r)for(var l,c,h,d,f,p,g,m=0;m<a;++m)c=(l=t[m]).source,d=(h=l.target).x+h.vx-c.x-c.vx||A(s),f=h.y+h.vy-c.y-c.vy||A(s),d*=p=((p=Math.sqrt(d*d+f*f))-i[m])/p*n*e[m],f*=p,h.vx-=d*(g=o[m]),h.vy-=f*g,c.vx+=d*(g=1-g),c.vy+=f*g}function f(){if(n){var s,l,c=n.length,u=t.length,h=new Map(n.map(((t,e)=>[a(t,e,n),t])));for(s=0,r=new Array(c);s<u;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=v(h,l.source)),"object"!=typeof l.target&&(l.target=v(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(s=0,o=new Array(u);s<u;++s)l=t[s],o[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(u),p(),i=new Array(u),g()}}function p(){if(n)for(var i=0,r=t.length;i<r;++i)e[i]=+l(t[i],i,t)}function g(){if(n)for(var e=0,r=t.length;e<r;++e)i[e]=+c(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){n=t,s=e,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(u=+t,h):u},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:d(+t),p(),h):l},h.distance=function(t){return arguments.length?(c="function"==typeof t?t:d(+t),g(),h):c},h}h.copy=function(){var t,e,i=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=u(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(e=n.source[r])&&(e.length?t.push({source:e,target:n.target[r]=new Array(4)}):n.target[r]=u(e));return i},h.add=function(t){const e=+this._x.call(null,t),i=+this._y.call(null,t);return r(this.cover(e,i),e,i,t)},h.addAll=function(t){var e,i,n,o,s=t.length,a=new Array(s),l=new Array(s),c=1/0,u=1/0,h=-1/0,d=-1/0;for(i=0;i<s;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(o=+this._y.call(null,e))||(a[i]=n,l[i]=o,n<c&&(c=n),n>h&&(h=n),o<u&&(u=o),o>d&&(d=o));if(c>h||u>d)return this;for(this.cover(c,u).cover(h,d),i=0;i<s;++i)r(this,a[i],l[i],t[i]);return this},h.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,r=this._x1,o=this._y1;if(isNaN(i))r=(i=Math.floor(t))+1,o=(n=Math.floor(e))+1;else{for(var s,a,l=r-i||1,c=this._root;i>t||t>=r||n>e||e>=o;)switch(a=(e<n)<<1|t<i,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:r=i+l,o=n+l;break;case 1:i=r-l,o=n+l;break;case 2:r=i+l,n=o-l;break;case 3:i=r-l,n=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=i,this._y0=n,this._x1=r,this._y1=o,this},h.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},h.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},h.find=function(t,e,i){var n,r,s,a,l,c,u,h=this._x0,d=this._y0,A=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new o(g,h,d,A,f)),null==i?i=1/0:(h=t-i,d=e-i,A=t+i,f=e+i,i*=i);c=p.pop();)if(!(!(g=c.node)||(r=c.x0)>A||(s=c.y0)>f||(a=c.x1)<h||(l=c.y1)<d))if(g.length){var m=(r+a)/2,v=(s+l)/2;p.push(new o(g[3],m,v,a,l),new o(g[2],r,v,m,l),new o(g[1],m,s,a,v),new o(g[0],r,s,m,v)),(u=(e>=v)<<1|t>=m)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=c)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<i){var w=Math.sqrt(i=_);h=t-w,d=e-w,A=t+w,f=e+w,n=g.data}}return n},h.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,i,n,r,o,s,a,l,c,u,h,d,A=this._root,f=this._x0,p=this._y0,g=this._x1,m=this._y1;if(!A)return this;if(A.length)for(;;){if((c=o>=(a=(f+g)/2))?f=a:g=a,(u=s>=(l=(p+m)/2))?p=l:m=l,e=A,!(A=A[h=u<<1|c]))return this;if(!A.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(i=e,d=h)}for(;A.data!==t;)if(n=A,!(A=A.next))return this;return(r=A.next)&&delete A.next,n?(r?n.next=r:delete n.next,this):e?(r?e[h]=r:delete e[h],(A=e[0]||e[1]||e[2]||e[3])&&A===(e[3]||e[2]||e[1]||e[0])&&!A.length&&(i?i[d]=A:this._root=A),this):(this._root=r,this)},h.removeAll=function(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this},h.root=function(){return this._root},h.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},h.visit=function(t){var e,i,n,r,s,a,l=[],c=this._root;for(c&&l.push(new o(c,this._x0,this._y0,this._x1,this._y1));e=l.pop();)if(!t(c=e.node,n=e.x0,r=e.y0,s=e.x1,a=e.y1)&&c.length){var u=(n+s)/2,h=(r+a)/2;(i=c[3])&&l.push(new o(i,u,h,s,a)),(i=c[2])&&l.push(new o(i,n,h,u,a)),(i=c[1])&&l.push(new o(i,u,r,s,h)),(i=c[0])&&l.push(new o(i,n,r,u,h))}return this},h.visitAfter=function(t){var e,i=[],n=[];for(this._root&&i.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var r=e.node;if(r.length){var s,a=e.x0,l=e.y0,c=e.x1,u=e.y1,h=(a+c)/2,d=(l+u)/2;(s=r[0])&&i.push(new o(s,a,l,h,d)),(s=r[1])&&i.push(new o(s,h,l,c,d)),(s=r[2])&&i.push(new o(s,a,d,h,u)),(s=r[3])&&i.push(new o(s,h,d,c,u))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},h.x=function(t){return arguments.length?(this._x=t,this):this._x},h.y=function(t){return arguments.length?(this._y=t,this):this._y};var b={value:()=>{}};function _(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new w(n)}function w(t){this._=t}function x(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}function C(t,e){for(var i,n=0,r=t.length;n<r;++n)if((i=t[n]).name===e)return i.value}function E(t,e,i){for(var n=0,r=t.length;n<r;++n)if(t[n].name===e){t[n]=b,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=i&&t.push({name:e,value:i}),t}w.prototype=_.prototype={constructor:w,on:function(t,e){var i,n=this._,r=x(t+"",n),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=E(n[i],t.name,e);else if(null==e)for(i in n)n[i]=E(n[i],t.name,null);return this}for(;++o<s;)if((i=(t=r[o]).type)&&(i=C(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new w(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,n,r=new Array(i),o=0;o<i;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,i=(n=this._[t]).length;o<i;++o)n[o].value.apply(e,r)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,o=n.length;r<o;++r)n[r].value.apply(e,i)}};const k=_;var T,B,S=0,P=0,M=0,I=0,O=0,D=0,L="object"==typeof performance&&performance.now?performance:Date,F="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function R(){return O||(F(N),O=L.now()+D)}function N(){O=0}function z(){this._call=this._time=this._next=null}function j(t,e,i){var n=new z;return n.restart(t,e,i),n}function U(){O=(I=L.now())+D,S=P=0;try{!function(){R(),++S;for(var t,e=T;e;)(t=O-e._time)>=0&&e._call.call(void 0,t),e=e._next;--S}()}finally{S=0,function(){for(var t,e,i=T,n=1/0;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:T=e);B=t,H(n)}(),O=0}}function Z(){var t=L.now(),e=t-I;e>1e3&&(D-=e,I=t)}function H(t){S||(P&&(P=clearTimeout(P)),t-O>24?(t<1/0&&(P=setTimeout(U,t-L.now()-D)),M&&(M=clearInterval(M))):(M||(I=L.now(),M=setInterval(Z,1e3)),S=1,F(U)))}z.prototype=j.prototype={constructor:z,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?R():+i)+(null==e?0:+e),this._next||B===this||(B?B._next=this:T=this,B=this),this._call=t,this._time=i,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}};const G=4294967296;function V(t){return t.x}function W(t){return t.y}var q=Math.PI*(3-Math.sqrt(5));function Q(t){var e,i=1,n=.001,r=1-Math.pow(n,1/300),o=0,s=.6,a=new Map,l=j(h),c=k("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%G)/G}();function h(){d(),c.call("tick",e),i<n&&(l.stop(),c.call("end",e))}function d(n){var l,c,u=t.length;void 0===n&&(n=1);for(var h=0;h<n;++h)for(i+=(o-i)*r,a.forEach((function(t){t(i)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function A(){for(var e,i=0,n=t.length;i<n;++i){if((e=t[i]).index=i,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+i),o=i*q;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),A(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(i){return arguments.length?(t=i,A(),a.forEach(f),e):t},alpha:function(t){return arguments.length?(i=+t,e):i},alphaMin:function(t){return arguments.length?(n=+t,e):n},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(u=t,a.forEach(f),e):u},force:function(t,i){return arguments.length>1?(null==i?a.delete(t):a.set(t,f(i)),e):a.get(t)},find:function(e,i,n){var r,o,s,a,l,c=0,u=t.length;for(null==n?n=1/0:n*=n,c=0;c<u;++c)(s=(r=e-(a=t[c]).x)*r+(o=i-a.y)*o)<n&&(l=a,n=s);return l},on:function(t,i){return arguments.length>1?(c.on(t,i),e):c.on(t)}}}function Y(){var t,e,i,n,r,o=d(-30),s=1,a=1/0,c=.81;function u(i){var r,o=t.length,s=l(t,V,W).visitAfter(f);for(n=i,r=0;r<o;++r)e=t[r],s.visit(p)}function h(){if(t){var e,i,n=t.length;for(r=new Array(n),e=0;e<n;++e)i=t[e],r[i.index]=+o(i,e,t)}}function f(t){var e,i,n,o,s,a=0,l=0;if(t.length){for(n=o=s=0;s<4;++s)(e=t[s])&&(i=Math.abs(e.value))&&(a+=e.value,l+=i,n+=i*e.x,o+=i*e.y);t.x=n/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=r[e.data.index]}while(e=e.next)}t.value=a}function p(t,o,l,u){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=u-o,p=h*h+d*d;if(f*f/c<p)return p<a&&(0===h&&(p+=(h=A(i))*h),0===d&&(p+=(d=A(i))*d),p<s&&(p=Math.sqrt(s*p)),e.vx+=h*t.value*n/p,e.vy+=d*t.value*n/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===h&&(p+=(h=A(i))*h),0===d&&(p+=(d=A(i))*d),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(f=r[t.data.index]*n/p,e.vx+=h*f,e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e,n){t=e,i=n,h()},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:d(+t),h(),u):o},u.distanceMin=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(c=t*t,u):Math.sqrt(c)},u}function X(t,e,i){var n,r,o,s=d(.1);function a(t){for(var s=0,a=n.length;s<a;++s){var l=n[s],c=l.x-e||1e-6,u=l.y-i||1e-6,h=Math.sqrt(c*c+u*u),d=(o[s]-h)*r[s]*t/h;l.vx+=c*d,l.vy+=u*d}}function l(){if(n){var e,i=n.length;for(r=new Array(i),o=new Array(i),e=0;e<i;++e)o[e]=+t(n[e],e,n),r[e]=isNaN(o[e])?0:+s(n[e],e,n)}}return"function"!=typeof t&&(t=d(+t)),null==e&&(e=0),null==i&&(i=0),a.initialize=function(t){n=t,l()},a.strength=function(t){return arguments.length?(s="function"==typeof t?t:d(+t),l(),a):s},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),l(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(i=+t,a):i},a}function J(t){var e,i,n,r=d(.1);function o(t){for(var r,o=0,s=e.length;o<s;++o)(r=e[o]).vx+=(n[o]-r.x)*i[o]*t}function s(){if(e){var o,s=e.length;for(i=new Array(s),n=new Array(s),o=0;o<s;++o)i[o]=isNaN(n[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=d(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:d(+t),s(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),s(),o):t},o}function K(t){var e,i,n,r=d(.1);function o(t){for(var r,o=0,s=e.length;o<s;++o)(r=e[o]).vy+=(n[o]-r.y)*i[o]*t}function s(){if(e){var o,s=e.length;for(i=new Array(s),n=new Array(s),o=0;o<s;++o)i[o]=isNaN(n[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=d(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:d(+t),s(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),s(),o):t},o}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={id:n,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}return i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href,i.nc=void 0,i(8561)})()));
//# sourceMappingURL=blitzboard.bundle.min.js.map